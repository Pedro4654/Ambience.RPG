{"version":3,"sources":["icons/EditTileIcon.tsx","components/tile/Tile.tsx","components/banner/ErrorBanner.tsx","helpers/FakeStorage.ts","helpers/shared.ts","helpers/dice.ts","components/Modal.tsx","icons/D20Icon.tsx","icons/D12Icon.tsx","icons/D10Icon.tsx","icons/D8Icon.tsx","icons/D6Icon.tsx","icons/D4Icon.tsx","icons/D100Icon.tsx","contexts/DiceLoadingContext.tsx","hooks/useSetting.ts","hooks/useResponsiveLayout.ts","components/Spinner.tsx","images/Loading.png","components/LoadingOverlay.tsx","theme.ts","components/Link.tsx","components/Footer.tsx","contexts/AuthContext.tsx","modals/StartModal.tsx","modals/JoinModal.tsx","components/Markdown.tsx","modals/GettingStartedModal.tsx","icons/HelpIcon.tsx","icons/SocialRedditIcon.tsx","icons/SocialTwitterIcon.tsx","icons/SocialYouTubeIcon.tsx","icons/SocialPatreonIcon.tsx","images/Owlington.png","api/client.ts","routes/Home.tsx","icons/ReconnectingIcon.tsx","components/banner/ReconnectBanner.tsx","icons/OfflineIcon.tsx","components/banner/OfflineBanner.tsx","contexts/MapLoadingContext.tsx","components/LoadingBar.tsx","components/map/MapLoadingOverlay.tsx","components/UpgradingLoadingOverlay.tsx","modals/AuthModal.tsx","modals/GameExpiredModal.tsx","modals/ForceUpdateModal.tsx","modals/MaintenanceModal.tsx","contexts/MapStageContext.tsx","ml/Model.ts","ml/gridSize/group1-shard1of1.bin","ml/gridSize/GridSizeModel.ts","helpers/Vector3.ts","helpers/Vector2.ts","helpers/Size.ts","helpers/grid.ts","helpers/image.ts","helpers/diff.ts","actions/Action.ts","actions/AddStatesAction.ts","helpers/actions.ts","actions/CutFogAction.ts","actions/EditStatesAction.ts","actions/RemoveStatesAction.ts","actions/SubtractFogAction.ts","maps/Blank.jpg","maps/Grass.jpg","maps/Sand.jpg","maps/Stone.jpg","maps/Water.jpg","maps/Wood.jpg","maps/index.ts","maps/Unknown.jpg","tokens/Aberration.png","tokens/index.ts","tokens/Barbarian.png","tokens/Bard.png","tokens/Cleric.png","tokens/Druid.png","tokens/Fighter.png","tokens/Monk.png","tokens/Paladin.png","tokens/Ranger.png","tokens/Rogue.png","tokens/Sorcerer.png","tokens/Warlock.png","tokens/Wizard.png","tokens/Artificer.png","tokens/Blood Hunter.png","tokens/Beast.png","tokens/Celestial.png","tokens/Construct.png","tokens/Dragon.png","tokens/Elemental.png","tokens/Fey.png","tokens/Fiend.png","tokens/Giant.png","tokens/Goblinoid.png","tokens/Humanoid.png","tokens/Monstrosity.png","tokens/Ooze.png","tokens/Plant.png","tokens/Shapechanger.png","tokens/Titan.png","tokens/Undead.png","upgrade.ts","helpers/monsters.ts","database.ts","contexts/DatabaseContext.tsx","workers/DatabaseWorker.ts","contexts/UserIdContext.tsx","hooks/useDebounce.ts","hooks/useNetworkedState.ts","contexts/PlayerContext.tsx","contexts/PartyContext.tsx","contexts/AssetsContext.tsx","helpers/group.ts","contexts/MapDataContext.tsx","contexts/TokenDataContext.tsx","hooks/useMapActions.ts","components/RadioIconButton.tsx","components/Select.tsx","components/map/MapSettings.tsx","hooks/useMapImage.ts","hooks/usePreventOverscroll.ts","contexts/KeyboardContext.tsx","shortcuts.ts","hooks/useStageInteraction.ts","hooks/useImageCenter.ts","contexts/MapInteractionContext.tsx","contexts/GridContext.tsx","helpers/KonvaBridge.tsx","icons/ResetMapIcon.tsx","icons/GridOnIcon.tsx","icons/GridOffIcon.tsx","components/konva/Grid.tsx","images/SquarePatternDark.png","images/SquarePatternLight.png","images/HexPatternDark.png","images/HexPatternLight.png","components/map/MapGrid.tsx","components/map/MapGridEditor.tsx","components/map/MapEditor.tsx","modals/EditMapModal.tsx","modals/ConfirmModal.tsx","components/DatabaseDisabledMessage.tsx","hooks/useImageDrop.ts","components/image/ImageDrop.tsx","components/map/MapTileImage.tsx","components/map/MapTile.tsx","components/map/MapTileGroup.tsx","contexts/DragContext.tsx","contexts/GroupContext.tsx","hooks/usePreventSelect.ts","contexts/TileDragContext.tsx","components/tile/SortableTile.tsx","components/tile/LazyTile.tsx","components/tile/SortableTiles.tsx","components/tile/SortableTilesDragOverlay.tsx","components/map/MapTiles.tsx","icons/RemoveMapIcon.tsx","components/map/MapEditBar.tsx","components/map/SelectMapSelectButton.tsx","icons/ChangeNicknameIcon.tsx","modals/GroupNameModal.tsx","components/drag/Droppable.tsx","components/tile/TilesOverlay.tsx","components/tile/TilesContainer.tsx","icons/AddIcon.tsx","icons/SelectMultipleIcon.tsx","icons/SelectSingleIcon.tsx","icons/SearchIcon.tsx","components/Search.tsx","components/tile/TileActionBar.tsx","helpers/map.ts","modals/SelectMapModal.tsx","icons/SelectMapIcon.tsx","components/map/SelectMapButton.tsx","icons/FogMultilayerOnIcon.tsx","icons/FogMultilayerOffIcon.tsx","components/controls/shared/MultilayerToggle.tsx","icons/FogPreviewOnIcon.tsx","icons/FogPreviewOffIcon.tsx","components/controls/shared/FogPreviewToggle.tsx","icons/FogCutOnIcon.tsx","icons/FogCutOffIcon.tsx","components/controls/shared/FogCutToggle.tsx","icons/FogBrushIcon.tsx","icons/FogPolygonIcon.tsx","icons/FogRemoveIcon.tsx","icons/FogToggleIcon.tsx","icons/FogRectangleIcon.tsx","components/controls/shared/ToolSection.tsx","components/controls/FogToolSettings.tsx","helpers/colors.ts","components/map/MapMenu.tsx","components/controls/shared/ColorControl.tsx","icons/BlendOnIcon.tsx","icons/BlendOffIcon.tsx","components/controls/shared/AlphaBlendToggle.tsx","icons/ShapeFillOnIcon.tsx","icons/ShapeFillOffIcon.tsx","components/controls/shared/ShapeFillToggle.tsx","icons/BrushToolIcon.tsx","icons/BrushPaintIcon.tsx","icons/BrushLineIcon.tsx","icons/BrushRectangleIcon.tsx","icons/BrushCircleIcon.tsx","icons/BrushTriangleIcon.tsx","icons/EraseToolIcon.tsx","icons/EraseAllIcon.tsx","components/controls/shared/EraseAllButton.tsx","components/controls/DrawingToolSettings.tsx","components/controls/PointerToolSettings.tsx","icons/SelectRectangleIcon.tsx","icons/SelectPathIcon.tsx","components/controls/SelectToolSettings.tsx","icons/MoveToolIcon.tsx","icons/FogToolIcon.tsx","icons/MeasureToolIcon.tsx","icons/ExpandMoreIcon.tsx","icons/PointerToolIcon.tsx","icons/FullScreenIcon.tsx","icons/FullScreenExitIcon.tsx","icons/NoteToolIcon.tsx","icons/SelectToolIcon.tsx","icons/UndoIcon.tsx","components/controls/shared/UndoButton.tsx","icons/RedoIcon.tsx","components/controls/shared/RedoButton.tsx","components/map/MapControls.tsx","hooks/usePreventContextMenu.ts","components/map/MapInteraction.tsx","helpers/drawing.ts","helpers/konva.ts","hooks/useGridSnapping.ts","components/konva/Drawing.tsx","components/tools/DrawingTool.tsx","types/Drawing.ts","components/konva/Fog.tsx","components/konva/Tick.tsx","components/tools/FogTool.tsx","images/DiagonalPattern.png","components/konva/Ruler.tsx","components/tools/MeasureTool.tsx","components/konva/Pointer.tsx","components/tools/PointerTool.tsx","network/NetworkedMapPointer.tsx","hooks/usePrevious.ts","components/konva/TokenStatus.tsx","components/konva/TokenLabel.tsx","components/konva/TokenOutline.tsx","helpers/token.ts","components/konva/Transformer.tsx","images/ScaleDark.png","images/RotateDark.png","components/konva/TokenAttachment.tsx","components/konva/Token.tsx","icons/TokenLockIcon.tsx","icons/TokenUnlockIcon.tsx","icons/TokenShowIcon.tsx","icons/TokenHideIcon.tsx","icons/TokenCharacterIcon.tsx","icons/TokenPropIcon.tsx","icons/TokenMountIcon.tsx","icons/TokenAttachmentIcon.tsx","components/token/TokenMenu.tsx","icons/RemoveTokenIcon.tsx","components/map/DragOverlay.tsx","components/token/TokenDragOverlay.tsx","hooks/useMapTokens.tsx","components/konva/Note.tsx","components/note/NoteDragOverlay.tsx","components/TextareaAutoSize.tsx","icons/NoteTextIcon.tsx","components/note/NoteMenu.tsx","components/konva/BlankNote.tsx","components/tools/NoteTool.tsx","hooks/useMapNotes.tsx","components/selection/SelectionDragOverlay.tsx","icons/CopyIcon.tsx","icons/PasteIcon.tsx","helpers/selection.ts","validators/Color.ts","validators/Vector2.ts","validators/Drawing.ts","validators/Fog.ts","validators/Note.ts","validators/Outline.ts","validators/TokenState.ts","validators/MapState.ts","validators/Selection.ts","components/selection/SelectionMenu.tsx","components/konva/Selection.tsx","components/tools/SelectTool.tsx","hooks/useMapSelection.tsx","components/map/Map.tsx","components/token/TokenOutline.tsx","components/token/TokenImage.tsx","components/token/TokenBarToken.tsx","components/drag/Draggable.tsx","icons/GroupIcon.tsx","components/token/TokenBarTokenGroup.tsx","icons/SelectTokensIcon.tsx","components/token/TokenSettings.tsx","components/token/TokenPreview.tsx","modals/EditTokenModal.tsx","components/token/TokenTile.tsx","components/token/TokenTileGroup.tsx","components/token/TokenHiddenBadge.tsx","components/token/TokenTiles.tsx","components/token/TokenEditBar.tsx","modals/SelectTokensModal.tsx","components/token/SelectTokensButton.tsx","components/token/TokenBar.tsx","components/image/GlobalImageDrop.tsx","network/NetworkedMapAndTokens.tsx","modals/AddPartyMemberModal.tsx","icons/AddPartyMemberIcon.tsx","components/party/AddPartyMemberButton.tsx","icons/StreamMuteIcon.tsx","components/Slider.tsx","components/party/Stream.tsx","icons/DiceRollsIcon.tsx","components/party/DiceRoll.tsx","components/party/DiceRolls.tsx","components/party/Nickname.tsx","modals/ChangeNicknameModal.tsx","components/party/ChangeNicknameButton.tsx","modals/StartStreamModal.tsx","components/party/StartStreamButton.tsx","icons/SettingsIcon.tsx","modals/SelectDataModal.tsx","modals/ImportExportModal.tsx","modals/SettingsModal.tsx","components/SettingsButton.tsx","helpers/timer.ts","modals/StartTimerModal.tsx","icons/StartTimerIcon.tsx","components/party/StartTimerButton.tsx","hooks/usePortal.ts","components/party/Timer.tsx","icons/ExpandMoreDiceIcon.tsx","components/party/DiceTrayButton.tsx","components/party/Party.tsx","network/NetworkedParty.tsx","network/Connection.ts","network/Session.ts","routes/Game.tsx","routes/LaravelGame.tsx","routes/About.tsx","docs/assets/index.ts","docs/assets/DefaultMaps.mp4","docs/assets/CustomMaps.mp4","docs/assets/EditingMapsAdvanced.jpg","docs/assets/ResetAndRemovingMaps.mp4","docs/assets/UsingDrawing.mp4","docs/assets/OpenDiceTray.mp4","docs/assets/DiceRolling.mp4","docs/assets/DiceStyles.mp4","docs/assets/DiceTraySize.mp4","docs/assets/UsingFog.mp4","docs/assets/UsingMeasure.mp4","docs/assets/DefaultTokens.mp4","docs/assets/WorkingWithTokens.mp4","docs/assets/DeletingTokens.mp4","docs/assets/CustomTokens.mp4","docs/assets/TokenEditor.mp4","docs/assets/AddPartyMember.mp4","docs/assets/ChangeNickname.mp4","docs/assets/SharingAudio.mp4","docs/assets/StartGame.mp4","docs/assets/DiceSharing.mp4","docs/assets/UsingTimer.mp4","docs/assets/UsingPointer.mp4","docs/assets/MapEditor.mp4","docs/assets/FilteringMaps.mp4","docs/assets/GroupAndRemovingTokens.mp4","docs/assets/FilteringTokens.mp4","docs/assets/UsingNotes.mp4","docs/assets/Settings.jpg","routes/FAQ.tsx","components/Accordion.tsx","routes/ReleaseNotes.tsx","routes/HowTo.tsx","components/Toast.tsx","App.tsx","serviceWorker.ts","index.tsx","components/Divider.tsx","helpers/blobToBuffer.ts","helpers/Settings.ts","contexts/SettingsContext.tsx","settings.ts","components/banner/Banner.tsx"],"names":["EditTileIcon","width","height","xmlns","viewBox","fill","d","Tile","title","isSelected","onSelect","onEdit","onDoubleClick","canEdit","badges","editTitle","children","sx","position","paddingTop","borderRadius","overflow","userSelect","bg","onClick","e","stopPropagation","aria-label","top","left","right","bottom","background","alignItems","justifyContent","p","as","variant","color","textAlign","borderColor","borderStyle","borderWidth","pointerEvents","map","badge","i","m","preventDefault","defaultProps","size","columns","ErrorBanner","error","onRequestClose","isOpen","message","FakeStorage","data","index","Object","keys","this","keyName","keyValue","omit","obj","tmp","entries","key","value","includes","isStreamStopped","stream","getTracks","reduce","a","b","muted","roundTo","x","to","Math","round","floorTo","floor","toRadians","angle","PI","toDegrees","lerp","alpha","isEmpty","length","constructor","keyBy","array","prev","current","isMacLike","test","navigator","platform","isSafari","userAgent","shuffle","randomIndex","temp","currentIndex","random","clipboardSupported","clipboard","readText","writeText","permissions","query","name","state","timeout","ms","Promise","resolve","setTimeout","getDiceInstanceRoll","instance","highestDot","highestLocator","undefined","getChildTransformNodes","locator","direction","getAbsolutePosition","subtract","normalize","dot","Vector3","Dot","Up","parseInt","slice","getDiceRoll","dice","number","d10Instance","d10Number","type","roll","getDiceRollTotal","diceRolls","accumulator","StyledModal","allowClose","style","props","theme","useThemeUI","openAnimation","useSpring","opacity","transform","config","default","overlay","backgroundColor","zIndex","display","content","colors","maxHeight","contentElement","div","overlayElement","onDragEnter","D20Icon","D12Icon","D10Icon","D8Icon","D6Icon","D4Icon","D100Icon","DiceLoadingContext","React","createContext","DiceLoadingProvider","useState","loadingAssetCount","setLoadingAssetCount","assetLoadStart","prevLoadingAssets","assetLoadFinish","isLoading","Provider","useDiceLoading","context","useContext","Error","useSetting","path","useSettings","settings","setSettings","get","set","useResponsiveLayout","isMediumScreen","useMedia","isLargeScreen","screenSize","modalSize","tileSize","tileGridColumns","tileContainerHeight","groupGridColumns","Spinner","className","backgroundImage","backgroundSize","LoadingOverlay","flexDirection","useColorSchemeMediaQuery","text","primary","secondary","highlight","purple","gray","border","modes","light","fonts","body","body2","heading","monospace","fontSizes","fontWeights","caption","lineHeights","breakpoints","fontFamily","fontWeight","lineHeight","fontSize","mt","styles","Container","maxWidth","root","h1","h2","h3","h4","h5","h6","pre","code","inlineCode","hr","borderBottom","img","progress","prism","fontStyle","forms","label","input","outlineColor","slider","textarea","buttons","cursor","outline","icon","close","links","footer","textDecoration","textDecorationColor","messages","warning","borderLeftColor","note","Link","rest","Footer","storage","paddingBottom","AuthContext","sessionStorage","setItem","removeItem","console","warn","AuthProvider","getItem","password","setPassword","useEffect","useAuth","StartModal","history","useHistory","usePassword","setUsePassword","inputRef","useRef","Modal","onAfterOpen","focus","flexGrow","onSubmit","event","push","shortid","generate","htmlFor","my","id","onChange","target","disabled","autoComplete","ref","mb","checked","JoinModal","gameId","setGameId","Paragraph","Heading","level","Image","alt","src","endsWith","margin","autoPlay","playsInline","loop","controls","ListItem","Code","startsWith","Table","borderCollapse","TableHead","borderBottomWidth","TableBody","TableRow","borderBottomStyle","borderBottomColor","TableCell","href","Markdown","source","assets","renderers","paragraph","image","link","listItem","table","tableHead","tableBody","tableRow","tableCell","transformImageUri","uri","GettingStartedModal","py","HelpIcon","SocialRedditIcon","SocialTwitterIcon","SocialYouTubeIcon","SocialPatreonIcon","API_BASE","window","OWLBEAR_CONFIG","apiBase","api","baseUrl","endpoint","options","url","fetch","credentials","headers","response","ok","errorText","status","json","sessionId","request","sessaoId","method","JSON","stringify","sessao_id","result","Array","isArray","mapId","Home","log","isStartModalOpen","setIsStartModalOpen","isJoinModalOpen","setIsJoinModalOpen","isGettingStartedModalOpen","setIsGettingStartedModalOpen","isAutoStarting","setIsAutoStarting","location","useLocation","params","URLSearchParams","search","userId","role","userName","getSession","session","localStorage","decodedName","decodeURIComponent","alert","checkLaravelSession","minHeight","owlington","process","mx","ReconnectingIcon","attributeName","attributeType","from","dur","repeatCount","ReconnectBanner","Banner","PointerToolIcon","OfflineBanner","OfflineIcon","MapLoadingContext","MapLoadingProvider","setIsLoading","assetProgressRef","loadingProgressRef","useCallback","count","total","assetProgressUpdate","complete","progresses","values","useMapLoading","LoadingBar","requestRef","progressBarRef","requestAnimationFrame","animate","cancelAnimationFrame","max","MapLoadingOverlay","facts","UpgradingLoadingOverlay","subText","setSubText","interval","randomFacts","updateFact","setInterval","clearTimeout","clearInterval","AuthModal","tmpPassword","setTempPassword","GameExpiredModal","ml","ForceUpdateModal","MaintenanceModal","MapStageContext","MapStageProvider","useMapStage","Model","weightsMapping","buffers","manifest","weightsManifest","paths","arrayBuffer","buffer","merged","Blob","blobToBuffer","weightData","weightSpecs","weights","modelArtifacts","modelTopology","format","generatedBy","convertedBy","GridSizeModel","imageData","tf","model","loadLayersModel","prediction","tidy","normalized","browser","fromPixels","toFloat","scalar","batched","expandDims","predict","y","z","cube","rX","rY","rZ","xDiff","abs","yDiff","zDiff","Vector2","sqrt","lengthSquared","l","magnitude","divide","point","origin","cos","sin","dif","rotate","min","roundToNumber","floorToNumber","sign","pow","pa","ba","h","distance","multiply","add","pos","A","B","C","c","kk","kx","ky","q","uv","t","dot2","v","acos","n","clamp","d1","d2","points","minX","Number","MAX_VALUE","maxX","MIN_VALUE","minY","maxY","center","bounds","getBoundingBox","isInside","j","threshold","lerpNumber","localPoints","intervalLength","pathLength","resampledPoints","currentDistance","newPoint","splice","prevDist","centroid","dist","distances","maxDistance","minDistance","Size","radius","_radius","SQRT3","GRID_TYPE_NOT_IMPLEMENTED","getCellLocation","grid","col","row","cellSize","getNearestCellCoordinates","cubeXVert","cubeZVert","cubeVert","hexCubeToOffset","cubeRound","cubeXHorz","cubeZHorz","cubeHorz","getCellCorners","halfSize","up","getGridHeightFromWidth","gridWidth","cellHeightVert","cellHeightHroz","getGridDefaultInset","mapWidth","mapHeight","topLeft","bottomRight","getGridUpdatedInset","inset","insetHeightNorm","getGridMaxZoom","hexOffsetToCube","offset","parseGridScale","scale","match","integer","parseFloat","fractional","unit","isNaN","multiplier","digits","dividers","gcd","_","filter","gridSizeMean","gridSizeStd","maxGridSize","gridSizeVaild","gridSizeHeuristic","candidates","bestX","bestY","bestScore","xScore","yScore","gridSizeML","ratio","canvas","document","createElement","getContext","drawImage","getImageData","r","g","luma","bestScale","score","getGridSizeFromImage","canvasToImage","quality","toBlob","blob","file","mime","resizeImage","createThumbnail","halfHeight","halfWidth","getImageOutline","maxPoints","defaultOutline","outlinePoints","imageOutline","opacityThreshold","resample","imageArea","area","rectangular","circular","flat","applyChanges","changes","change","kind","applyChange","diff","deepDiff","Action","update","newState","cloneDeep","revertedState","revertChange","revertChanges","AddStatesAction","states","statesById","addPolygonDifferenceToFog","fog","difference","shapes","newId","holes","addPolygonIntersectionToFog","shape","intersection","visible","fogToGeometry","shapePoints","shapeHoles","hole","CutFogAction","fogs","fogsById","actionGeom","cutFogs","fogGeom","polygonClipping","EditStatesAction","edits","edit","RemoveStatesAction","stateIds","SubtractFogAction","subtractedFogs","mapSources","blank","blankImage","grass","grassImage","sand","sandImage","stone","stoneImage","water","waterImage","wood","woodImage","getDefaultMaps","mapKeys","maps","mapStates","Case","capital","owner","measurement","created","lastModified","Date","now","showGrid","snapToGrid","tokens","drawings","editFlags","notes","tokenSources","barbarian","bard","cleric","druid","fighter","monk","paladin","ranger","rogue","sorcerer","warlock","wizard","artificer","bloodHunter","aberration","beast","celestial","construct","dragon","elemental","fey","fiend","giant","goblinoid","humanoid","monstrosity","ooze","plant","shapechanger","titan","undead","getDefaultTokenSize","getDefaultTokens","tokenKeys","token","defaultSize","defaultLabel","defaultCategory","hideInSidebar","versions","1","stores","user","2","onUpgrade","upgrade","tx","Dexie","waitFor","toArray","mapBuffers","toCollection","modify","3","mapTokenId","stateId","tokenId","lastEditedBy","rotation","4","5","fogDrawActions","fogAction","6","resolutions","7","8","9","lastModifiedBy","locked","10","category","isVehicle","11","lastUsed","12","13","group","gridX","gridY","gridType","14","15","tokenSizes","URL","createObjectURL","onload","16","17","action","18","textOnly","drawShapes","convertOldActionsToShapes","mapDrawActions","mapDrawActionIndex","fogShapes","fogDrawActionIndex","19","thumbnails","createDataThumbnail","thumbnail","20","21","22","23","all","createDataOutline","tokenOutlines","tokenOutline","find","el","24","primaryKeys","keyChunks","chunk","bulkGet","resolution","pop","uuid","prevId","prevType","mapRes","bulkAdd","25","26","mapUpdates","tokenUpdates","asset","27","28","res","29","30","camel","31","where","notEqual","delete","32","33","34","groups","groupItems","items","subGroups","item","sort","mapGroupItems","tokenGroupItems","35","36","_changes","_intercomm","_syncNodes","_uncommittedChanges","37","38","39","40","41","loadVersions","db","upTo","versionNumber","version","actions","actionIndex","newShapes","newAction","shapeIds","execute","low","onerror","monsters","populate","on","laravelUserId","laravelName","nickname","fromLaravel","getDatabase","populateData","DatabaseContext","worker","Comlink","Worker","DatabaseProvider","database","setDatabase","databaseStatus","setDatabaseStatus","databaseError","setDatabaseError","testDBRequest","indexedDB","open","handleDatabaseError","reason","DexieError","inner","onsuccess","autoOpen","reload","deleteDatabase","IDBKeyRange","addEventListener","removeEventListener","useDatabase","UserIdContext","UserIdProvider","setUserId","put","storedUserId","loadUserId","useUserId","useDebounce","delay","debouncedValue","setDebouncedValue","useNetworkedState","initialState","eventName","debounceRate","partialUpdates","partialUpdatesKey","_setState","dirtyRef","forceUpdateRef","setState","sync","force","debouncedState","lastSyncedStateRef","socket","emit","handleSocketEvent","handleSocketUpdateEvent","prevState","off","PlayerStateContext","PlayerUpdaterContext","PlayerProvider","timer","share","rolls","playerState","setPlayerState","storedNickname","loadNickname","updateSessionId","handleSocketConnect","handleSocketStatus","io","PartyContext","PartyProvider","partyState","setPartyState","handleSocketPartyState","otherMembersState","useParty","AssetsContext","AssetsProvider","cleanAssetCache","getAsset","assetId","addAssets","putAsset","BroadcastChannel","packedAsset","encode","putData","useAssets","AssetURLsStateContext","AssetURLsUpdaterContext","AssetURLsProvider","assetURLs","setAssetURLs","assetKeys","setAssetKeys","loadingDebouncedAssetURLs","keysToLoad","useLiveQuery","prevURLs","newURLs","cleanUpDebouncedAssetURLs","urlsToCleanup","references","revokeObjectURL","useAssetURL","defaultSources","unknownSource","increaseReferences","createReference","useDataURL","setAssetId","assetURL","groupsFromIds","groupIds","groupsByIds","filteredGroups","groupId","getGroupItems","itemsFromGroups","allItems","itemKey","allItemsById","groupedItems","combineGroups","moveGroupsInto","into","indices","newGroups","intoGroup","fromGroups","combined","fromGroup","findIndex","findGroup","getItemNames","names","removeGroupsItems","itemIds","MapDataContext","defaultMapState","MapDataProvider","mapsQuery","mapStatesQuery","useMemo","mapsLoading","mapGroupQuery","mapGroups","setMapGroups","updateMapGroups","getMap","getMapState","mapState","addMap","removeMaps","ids","assetIds","bulkDelete","resetMap","updateMap","updateMapState","mapsById","setMapsById","useMapData","TokenDataContext","TokenDataProvider","tokensQuery","tokensLoading","tokenGroupQuery","tokenGroups","setTokenGroups","updateTokenGroups","getToken","addToken","removeTokens","updateToken","updateTokensHidden","tokensById","setTokensById","useTokenData","defaultMapActions","useMapActions","setCurrentMapState","mapActions","setMapActions","applyMapActionsToState","mapAction","undoMapActionsToState","undo","resetActions","prevActions","newActions","prevMapState","prevIndex","newIndex","prevMapActions","RadioIconButton","Select","creatable","Component","Creatable","ReactSelect","menu","provided","isDisabled","control","singleValue","option","dropdownIndicator","container","primary50","primary25","captureMenuScroll","qualitySettings","gridTypeSettings","gridSquareMeasurementTypeSettings","gridHexMeasurementTypeSettings","MapSettings","onSettingsChange","onStateSettingsChange","handleFlagChange","flag","f","mapURL","defaultMapSources","mapSize","setMapSize","toFixed","updateMapSize","mapEmpty","mapStateEmpty","mr","s","isSearchable","isOptionDisabled","Divider","useMapImage","useImage","mapImage","mapImageStatus","loadedMapImage","setLoadedMapImage","usePreventOverscroll","elementRef","preventOverscroll","element","passive","keyboardEmitter","EventEmitter","setMaxListeners","KeyboardContext","keyEmitter","KeyboardProvider","handleKeyDown","HTMLInputElement","HTMLTextAreaElement","handleKeyUp","tabIndex","useKeyboard","onKeyDown","onKeyUp","useBlur","onBlur","singleKey","altKey","ctrlKey","metaKey","shiftKey","hasModifier","toUpperCase","shortcuts","move","moveTool","drawingTool","fogTool","measureTool","pointerTool","noteTool","gridNudgeUp","gridNudgeLeft","gridNudgeRight","gridNudgeDown","drawBrush","drawPaint","drawLine","drawRect","drawCircle","drawTriangle","drawErase","drawBlend","drawFill","fogPolygon","fogRectangle","fogBrush","fogToggle","fogErase","fogLayer","fogPreview","fogCut","fogFinishPolygon","fogCancelPolygon","selectTool","selectPath","selectRect","stageZoomIn","stageZoomOut","stagePrecisionZoom","selectRange","selectMultiple","redo","copy","paste","disableSnapping","duplicate","minZoom","useStageInteraction","stageRef","stageScale","onStageScaleChange","stageTranslateRef","layerRef","maxZoom","tool","preventInteraction","gesture","isInteractingWithCanvas","pinchPreviousDistanceRef","pinchPreviousOriginRef","zoomSpeed","setZoomSpeed","stage","pixelY","newScale","innerHeight","pointer","innerWidth","newTranslate","handleBlur","handleGesture","useGesture","onWheelStart","layer","getCanvas","_canvas","onWheel","last","normalizeWheel","getPointerPosition","onPinchStart","da","originX","originY","onPinch","distanceDelta","originXDelta","originYDelta","canvasRect","getBoundingClientRect","relativeOrigin","onDragStart","onDrag","delta","pinching","dx","dy","stageTranslate","draw","drag","domTarget","eventOptions","useImageCenter","stageWidth","stageHeight","setStageScale","imageLayerRef","containerRef","imageWidth","imageHeight","responsive","stageRatio","imageRatio","previousDataIdRef","previousStageRatioRef","containerRect","previousDataId","previousStageRatio","shouldUpdate","MapInteractionEmitter","TypedEmitter","StageScaleContext","DebouncedStageScaleContext","StageWidthContext","StageHeightContext","SetPreventMapInteractionContext","MapWidthContext","MapHeightContext","InteractionEmitterContext","MapInteractionProvider","setPreventMapInteraction","interactionEmitter","debouncedStageScale","useInteractionEmitter","useSetPreventMapInteraction","useMapWidth","useMapHeight","useStageScale","useDebouncedStageScale","leftMouseButton","evt","button","defaultValue","gridPixelSize","gridCellPixelSize","gridCellNormalizedSize","gridOffset","gridStrokeWidth","gridCellPixelOffset","gridSnappingSensitivity","GridContext","GridPixelSizeContext","GridCellPixelSizeContext","GridCellNormalizedSizeContext","GridOffsetContext","GridStrokeWidthContext","GridCellPixelOffsetContext","GridSnappingSensitivityContext","GridProvider","inputGrid","setGridPixelSize","setGridCellPixelSize","setGridCellNormalizedSize","setGridOffset","setGridStrokeWidth","setGridCellPixelOffset","_gridPixelSize","baseWidth","baseHeight","getGridPixelSize","_gridCellPixelSize","gridHeight","radiusVert","radiusHorz","getCellPixelSize","_gridCellNormalizedSize","_gridOffset","_gridStrokeWidth","_gridCellPixelOffset","setGridSnappingSensitivity","defaultSnappingSensitivity","useGrid","useGridPixelSize","useGridCellPixelSize","useGridCellNormalizedSize","useGridOffset","useGridStrokeWidth","useGridCellPixelOffset","useGridSnappingSensitivity","KonvaBridge","stageRender","mapStageRef","keyboardValue","useStageWidth","useStageHeight","SettingsContext","ResetMapIcon","GridOnIcon","GridOffIcon","Grid","imageSource","stroke","patternImage","negativeGridOffset","patternProps","fillPatternScaleX","fillPatternScaleY","fillPatternOffsetX","fillPatternOffsetY","fillPatternRotation","fillPatternImage","fillPatternRepeat","strokeWidth","MapGrid","mapLoadingStatus","isImageLight","setIsImageLight","lightPixels","darkPixels","getImageLightness","MapGridEditor","onGridChange","handlePositions","topRight","bottomLeft","getHandlePositions","handlePreviousPositionRef","handleInteractivePointerDown","handleInteractivePointerUp","getHandleInset","handle","previousPosition","getHandleNormalizedPosition","gridDirection","newPosition","nudgeGrid","gridSizeNormalized","nudgeAmount","editCircleRadius","editCircleProps","draggable","onDragMove","onDragEnd","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","editRectProps","MapEditor","setStageWidth","setStageHeight","defaultInset","mapLayerRef","preventMapInteraction","showGridControls","setShowGridControls","mapInteraction","gridChanged","gridValid","layout","touchAction","handleWidth","handleHeight","onResize","targetRef","EditMapModal","onDone","onUpdateMap","onUpdateMapState","applyMapChanges","mapSettingChanges","setMapSettingChanges","mapStateSettingChanges","setMapStateSettingChanges","handleMapSettingsChange","prevChanges","verifiedChanges","selectedMapWithChanges","selectedMapStateWithChanges","padding","pt","pb","px","ConfirmModal","onConfirm","confirmText","description","DatabaseDisabledMessage","gridArea","useImageDrop","onImageDrop","supportFileTypes","useToasts","addToast","dragging","setDragging","onDragLeave","onDragOver","dataTransfer","dropEffect","onDrop","imageFiles","html","getData","urlMatch","replace","altMatch","File","files","dropPosition","clientX","clientY","containerListeners","overlayListeners","ImageDrop","dropText","MapTileImage","MapTile","MapTileGroup","gridGap","gridTemplateRows","DragPositionMonitor","overlayNode","useDndContext","overlayNodeClientRectRef","useDndMonitor","overlayNodeClientRect","nodeRef","DragContext","GroupContext","GroupProvider","itemNames","onGroupsChange","onGroupsSelect","selectedGroupIds","setSelectedGroupIds","selectMode","setSelectMode","openGroupId","setOpenGroupId","openGroupItems","setOpenGroupItems","openGroups","openGroup","setFilter","filteredGroupItems","setFilteredGroupItems","fuse","setFuse","namedItems","Fuse","activeGroups","onSelectModeChange","onGroupOpen","onGroupClose","onSubgroupChange","groupIndex","updatedGroups","onGroupSelect","lastIndex","idsToAdd","idsToRemove","onClearSelection","onFilterChange","onFilterClear","useGroup","usePreventSelect","getSelection","removeAllRanges","selection","empty","clearSelection","classList","remove","TileDragIdContext","TileOverGroupIdContext","TileDragCursorContext","GROUP_ID_PREFIX","UNGROUP_ID","ADD_TO_MAP_ID","rectIntersection","rects","rect","offsetLeft","offsetTop","TileDragProvider","onDragAdd","onDragCancel","mouseSensor","useSensor","MouseSensor","activationConstraint","touchSensor","TouchSensor","tolerance","keyboardSensor","KeyboardSensor","sensors","useSensors","dragId","setDragId","overId","setOverId","dragCursor","setDragCursor","preventSelect","resumeSelect","overGroupId","setOverGroupId","active","over","selectedIndices","overGroupIndex","fromId","fromIndex","ungroup","moveGroups","collisionDetection","rectCenter","addRect","ungroupRect","otherRects","closestCenter","useTileDragId","SortableTile","disableGrouping","disableSorting","hidden","isDragging","useSortable","attributes","listeners","setDroppableNodeRef","setDraggableNodeRef","setGroupNodeRef","useDroppable","setNodeRef","dragStyle","sortDropStyle","visibility","groupDropStyle","LazyTile","useInView","triggerOnce","inView","SortableTiles","renderTile","subgroup","useTileDragCursor","useTileOverGroupId","allSelectedIds","sortableId","renderSortableGroup","selectedGroups","previewGroup","selectedGroupIdsSet","Set","hasSelectedContainerGroup","has","disableTileGrouping","renderTiles","SortableTilesDragOverlay","dragBounce","wobbly","createPortal","activeIndex","coords","reverse","dropAnimation","renderDragOverlays","MapTiles","onMapEdit","onMapSelect","canOpen","RemoveMapIcon","MapEditBar","currentMap","onMapChange","onMapReset","onLoad","hasMapState","setHasMapState","getSelectedMaps","selectedMapStates","_hasMapState","isMapsRemoveModalOpen","setIsMapsRemoveModalOpen","selectedMaps","selectedMapIds","isMapsResetModalOpen","setIsMapsResetModalOpen","SelectMapSelectButton","ChangeNicknameIcon","GroupNameModal","tmpName","setTempName","Droppable","TilesOverlay","gentle","containerSize","setContinerSize","isGroupNameModalOpen","setIsGroupNameModalOpen","groupName","marginBottom","gap","newName","renameGroup","TilesContainer","AddIcon","large","SelectMultipleIcon","SelectSingleIcon","SearchIcon","Search","borderRight","paddingRight","placeholder","TileActionBar","onAdd","addTitle","outlineOffset","onFocus","mapResolutions","createMapFromFile","reject","matchAll","gridMatches","matchX","matchY","gridSize","trim","resolutionPixelSize","componentMax","resized","thumbnailImage","thumbnailId","fileAsset","SelectMapModal","mapNames","setMapNames","fileInputRef","isLargeImageWarningModalOpen","setShowLargeImageWarning","largeImageWarningFiles","handleImagesUpload","persist","mapFiles","some","handleImageUpload","clearFileInput","handleMapSelect","editingMapId","setEditingMapId","isDraggingMap","setIsDraggingMap","canAddDraggedMap","setCanAddDraggedMap","handleDragAdd","setModalSize","editingMap","editingMapState","shouldCloseOnEsc","accept","multiple","refreshMode","click","SelectMapIcon","SelectMapButton","currentMapState","isModalOpen","setIsModalOpen","FogMultilayerOnIcon","FogMultilayerOffIcon","MultilayerToggle","multilayer","onMultilayerChange","FogPreviewOnIcon","FogPreviewOffIcon","FogPreviewToggle","useFogPreview","onFogPreviewChange","FogCutOnIcon","FogCutOffIcon","FogCutToggle","useFogCut","onFogCutChange","FogBrushIcon","FogPolygonIcon","FogRemoveIcon","FogToggleIcon","FogRectangleIcon","ToolSection","collapse","tools","onToolClick","showMore","setShowMore","collapsedTool","setCollapsedTool","handleToolClick","renderTool","selectedTool","prevTool","borderTop","borderTopColor","borderLeft","FogToolSettings","onSettingChange","preview","isSmallScreen","drawTools","vertical","blue","orange","red","yellow","green","pink","teal","black","darkGray","lightGray","white","colorOptions","MapMenu","onModalContent","excludeNode","modalContentNode","setModalContentNode","handleDragMove","handleInteraction","composedPath","contentRef","node","ColorCircle","selected","ColorControl","onColorChange","exclude","showColorMenu","setShowColorMenu","colorMenuOptions","setColorMenuOptions","colorMenu","flexWrap","currentTarget","BlendOnIcon","BlendOffIcon","AlphaBlendToggle","useBlending","onBlendingChange","ShapeFillOnIcon","ShapeFillOffIcon","ShapeFillToggle","useShapeFill","onShapeFillChange","BrushToolIcon","BrushPaintIcon","BrushLineIcon","BrushRectangleIcon","BrushCircleIcon","BrushTriangleIcon","EraseToolIcon","EraseAllIcon","EraseAllButton","onToolAction","isEraseAllConfirmOpen","setIsEraseAllConfirmOpen","buttonRef","menuLeft","setMenuLeft","menuTop","setMenuTop","DrawingToolSettings","disabledActions","PointerToolSettings","SelectRectangleIcon","SelectPathIcon","SelectToolSettings","MoveToolIcon","FogToolIcon","MeasureToolIcon","ExpandMoreIcon","FullScreenIcon","NoteToolIcon","SelectToolIcon","UndoIcon","UndoButton","RedoIcon","RedoButton","MapContols","allowMapChange","selectedToolId","onSelectedToolChange","toolSettings","onToolSettingChange","onUndo","onRedo","isExpanded","setIsExpanded","fullScreen","setFullScreen","disabledControls","isOwner","allowMapDrawing","allowFogDrawing","allowNoteEditing","disabledSettings","drawing","toolsById","select","SettingsComponent","measure","sections","component","section","Settings","getToolSettings","FullScreenExitIcon","usePreventContextMenu","preventContextMenu","MapInteraction","mapLoaded","setMapLoaded","mapImageRef","previousSelectedToolRef","currentMouseButtons","setCurentMouseButtons","onPinchEnd","first","repeat","getCursorForTool","getDefaultShapeData","brushPosition","getUpdatedShapeData","gridRatio","scaled","brushPositionPixel","startPixel","atan","sideLength","leftDir","rotateDirection","rightDir","leftDirNorm","rightDirNorm","simplifyPoints","simplify","getGuidesFromBoundingBoxes","boundingBoxes","gridCellSize","snappingSensitivity","horizontalEdges","verticalEdges","start","end","guides","edge","orientation","getRelativePointerPosition","getAbsoluteTransform","invert","getStage","scaleAndFlattenPoints","acc","convertPointsToNumbers","useGridSnapping","useCorners","snapPositionToGrid","offsetPosition","nearsetCell","cellPosition","cellCorners","snapPoints","snapPoint","componentMin","Drawing","blend","tension","closed","pathType","fillEnabled","lineCap","lineJoin","shapeType","minSide","DrawingTool","onShapeAdd","onDrawingAdd","onShapesRemove","onDrawingsRemove","setDrawing","isBrushDown","setIsBrushDown","erasingDrawings","setErasingDrawings","shouldHover","isBrush","isShape","handleShapeOver","isDown","prevShapes","eraseHoveredShapes","renderDrawing","onMouseMove","onTouchOver","mapStage","handleBrushDown","handleBrushMove","handleBrushUp","getBrushPosition","findOne","commonShapeData","drawingToolIsShape","prevShape","prevPoints","compare","simplified","Fog","bezier","moveTo","tensionPoints","getTensionPoints","tensionLength","quadraticCurveTo","bezierCurveTo","lineTo","sceneFunc","beginPath","closePath","fillStrokeShape","strokeShape","Tick","cross","setFill","scaleX","scaleY","onMouseEnter","onMouseLeave","onTap","offsetX","offsetY","FogTool","onShapesAdd","onShapesCut","onShapesEdit","onShapeError","editable","showFogGuides","editOpacity","drawingShape","setDrawingShape","hoveredShapes","setHoveredShapes","setFogShapes","fogShapeBoundingBoxes","setFogShapeBoundingBoxes","setGuides","shouldUseGuides","shouldRenderGuides","handlePointerMove","handlePointerClick","handelTouchEnd","snapping","guide","simplifiedShape","cut","drawingShapes","shapesToSubtract","prevDrawingShape","absoluteBrushPosition","gridCellOffset","cellCoords","brushPositionNorm","boundingBox","getGuidesFromGridCell","bestGuides","verticalGuide","horizontalGuide","findBestGuides","finishDrawingPolygon","polygonShape","polygonShapes","renderShape","Color","string","fillPriority","hitFunc","visibleShapes","boxes","getFogShapesBoundingBoxes","ignoreHidden","geometries","shapeGeom","union","visibleShape","mergeFogShapes","renderDrawingShape","isCross","cancelBubble","renderPolygonAcceptTick","Ruler","linePoints","lineCenter","cornerRadius","MeasureTool","drawingShapeData","setDrawingShapeData","gridScale","aCoord","bCoord","aCube","bCube","gridDistance","Pointer","duration","segments","trailRef","pointsRef","prevPositionRef","positionRef","circleRef","transparentColorRef","lighten","lifetime","prevTime","performance","time","deltaTime","expired","getLayer","drawOffsetLine","forward","side","rotate90","toSize","toOffset","gradientCenter","gradientEnd","gradientRadius","gradient","createRadialGradient","addColorStop","fillStyle","PointerTool","onPointerDown","onPointerMove","onPointerUp","brushDownRef","relativePosition","getRelativePointerPositionNormalized","NetworkedMapPointer","localPointerState","setLocalPointerState","pointerColor","sessionRef","ownPointerUpdateRef","updateOwnPointerState","handleOwnPointerDown","handleOwnPointerMove","handleOwnPointerUp","counter","volatile","interpolationsRef","handleSocketPlayerPointer","interpolations","interpolatedPointerState","interp","totalInterpTime","usePrevious","TokenStatus","tokenState","statuses","defaultFontSize","TokenLabel","labelSize","paddingY","paddingX","fontScale","setFontScale","textSizerRef","curr","getTextWidth","findFontScale","rectWidth","setRectWidth","textWidth","setTextWidth","textRef","wrap","ellipsis","TokenOutline","sharedProps","createTokenState","createTokenFromFile","toLowerCase","sizeMatches","clientPositionToMapPosition","clientPosition","checkMapBounds","querySelector","mapRect","mapPosition","normalizedPosition","getScaledOutline","tokenWidth","tokenHeight","Intersection","pointInPolygon","CustomTransformer","attachments","newAttrs","oldAttrs","_getNodeRect","Konva","Util","_inRange","allowNegativeScale","flipEnabled","Transform","_movingAnchorName","indexOf","_anchorDragOffset","boundBoxFunc","bounded","baseSize","oldTr","translate","newTr","_nodes","forEach","parentTransform","getParent","localTransform","getTransform","newLocalTransform","attrs","decompose","setAttrs","_fire","batchDraw","_getRotation","_resetTransformCache","Transformer","nodes","onTransformStart","onTransform","onTransformEnd","portalSelector","gridCellAbsoluteSizeRef","transformerRef","transformer","centeredScaling","rotateAnchorOffset","enabledAnchors","ignoreStroke","borderStroke","anchorStroke","anchorCornerRadius","borderStrokeWidth","anchorSize","portal","destroy","oldBox","newBox","snapBox","movingAnchor","movingAnchorRef","nearestCellWidth","deltaWidth","deltaHeight","rotator","rotatedMin","snapDelta","rotationSnaps","transformTextRef","handleTransformStart","transformText","Label","tag","Tag","pointerDirection","pointerHeight","pointerWidth","Text","minSize","mapTransform","absoluteSize","updateGridCellAbsoluteSize","updateTransformText","getChildren","nodeRect","getClientRect","skipShadow","nodeScale","nodePosition","absolutePosition","handleTransform","handleTransformEnd","useAnchorImage","anchorScale","anchorScaleStatus","anchorRotate","anchorRotateStatus","setNodes","middleLeft","middleRight","rotater","strokeEnabled","setStatus","ctx","TokenAttachment","shadowColor","shadowOffsetY","shadowBlur","Token","onTokenStateChange","onTokenMenuOpen","onTokenMenuClose","onTokenDragStart","onTokenDragEnd","onTokenTransformStart","onTokenTransformEnd","transforming","selectable","fadeOnHover","tokenURL","tokenImage","tokenAspectRatio","previousDragPositionRef","attachedTokensRef","attachmentOverCharacter","setAttachmentOverCharacter","attachmentCharactersRef","attachmentThreshold","handleClick","transformRootRef","tokenOpacity","setTokenOpacity","tokenPointerDownTimeRef","handlePointerDown","timeStamp","handlePointerUp","minCellSize","tokenX","tokenY","previousWidth","previousHeight","skipAnimation","immediate","getAttachedTokens","transformRoot","tokenGroup","parent","attachedTokens","tokenIntersection","characters","other","intersects","attachment","overrideTransformActive","setOverrideTransformActive","transformerActive","transformerAttachments","tokenName","Group","attachedTokenChanges","deltaPosition","overCharacter","character","tokenChanges","sizeChange","xChange","yChange","TokenLockIcon","TokenUnlockIcon","TokenShowIcon","TokenHideIcon","TokenCharacterIcon","TokenPropIcon","TokenMountIcon","TokenAttachmentIcon","tokenCategories","next","prop","vehicle","TokenMenu","wasOpen","imageRect","mapElement","tokenLabelInput","prevLeft","prevTop","substring","handleStatusChange","RemoveTokenIcon","DragOverlay","onRemove","isRemoveHovered","setIsRemoveHovered","removeTokenRef","handler","pointerPosition","screenSpacePointerPosition","removeIconPosition","transition","TokenDragOverlay","onTokenStateRemove","draggingOptions","tokenStateId","attachedTokenStateIds","useMapTokens","onTokensStateCreate","disabledTokens","isTokenMenuOpen","setIsTokenMenuOpen","tokenMenuOptions","setTokenMenuOptions","tokenDraggingOptions","setTokenDraggingOptions","handleTokenMenuOpen","handleTokenMenuClose","handleTokenDragStart","duplicateToken","newStates","handleTokenDragEnd","setDuplicateToken","transformingTokensIds","setTransformingTokenIds","handleTokenTransformStart","handleTokenTransformEnd","tokenFromTokenState","sortMapTokenStates","propTokens","tokenMenu","tokenDragOverlay","tokenStateIds","getMapTokenCategoryWeight","aWeight","Note","onNoteChange","onNoteMenuOpen","onNoteMenuClose","onNoteDragStart","onNoteDragEnd","noteWidth","noteHeight","notePadding","noteNode","notePointerDownTimeRef","noteOpacity","setNoteOpacity","sizes","ceil","findFontSize","noteRef","isTransforming","setIsTransforming","noteX","noteY","noteName","noteGroup","shadowOffset","align","verticalAlign","NoteDragOverlay","onNoteRemove","noteId","StyledTextareaAutoSize","NoteTextIcon","NoteMenu","onKeyPress","maxRows","handleColorChange","BlankNote","NoteTool","onNoteCreate","noteData","setNoteData","creatingNoteRef","useMapNotes","isNoteMenuOpen","setIsNoteMenuOpen","noteMenuOptions","setNoteMenuOptions","noteDraggingOptions","setNoteDraggingOptions","handleNoteMenuOpen","handleNoteMenuClose","handleNoteDragStart","duplicateNote","handleNoteDragEnd","setDuplicateNote","sortNotes","noteMenu","noteDragOverlay","noteIds","onSelectionItemsRemove","tokenIds","CopyIcon","PasteIcon","getSelectionPoints","ColorSchema","$id","enum","Vector2Schema","Ajv","compile","properties","required","DrawingSchema","anyOf","$ref","definitions","PointsData","RectData","CircleData","BaseDrawing","BaseShape","allOf","Line","Rectangle","Circle","Triangle","Shape","Path","FogSchema","schemas","FogData","NoteSchema","OutlineSchema","CircleOutline","RectOutline","PathOutline","TokenStateSchema","TokenCategory","BaseTokenState","DefaultTokenState","FileTokenState","MapStateSchema","TokenStates","propertyNames","additionalProperties","DrawingState","FogState","Notes","isMapState","SelectionSchema","SelectionItemType","SelectionItem","BaseSelection","RectSelection","PathSelection","isSelection","SelectionMenu","onRequestOpen","onSelectionChange","onSelectionItemsChange","onSelectionItemsCreate","selectionMenuWidth","menuPosition","openOnDownRef","downPositionRef","updateSelectedItems","noteChanges","MouseEvent","changedTouches","HTMLCanvasElement","itemsVisible","setItemsVisible","itemsLocked","setItemsLocked","addSuccessToast","numTokens","numNotes","tokenText","noteText","allVisible","allLocked","localClipboardDataRef","handleCopy","handlePaste","clipboardText","parse","clipboardSelection","selectionDelta","clipboardState","tokenStates","selectionItems","Selection","onPreventSelectionChange","onSelectionDragStart","onSelectionDragEnd","intersectingNodesRef","initialDragPositionRef","hasItems","lineRef","rectRef","dashOffset","dash","initialX","initialY","itemPosition","onMouseOut","hitStrokeWidth","SelectTool","onSelectionMenuOpen","disabledNotes","preventSelectionRef","prevSelection","tokensGroups","notesGroups","intersectingItems","prevent","useMapSelection","isSelectionMenuOpen","setIsSelectionMenuOpen","isSelectionDragging","setIsSelectionDragging","setSelection","handleSelectionItemsRemove","duplicateSelection","setDuplicateSelection","selectionTool","selectionMenu","selectionDragOverlay","SelectionDragOverlay","Map","onMapTokenStateChange","onMapTokenStateRemove","onMapTokensStateCreate","onMapDraw","onFogDraw","onMapNoteCreate","onMapNoteChange","onMapNoteRemove","setSelectedToolId","MapControls","prevSettings","TokenOutlineSVG","preserveAspectRatio","cx","cy","join","TokenImage","defaultTokenSources","showOutline","setShowOutline","TokenBarToken","objectFit","Draggable","useDraggable","GroupIcon","TokenBarTokenGroup","setIsOpen","renderToken","clickDownPositionRef","handleOpenClick","newOpen","clickPosition","categorySettings","TokenSettings","tokenEmpty","TokenPreview","tokenSourceImage","tokenStageRef","tokenLayerRef","showGridPreview","setShowGridPreview","EditTokenModal","onUpdateToken","applyTokenChanges","tokenSettingChanges","setTokenSettingChanges","selectedTokenWithChanges","TokenTile","onTokenEdit","TokenTileGroup","TokenHiddenBadge","TokenTiles","TokenEditBar","allTokensVisible","setAllTokensVisisble","getSelectedTokens","selectedTokens","every","isTokensRemoveModalOpen","setIsTokensRemoveModalOpen","selectedTokenIds","hideTitle","handleTokensHide","SelectTokensModal","tokenNames","setTokenNames","tokenFiles","editingTokenId","setEditingTokenId","isDraggingToken","setIsDraggingToken","handleTokensAddToMap","newTokenStates","editingToken","SelectTokensButton","SelectTokensIcon","TokenBar","groupTokens","dragGroup","dragRect","autoScroll","minWidth","overflowY","overflowX","GlobalImageDrop","droppedImagesRef","dropPositionRef","droppingType","setDroppingType","handleMaps","handleTokens","NetworkedMapAndTokens","setCurrentMap","assetManifest","setAssetManifest","loadAssetManifestFromMap","processedTokens","qualityId","addAssetsIfNeeded","prevManifest","newAssets","requestingAssetsRef","player","cachedAsset","sendTo","requestAssetsIfNeeded","debouncedMapState","handleMapChange","newMap","newMapState","addActions","updateActionIndex","previousMapIdRef","handleMapTokensStateCreate","handlePeerData","reply","handlePeerDataProgress","handleSocketMap","canChangeMap","tokenEdits","tokenAction","noteEdits","noteAction","AddPartyMemberModal","AddPartyMemberIcon","AddPartyMemberButton","isAddModalOpen","setIsAddModalOpen","StreamMuteIcon","Slider","labelFunc","percentValue","labelVisible","setLabelVisible","Stream","streamVolume","setStreamVolume","showStreamInteractBanner","setShowStreamInteractBanner","streamMuted","setStreamMuted","audioRef","toggleMute","play","then","srcObject","catch","isVolumeControlAvailable","setIsVolumeControlAvailable","audio","checkVolumeControlAvailable","prevVolume","volume","audioGainRef","audioContext","AudioContext","createMediaStreamSource","gainNode","createGain","gain","connect","destination","step","DiceRollsIcon","DiceRoll","diceIcons","Icon","DiceRolls","expanded","setExpanded","expandedRolls","Nickname","ChangeNicknameModal","onChangeSubmit","ChangeNicknameButton","isChangeModalOpen","setIsChangeModalOpen","closeModal","changedNickname","setChangedNickname","StartStreamModal","isSupported","unavailableMessage","noAudioTrack","noAudioMessage","onStreamStart","onStreamEnd","StartStreamButton","isStreamModalOpoen","setIsStreamModalOpen","setNoAudioTrack","adapter","browserDetails","mediaDevices","getDisplayMedia","video","noiseSuppression","autoGainControl","echoCancellation","localStream","tracks","hasAudio","track","stop","SettingsIcon","SelectDataModal","databaseName","setMaps","tokensByMap","setTokensByMap","setTokens","hasMaps","hasTokens","addons","loadedMaps","loadedTokensByMap","loadedTokens","each","mapGroup","loadData","tokenUsedCount","setTokenUsedCount","getCheckedGroups","checkedGroups","handleMapsChanged","prevMaps","newMaps","tokensSelectChecked","prevTokens","newTokens","tempUsedCount","handleTokensChanged","tokensUsed","renderGroupContainer","renderItem","onGroupChange","renderMapGroup","pl","renderTokenGroup","checkedMaps","checkedTokens","checkedMapGroups","checkedTokenGroups","importDBName","MissingAssetError","ImportExportModal","setError","backgroundTaskRunningRef","showImportSelector","setShowImportSelector","showExportSelector","setShowExportSelector","mapText","addWarningToast","appearance","autoDismiss","handleDBProgress","completedRows","totalRows","importData","importDB","newTokenIds","newAssetIds","oldAssetIds","newMapIds","tokensToAdd","newFileId","newThumbnailId","itemName","itemId","assetType","mapIds","mapsToAdd","newResolutionIds","assetsToAdd","processedAssetIds","unprocessedAssets","unprocessedMaps","unprocessedTokens","unprocessedItems","unprocessedItem","stateIndex","newMapGroups","newTokenGroups","transaction","totalImportedMaps","totalImportedTokens","exportData","saveAs","handleBeforeUnload","returnValue","handleImportDatabase","SettingsModal","isDeleteModalOpen","setIsDeleteModalOpen","setLabelSize","setShowFogGuides","fogEditOpacity","setFogEditOpacity","storageEstimate","setStorageEstimate","isImportExportModalOpen","setIsImportExportModalOpen","clear","inUse","persisted","isFirefox","estimate","estimateStorage","useColorMode","colorMode","setColorMode","marginRight","prettyBytes","usage","quota","SettingsButton","isSettingsModalOpen","setIsSettingsModalOpen","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE","StartTimerModal","onTimerStart","onTimerStop","hour","setHour","minute","setMinute","second","setSecond","inputStyle","paddingLeft","parseValue","num","timerHMS","workingDuration","getDurationHMS","StartTimerIcon","StartTimerButton","isTimerModalOpen","setIsTimerModalOpen","usePortal","rootElemRef","existingParent","parentElem","rootContainer","setAttribute","createRootElement","rootElem","lastElementChild","insertBefore","nextElementSibling","addRootElement","appendChild","childNodes","Timer","previousTime","timerContainer","ReactDOM","ExpandMoreDiceIcon","DiceTrayOverlay","lazy","DiceTrayButton","shareDice","onShareDiceChange","onDiceRollsChange","Suspense","fallback","Party","partyStreams","usePlayerUpdater","usePlayerState","setShareDice","newTimer","newNickname","newShareDice","newDiceRolls","NetworkedParty","setStream","setPartyStreams","handleStreamEnd","endStreamTo","joinedPlayersRef","handlePlayerJoined","startStreamTo","handlePlayerLeft","handlePeerTrackAdded","peer","remoteStream","prevStreams","handlePeerTrackRemoved","onended","Connection","currentChunks","handleData","packed","unpacked","decode","__chunked","object","chunkId","packedData","chunks","write","byteLength","SimplePeer","Session","peers","_iceServers","_gameId","_password","_handleUnload","bind","withCredentials","parser","msgParser","transports","iceServers","_handlePlayerJoined","_handlePlayerLeft","_handleJoinedGame","_handleSignal","_handleAuthError","_handleGameExpired","_handleSocketDisconnect","_handleSocketReconnect","_handleForceUpdate","disconnect","eventId","_addPeer","ready","connection","sendObject","once","addTrack","removeTrack","initiator","trickle","signal","peerConnectEvent","peerDataEvent","peerDataProgressEvent","peerTrackAddedEvent","peerTrackRemovedEvent","peerDisconnectEvent","peerErrorEvent","sendBuffer","joinGame","Game","useParams","sessionStatus","setSessionStatus","maintenance","setMaintenance","overrideNickname","peerError","setPeerError","handlePeerError","handleStatus","gameExpired","setGameExpired","handleGameExpired","newPassword","LaravelGame","autoStart","About","aria-hidden","defaultMaps","customMaps","editingMapsAdvanced","resetAndRemovingMaps","usingDrawing","openDiceTray","diceRolling","diceStyles","diceTraySize","usingFog","usingMeasure","defaultTokens","workingWithTokens","deletingTokens","customTokens","tokenEditor","addPartyMember","changeNickname","sharingAudio","startGame","diceSharing","usingTimer","usingPointer","mapEditor","filteringMaps","groupAndRemovingTokens","filteringTokens","usingNotes","FAQ","Accordion","defaultOpen","setOpen","ReleaseNotes","hash","HowTo","getToastAppearance","colour","CustomToast","ToastProvider","components","Toast","autoDismissTimeout","placement","App","Boolean","hostname","setAppElement","render","getElementById","serviceWorker","registration","unregister","StyledDivider","Uint8Array","reader","FileReader","onLoadEnd","Buffer","readAsArrayBuffer","currentVersion","upgradeFunction","setAll","getAll","newSettings","__version","settingsProvider","useEdgeSnapping","game","showGuides","getSettings","SettingsProvider"],"mappings":"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eACA,gBACA,cACA,iBACA,SACA,MACA,WACA,WACA,iBACA,gBACA,WACA,OACA,SACA,SACA,QACA,SACA,iBACA,eACA,WACA,MACA,gBACA,QACA,YACA,aACA,gBACA,YACA,aACA,OACA,aACA,aACA,UACA,UACA,QACA,MACA,UACA,cACA,UACA,QACA,aACA,UACA,cACA,aACA,WACA,oBACA,SACA,OACA,YACA,eACA,UACA,aACA,YACA,aACA,OACA,OACA,YACA,qBACA,SACA,eACA,cACA,gBACA,SACA,SACA,OACA,QACA,QACA,UACA,cACA,QACA,kBACA,UACA,WACA,MACA,UACA,WACA,QACA,iBACA,aACA,cACA,eACA,eACA,OACA,cACA,WACA,kBACA,QACA,QACA,QACA,YACA,eACA,YACA,aACA,kBACA,0BACA,aACA,kBACA,cACA,YACA,oBACA,aACA,aACA,cACA,eACA,gBACA,YACA,wBACA,YACA,iBACA,kBACA,cACA,eACA,aACA,gBACA,aACA,eACA,oBACA,oBACA,WACA,YACA,QACA,OACA,SACA,SACA,YACA,YACA,QACA,UACA,WACA,QACA,gBACA,aACA,QACA,OACA,aACA,SACA,aACA,aACA,YACA,aACA,eACA,eACA,QACA,QACA,YACA,aACA,MACA,UACA,oBACA,aACA,SACA,eACA,SACA,SACA,SACA,QACA,SACA,OACA,OACA,SACA,aACA,OACA,eACA,SACA,UACA,YACA,WACA,UACA,SACA,UACA,SACA,QACA,WACA,oBACA,OACA,QACA,aACA,aACA,YACA,YACA,QACA,cACA,UACA,OACA,cACA,MACA,MACA,SACA,MACA,UACA,UACA,UACA,eACA,YACA,WACA,eACA,kBACA,aACA,OACA,SACA,eACA,cACA,SACA,UACA,WACA,MACA,QACA,aACA,WACA,aACA,eACA,MACA,QACA,oBACA,eACA,sBACA,WACA,aACA,QACA,WACA,QACA,UACA,YACA,SACA,kBACA,kBACA,WACA,WACA,QACA,UACA,SACA,cACA,SACA,MACA,eACA,SAC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","file":"static/js/main.a08abe13.chunk.js","sourcesContent":["function EditTileIcon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default EditTileIcon;\r\n","import React from \"react\";\r\nimport { Flex, IconButton, Box, Text, Badge } from \"theme-ui\";\r\n\r\nimport EditTileIcon from \"../../icons/EditTileIcon\";\r\n\r\ntype TileProps = {\r\n  title: string;\r\n  isSelected: boolean;\r\n  onSelect: () => void;\r\n  onEdit: () => void;\r\n  onDoubleClick: () => void;\r\n  canEdit: boolean;\r\n  badges: React.ReactChild[];\r\n  editTitle: string;\r\n  children: React.ReactNode;\r\n};\r\n\r\nfunction Tile({\r\n  title,\r\n  isSelected,\r\n  onSelect,\r\n  onEdit,\r\n  onDoubleClick,\r\n  canEdit,\r\n  badges,\r\n  editTitle,\r\n  children,\r\n}: TileProps) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        height: \"0\",\r\n        paddingTop: \"100%\",\r\n        borderRadius: \"4px\",\r\n        overflow: \"hidden\",\r\n        userSelect: \"none\",\r\n      }}\r\n      bg=\"background\"\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        onSelect();\r\n      }}\r\n      onDoubleClick={onDoubleClick}\r\n      aria-label={title}\r\n    >\r\n      <Box\r\n        sx={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n        }}\r\n      >\r\n        {children}\r\n      </Box>\r\n      <Flex\r\n        sx={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background:\r\n            \"linear-gradient(to bottom, rgba(0,0,0,0) 70%, rgba(0,0,0,0.65) 100%);\",\r\n          alignItems: \"flex-end\",\r\n          justifyContent: \"center\",\r\n        }}\r\n        p={2}\r\n      >\r\n        <Text\r\n          as=\"p\"\r\n          variant=\"heading\"\r\n          color=\"hsl(210, 50%, 96%)\"\r\n          sx={{ textAlign: \"center\" }}\r\n        >\r\n          {title}\r\n        </Text>\r\n      </Flex>\r\n      <Box\r\n        sx={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          borderColor: \"primary\",\r\n          borderStyle: isSelected ? \"solid\" : \"none\",\r\n          borderWidth: \"4px\",\r\n          pointerEvents: \"none\",\r\n          borderRadius: \"4px\",\r\n        }}\r\n      />\r\n      <Flex\r\n        sx={{\r\n          position: \"absolute\",\r\n          top: \"6px\",\r\n          left: \"6px\",\r\n        }}\r\n      >\r\n        {badges.map((badge, i) => (\r\n          <Badge\r\n            m=\"2px\"\r\n            key={i}\r\n            bg=\"overlay\"\r\n            color=\"text\"\r\n            sx={{ width: \"fit-content\" }}\r\n          >\r\n            {badge}\r\n          </Badge>\r\n        ))}\r\n      </Flex>\r\n      {canEdit && (\r\n        <Box sx={{ position: \"absolute\", top: 0, right: 0 }}>\r\n          <IconButton\r\n            aria-label={editTitle}\r\n            title={editTitle}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              onEdit();\r\n            }}\r\n            bg=\"overlay\"\r\n            sx={{ borderRadius: \"50%\" }}\r\n            m={2}\r\n          >\r\n            <EditTileIcon />\r\n          </IconButton>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nTile.defaultProps = {\r\n  title: \"\",\r\n  isSelected: false,\r\n  onSelect: () => {},\r\n  onEdit: () => {},\r\n  onDoubleClick: () => {},\r\n  size: \"medium\",\r\n  canEdit: false,\r\n  badges: [],\r\n  editTitle: \"Edit\",\r\n  columns: \"1fr\",\r\n};\r\n\r\nexport default Tile;\r\n","import { Box, Text } from \"theme-ui\";\r\n\r\nimport Banner from \"./Banner\";\r\n\r\nimport { RequestCloseEventHandler } from \"../../types/Events\";\r\n\r\ntype ErrorBannerProps = {\r\n  error: Error | undefined;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction ErrorBanner({ error, onRequestClose }: ErrorBannerProps) {\r\n  return (\r\n    <Banner isOpen={!!error} onRequestClose={onRequestClose}>\r\n      <Box p={1}>\r\n        <Text as=\"p\" variant=\"body2\">\r\n          Error: {error && error.message}\r\n        </Text>\r\n      </Box>\r\n    </Banner>\r\n  );\r\n}\r\n\r\nexport default ErrorBanner;\r\n","/**\r\n * A faked local or session storage used when the user has disabled storage\r\n */\r\nclass FakeStorage {\r\n  data: { [keyName: string]: any } = {};\r\n  key(index: number) {\r\n    return Object.keys(this.data)[index] || null;\r\n  }\r\n  getItem(keyName: string) {\r\n    return this.data[keyName] || null;\r\n  }\r\n  setItem(keyName: string, keyValue: any) {\r\n    this.data[keyName] = keyValue;\r\n  }\r\n  removeItem(keyName: string) {\r\n    delete this.data[keyName];\r\n  }\r\n  clear() {\r\n    this.data = {};\r\n  }\r\n}\r\n\r\nexport default FakeStorage;\r\n","export function omit(obj: Record<PropertyKey, any>, keys: string[]) {\r\n  let tmp: Record<PropertyKey, any> = {};\r\n  for (let [key, value] of Object.entries(obj)) {\r\n    if (keys.includes(key)) {\r\n      continue;\r\n    }\r\n    tmp[key] = value;\r\n  }\r\n  return tmp;\r\n}\r\n\r\nexport function fromEntries(iterable: Iterable<[string | number, any]>) {\r\n  if (Object.fromEntries) {\r\n    return Object.fromEntries(iterable);\r\n  }\r\n  return [...iterable].reduce(\r\n    (obj: Record<string | number, any>, [key, val]) => {\r\n      obj[key] = val;\r\n      return obj;\r\n    },\r\n    {}\r\n  );\r\n}\r\n\r\n// Check to see if all tracks are muted\r\nexport function isStreamStopped(stream: MediaStream): boolean {\r\n  // TODO: Check what this thing actually does\r\n  return stream.getTracks().reduce((a, b) => a && b, { muted: true }).muted;\r\n}\r\n\r\nexport function roundTo(x: number, to: number): number {\r\n  return Math.round(x / to) * to;\r\n}\r\n\r\nexport function floorTo(x: number, to: number): number {\r\n  return Math.floor(x / to) * to;\r\n}\r\n\r\nexport function toRadians(angle: number): number {\r\n  return angle * (Math.PI / 180);\r\n}\r\n\r\nexport function toDegrees(angle: number): number {\r\n  return angle * (180 / Math.PI);\r\n}\r\n\r\nexport function lerp(a: number, b: number, alpha: number): number {\r\n  return a * (1 - alpha) + b * alpha;\r\n}\r\n\r\n// Console log an image\r\nexport function logImage(url: string, width: number, height: number): void {\r\n  const style = [\r\n    \"font-size: 1px;\",\r\n    `padding: ${height}px ${width}px;`,\r\n    `background: url(${url}) no-repeat;`,\r\n    \"background-size: contain;\",\r\n  ].join(\" \");\r\n  console.log(\"%c \", style);\r\n}\r\n\r\nexport function isEmpty(obj: Object): boolean {\r\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\r\n}\r\n\r\nexport function keyBy<Type extends Record<PropertyKey, any>>(\r\n  array: Type[],\r\n  key: string\r\n): Record<string, Type> {\r\n  return array.reduce(\r\n    (prev, current) => ({\r\n      ...prev,\r\n      [key ? current[key] : current]: current,\r\n    }),\r\n    {}\r\n  );\r\n}\r\n\r\nexport function groupBy(array: Record<PropertyKey, any>[], key: string) {\r\n  return array.reduce((prev: Record<string, any[]>, current) => {\r\n    const k = current[key];\r\n    (prev[k] || (prev[k] = [])).push(current);\r\n    return prev;\r\n  }, {});\r\n}\r\n\r\nexport const isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\r\n\r\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(\r\n  navigator.userAgent\r\n);\r\n\r\nexport function shuffle<Type>(array: Type[]) {\r\n  let temp = [...array];\r\n  var currentIndex = temp.length,\r\n    randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex--;\r\n\r\n    // And swap it with the current element.\r\n    [temp[currentIndex], temp[randomIndex]] = [\r\n      temp[randomIndex],\r\n      temp[currentIndex],\r\n    ];\r\n  }\r\n\r\n  return temp;\r\n}\r\n\r\n/**\r\n * Check that read and write permission is granted for clipboard.\r\n * If permission has yet to be granted or denied request it.\r\n * This will also return false if the browser does not support reading\r\n * and writing to the clipboard e.g. for Safari or Firefox\r\n */\r\nexport async function clipboardSupported(): Promise<boolean> {\r\n  // Reason: we're already handling the case where clipboard-read is not supported\r\n  // @ts-ignore\r\n  if (navigator.clipboard?.readText && navigator.clipboard?.writeText) {\r\n    if (navigator.permissions) {\r\n      // @ts-ignore\r\n      let query = await navigator.permissions.query({ name: \"clipboard-read\" });\r\n      if (query.state === \"prompt\") {\r\n        try {\r\n          await navigator.clipboard.readText();\r\n          // @ts-ignore\r\n          query = await navigator.permissions.query({ name: \"clipboard-read\" });\r\n          // Wait 300ms before returning when permission has been accepted to prevent immediate calls\r\n          // to the clipboard api to fail with a document not focused error\r\n          await timeout(300);\r\n        } catch {\r\n          return false;\r\n        }\r\n      }\r\n      return query.state === \"granted\";\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function timeout(ms: number) {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n","import { InstancedMesh, TransformNode } from \"@babylonjs/core\";\r\nimport { Vector3 } from \"@babylonjs/core/Maths/math\";\r\n\r\nimport { DiceMesh, DiceRoll } from \"../types/Dice\";\r\n\r\n/**\r\n * Find the number facing up on a mesh instance of a dice\r\n * @param {Object} instance The dice instance\r\n */\r\nexport function getDiceInstanceRoll(instance: InstancedMesh) {\r\n  let highestDot = -1;\r\n  let highestLocator: TransformNode | undefined = undefined;\r\n  for (let locator of instance.getChildTransformNodes()) {\r\n    let dif = locator\r\n      .getAbsolutePosition()\r\n      .subtract(instance.getAbsolutePosition());\r\n    let direction = dif.normalize();\r\n    const dot = Vector3.Dot(direction, Vector3.Up());\r\n    if (dot > highestDot) {\r\n      highestDot = dot;\r\n      highestLocator = locator;\r\n    }\r\n  }\r\n  if (highestLocator) {\r\n    return parseInt(highestLocator.name.slice(12));\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Find the number facing up on a dice object\r\n */\r\nexport function getDiceRoll(dice: DiceMesh) {\r\n  let number = getDiceInstanceRoll(dice.instance);\r\n  // If the dice is a d100 add the d10\r\n  if (dice.d10Instance) {\r\n    const d10Number = getDiceInstanceRoll(dice.d10Instance);\r\n    // Both zero set to 100\r\n    if (d10Number === 0 && number === 0) {\r\n      number = 100;\r\n    } else {\r\n      number += d10Number;\r\n    }\r\n  } else if (dice.type === \"d10\" && number === 0) {\r\n    number = 10;\r\n  }\r\n  return { type: dice.type, roll: number };\r\n}\r\n\r\nexport function getDiceRollTotal(diceRolls: DiceRoll[]) {\r\n  return diceRolls.reduce((accumulator: number, dice) => {\r\n    if (dice.roll === \"unknown\") {\r\n      return accumulator;\r\n    } else {\r\n      return accumulator + dice.roll;\r\n    }\r\n  }, 0);\r\n}\r\n","import React, { ReactChild } from \"react\";\r\nimport Modal, { Props } from \"react-modal\";\r\nimport { useThemeUI, Close } from \"theme-ui\";\r\nimport { useSpring, animated, config } from \"react-spring\";\r\nimport CSS from \"csstype\";\r\n\r\ntype ModalProps = Props & {\r\n  children: ReactChild | ReactChild[];\r\n  allowClose: boolean;\r\n};\r\n\r\nfunction StyledModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  children,\r\n  allowClose,\r\n  style,\r\n  ...props\r\n}: ModalProps) {\r\n  const { theme } = useThemeUI();\r\n\r\n  const openAnimation = useSpring({\r\n    opacity: isOpen ? 1 : 0,\r\n    transform: isOpen ? \"scale(1)\" : \"scale(0.99)\",\r\n    config: config.default,\r\n  });\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{\r\n        overlay: {\r\n          backgroundColor: \"rgba(0, 0, 0, 0.73)\",\r\n          zIndex: 100,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          ...(style?.overlay || {}),\r\n        },\r\n        content: {\r\n          backgroundColor: theme.colors?.background as CSS.Property.Color,\r\n          top: \"initial\",\r\n          left: \"initial\",\r\n          bottom: \"initial\",\r\n          right: \"initial\",\r\n          maxHeight: \"100%\",\r\n          ...(style?.content || {}),\r\n        } as React.CSSProperties,\r\n      }}\r\n      contentElement={(props, content) => (\r\n        <animated.div {...props} style={{ ...props.style, ...openAnimation }}>\r\n          {content}\r\n        </animated.div>\r\n      )}\r\n      overlayElement={(props, content) => (\r\n        <div\r\n          onDragEnter={(e) => {\r\n            // Prevent drag event from triggering with a modal open\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n          }}\r\n          {...props}\r\n        >\r\n          {content}\r\n        </div>\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      {allowClose && (\r\n        <Close\r\n          m={0}\r\n          sx={{ position: \"absolute\", top: 0, right: 0 }}\r\n          onClick={onRequestClose}\r\n        />\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nStyledModal.defaultProps = {\r\n  allowClose: true,\r\n  style: {},\r\n};\r\n\r\nexport default StyledModal;\r\n","function D20Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M13.014 1.292l7.98 4.577A2 2 0 0122 7.604v8.767a2 2 0 01-.997 1.73l-7.978 4.626a2 2 0 01-2.003.002L3.001 18.1A2 2 0 012 16.369V7.58a2 2 0 011.013-1.74l8.019-4.553a2 2 0 011.982.004zm-.995 1.736L4 7.58v8.788l8.021 4.628L20 16.37V7.604l-7.981-4.576zm3.504 5.256c.491 0 .894.06 1.21.181.315.121.572.278.771.472.2.194.356.397.47.611.115.214.207.463.277.748.136.543.204 1.109.204 1.698 0 1.322-.224 2.289-.672 2.901-.448.613-1.22.92-2.314.92-.614 0-1.11-.099-1.488-.294a2.407 2.407 0 01-.931-.86c-.176-.268-.313-.634-.41-1.1a7.506 7.506 0 01-.147-1.542c0-1.384.25-2.353.749-2.906.499-.553 1.26-.83 2.281-.83zm-6.887 0c.713 0 1.268.08 1.665.243.396.162.708.412.935.748.227.336.341.713.341 1.13 0 .444-.13.867-.39 1.271-.261.404-.735.848-1.421 1.332-.409.281-.681.478-.82.59-.137.113-.299.26-.484.443h3.165v1.649H5.545l.039-.255c.094-.505.293-.984.596-1.436.353-.529 1.016-1.152 1.988-1.87.594-.441.974-.775 1.14-1.004.166-.228.249-.445.249-.65a.76.76 0 00-.247-.57.86.86 0 00-.62-.235.864.864 0 00-.634.243c-.164.162-.274.449-.33.86l-2.031-.165.038-.236c.084-.458.218-.823.4-1.097.212-.32.511-.565.898-.735.386-.17.921-.256 1.605-.256zm6.818 1.346c-.335 0-.578.17-.727.51-.15.338-.224.967-.224 1.884 0 .927.082 1.56.247 1.9.164.34.402.51.714.51a.75.75 0 00.535-.217c.15-.144.262-.372.333-.683.071-.311.107-.796.107-1.455 0-.967-.082-1.617-.246-1.95-.165-.333-.41-.5-.74-.5z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D20Icon;\r\n","function D12Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M12.297 2.037l5.578 1.734a1 1 0 01.5.35l3.421 4.504A1 1 0 0122 9.23v5.54a1 1 0 01-.204.605l-3.422 4.504a1 1 0 01-.5.35l-5.577 1.734a1 1 0 01-.594 0l-5.578-1.734a1 1 0 01-.5-.35l-3.421-4.504A1 1 0 012 14.77V9.23a1 1 0 01.204-.605L5.626 4.12a1 1 0 01.5-.35l5.577-1.734a1 1 0 01.594 0zM12 4.048L7.059 5.565 4 9.54v4.917l3.059 3.976 4.94 1.517 4.941-1.517L20 14.457V9.542l-3.06-3.977L12 4.048zM10.364 8v7.636h-2.14v-5.003l-.258.185a6.092 6.092 0 01-.748.444A7.92 7.92 0 016 11.723v-1.71l.263-.088c.595-.21 1.066-.456 1.415-.737A3.37 3.37 0 008.613 8h1.75zm4.417 0c.768 0 1.365.084 1.792.251.426.167.762.424 1.007.77.244.347.366.736.366 1.166 0 .457-.14.895-.42 1.311-.28.417-.79.874-1.53 1.373-.438.29-.732.493-.88.61a7.954 7.954 0 00-.523.455H18v1.7h-6.545l.035-.23a3.856 3.856 0 01.647-1.514c.38-.544 1.094-1.187 2.14-1.928.64-.454 1.048-.799 1.227-1.034.178-.236.268-.46.268-.671a.768.768 0 00-.265-.587.949.949 0 00-.667-.243c-.279 0-.506.084-.683.25-.177.168-.296.464-.356.887l-2.186-.17.041-.243c.091-.472.235-.849.43-1.131.23-.33.551-.582.967-.758.416-.176.992-.264 1.728-.264z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D12Icon;\r\n","function D10Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M12.596 2.067l.107.068 9.883 7.154a1 1 0 01.407.691l.007.12v4.14a1 1 0 01-.324.737l-.093.075L12.7 22.15a1 1 0 01-1.038.079l-.12-.073-10.117-7.104a1 1 0 01-.418-.698L1 14.234v-4.128a1 1 0 01.328-.74l.094-.076L11.54 2.129a1 1 0 011.057-.062zm-.488 2.217L3 10.55v3.236L12.109 20 21 13.798v-3.26l-8.892-6.254zm2.746 3.858c.527 0 .96.065 1.298.193.338.128.614.296.828.501.214.206.382.422.505.65.122.226.221.491.296.794A7.33 7.33 0 0118 12.084c0 1.404-.24 2.431-.721 3.082-.48.651-1.308.976-2.483.976-.659 0-1.191-.103-1.597-.311a2.574 2.574 0 01-.999-.913c-.189-.285-.335-.674-.44-1.169a7.897 7.897 0 01-.158-1.638c0-1.47.268-2.5.804-3.087.536-.588 1.352-.882 2.448-.882zm-4.368 0v7.868h-2.2v-5.155l-.265.19a6.26 6.26 0 01-.769.459c-.333.165-.75.324-1.252.475v-1.763l.27-.09c.612-.217 1.097-.47 1.455-.76.41-.33.73-.738.961-1.224h1.8zm4.294 1.43c-.36 0-.62.18-.78.541-.16.361-.24 1.029-.24 2.003 0 .985.088 1.658.264 2.018.176.361.432.541.766.541.221 0 .412-.076.574-.23.162-.152.282-.394.358-.725.077-.33.115-.846.115-1.546 0-1.027-.088-1.718-.264-2.071-.177-.354-.44-.53-.793-.53z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D10Icon;\r\n","function D8Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M12.76 1.093l.088.088 8.997 10.156a1 1 0 01.077 1.228l-.077.098-8.997 10.156a1 1 0 01-1.4.096l-.09-.088-9.2-10.156a1 1 0 01-.079-1.243l.08-.1 9.2-10.155a1 1 0 011.4-.08zm-.669 2.249l-7.843 8.657 7.843 8.658L19.759 12l-7.668-8.658zM11.88 8c.981 0 1.707.172 2.176.517.469.345.704.779.704 1.302 0 .305-.094.59-.28.854-.141.197-.361.388-.662.573.397.176.694.408.889.697.195.29.293.61.293.96 0 .34-.084.656-.253.95a1.952 1.952 0 01-.621.68c-.245.16-.55.278-.916.354a5.782 5.782 0 01-1.17.113c-.778 0-1.372-.085-1.783-.254-.41-.17-.723-.419-.936-.748A1.984 1.984 0 019 12.894c0-.397.1-.733.3-1.008.2-.276.51-.49.927-.64-.32-.157-.554-.332-.701-.526-.2-.265-.3-.57-.3-.915 0-.566.288-1.03.866-1.39C10.542 8.14 11.139 8 11.88 8zm.1 3.805a.918.918 0 00-.664.277c-.188.184-.283.434-.283.748a.97.97 0 00.296.732c.197.189.422.284.676.284a.908.908 0 00.656-.289.988.988 0 00.29-.732.982.982 0 00-.292-.734.942.942 0 00-.679-.286zm0-2.66a.855.855 0 00-.604.215.722.722 0 00-.232.556c0 .234.079.423.237.566.16.143.37.215.634.215.234 0 .426-.071.576-.213a.72.72 0 00.225-.55.744.744 0 00-.235-.57.847.847 0 00-.601-.219z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D8Icon;\r\n","function D6Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M19 3a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h14zm0 2H5v14h14V5zm-6.87 3c.579 0 1.036.075 1.372.224.337.15.616.369.837.657.222.288.391.65.507 1.086l-2.012.277-.029-.15c-.054-.235-.133-.407-.236-.515a.612.612 0 00-.46-.194c-.328 0-.583.185-.765.554-.132.266-.23.835-.293 1.707.242-.273.49-.476.745-.607s.55-.197.884-.197c.65 0 1.198.26 1.647.776.449.517.673 1.173.673 1.967 0 .536-.113 1.025-.34 1.469a2.35 2.35 0 01-.944 1.005c-.402.227-.906.341-1.512.341-.729 0-1.313-.139-1.754-.416-.44-.277-.792-.719-1.055-1.327C9.132 14.05 9 13.245 9 12.244c0-1.466.276-2.54.83-3.222C10.381 8.341 11.148 8 12.13 8zm-.016 4.239a.88.88 0 00-.708.349c-.19.233-.285.565-.285.997 0 .44.1.784.298 1.034.199.249.442.374.73.374.265 0 .487-.113.666-.338.178-.226.268-.562.268-1.009 0-.458-.093-.807-.278-1.047-.186-.24-.416-.36-.69-.36z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D6Icon;\r\n","function D4Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M12.485 2.24a1 1 0 01.39.389l9.922 17.886A1 1 0 0121.923 22H2.077a1 1 0 01-.875-1.485l9.923-17.886a1 1 0 011.36-.39zM12 5.173L3.775 20h16.449L12 5.174zM13.995 10v5.076H15v1.78h-1.005V18.4h-1.94v-1.544H8V14.97L12.055 10h1.94zm-1.94 2.479l-2.142 2.597h2.142V12.48z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D4Icon;\r\n","function D100Icon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M11.148 1.157l.104.076 1.134.949 1.067-.914a1 1 0 011.214-.068l.097.075L23.66 9.09a1 1 0 01.333.63L24 9.84v4.789a1 1 0 01-.255.668l-.088.086-8.895 7.752a1 1 0 01-1.208.08l-.098-.073-1.069-.91-1.138.945a1 1 0 01-1.164.081l-.105-.074-9.61-7.8a1 1 0 01-.362-.648L0 14.609V9.862a1 1 0 01.273-.687l.094-.087 9.61-7.862a1 1 0 011.17-.07zm-.546 2.545L2 10.48v3.5l8.603 6.722L19 13.993v-3.526l-8.398-6.765zm-4.002 5v6H5.325v-3.931l-.154.145c-.152.139-.3.255-.445.35a4.096 4.096 0 01-.726.362v-1.344l.207-.093c.33-.16.595-.345.793-.555.237-.252.423-.564.557-.934H6.6zm3.07 0c.356 0 .65.048.878.145.23.096.416.221.561.376.145.154.259.316.342.486.083.17.15.37.2.596.1.433.149.884.149 1.354 0 1.052-.163 1.823-.488 2.311-.326.488-.887.732-1.682.732-.446 0-.807-.078-1.082-.233a1.823 1.823 0 01-.676-.685c-.128-.214-.227-.506-.299-.877a6.538 6.538 0 01-.106-1.229c0-1.102.181-1.874.544-2.315.363-.44.916-.66 1.659-.66zm5.2 0c.356 0 .65.048.878.145.23.096.416.221.561.376.145.154.259.316.342.486.083.17.15.37.2.596.1.433.149.884.149 1.354 0 1.052-.163 1.823-.488 2.311-.326.488-.887.732-1.682.732-.446 0-.807-.078-1.082-.233a1.823 1.823 0 01-.676-.685c-.128-.214-.227-.506-.299-.877a6.538 6.538 0 01-.106-1.229c0-1.102.181-1.874.544-2.315.363-.44.916-.66 1.659-.66zm-5.252 1c-.3 0-.517.142-.65.424-.134.283-.201.806-.201 1.57 0 .772.073 1.3.22 1.582.147.283.36.424.64.424.184 0 .343-.06.479-.18.135-.12.234-.31.298-.569.064-.259.096-.663.096-1.212 0-.805-.074-1.346-.22-1.623-.148-.277-.368-.416-.662-.416zm5.2 0c-.3 0-.517.142-.65.424-.134.283-.201.806-.201 1.57 0 .772.073 1.3.22 1.582.147.283.36.424.64.424.184 0 .343-.06.479-.18.135-.12.234-.31.298-.569.064-.259.096-.663.096-1.212 0-.805-.074-1.346-.22-1.623-.148-.277-.368-.416-.662-.416z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default D100Icon;\r\n","import React, { useState, useContext, ReactChild } from \"react\";\r\n\r\nexport type AssetLoadStartEventHandler = () => void;\r\nexport type AssetLoadFinishEventHandler = () => void;\r\n\r\ntype DiceLoadingContextValue = {\r\n  assetLoadStart: AssetLoadStartEventHandler;\r\n  assetLoadFinish: AssetLoadFinishEventHandler;\r\n  isLoading: boolean;\r\n};\r\n\r\nconst DiceLoadingContext =\r\n  React.createContext<DiceLoadingContextValue | undefined>(undefined);\r\n\r\nexport function DiceLoadingProvider({ children }: { children: ReactChild }) {\r\n  const [loadingAssetCount, setLoadingAssetCount] = useState(0);\r\n\r\n  function assetLoadStart() {\r\n    setLoadingAssetCount((prevLoadingAssets) => prevLoadingAssets + 1);\r\n  }\r\n\r\n  function assetLoadFinish() {\r\n    setLoadingAssetCount((prevLoadingAssets) => prevLoadingAssets - 1);\r\n  }\r\n\r\n  const isLoading = loadingAssetCount > 0;\r\n\r\n  const value = {\r\n    assetLoadStart,\r\n    assetLoadFinish,\r\n    isLoading,\r\n  };\r\n\r\n  return (\r\n    <DiceLoadingContext.Provider value={value}>\r\n      {children}\r\n    </DiceLoadingContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useDiceLoading() {\r\n  const context = useContext(DiceLoadingContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useDiceLoading must be used within a DiceLoadingProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default DiceLoadingContext;\r\n","import get from \"lodash.get\";\r\nimport set from \"lodash.set\";\r\n\r\nimport { useSettings } from \"../contexts/SettingsContext\";\r\n\r\n/**\r\n * Helper to get and set nested settings that are saved in local storage\r\n * @param {string} path The path to the setting within the Settings object provided by the SettingsContext\r\n */\r\nfunction useSetting<Type>(path: string): [Type, (value: Type) => void] {\r\n  const { settings, setSettings } = useSettings();\r\n\r\n  const setting = get(settings, path) as Type;\r\n\r\n  const setSetting = (value: Type) =>\r\n    setSettings((prev) => {\r\n      const updated = set({ ...prev }, path, value);\r\n      return updated;\r\n    });\r\n\r\n  return [setting, setSetting];\r\n}\r\n\r\nexport default useSetting;\r\n","import { useMedia } from \"react-media\";\r\n\r\nfunction useResponsiveLayout() {\r\n  const isMediumScreen = useMedia({ query: \"(min-width: 500px)\" });\r\n  const isLargeScreen = useMedia({ query: \"(min-width: 1500px)\" });\r\n  const screenSize = isLargeScreen\r\n    ? \"large\"\r\n    : isMediumScreen\r\n    ? \"medium\"\r\n    : \"small\";\r\n\r\n  const modalSize = isLargeScreen\r\n    ? \"842px\"\r\n    : isMediumScreen\r\n    ? \"642px\"\r\n    : \"500px\";\r\n\r\n  const tileSize = isLargeScreen\r\n    ? \"small\"\r\n    : isMediumScreen\r\n    ? \"medium\"\r\n    : \"large\";\r\n\r\n  const tileGridColumns = isLargeScreen ? 4 : isMediumScreen ? 3 : 2;\r\n\r\n  const groupGridColumns = isLargeScreen ? 3 : 2;\r\n\r\n  const tileContainerHeight = isLargeScreen ? \"600px\" : \"400px\";\r\n\r\n  return {\r\n    screenSize,\r\n    modalSize,\r\n    tileSize,\r\n    tileGridColumns,\r\n    tileContainerHeight,\r\n    groupGridColumns,\r\n  };\r\n}\r\n\r\nexport default useResponsiveLayout;\r\n","import { Box } from \"theme-ui\";\r\n\r\nimport \"./Spinner.css\";\r\nimport spinnerImage from \"../images/Loading.png\";\r\n\r\nfunction Spinner() {\r\n  return (\r\n    <Box className=\"spinner\">\r\n      <Box\r\n        sx={{\r\n          backgroundImage: `url(${spinnerImage})`,\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          backgroundSize: \"contain\",\r\n        }}\r\n      ></Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Spinner;\r\n","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport { Box } from \"theme-ui\";\r\n\r\nimport Spinner from \"./Spinner\";\r\n\r\ntype LoadingOverlayProps = {\r\n  bg: string;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nfunction LoadingOverlay({ bg, children }: LoadingOverlayProps) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        position: \"absolute\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        top: 0,\r\n        left: 0,\r\n        flexDirection: \"column\",\r\n        zIndex: 2,\r\n      }}\r\n      bg={bg}\r\n    >\r\n      <Spinner />\r\n      {children}\r\n    </Box>\r\n  );\r\n}\r\n\r\nLoadingOverlay.defaultProps = {\r\n  bg: \"muted\",\r\n};\r\n\r\nexport default LoadingOverlay;\r\n","const theme = {\r\n  config: {\r\n    useColorSchemeMediaQuery: false,\r\n  },\r\n  colors: {\r\n    text: \"hsl(210, 50%, 96%)\",\r\n    background: \"hsl(230, 25%, 18%)\",\r\n    primary: \"hsl(260, 100%, 80%)\",\r\n    secondary: \"hsl(290, 100%, 80%)\",\r\n    highlight: \"hsl(260, 20%, 40%)\",\r\n    purple: \"hsl(290, 100%, 80%)\",\r\n    muted: \"hsla(230, 20%, 0%, 20%)\",\r\n    gray: \"hsl(0, 0%, 70%)\",\r\n    overlay: \"hsla(230, 25%, 15%, 80%)\",\r\n    border: \"hsla(210, 50%, 96%, 0.5)\",\r\n    modes: {\r\n      light: {\r\n        text: \"hsl(10, 20%, 20%)\",\r\n        background: \"hsl(10, 10%, 98%)\",\r\n        primary: \"hsl(260, 100%, 80%)\",\r\n        secondary: \"hsl(290, 100%, 80%)\",\r\n        highlight: \"hsl(260, 20%, 70%)\",\r\n        muted: \"hsla(230, 20%, 60%, 20%)\",\r\n        overlay: \"hsla(230, 100%, 97%, 80%)\",\r\n        border: \"hsla(10, 20%, 20%, 0.5)\",\r\n      },\r\n    },\r\n  },\r\n  fonts: {\r\n    body: \"'Bree Serif', Georgia, serif\",\r\n    body2:\r\n      \"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif\",\r\n    heading: \"'Bree Serif', serif\",\r\n    monospace: \"Menlo, monospace\",\r\n    display: \"'Pacifico', Helvetica, sans-serif\",\r\n  },\r\n  fontSizes: [12, 14, 16, 20, 24, 32, 48, 64, 72],\r\n  fontWeights: {\r\n    caption: 200,\r\n    body: 400,\r\n    heading: 400,\r\n    display: 400,\r\n  },\r\n  lineHeights: {\r\n    body: 1.3,\r\n    body2: 1.5,\r\n    display: 1.1,\r\n    heading: 1.25,\r\n  },\r\n  breakpoints: [\"12em\", \"24em\", \"40em\", \"56em\", \"64em\"],\r\n  text: {\r\n    heading: {\r\n      fontFamily: \"heading\",\r\n      fontWeight: \"heading\",\r\n      lineHeight: \"heading\",\r\n      fontSize: 1,\r\n    },\r\n    display: {\r\n      variant: \"text.heading\",\r\n      fontFamily: \"display\",\r\n      fontSize: [5, 6],\r\n      fontWeight: \"display\",\r\n      mt: 3,\r\n    },\r\n    caption: {\r\n      fontFamily: \"body2\",\r\n      fontWeight: \"caption\",\r\n      fontSize: 0,\r\n      color: \"gray\",\r\n    },\r\n    body2: {\r\n      fontFamily: \"body2\",\r\n      fontSize: 0,\r\n      fontWeight: \"body\",\r\n      lineHeight: \"body2\",\r\n    },\r\n  },\r\n  styles: {\r\n    Container: {\r\n      p: 3,\r\n      maxWidth: 1024,\r\n    },\r\n    root: {\r\n      fontFamily: \"body\",\r\n      lineHeight: \"body\",\r\n      fontWeight: \"body\",\r\n    },\r\n    h1: {\r\n      variant: \"text.display\",\r\n    },\r\n    h2: {\r\n      variant: \"text.heading\",\r\n      fontSize: 5,\r\n    },\r\n    h3: {\r\n      variant: \"text.heading\",\r\n      fontSize: 4,\r\n    },\r\n    h4: {\r\n      variant: \"text.heading\",\r\n      fontSize: 3,\r\n    },\r\n    h5: {\r\n      variant: \"text.heading\",\r\n      fontSize: 2,\r\n    },\r\n    h6: {\r\n      variant: \"text.heading\",\r\n      fontSize: 1,\r\n    },\r\n    a: {\r\n      variant: \"text.body2\",\r\n      color: \"text\",\r\n      \"&:hover\": {\r\n        color: \"primary\",\r\n      },\r\n      \"&:active\": {\r\n        color: \"secondary\",\r\n      },\r\n    },\r\n    pre: {\r\n      variant: \"prism\",\r\n      fontFamily: \"monospace\",\r\n      fontSize: 1,\r\n      p: 3,\r\n      color: \"text\",\r\n      bg: \"muted\",\r\n      overflow: \"auto\",\r\n      code: {\r\n        color: \"inherit\",\r\n      },\r\n    },\r\n    code: {\r\n      fontFamily: \"monospace\",\r\n      color: \"secondary\",\r\n      fontSize: 1,\r\n    },\r\n    inlineCode: {\r\n      fontFamily: \"monospace\",\r\n      color: \"secondary\",\r\n      bg: \"muted\",\r\n    },\r\n    hr: {\r\n      border: 0,\r\n      borderBottom: \"1px solid\",\r\n      borderColor: \"muted\",\r\n    },\r\n    img: {\r\n      maxWidth: \"100%\",\r\n    },\r\n    progress: {\r\n      color: \"text\",\r\n      backgroundColor: \"overlay\",\r\n    },\r\n  },\r\n  prism: {\r\n    \".comment,.prolog,.doctype,.cdata,.punctuation,.operator,.entity,.url\": {\r\n      color: \"gray\",\r\n    },\r\n    \".comment\": {\r\n      fontStyle: \"italic\",\r\n    },\r\n    \".property,.tag,.boolean,.number,.constant,.symbol,.deleted,.function,.class-name,.regex,.important,.variable\":\r\n      {\r\n        color: \"purple\",\r\n      },\r\n    \".atrule,.attr-value,.keyword\": {\r\n      color: \"primary\",\r\n    },\r\n    \".selector,.attr-name,.string,.char,.bultin,.inserted\": {\r\n      color: \"secondary\",\r\n    },\r\n  },\r\n  forms: {\r\n    label: {\r\n      fontWeight: 400,\r\n    },\r\n    input: {\r\n      \"&:focus\": {\r\n        outlineColor: \"primary\",\r\n      },\r\n      \"&:disabled\": {\r\n        backgroundColor: \"muted\",\r\n        opacity: 0.5,\r\n        borderColor: \"text\",\r\n      },\r\n      fontFamily: \"body2\",\r\n    },\r\n    slider: {\r\n      \"&:disabled\": {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    textarea: {\r\n      \"&:focus\": {\r\n        outlineColor: \"primary\",\r\n      },\r\n      \"&:disabled\": {\r\n        backgroundColor: \"muted\",\r\n        opacity: 0.5,\r\n        borderColor: \"text\",\r\n      },\r\n      fontFamily: \"body2\",\r\n    },\r\n  },\r\n  buttons: {\r\n    primary: {\r\n      color: \"text\",\r\n      bg: \"transparent\",\r\n      borderStyle: \"solid\",\r\n      borderWidth: \"1px\",\r\n      borderColor: \"text\",\r\n      \"&:hover\": {\r\n        borderColor: \"highlight\",\r\n        cursor: \"pointer\",\r\n      },\r\n      fontFamily: \"body\",\r\n      \"&:focus\": {\r\n        outline: \"none\",\r\n      },\r\n      \"&:active\": {\r\n        borderColor: \"primary\",\r\n      },\r\n      \"&:disabled\": {\r\n        borderColor: \"text\",\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    secondary: {\r\n      color: \"text\",\r\n      bg: \"transparent\",\r\n      border: \"none\",\r\n      fontFamily: \"body\",\r\n      \"&:focus\": {\r\n        outline: \"none\",\r\n      },\r\n      \"&:disabled\": {\r\n        opacity: 0.5,\r\n      },\r\n      \"&:hover\": {\r\n        color: \"primary\",\r\n        cursor: \"pointer\",\r\n      },\r\n      \"&:active\": {\r\n        color: \"secondary\",\r\n      },\r\n    },\r\n    icon: {\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n        color: \"primary\",\r\n      },\r\n      \"&:focus\": {\r\n        outline: \"none\",\r\n      },\r\n      \"&:active\": {\r\n        color: \"secondary\",\r\n      },\r\n      \"&:disabled\": {\r\n        opacity: 0.5,\r\n        color: \"text\",\r\n      },\r\n    },\r\n    close: {\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n        color: \"primary\",\r\n      },\r\n      \"&:focus\": {\r\n        outline: \"none\",\r\n      },\r\n      \"&:active\": {\r\n        color: \"secondary\",\r\n      },\r\n    },\r\n  },\r\n  links: {\r\n    footer: {\r\n      variant: \"text.caption\",\r\n      textDecoration: \"underline\",\r\n      \"&:hover\": {\r\n        textDecorationColor: \"hsl(260, 100%, 80%)\",\r\n        cursor: \"pointer\",\r\n      },\r\n      \"&:active\": {\r\n        textDecorationColor: \"hsl(290, 100%, 80%)\",\r\n      },\r\n    },\r\n  },\r\n  messages: {\r\n    warning: {\r\n      backgroundColor: \"#d65c64\",\r\n      borderLeftColor: \"#ff939b\",\r\n    },\r\n    note: {\r\n      backgroundColor: \"#ca871e\",\r\n      borderLeftColor: \"#ebd2ac\",\r\n    },\r\n  },\r\n};\r\n\r\nexport default theme;\r\n","import { Link as ThemeLink, LinkProps } from \"theme-ui\";\r\nimport { HashLink as RouterLink } from \"react-router-hash-link\";\r\n\r\nfunction Link({ to, ...rest }: { to: string } & LinkProps) {\r\n  return (\r\n    <RouterLink to={to}>\r\n      <ThemeLink as=\"span\" {...rest} />\r\n    </RouterLink>\r\n  );\r\n}\r\n\r\nexport default Link;\r\n","import { Flex } from \"theme-ui\";\r\n\r\nimport Link from \"./Link\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <Flex\r\n      bg=\"muted\"\r\n      sx={{\r\n        height: \"48px\",\r\n        width: \"100%\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        paddingBottom: \"env(safe-area-inset-bottom)\",\r\n      }}\r\n    >\r\n      <Link m={2} to=\"/about\" variant=\"footer\">\r\n        About\r\n      </Link>\r\n      <Link m={2} to=\"/\" variant=\"footer\">\r\n        Home\r\n      </Link>\r\n      <Link m={2} to=\"/faq\" variant=\"footer\">\r\n        FAQ\r\n      </Link>\r\n      <Link m={2} to=\"/release-notes\" variant=\"footer\">\r\n        Release Notes\r\n      </Link>\r\n      <Link m={2} to=\"/how-to\" variant=\"footer\">\r\n        How To\r\n      </Link>\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport FakeStorage from \"../helpers/FakeStorage\";\r\n\r\ntype AuthContextValue = {\r\n  password: string;\r\n  setPassword: React.Dispatch<React.SetStateAction<string>>;\r\n};\r\n\r\nconst AuthContext =\r\n  React.createContext<AuthContextValue | undefined>(undefined);\r\n\r\nlet storage: Storage | FakeStorage;\r\ntry {\r\n  sessionStorage.setItem(\"__test\", \"__test\");\r\n  sessionStorage.removeItem(\"__test\");\r\n  storage = sessionStorage;\r\n} catch (e) {\r\n  console.warn(\"Session storage is disabled, no authentication will be saved\");\r\n  storage = new FakeStorage();\r\n}\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [password, setPassword] = useState<string>(\r\n    storage.getItem(\"auth\") || \"\"\r\n  );\r\n\r\n  useEffect(() => {\r\n    storage.setItem(\"auth\", password);\r\n  }, [password]);\r\n\r\n  const value = {\r\n    password,\r\n    setPassword,\r\n  };\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within a AuthProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default AuthContext;\r\n","import { ChangeEvent, useRef } from \"react\";\r\nimport { Box, Label, Input, Button, Flex, Checkbox } from \"theme-ui\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport shortid from \"shortid\";\r\n\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nimport useSetting from \"../hooks/useSetting\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype StartModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction StartModal({ isOpen, onRequestClose }: StartModalProps) {\r\n  let history = useHistory();\r\n  const { password, setPassword } = useAuth();\r\n\r\n  function handlePasswordChange(event: ChangeEvent<HTMLInputElement>) {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  const [usePassword, setUsePassword] = useSetting<boolean>(\"game.usePassword\");\r\n  function handleUsePasswordChange(event: ChangeEvent<HTMLInputElement>) {\r\n    setUsePassword(event.target.checked);\r\n  }\r\n\r\n  function handleSubmit(event: ChangeEvent<HTMLInputElement>) {\r\n    event.preventDefault();\r\n    if (!usePassword) {\r\n      setPassword(\"\");\r\n    }\r\n    history.push(`/game/${shortid.generate()}`);\r\n  }\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  function focusInput() {\r\n    inputRef.current && inputRef.current.focus();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      onAfterOpen={focusInput}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          maxWidth: \"300px\",\r\n          flexGrow: 1,\r\n        }}\r\n        m={2}\r\n      >\r\n        <Box as=\"form\" onSubmit={handleSubmit}>\r\n          <Label htmlFor=\"password\">Game Password</Label>\r\n          <Input\r\n            my={1}\r\n            id=\"password\"\r\n            name=\"password\"\r\n            value={usePassword ? password : \"\"}\r\n            onChange={handlePasswordChange}\r\n            disabled={!usePassword}\r\n            autoComplete=\"off\"\r\n            ref={inputRef}\r\n          />\r\n          <Box>\r\n            <Label mb={3}>\r\n              <Checkbox\r\n                checked={usePassword}\r\n                onChange={handleUsePasswordChange}\r\n              />\r\n              Use password\r\n            </Label>\r\n          </Box>\r\n          <Flex>\r\n            <Button sx={{ flexGrow: 1 }} disabled={!password && usePassword}>\r\n              Start\r\n            </Button>\r\n          </Flex>\r\n        </Box>\r\n      </Flex>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default StartModal;\r\n","import { useState, useRef, FormEvent, ChangeEvent } from \"react\";\r\nimport { Box, Label, Input, Button, Flex } from \"theme-ui\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype JoinModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction JoinModal({ isOpen, onRequestClose }: JoinModalProps) {\r\n  let history = useHistory();\r\n  const [gameId, setGameId] = useState(\"\");\r\n\r\n  function handleChange(event: ChangeEvent<HTMLInputElement>) {\r\n    setGameId(event.target?.value);\r\n  }\r\n\r\n  function handleSubmit(event: FormEvent<HTMLDivElement>) {\r\n    event.preventDefault();\r\n    history.push(`/game/${gameId}`);\r\n  }\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  function focusInput() {\r\n    inputRef.current?.focus();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      onAfterOpen={focusInput}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          maxWidth: \"300px\",\r\n          flexGrow: 1,\r\n        }}\r\n        m={2}\r\n      >\r\n        <Box as=\"form\" onSubmit={handleSubmit}>\r\n          <Label htmlFor=\"id\">Let me see your identification</Label>\r\n          <Input\r\n            mt={1}\r\n            mb={3}\r\n            id=\"id\"\r\n            name=\"id\"\r\n            value={gameId || \"\"}\r\n            onChange={handleChange}\r\n            ref={inputRef}\r\n          />\r\n          <Flex>\r\n            <Button sx={{ flexGrow: 1 }} disabled={!gameId}>\r\n              Join\r\n            </Button>\r\n          </Flex>\r\n        </Box>\r\n      </Flex>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default JoinModal;\r\n","import React from \"react\";\r\nimport {\r\n  Text,\r\n  TextProps,\r\n  Image as UIImage,\r\n  ImageProps,\r\n  Link as UILink,\r\n  Message,\r\n  Box,\r\n} from \"theme-ui\";\r\nimport ReactMarkdown from \"react-markdown\";\r\n\r\nfunction Paragraph(props: TextProps) {\r\n  return <Text as=\"p\" my={2} variant=\"body2\" {...props} />;\r\n}\r\n\r\nfunction Heading({ level, ...props }: { level: number } & TextProps) {\r\n  const fontSize = level === 1 ? 5 : level === 2 ? 3 : 1;\r\n  return (\r\n    <Text\r\n      mt={2}\r\n      mb={1}\r\n      as={`h${level}` as React.ElementType}\r\n      sx={{ fontSize }}\r\n      variant=\"heading\"\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Image(props: ImageProps) {\r\n  if (props.alt === \"embed:\") {\r\n    return (\r\n      <Box\r\n        as=\"span\"\r\n        sx={{\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          height: 0,\r\n          paddingBottom: \"56.25%\",\r\n          position: \"relative\",\r\n        }}\r\n        my={2}\r\n      >\r\n        <iframe\r\n          src={props.src}\r\n          style={{\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            top: 0,\r\n            bottom: 0,\r\n            left: 0,\r\n            border: 0,\r\n          }}\r\n          title=\"Video\"\r\n        />\r\n      </Box>\r\n    );\r\n  }\r\n  if (props.src?.endsWith(\".mp4\")) {\r\n    return (\r\n      <video\r\n        style={{ width: \"100%\", margin: \"8px 0\" }}\r\n        autoPlay\r\n        muted\r\n        playsInline\r\n        loop\r\n        controls\r\n        src={props.src}\r\n      />\r\n    );\r\n  }\r\n\r\n  return <UIImage mt={2} sx={{ borderRadius: \"4px\" }} {...props} />;\r\n}\r\n\r\nfunction ListItem(props: TextProps) {\r\n  return <Text as=\"li\" variant=\"body2\" my={1} {...props} />;\r\n}\r\n\r\nfunction Code({\r\n  children,\r\n  value,\r\n}: {\r\n  value: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  let variant = \"\";\r\n  if (value.startsWith(\"Warning:\")) {\r\n    variant = \"warning\";\r\n  } else if (value.startsWith(\"Note:\")) {\r\n    variant = \"note\";\r\n  }\r\n  return (\r\n    <Message\r\n      variant={variant}\r\n      color=\"hsl(210, 50%, 96%)\"\r\n      my={2}\r\n      as=\"span\"\r\n      sx={{ display: \"block\" }}\r\n    >\r\n      {children}\r\n    </Message>\r\n  );\r\n}\r\n\r\nfunction Table({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <Text\r\n      as=\"table\"\r\n      my={4}\r\n      style={{ borderCollapse: \"collapse\", width: \"100%\" }}\r\n    >\r\n      {children}\r\n    </Text>\r\n  );\r\n}\r\n\r\nfunction TableHead(props: TextProps) {\r\n  return (\r\n    <Text\r\n      as=\"thead\"\r\n      variant=\"heading\"\r\n      sx={{ textAlign: \"left\", \"& > tr\": { borderBottomWidth: \"2px\" } }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TableBody(props: TextProps) {\r\n  return (\r\n    <Text\r\n      as=\"tbody\"\r\n      variant=\"body2\"\r\n      sx={{ borderBottomWidth: \"1px\", \"& > tr\": { borderBottomWidth: \"1px\" } }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction TableRow({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <Text\r\n      as=\"tr\"\r\n      sx={{\r\n        borderBottomStyle: \"solid\",\r\n        borderBottomColor: \"border\",\r\n      }}\r\n    >\r\n      {children}\r\n    </Text>\r\n  );\r\n}\r\n\r\nfunction TableCell({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <Text as=\"td\" p={2}>\r\n      {children}\r\n    </Text>\r\n  );\r\n}\r\n\r\nfunction Link({ href, children }: { href: string; children: React.ReactNode }) {\r\n  return <UILink href={href}>{children}</UILink>;\r\n}\r\n\r\nfunction Markdown({\r\n  source,\r\n  assets,\r\n}: {\r\n  source: string;\r\n  assets: Record<string, string>;\r\n}) {\r\n  const renderers = {\r\n    paragraph: Paragraph,\r\n    heading: Heading,\r\n    image: Image,\r\n    link: Link,\r\n    listItem: ListItem,\r\n    inlineCode: Code,\r\n    table: Table,\r\n    tableHead: TableHead,\r\n    tableBody: TableBody,\r\n    tableRow: TableRow,\r\n    tableCell: TableCell,\r\n  };\r\n  return (\r\n    <ReactMarkdown\r\n      source={source}\r\n      renderers={renderers}\r\n      transformImageUri={(uri) => assets[uri] || uri}\r\n    />\r\n  );\r\n}\r\n\r\nMarkdown.defaultProps = {\r\n  assets: {},\r\n};\r\n\r\nexport default Markdown;\r\n","import { Box, Label, Text } from \"theme-ui\";\r\nimport raw from \"raw.macro\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport Markdown from \"../components/Markdown\";\r\nimport Link from \"../components/Link\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\nconst gettingStarted = raw(\"../docs/howTo/gettingStarted.md\");\r\n\r\ntype GettingStartedModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction GettingStartedModal({\r\n  isOpen,\r\n  onRequestClose,\r\n}: GettingStartedModalProps) {\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{ content: { maxWidth: \"450px\" } }}\r\n    >\r\n      <Box>\r\n        <Label py={2}>Getting Started</Label>\r\n        <Markdown source={gettingStarted} />\r\n        <Text variant=\"body2\" my={2}>\r\n          For more tutorials visit the <Link to=\"/how-to\">How To</Link> page\r\n        </Text>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default GettingStartedModal;\r\n","function HelpIcon() {\r\n  return (\r\n    <svg\r\n      width=\"16\"\r\n      height=\"16\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n      style={{ margin: \"0 4px\" }}\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm1.61-9.96c-2.06-.3-3.88.97-4.43 2.79-.18.58.26 1.17.87 1.17h.2c.41 0 .74-.29.88-.67.32-.89 1.27-1.5 2.3-1.28.95.2 1.65 1.13 1.57 2.1-.1 1.34-1.62 1.63-2.45 2.88 0 .01-.01.01-.01.02-.01.02-.02.03-.03.05-.09.15-.18.32-.25.5-.01.03-.03.05-.04.08-.01.02-.01.04-.02.07-.12.34-.2.75-.2 1.25h2c0-.42.11-.77.28-1.07.02-.03.03-.06.05-.09.08-.14.18-.27.28-.39.01-.01.02-.03.03-.04.1-.12.21-.23.33-.34.96-.91 2.26-1.65 1.99-3.56-.24-1.74-1.61-3.21-3.35-3.47z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default HelpIcon;\r\n","function SocialRedditIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm5 4.75c-.491 0-.912.286-1.116.698l-2.908-.619a.312.312 0 00-.37.24l-.891 4.186c-1.863.052-3.537.61-4.749 1.483a1.75 1.75 0 10-1.926 2.858c-.027.174-.042.35-.042.529 0 2.692 3.134 4.875 7 4.875s7-2.183 7-4.875c0-.178-.014-.353-.041-.526a1.75 1.75 0 10-1.923-2.858c-1.196-.863-2.844-1.42-4.68-1.485l.797-3.75 2.605.553A1.247 1.247 0 0018.25 6c0-.69-.56-1.25-1.25-1.25zM9.492 16.095c.538.538 1.688.728 2.51.728.821 0 1.972-.19 2.51-.728a.324.324 0 01.458.458c-.853.852-2.488.918-2.969.918-.48 0-2.115-.066-2.967-.918a.324.324 0 01.458-.458zM14.75 12c.69 0 1.25.561 1.25 1.25 0 .69-.56 1.25-1.25 1.25s-1.25-.56-1.25-1.25c0-.689.56-1.25 1.25-1.25zm-5.5 0c.69 0 1.25.56 1.25 1.25s-.56 1.25-1.25 1.25c-.689 0-1.25-.56-1.25-1.25S8.561 12 9.25 12z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SocialRedditIcon;\r\n","function SocialTwitterIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M24 12c0 6.63-5.37 12-12 12S0 18.63 0 12 5.37 0 12 0s12 5.37 12 12zM9.804 18.33c5.322 0 8.232-4.41 8.232-8.232 0-.126 0-.252-.006-.372a5.927 5.927 0 001.446-1.5 5.872 5.872 0 01-1.662.456c.6-.36 1.056-.924 1.272-1.602-.558.33-1.176.57-1.836.702a2.894 2.894 0 00-4.926 2.64A8.208 8.208 0 016.36 7.398c-.246.426-.39.924-.39 1.452 0 1.002.51 1.89 1.29 2.406a2.842 2.842 0 01-1.308-.36v.036c0 1.404.996 2.568 2.322 2.838a2.884 2.884 0 01-1.308.048 2.889 2.889 0 002.7 2.01 5.816 5.816 0 01-4.284 1.194 8.06 8.06 0 004.422 1.308\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SocialTwitterIcon;\r\n","function SocialYouTubeIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M12 0c6.63 0 12 5.37 12 12s-5.37 12-12 12S0 18.63 0 12 5.37 0 12 0zm.28 6.001h-.56c-1.073.006-4.902.047-5.971.336A2.01 2.01 0 004.334 7.76c-.297 1.117-.33 3.31-.334 3.785v.183c.004.474.037 2.668.334 3.784a2.01 2.01 0 001.415 1.424c1.105.298 5.156.332 6.068.336h.366c.912-.004 4.963-.038 6.068-.336a2.01 2.01 0 001.415-1.424C20 14.257 20 11.636 20 11.636s0-2.62-.334-3.876a2.01 2.01 0 00-1.415-1.423c-1.07-.289-4.898-.33-5.97-.336zm-1.916 3.256l4.181 2.38-4.181 2.378V9.257z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SocialYouTubeIcon;\r\n","function SocialPatreonIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M24 12c0 6.63-5.37 12-12 12S0 18.63 0 12 5.37 0 12 0s12 5.37 12 12Zm-9.491-7A5.515 5.515 0 0 0 9 10.508C9 13.536 11.471 16 14.509 16A5.498 5.498 0 0 0 20 10.508C20 7.471 17.537 5 14.509 5M6 19h2V5H6v14Z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SocialPatreonIcon;\r\n","export default __webpack_public_path__ + \"static/media/Owlington.bb5589cf.png\";","// Arquivo: owlbear-rodeo-legacy/src/api/client.ts\r\n\r\n// Verifica se est no contexto de browser (no Web Worker)\r\nconst isBrowser = typeof window !== 'undefined';\r\nconst API_BASE = isBrowser && (window as any).OWLBEAR_CONFIG?.apiBase \r\n  ? (window as any).OWLBEAR_CONFIG.apiBase \r\n  : 'http://127.0.0.1:8000/api';\r\n\r\nclass ApiClient {\r\n  private baseUrl: string;\r\n\r\n  constructor(baseUrl: string) {\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}) {\r\n    const url = `${this.baseUrl}${endpoint}`;\r\n    \r\n    const response = await fetch(url, {\r\n      ...options,\r\n      credentials: 'include', // Envia cookies de sesso\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`HTTP ${response.status}: ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  // ==================== GAME/SESSION ====================\r\n  \r\n  async getSession(sessionId: string | number) {\r\n    return this.request(`/owlbear/session?sessionId=${sessionId}`);\r\n  }\r\n\r\n  async createSession(sessaoId: number) {\r\n    return this.request('/owlbear/session', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ sessao_id: sessaoId }),\r\n    });\r\n  }\r\n\r\n  // ==================== MAPS ====================\r\n  \r\n  async getMaps(gameId: string) {\r\n    const result = await this.request(`/owlbear/maps?gameId=${gameId}`);\r\n    return Array.isArray(result) ? result : [];\r\n  }\r\n\r\n  async createMap(data: any) {\r\n    return this.request('/owlbear/maps', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateMap(id: string, data: any) {\r\n    return this.request(`/owlbear/maps/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteMap(id: string) {\r\n    return this.request(`/owlbear/maps/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  // ==================== TOKENS ====================\r\n  \r\n  async getTokens(mapId: string) {\r\n    const result = await this.request(`/owlbear/tokens?mapId=${mapId}`);\r\n    return Array.isArray(result) ? result : [];\r\n  }\r\n\r\n  async createToken(data: any) {\r\n    return this.request('/owlbear/tokens', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateToken(id: string, data: any) {\r\n    return this.request(`/owlbear/tokens/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteToken(id: string) {\r\n    return this.request(`/owlbear/tokens/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n}\r\n\r\nexport const api = new ApiClient(API_BASE);","// Arquivo: owlbear-rodeo-legacy/src/routes/Home.tsx\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Flex, Button, Image, Text, IconButton, Link } from \"theme-ui\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nimport Footer from \"../components/Footer\";\r\n\r\nimport StartModal from \"../modals/StartModal\";\r\nimport JoinModal from \"../modals/JoinModal\";\r\nimport GettingStartedModal from \"../modals/GettingStartedModal\";\r\n\r\nimport HelpIcon from \"../icons/HelpIcon\";\r\n\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nimport RedditIcon from \"../icons/SocialRedditIcon\";\r\nimport TwitterIcon from \"../icons/SocialTwitterIcon\";\r\nimport YouTubeIcon from \"../icons/SocialYouTubeIcon\";\r\nimport SocialPatreonIcon from \"../icons/SocialPatreonIcon\";\r\n\r\nimport owlington from \"../images/Owlington.png\";\r\nimport { api } from \"../api/client\";\r\n\r\n\r\n\r\nfunction Home() {\r\n  console.log(\" Home.tsx carregado!\");\r\n  \r\n  const [isStartModalOpen, setIsStartModalOpen] = useState(false);\r\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState(false);\r\n  const [isGettingStartedModalOpen, setIsGettingStartedModalOpen] =\r\n    useState(false);\r\n  const [isAutoStarting, setIsAutoStarting] = useState(false);\r\n  \r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  // Reset password on visiting home\r\n  const { setPassword } = useAuth();\r\n  useEffect(() => {\r\n    setPassword(\"\");\r\n  }, [setPassword]);\r\n\r\n  // AUTO-START: Detecta se foi carregado via Laravel\r\n  useEffect(() => {\r\n    console.log(\" useEffect executado!\");\r\n    \r\n    async function checkLaravelSession() {\r\n      try {\r\n        // PRIORIDADE 1: Ler da query string (mais confivel)\r\n        const params = new URLSearchParams(location.search);\r\n        let sessionId = params.get('laravelSession');\r\n        let userId = params.get('laravelUser');\r\n        let role = params.get('laravelRole');\r\n        let userName = params.get('laravelName');\r\n        \r\n        console.log(\" Query params:\", { sessionId, userId, role, userName });\r\n        \r\n        // PRIORIDADE 2: Fallback para window.OWLBEAR_CONFIG\r\n        if (!sessionId) {\r\n          const config = (window as any).OWLBEAR_CONFIG;\r\n          console.log(\" Tentando OWLBEAR_CONFIG:\", config);\r\n          \r\n          if (config) {\r\n            sessionId = config.sessionId;\r\n            userId = config.userId;\r\n            role = config.role;\r\n            userName = config.userName;\r\n          }\r\n        }\r\n        \r\n        if (sessionId) {\r\n          console.log(\" Sesso detectada! Iniciando auto-start...\", { sessionId, userId, role, userName });\r\n          setIsAutoStarting(true);\r\n          \r\n          // Busca ou cria o game no Laravel\r\n          console.log(\" Chamando API:\", `http://127.0.0.1:8000/api/owlbear/session?sessionId=${sessionId}`);\r\n          \r\n          const session = await api.getSession(sessionId);\r\n          \r\n          console.log(\" Sesso criada/encontrada:\", session);\r\n\r\n          // Salva dados no localStorage (ser usado para identificao no MySQL)\r\n          if (sessionId) {\r\n            localStorage.setItem('owlbear_session_id', sessionId);\r\n          }\r\n          if (userId) {\r\n            localStorage.setItem('owlbear_user_id', userId);\r\n          }\r\n          if (role) {\r\n            localStorage.setItem('owlbear_role', role);\r\n          }\r\n          if (userName) {\r\n            const decodedName = decodeURIComponent(userName);\r\n            localStorage.setItem('owlbear_user_name', decodedName);\r\n            console.log(\" Nome salvo no localStorage:\", decodedName);\r\n          }\r\n\r\n          console.log(\" Redirecionando para:\", `/game/${session.id}`);\r\n          \r\n          // Redireciona imediatamente\r\n          history.push(`/game/${session.id}`);\r\n        } else {\r\n          console.log(\" Nenhuma sesso Laravel detectada - exibindo tela normal\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\" Erro no auto-start:\", error);\r\n        alert(`Erro ao conectar: ${error}`);\r\n        setIsAutoStarting(false);\r\n      }\r\n    }\r\n\r\n    checkLaravelSession();\r\n  }, [history, location]);\r\n\r\n  // Se est fazendo auto-start, mostra loading\r\n  if (isAutoStarting) {\r\n    console.log(\" Mostrando tela de loading...\");\r\n    return (\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          minHeight: \"100%\",\r\n          backgroundColor: \"#222639\",\r\n        }}\r\n      >\r\n        <Text variant=\"heading\" mb={3} sx={{ color: \"white\" }}>\r\n          Iniciando sesso...\r\n        </Text>\r\n        <Image src={owlington} sx={{ width: \"150px\" }} />\r\n        <Text variant=\"body\" mt={3} sx={{ color: \"white\", opacity: 0.7 }}>\r\n          Conectando ao servidor...\r\n        </Text>\r\n      </Flex>\r\n    );\r\n  }\r\n\r\n  console.log(\" Renderizando Home normal\");\r\n\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        minHeight: \"100%\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          maxWidth: \"300px\",\r\n          flexGrow: 1,\r\n        }}\r\n        mb={2}\r\n      >\r\n        <Text variant=\"display\" as=\"h1\" sx={{ textAlign: \"center\" }}>\r\n          Owlbear Rodeo\r\n        </Text>\r\n        <Image src={owlington} m={2} />\r\n        <Button\r\n          variant=\"secondary\"\r\n          m={2}\r\n          onClick={() => setIsGettingStartedModalOpen(true)}\r\n          sx={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          Getting Started <HelpIcon />\r\n        </Button>\r\n        <Button m={2} onClick={() => setIsStartModalOpen(true)}>\r\n          Start Game\r\n        </Button>\r\n        <Button m={2} onClick={() => setIsJoinModalOpen(true)}>\r\n          Join Game\r\n        </Button>\r\n        <Text variant=\"caption\" as=\"p\" sx={{ textAlign: \"center\" }}>\r\n          Legacy v{process.env.REACT_APP_VERSION}\r\n        </Text>\r\n        <Button\r\n          as=\"a\"\r\n          // @ts-ignore\r\n          href=\"https://owlbear.rodeo/\"\r\n          mt={4}\r\n          mx={2}\r\n          mb={2}\r\n          sx={{\r\n            display: \"flex\",\r\n            alignItems: \"flex-end\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          Owlbear Rodeo 2.0\r\n        </Button>\r\n        <Flex mb={4} mt={0} sx={{ justifyContent: \"center\" }}>\r\n          <Link href=\"https://www.reddit.com/r/OwlbearRodeo/\">\r\n            <IconButton title=\"Reddit\" aria-label=\"Reddit\">\r\n              <RedditIcon />\r\n            </IconButton>\r\n          </Link>\r\n          <Link href=\"https://twitter.com/OwlbearRodeo\">\r\n            <IconButton title=\"Twitter\" aria-label=\"Twitter\">\r\n              <TwitterIcon />\r\n            </IconButton>\r\n          </Link>\r\n          <Link href=\"https://www.youtube.com/channel/UCePe1wJC53_7fbBbSECG7YQ\">\r\n            <IconButton title=\"YouTube\" aria-label=\"YouTube\">\r\n              <YouTubeIcon />\r\n            </IconButton>\r\n          </Link>\r\n          <Link href=\"https://patreon.com/owlbearrodeo\">\r\n            <IconButton title=\"Patreon\" aria-label=\"Patreon\">\r\n              <SocialPatreonIcon />\r\n            </IconButton>\r\n          </Link>\r\n        </Flex>\r\n        <JoinModal\r\n          isOpen={isJoinModalOpen}\r\n          onRequestClose={() => setIsJoinModalOpen(false)}\r\n        />\r\n        <StartModal\r\n          isOpen={isStartModalOpen}\r\n          onRequestClose={() => setIsStartModalOpen(false)}\r\n        />\r\n        <GettingStartedModal\r\n          isOpen={isGettingStartedModalOpen}\r\n          onRequestClose={() => setIsGettingStartedModalOpen(false)}\r\n        />\r\n      </Flex>\r\n      <Footer />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default Home;","function ReconnectingIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M.01 0h24v24h-24V0z\" fill=\"none\" />\r\n      <path d=\"M12 4V2.21c0-.45-.54-.67-.85-.35l-2.8 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.32.31.86.09.86-.36V6c3.31 0 6 2.69 6 6 0 .79-.15 1.56-.44 2.25-.15.36-.04.77.23 1.04.51.51 1.37.33 1.64-.34.37-.91.57-1.91.57-2.95 0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-.79.15-1.56.44-2.25.15-.36.04-.77-.23-1.04-.51-.51-1.37-.33-1.64.34C4.2 9.96 4 10.96 4 12c0 4.42 3.58 8 8 8v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V18z\">\r\n        <animateTransform\r\n          attributeName=\"transform\"\r\n          attributeType=\"XML\"\r\n          type=\"rotate\"\r\n          from=\"360 12 12\"\r\n          to=\"0 12 12\"\r\n          dur=\"2s\"\r\n          repeatCount=\"indefinite\"\r\n        />\r\n      </path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ReconnectingIcon;\r\n","import { Flex } from \"theme-ui\";\r\n\r\nimport Banner from \"./Banner\";\r\nimport ReconnectingIcon from \"../../icons/ReconnectingIcon\";\r\n\r\nfunction ReconnectBanner({ isOpen }: { isOpen: boolean }) {\r\n  return (\r\n    <Banner\r\n      isOpen={isOpen}\r\n      onRequestClose={() => {}}\r\n      allowClose={false}\r\n      backgroundColor=\"transparent\"\r\n    >\r\n      <Flex\r\n        sx={{\r\n          width: \"28px\",\r\n          height: \"28px\",\r\n          borderRadius: \"28px\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n        bg=\"overlay\"\r\n        title=\"Disconnected. Attempting to reconnect...\"\r\n        aria-label=\"Disconnected. Attempting to reconnect...\"\r\n      >\r\n        <ReconnectingIcon />\r\n      </Flex>\r\n    </Banner>\r\n  );\r\n}\r\n\r\nexport default ReconnectBanner;\r\n","function PointerToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M10 5.74v-.19c0-.68-.71-1.11-1.32-.82-.19.09-.36.2-.54.3L9.6 6.49c.24-.18.4-.45.4-.75zM20 12c0-2.21-.91-4.2-2.36-5.64l1.51-1.51c.31-.31.09-.85-.36-.85H14v4.79c0 .45.54.67.85.35l1.39-1.39C17.32 8.85 18 10.34 18 12c0 .85-.18 1.66-.5 2.39l1.48 1.48C19.62 14.72 20 13.41 20 12zM3.57 4.7c-.39.39-.39 1.02 0 1.41l1.65 1.65C4.45 9 4 10.44 4 12c0 2.21.91 4.2 2.36 5.64l-1.51 1.51c-.31.31-.09.85.36.85H9.5c.28 0 .5-.22.5-.5v-4.29c0-.45-.54-.67-.85-.35l-1.39 1.39C6.68 15.15 6 13.66 6 12c0-1 .26-1.93.69-2.76l8.07 8.07c-.01.02-.01.02-.01.04-.43.12-.75.48-.75.91v.18c0 .68.71 1.11 1.32.82.31-.14.61-.31.9-.49l1.87 1.87c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L4.98 4.7c-.39-.39-1.02-.39-1.41 0z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default PointerToolIcon;\r\n","import { Flex } from \"theme-ui\";\r\n\r\nimport Banner from \"./Banner\";\r\nimport OfflineIcon from \"../../icons/OfflineIcon\";\r\n\r\nfunction OfflineBanner({ isOpen }: { isOpen: boolean }) {\r\n  return (\r\n    <Banner\r\n      isOpen={isOpen}\r\n      onRequestClose={() => {}}\r\n      allowClose={false}\r\n      backgroundColor=\"transparent\"\r\n    >\r\n      <Flex\r\n        sx={{\r\n          width: \"28px\",\r\n          height: \"28px\",\r\n          borderRadius: \"28px\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n        bg=\"overlay\"\r\n        title=\"Unable to connect to game, refresh to reconnect.\"\r\n        aria-label=\"Unable to connect to game, refresh to reconnect.\"\r\n      >\r\n        <OfflineIcon />\r\n      </Flex>\r\n    </Banner>\r\n  );\r\n}\r\n\r\nexport default OfflineBanner;\r\n","import React, { useState, useRef, useContext, useCallback } from \"react\";\r\n\r\ntype MapLoadingProgress = {\r\n  count: number;\r\n  total: number;\r\n};\r\n\r\ntype MapLoadingProgressUpdate = MapLoadingProgress & {\r\n  id: string;\r\n};\r\n\r\ntype MapLoadingContextValue = {\r\n  isLoading: boolean;\r\n  assetLoadStart: (id: string) => void;\r\n  assetProgressUpdate: (update: MapLoadingProgressUpdate) => void;\r\n  loadingProgressRef: React.MutableRefObject<number>;\r\n};\r\n\r\nconst MapLoadingContext =\r\n  React.createContext<MapLoadingContextValue | undefined>(undefined);\r\n\r\nexport function MapLoadingProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  // Mapping from asset id to the count and total number of pieces loaded\r\n  const assetProgressRef = useRef<Record<string, MapLoadingProgress>>({});\r\n  // Loading progress of all assets between 0 and 1\r\n  const loadingProgressRef = useRef<number>(0);\r\n\r\n  const assetLoadStart = useCallback((id) => {\r\n    setIsLoading(true);\r\n    // Add asset at a 0% progress\r\n    assetProgressRef.current = {\r\n      ...assetProgressRef.current,\r\n      [id]: { count: 0, total: 1 },\r\n    };\r\n  }, []);\r\n\r\n  const assetProgressUpdate = useCallback(({ id, count, total }) => {\r\n    assetProgressRef.current = {\r\n      ...assetProgressRef.current,\r\n      [id]: { count, total },\r\n    };\r\n    // Update loading progress\r\n    let complete = 0;\r\n    const progresses = Object.values(assetProgressRef.current);\r\n    for (let progress of progresses) {\r\n      complete += progress.count / progress.total;\r\n    }\r\n    loadingProgressRef.current = complete / progresses.length;\r\n    // All loading is complete\r\n    if (loadingProgressRef.current === 1) {\r\n      setIsLoading(false);\r\n      assetProgressRef.current = {};\r\n    }\r\n  }, []);\r\n\r\n  const value = {\r\n    assetLoadStart,\r\n    isLoading,\r\n    assetProgressUpdate,\r\n    loadingProgressRef,\r\n  };\r\n\r\n  return (\r\n    <MapLoadingContext.Provider value={value}>\r\n      {children}\r\n    </MapLoadingContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useMapLoading() {\r\n  const context = useContext(MapLoadingContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useMapLoading must be used within a MapLoadingProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default MapLoadingContext;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { Progress } from \"theme-ui\";\r\n\r\ntype LoadingBarProps = {\r\n  isLoading: boolean;\r\n  loadingProgressRef: React.MutableRefObject<number>;\r\n};\r\n\r\nfunction LoadingBar({ isLoading, loadingProgressRef }: LoadingBarProps) {\r\n  const requestRef = useRef<number>();\r\n  const progressBarRef = useRef<HTMLProgressElement>(null);\r\n\r\n  // Use an animation frame to update the progress bar\r\n  // This bypasses react allowing the animation to be smooth\r\n  useEffect(() => {\r\n    function animate() {\r\n      if (!isLoading) {\r\n        return;\r\n      }\r\n      requestRef.current = requestAnimationFrame(animate);\r\n      if (progressBarRef.current) {\r\n        progressBarRef.current.value = loadingProgressRef.current;\r\n      }\r\n    }\r\n\r\n    requestRef.current = requestAnimationFrame(animate);\r\n\r\n    return () => {\r\n      if (requestRef.current !== undefined) {\r\n        cancelAnimationFrame(requestRef.current);\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isLoading]);\r\n\r\n  return (\r\n    <Progress\r\n      ref={progressBarRef}\r\n      max={1}\r\n      value={0}\r\n      m={0}\r\n      sx={{ width: \"100%\", borderRadius: 0, height: \"4px\" }}\r\n      color=\"primary\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default LoadingBar;\r\n","import { Box } from \"theme-ui\";\r\n\r\nimport { useMapLoading } from \"../../contexts/MapLoadingContext\";\r\n\r\nimport LoadingBar from \"../LoadingBar\";\r\n\r\nfunction MapLoadingOverlay() {\r\n  const { isLoading, loadingProgressRef } = useMapLoading();\r\n\r\n  if (!isLoading) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n      <Box\r\n        sx={{\r\n          position: \"absolute\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          flexDirection: \"column\",\r\n          zIndex: 2,\r\n        }}\r\n        bg=\"overlay\"\r\n      >\r\n        <LoadingBar\r\n          isLoading={isLoading}\r\n          loadingProgressRef={loadingProgressRef}\r\n        />\r\n      </Box>\r\n    );\r\n}\r\n\r\nexport default MapLoadingOverlay;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Text } from \"theme-ui\";\r\n\r\nimport LoadingOverlay from \"./LoadingOverlay\";\r\n\r\nimport { shuffle } from \"../helpers/shared\";\r\n\r\nconst facts = [\r\n  \"Owls can rotate their necks 270 degrees\",\r\n  \"Not all owls hoot\",\r\n  \"Owl flight is almost completely silent\",\r\n  \"Owls are used to represent the Goddess Athena in Greek mythology\",\r\n  \"Owls have the best night vision of any animal\",\r\n  \"Bears can run up to 40 mi (~64 km) per hour \",\r\n  \"A hibernating bears heart beats at 8 bpm\",\r\n  \"Bears can see in colour\",\r\n  \"Koala bears are not bears\",\r\n  \"A polar bear can swim up to 100 mi (~161 km) without resting\",\r\n  \"A group of bears is called a sleuth or sloth\",\r\n  \"Not all bears hibernate\",\r\n];\r\n\r\nfunction UpgradingLoadingOverlay() {\r\n  const [subText, setSubText] = useState<string>();\r\n\r\n  useEffect(() => {\r\n    let index = 0;\r\n    let randomFacts = shuffle(facts);\r\n\r\n    function updateFact() {\r\n      setSubText(randomFacts[index % (randomFacts.length - 1)]);\r\n      index += 1;\r\n    }\r\n\r\n    // Show first fact after 10 seconds then every 20 seconds after that\r\n    let interval: NodeJS.Timeout;\r\n    let timeout = setTimeout(() => {\r\n      updateFact();\r\n      interval = setInterval(() => {\r\n        updateFact();\r\n      }, 20 * 1000);\r\n    }, 10 * 1000);\r\n\r\n    return () => {\r\n      clearTimeout(timeout);\r\n      if (interval) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <LoadingOverlay>\r\n      <Text as=\"p\" variant=\"body2\" m={1}>\r\n        Database upgrading, please wait...\r\n      </Text>\r\n      {subText && (\r\n        <>\r\n          <Text\r\n            sx={{ maxWidth: \"200px\", textAlign: \"center\" }}\r\n            as=\"p\"\r\n            variant=\"caption\"\r\n            m={1}\r\n          >\r\n            We're still working on the upgrade. In the meantime, did you know?\r\n          </Text>\r\n          <Text\r\n            sx={{ maxWidth: \"200px\", textAlign: \"center\" }}\r\n            as=\"p\"\r\n            variant=\"body2\"\r\n          >\r\n            {subText}\r\n          </Text>\r\n        </>\r\n      )}\r\n    </LoadingOverlay>\r\n  );\r\n}\r\n\r\nexport default UpgradingLoadingOverlay;\r\n","import { useState, useRef, ChangeEvent, FormEvent } from \"react\";\r\nimport { Box, Input, Button, Label, Flex } from \"theme-ui\";\r\n\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\ntype AuthModalProps = {\r\n  isOpen: boolean;\r\n  onSubmit: (newPassword: string) => void;\r\n};\r\n\r\nfunction AuthModal({ isOpen, onSubmit }: AuthModalProps) {\r\n  const { password, setPassword } = useAuth();\r\n  const [tmpPassword, setTempPassword] = useState<string>(password);\r\n\r\n  function handleChange(event: ChangeEvent<HTMLInputElement>): void {\r\n    setTempPassword(event.target?.value);\r\n  }\r\n\r\n  function handleSubmit(event: FormEvent<HTMLElement>): void {\r\n    event.preventDefault();\r\n    setPassword(tmpPassword);\r\n    onSubmit(tmpPassword);\r\n  }\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  function focusInput(): void {\r\n    inputRef.current && inputRef.current?.focus();\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} allowClose={false} onAfterOpen={focusInput}>\r\n      <Box as=\"form\" onSubmit={handleSubmit}>\r\n        <Label py={2} htmlFor=\"password\">\r\n          Enter password\r\n        </Label>\r\n        <Input\r\n          id=\"password\"\r\n          value={tmpPassword}\r\n          onChange={handleChange}\r\n          ref={inputRef}\r\n          autoComplete=\"off\"\r\n        />\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }}>Join</Button>\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default AuthModal;\r\n","import { Box, Label, Flex, Button, Text } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype GameExpiredModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction GameExpiredModal({ isOpen, onRequestClose }: GameExpiredModalProps) {\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{ content: { maxWidth: \"450px\" } }}\r\n    >\r\n      <Box>\r\n        <Label py={2}>Game Timed Out</Label>\r\n        <Text as=\"p\" mb={2} variant=\"caption\">\r\n          Reselect your map to pick up where you left off.\r\n        </Text>\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }} m={1} ml={0} onClick={onRequestClose}>\r\n            Ok\r\n          </Button>\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default GameExpiredModal;\r\n","import { Box, Label, Text } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nfunction ForceUpdateModal({ isOpen }: { isOpen: boolean }) {\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      allowClose={false}\r\n      style={{ content: { maxWidth: \"450px\" } }}\r\n    >\r\n      <Box>\r\n        <Label py={2}>New Update Available</Label>\r\n        <Text as=\"p\" mb={2} variant=\"caption\">\r\n          Please refresh your browser to update to the latest version.\r\n        </Text>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ForceUpdateModal;\r\n","import { Box, Label, Flex, Button, Text } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype MaintenanceModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction MaintenanceModal({ isOpen, onRequestClose }: MaintenanceModalProps) {\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{ content: { maxWidth: \"450px\" } }}\r\n    >\r\n      <Box>\r\n        <Label py={2}>Site under maintenance</Label>\r\n        <Text as=\"p\" mb={2} variant=\"caption\">\r\n          Continue offline?\r\n        </Text>\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }} m={1} ml={0} onClick={onRequestClose}>\r\n            Ok\r\n          </Button>\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default MaintenanceModal;\r\n","import React, { useContext } from \"react\";\r\nimport Konva from \"konva\";\r\n\r\nexport type MapStage = React.MutableRefObject<Konva.Stage | null>;\r\n\r\nconst MapStageContext = React.createContext<MapStage | undefined>(undefined);\r\nexport const MapStageProvider = MapStageContext.Provider;\r\n\r\nexport function useMapStage() {\r\n  const context = useContext(MapStageContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useMapStage must be used within a MapStageProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default MapStageContext;\r\n","import { ModelJSON } from \"@tensorflow/tfjs-core/dist/io/types\";\r\nimport blobToBuffer from \"../helpers/blobToBuffer\";\r\n\r\nclass Model {\r\n  config: ModelJSON;\r\n  weightsMapping: { [path: string]: string };\r\n  constructor(config: ModelJSON, weightsMapping: { [path: string]: string }) {\r\n    this.config = config;\r\n    this.weightsMapping = weightsMapping;\r\n  }\r\n\r\n  async load() {\r\n    // Load weights from the manifest then fetch them into an ArrayBuffer\r\n    let buffers: ArrayBuffer[] = [];\r\n    if (this.config === undefined) {\r\n      return;\r\n    }\r\n    const manifest = this.config?.weightsManifest[0];\r\n    for (let path of manifest.paths) {\r\n      const url = this.weightsMapping[path];\r\n      const response = await fetch(url);\r\n      const buffer = await response.arrayBuffer();\r\n      buffers.push(buffer);\r\n    }\r\n    const merged = new Blob(buffers);\r\n    const weightData = await blobToBuffer(merged);\r\n    const weightSpecs = manifest.weights;\r\n\r\n    const modelArtifacts = {\r\n      modelTopology: this.config.modelTopology,\r\n      format: this.config.format,\r\n      generatedBy: this.config.generatedBy,\r\n      convertedBy: this.config.convertedBy,\r\n      weightData,\r\n      weightSpecs,\r\n    };\r\n    return modelArtifacts;\r\n  }\r\n}\r\n\r\nexport default Model;\r\n","export default __webpack_public_path__ + \"static/media/group1-shard1of1.3e53df0b.bin\";","import Model from \"../Model\";\r\n\r\nimport config from \"./model.json\";\r\nimport weights from \"./group1-shard1of1.bin\";\r\nimport { LayersModel } from \"@tensorflow/tfjs\";\r\nimport { ModelJSON } from \"@tensorflow/tfjs-core/dist/io/types\";\r\n\r\nclass GridSizeModel extends Model {\r\n  // Store model as static to prevent extra network requests\r\n  static model: LayersModel;\r\n  // Load tensorflow dynamically\r\n  static tf: any;\r\n  constructor() {\r\n    super(config as ModelJSON, { \"group1-shard1of1.bin\": weights });\r\n  }\r\n\r\n  async predict(imageData: ImageData) {\r\n    if (!GridSizeModel.tf) {\r\n      GridSizeModel.tf = await import(\"@tensorflow/tfjs\");\r\n    }\r\n    const tf = GridSizeModel.tf;\r\n\r\n    if (!GridSizeModel.model) {\r\n      GridSizeModel.model = await tf.loadLayersModel(this);\r\n    }\r\n    const model = GridSizeModel.model;\r\n\r\n    const prediction = tf.tidy(() => {\r\n      const image = tf.browser.fromPixels(imageData, 1).toFloat();\r\n      const normalized = image.div(tf.scalar(255.0));\r\n      const batched = tf.expandDims(normalized);\r\n      return model.predict(batched);\r\n    });\r\n    const data = await prediction.data();\r\n    return data[0];\r\n  }\r\n}\r\n\r\nexport default GridSizeModel;\r\n","/**\r\n * Vector class with x, y, z and static helper methods\r\n */\r\nclass Vector3 {\r\n  /**\r\n   * @type {number} x - X component of the vector\r\n   */\r\n  x: number;\r\n  /**\r\n   * @type {number} y - Y component of the vector\r\n   */\r\n  y: number;\r\n  /**\r\n   * @type {number} z - Z component of the vector\r\n   */\r\n  z: number;\r\n\r\n  /**\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @param {number} z\r\n   */\r\n  constructor(x: number, y: number, z: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n  }\r\n\r\n  /**\r\n   * Round a Vector3 to the nearest integer while maintaining x + y + z = 0\r\n   * @param {Vector3} cube\r\n   * @returns {Vector3}\r\n   */\r\n  static cubeRound(cube: Vector3): Vector3 {\r\n    var rX = Math.round(cube.x);\r\n    var rY = Math.round(cube.y);\r\n    var rZ = Math.round(cube.z);\r\n\r\n    var xDiff = Math.abs(rX - cube.x);\r\n    var yDiff = Math.abs(rY - cube.y);\r\n    var zDiff = Math.abs(rZ - cube.z);\r\n\r\n    if (xDiff > yDiff && xDiff > zDiff) {\r\n      rX = -rY - rZ;\r\n    } else if (yDiff > zDiff) {\r\n      rY = -rX - rZ;\r\n    } else {\r\n      rZ = -rX - rY;\r\n    }\r\n\r\n    return new Vector3(rX, rY, rZ);\r\n  }\r\n}\r\n\r\nexport default Vector3;\r\n","import {\r\n  toRadians,\r\n  roundTo as roundToNumber,\r\n  lerp as lerpNumber,\r\n  floorTo as floorToNumber,\r\n} from \"./shared\";\r\n\r\nexport type BoundingBox = {\r\n  min: Vector2;\r\n  max: Vector2;\r\n  width: number;\r\n  height: number;\r\n  center: Vector2;\r\n};\r\n\r\n/**\r\n * Vector class with x, y and static helper methods\r\n */\r\nclass Vector2 {\r\n  /**\r\n   * @type {number} x - X component of the vector\r\n   */\r\n  x: number;\r\n  /**\r\n   * @type {number} y - Y component of the vector\r\n   */\r\n  y: number;\r\n\r\n  /**\r\n   * @param {number} x\r\n   * @param {number} y\r\n   */\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} p\r\n   * @returns {number} Length squared of `p`\r\n   */\r\n  static lengthSquared(p: Vector2): number {\r\n    return p.x * p.x + p.y * p.y;\r\n  }\r\n\r\n  /**\r\n   * Returns the length of vector `p` Note: magnitude to not conflict with native length property\r\n   * @param {Vector2} p\r\n   * @returns {number} Length of `p`\r\n   */\r\n  static magnitude(p: Vector2): number {\r\n    return Math.sqrt(this.lengthSquared(p));\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} p\r\n   * @returns {Vector2} `p` normalized, if length of `p` is 0 `{x: 0, y: 0}` is returned\r\n   */\r\n  static normalize(p: Vector2): Vector2 {\r\n    const l = this.magnitude(p);\r\n    if (l === 0) {\r\n      return { x: 0, y: 0 };\r\n    }\r\n    return this.divide(p, l);\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @param {Vector2} b\r\n   * @returns {number}  Dot product between `a` and `b`\r\n   */\r\n  static dot(a: Vector2, b: Vector2): number {\r\n    return a.x * b.x + a.y * b.y;\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @param {(Vector2 | number)} b\r\n   * @returns {Vector2} a - b\r\n   */\r\n  static subtract(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: a.x - b, y: a.y - b };\r\n    } else {\r\n      return { x: a.x - b.x, y: a.y - b.y };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @param {(Vector2 | number)} b\r\n   * @returns {Vector2} a + b\r\n   */\r\n  static add(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: a.x + b, y: a.y + b };\r\n    } else {\r\n      return { x: a.x + b.x, y: a.y + b.y };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @param {(Vector2 | number)} b\r\n   * @returns {Vector2} a * b\r\n   */\r\n  static multiply(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: a.x * b, y: a.y * b };\r\n    } else {\r\n      return { x: a.x * b.x, y: a.y * b.y };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @param {(Vector2 | number)} b\r\n   * @returns {Vector2} a / b\r\n   */\r\n  static divide(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: a.x / b, y: a.y / b };\r\n    } else {\r\n      return { x: a.x / b.x, y: a.y / b.y };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Rotates a point around a given origin by an angle in degrees\r\n   * @param {Vector2} point Point to rotate\r\n   * @param {Vector2} origin Origin of the rotation\r\n   * @param {number} angle Angle of rotation in degrees\r\n   * @returns {Vector2} Rotated point\r\n   */\r\n  static rotate(point: Vector2, origin: Vector2, angle: number): Vector2 {\r\n    const cos = Math.cos(toRadians(angle));\r\n    const sin = Math.sin(toRadians(angle));\r\n    const dif = this.subtract(point, origin);\r\n    return {\r\n      x: origin.x + cos * dif.x - sin * dif.y,\r\n      y: origin.y + sin * dif.x + cos * dif.y,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Rotates a direction by a given angle in degrees\r\n   * @param {Vector2} direction Direction to rotate\r\n   * @param {number} angle Angle of rotation in degrees\r\n   * @returns {Vector2} Rotated direction\r\n   */\r\n  static rotateDirection(direction: Vector2, angle: number): Vector2 {\r\n    return this.rotate(direction, { x: 0, y: 0 }, angle);\r\n  }\r\n\r\n  /**\r\n   * Returns the min of `a` and `b`\r\n   * @param {Vector2} a\r\n   * @param {Vector2 | number} b Value to compare\r\n   * @returns {Vector2}\r\n   */\r\n  static min(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: Math.min(a.x, b), y: Math.min(a.y, b) };\r\n    } else {\r\n      return { x: Math.min(a.x, b.x), y: Math.min(a.y, b.y) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the component wise minimum of `a`\r\n   * @param {Vector2} a\r\n   * @returns {number}\r\n   */\r\n  static componentMin(a: Vector2): number {\r\n    return a.x < a.y ? a.x : a.y;\r\n  }\r\n\r\n  /**\r\n   * Returns the max of `a` and `b`\r\n   * @param {Vector2} a\r\n   * @param {Vector2 | number} b Value to compare\r\n   * @returns {Vector2}\r\n   */\r\n  static max(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: Math.max(a.x, b), y: Math.max(a.y, b) };\r\n    } else {\r\n      return { x: Math.max(a.x, b.x), y: Math.max(a.y, b.y) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the component wise maximum of `a`\r\n   * @param {Vector2} a\r\n   * @returns {number)}\r\n   */\r\n  static componentMax(a: Vector2): number {\r\n    return a.x > a.y ? a.x : a.y;\r\n  }\r\n\r\n  /**\r\n   * Rounds `p` to the nearest value of `to`\r\n   * @param {Vector2} p\r\n   * @param {Vector2} to\r\n   * @returns {Vector2}\r\n   */\r\n  static roundTo(p: Vector2, to: Vector2): Vector2 {\r\n    return {\r\n      x: roundToNumber(p.x, to.x),\r\n      y: roundToNumber(p.y, to.y),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Floors `p` to the nearest value of `to`\r\n   * @param {Vector2} p\r\n   * @param {Vector2} to\r\n   * @returns {Vector2}\r\n   */\r\n  static floorTo(p: Vector2, to: Vector2): Vector2 {\r\n    return {\r\n      x: floorToNumber(p.x, to.x),\r\n      y: floorToNumber(p.y, to.y),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @returns {Vector2} The component wise sign of `a`\r\n   */\r\n  static sign(a: Vector2): Vector2 {\r\n    return { x: Math.sign(a.x), y: Math.sign(a.y) };\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @returns {Vector2} The component wise absolute of `a`\r\n   */\r\n  static abs(a: Vector2): Vector2 {\r\n    return { x: Math.abs(a.x), y: Math.abs(a.y) };\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @param {(Vector2 | number)} b\r\n   * @returns {Vector2} `a` to the power of `b`\r\n   */\r\n  static pow(a: Vector2, b: Vector2 | number): Vector2 {\r\n    if (typeof b === \"number\") {\r\n      return { x: Math.pow(a.x, b), y: Math.pow(a.y, b) };\r\n    } else {\r\n      return { x: Math.pow(a.x, b.x), y: Math.pow(a.y, b.y) };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} a\r\n   * @returns {number} The dot product between `a` and `a`\r\n   */\r\n  static dot2(a: Vector2): number {\r\n    return this.dot(a, a);\r\n  }\r\n\r\n  /**\r\n   * Clamps `a` between `min` and `max`\r\n   * @param {Vector2} a\r\n   * @param {number} min\r\n   * @param {number} max\r\n   * @returns {Vector2}\r\n   */\r\n  static clamp(a: Vector2, min: number, max: number): Vector2 {\r\n    return {\r\n      x: Math.min(Math.max(a.x, min), max),\r\n      y: Math.min(Math.max(a.y, min), max),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Calculates the distance between a point and a line segment\r\n   * See more at {@link https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm}\r\n   * @param {Vector2} p Point\r\n   * @param {Vector2} a Start of the line\r\n   * @param {Vector2} b End of the line\r\n   * @returns {Object} The distance to and the closest point on the line segment\r\n   */\r\n  static distanceToLine(p: Vector2, a: Vector2, b: Vector2): Object {\r\n    const pa = this.subtract(p, a);\r\n    const ba = this.subtract(b, a);\r\n    const h = Math.min(Math.max(this.dot(pa, ba) / this.dot(ba, ba), 0), 1);\r\n    const distance = this.magnitude(this.subtract(pa, this.multiply(ba, h)));\r\n    const point = this.add(a, this.multiply(ba, h));\r\n    return { distance, point };\r\n  }\r\n\r\n  /**\r\n   * Calculates the distance between a point and a quadratic bezier curve\r\n   * See more at {@link https://www.shadertoy.com/view/MlKcDD}\r\n   * @todo Fix the robustness of this to allow smoothing on fog layers\r\n   * @param {Vector2} pos Position\r\n   * @param {Vector2} A Start of the curve\r\n   * @param {Vector2} B Control point of the curve\r\n   * @param {Vector2} C End of the curve\r\n   * @returns {Object} The distance to and the closest point on the curve\r\n   */\r\n  static distanceToQuadraticBezier(\r\n    pos: Vector2,\r\n    A: Vector2,\r\n    B: Vector2,\r\n    C: Vector2\r\n  ): Object {\r\n    let distance = 0;\r\n    let point = { x: pos.x, y: pos.y };\r\n\r\n    const a = this.subtract(B, A);\r\n    const b = this.add(this.subtract(A, this.multiply(B, 2)), C);\r\n    const c = this.multiply(a, 2);\r\n    const d = this.subtract(A, pos);\r\n\r\n    // Solve cubic roots to find closest points\r\n    const kk = 1 / this.dot(b, b);\r\n    const kx = kk * this.dot(a, b);\r\n    const ky = (kk * (2 * this.dot(a, a) + this.dot(d, b))) / 3;\r\n    const kz = kk * this.dot(d, a);\r\n\r\n    const p = ky - kx * kx;\r\n    const p3 = p * p * p;\r\n    const q = kx * (2 * kx * kx - 3 * ky) + kz;\r\n    let h = q * q + 4 * p3;\r\n\r\n    if (h >= 0) {\r\n      // 1 root\r\n      h = Math.sqrt(h);\r\n      const x = this.divide(this.subtract({ x: h, y: -h }, q), 2);\r\n      const uv = this.multiply(this.sign(x), this.pow(this.abs(x), 1 / 3));\r\n      const t = Math.min(Math.max(uv.x + uv.y - kx, 0), 1);\r\n      point = this.add(A, this.multiply(this.add(c, this.multiply(b, t)), t));\r\n      distance = this.dot2(\r\n        this.add(d, this.multiply(this.add(c, this.multiply(b, t)), t))\r\n      );\r\n    } else {\r\n      // 3 roots but ignore the 3rd one as it will never be closest\r\n      // https://www.shadertoy.com/view/MdXBzB\r\n      const z = Math.sqrt(-p);\r\n      const v = Math.acos(q / (p * z * 2)) / 3;\r\n      const m = Math.cos(v);\r\n      const n = Math.sin(v) * 1.732050808;\r\n\r\n      const t = this.clamp(\r\n        this.subtract(this.multiply({ x: m + m, y: -n - m }, z), kx),\r\n        0,\r\n        1\r\n      );\r\n      const d1 = this.dot2(\r\n        this.add(d, this.multiply(this.add(c, this.multiply(b, t.x)), t.x))\r\n      );\r\n      const d2 = this.dot2(\r\n        this.add(d, this.multiply(this.add(c, this.multiply(b, t.y)), t.y))\r\n      );\r\n      distance = Math.min(d1, d2);\r\n      if (d1 < d2) {\r\n        point = this.add(\r\n          d,\r\n          this.multiply(this.add(c, this.multiply(b, t.x)), t.x)\r\n        );\r\n      } else {\r\n        point = this.add(\r\n          d,\r\n          this.multiply(this.add(c, this.multiply(b, t.y)), t.y)\r\n        );\r\n      }\r\n    }\r\n\r\n    return { distance: Math.sqrt(distance), point: point };\r\n  }\r\n\r\n  /**\r\n   * @typedef BoundingBox\r\n   * @property {Vector2} min\r\n   * @property {Vector2} max\r\n   * @property {number} width\r\n   * @property {number} height\r\n   * @property {Vector2} center\r\n   */\r\n\r\n  /**\r\n   * Calculates an axis-aligned bounding box around an array of point\r\n   * @param {Vector2[]} points\r\n   * @returns {BoundingBox}\r\n   */\r\n  static getBoundingBox(points: Vector2[]): BoundingBox {\r\n    let minX = Number.MAX_VALUE;\r\n    let maxX = Number.MIN_VALUE;\r\n    let minY = Number.MAX_VALUE;\r\n    let maxY = Number.MIN_VALUE;\r\n    for (let point of points) {\r\n      minX = point.x < minX ? point.x : minX;\r\n      maxX = point.x > maxX ? point.x : maxX;\r\n      minY = point.y < minY ? point.y : minY;\r\n      maxY = point.y > maxY ? point.y : maxY;\r\n    }\r\n    let width = maxX - minX;\r\n    let height = maxY - minY;\r\n    let center = { x: (minX + maxX) / 2, y: (minY + maxY) / 2 };\r\n    return {\r\n      min: { x: minX, y: minY },\r\n      max: { x: maxX, y: maxY },\r\n      width,\r\n      height,\r\n      center,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Checks to see if a point is in a polygon using ray casting\r\n   * See more at {@link https://en.wikipedia.org/wiki/Point_in_polygon#Ray_casting_algorithm}\r\n   * and {@link https://stackoverflow.com/questions/217578/how-can-i-determine-whether-a-2d-point-is-within-a-polygon/2922778}\r\n   * @param {Vector2} p\r\n   * @param {Vector2[]} points\r\n   * @returns {boolean}\r\n   */\r\n  static pointInPolygon(p: Vector2, points: Vector2[]): boolean {\r\n    const bounds = this.getBoundingBox(points);\r\n    if (\r\n      p.x < bounds.min.x ||\r\n      p.x > bounds.max.x ||\r\n      p.y < bounds.min.y ||\r\n      p.y > bounds.max.y\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    let isInside = false;\r\n    for (let i = 0, j = points.length - 1; i < points.length; j = i++) {\r\n      const a = points[i].y > p.y;\r\n      const b = points[j].y > p.y;\r\n      if (\r\n        a !== b &&\r\n        p.x <\r\n          ((points[j].x - points[i].x) * (p.y - points[i].y)) /\r\n            (points[j].y - points[i].y) +\r\n            points[i].x\r\n      ) {\r\n        isInside = !isInside;\r\n      }\r\n    }\r\n    return isInside;\r\n  }\r\n\r\n  /**\r\n   * Returns true if a the distance between `a` and `b` is under `threshold`\r\n   * @param {Vector2} a\r\n   * @param {Vector2} b\r\n   * @param {number} threshold\r\n   * @returns {boolean}\r\n   */\r\n  static compare(a: Vector2, b: Vector2, threshold: number): boolean {\r\n    return this.lengthSquared(this.subtract(a, b)) < threshold * threshold;\r\n  }\r\n\r\n  /**\r\n   * Returns the distance between two vectors\r\n   * @param {Vector2} a\r\n   * @param {Vector2} b\r\n   * @returns {number}\r\n   */\r\n  static distance(a: Vector2, b: Vector2): number {\r\n    return this.magnitude(this.subtract(a, b));\r\n  }\r\n\r\n  /**\r\n   * Linear interpolate between `a` and `b` by `alpha`\r\n   * @param {Vector2} a\r\n   * @param {Vector2} b\r\n   * @param {number} alpha\r\n   * @returns {Vector2}\r\n   */\r\n  static lerp(a: Vector2, b: Vector2, alpha: number): Vector2 {\r\n    return { x: lerpNumber(a.x, b.x, alpha), y: lerpNumber(a.y, b.y, alpha) };\r\n  }\r\n\r\n  /**\r\n   * Returns total length of a an array of points treated as a path\r\n   * @param {Vector2[]} points the array of points in the path\r\n   * @returns {number}\r\n   */\r\n  static pathLength(points: Vector2[]): number {\r\n    let l = 0;\r\n    for (let i = 1; i < points.length; i++) {\r\n      l += this.distance(points[i - 1], points[i]);\r\n    }\r\n    return l;\r\n  }\r\n\r\n  /**\r\n   * Resample a path to n number of evenly distributed points\r\n   * based off of http://depts.washington.edu/acelab/proj/dollar/index.html\r\n   * @param {Vector2[]} points the points to resample\r\n   * @param {number} n the number of new points\r\n   * @returns {Vector2[]}\r\n   */\r\n  static resample(points: Vector2[], n: number): Vector2[] {\r\n    if (points.length === 0 || n <= 0) {\r\n      return [];\r\n    }\r\n    let localPoints = [...points];\r\n    const intervalLength = this.pathLength(localPoints) / (n - 1);\r\n    let resampledPoints = [localPoints[0]];\r\n    let currentDistance = 0;\r\n    for (let i = 1; i < localPoints.length; i++) {\r\n      let d = this.distance(localPoints[i - 1], localPoints[i]);\r\n      if (currentDistance + d >= intervalLength) {\r\n        let newPoint = this.lerp(\r\n          localPoints[i - 1],\r\n          localPoints[i],\r\n          (intervalLength - currentDistance) / d\r\n        );\r\n        resampledPoints.push(newPoint);\r\n        localPoints.splice(i, 0, newPoint);\r\n        currentDistance = 0;\r\n      } else {\r\n        currentDistance += d;\r\n      }\r\n    }\r\n    if (resampledPoints.length === n - 1) {\r\n      resampledPoints.push(localPoints[localPoints.length - 1]);\r\n    }\r\n\r\n    return resampledPoints;\r\n  }\r\n\r\n  /**\r\n   * Rotate a vector 90 degrees\r\n   * @param {Vector2} p Point\r\n   * @param {(\"counterClockwise\"|\"clockwise\")=} direction Direction to rotate the vector\r\n   * @returns {Vector2}\r\n   */\r\n  static rotate90(\r\n    p: Vector2,\r\n    direction: \"counterClockwise\" | \"clockwise\" = \"clockwise\"\r\n  ): Vector2 {\r\n    if (direction === \"clockwise\") {\r\n      return { x: p.y, y: -p.x };\r\n    } else {\r\n      return { x: -p.y, y: p.x };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the centroid of the given points\r\n   * @param {Vector2[]} points\r\n   * @returns {Vector2}\r\n   */\r\n  static centroid(points: Vector2[]): Vector2 {\r\n    let center = { x: 0, y: 0 };\r\n    for (let point of points) {\r\n      center.x += point.x;\r\n      center.y += point.y;\r\n    }\r\n    if (points.length > 0) {\r\n      center = { x: center.x / points.length, y: center.y / points.length };\r\n    }\r\n    return center;\r\n  }\r\n\r\n  /**\r\n   * Determine whether given points are rectangular\r\n   * @param {Vector2[]} points\r\n   * @returns {boolean}\r\n   */\r\n  static rectangular(points: Vector2[]): boolean {\r\n    if (points.length !== 4) {\r\n      return false;\r\n    }\r\n    // Check whether distance to the center is the same for all four points\r\n    const centroid = this.centroid(points);\r\n    let prevDist;\r\n    for (let point of points) {\r\n      const dist = this.distance(point, centroid);\r\n      if (prevDist && dist !== prevDist) {\r\n        return false;\r\n      } else {\r\n        prevDist = dist;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Determine whether given points are circular\r\n   * @param {Vector2[]} points\r\n   * @returns {boolean}\r\n   */\r\n  static circular(points: Vector2[], threshold = 0.1): boolean {\r\n    const centroid = this.centroid(points);\r\n    let distances = [];\r\n    for (let point of points) {\r\n      distances.push(this.distance(point, centroid));\r\n    }\r\n    if (distances.length > 0) {\r\n      const maxDistance = Math.max(...distances);\r\n      const minDistance = Math.min(...distances);\r\n      return maxDistance - minDistance < threshold;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Vector2;\r\n","import Vector2 from \"./Vector2\";\r\n\r\n/**\r\n * Wrapper for Vector2 that provides width, height and radius properties\r\n */\r\nclass Size extends Vector2 {\r\n  _radius;\r\n  /**\r\n   * @param {number} width\r\n   * @param {number} height\r\n   * @param {number} radius Used to represent hexagon sizes\r\n   */\r\n  constructor(width: number, height: number, radius?: number) {\r\n    super(width, height);\r\n    this._radius = radius;\r\n  }\r\n\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get width(): number {\r\n    return this.x;\r\n  }\r\n\r\n  /**\r\n   * @param {number} width\r\n   */\r\n  set width(width: number) {\r\n    this.x = width;\r\n  }\r\n\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get height(): number {\r\n    return this.y;\r\n  }\r\n\r\n  /**\r\n   * @param {number} height\r\n   */\r\n  set height(height: number) {\r\n    this.y = height;\r\n  }\r\n\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get radius(): number {\r\n    if (this._radius) {\r\n      return this._radius;\r\n    } else {\r\n      return Math.min(this.x, this.y) / 2;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {number} radius\r\n   */\r\n  set radius(radius: number) {\r\n    this._radius = radius;\r\n  }\r\n}\r\n\r\nexport default Size;\r\n","import GridSizeModel from \"../ml/gridSize/GridSizeModel\";\r\nimport Vector3 from \"./Vector3\";\r\nimport Vector2 from \"./Vector2\";\r\nimport Size from \"./Size\";\r\n\r\nimport { Grid, GridInset, GridScale } from \"../types/Grid\";\r\n\r\nconst SQRT3 = 1.73205;\r\nconst GRID_TYPE_NOT_IMPLEMENTED = new Error(\"Grid type not implemented\");\r\n\r\n/**\r\n * Gets the size of a grid in pixels taking into account the inset\r\n * @param {Grid} grid\r\n * @param {number} baseWidth Width of the grid in pixels before inset\r\n * @param {number} baseHeight Height of the grid in pixels before inset\r\n * @returns {Size}\r\n */\r\nexport function getGridPixelSize(\r\n  grid: Required<Grid>,\r\n  baseWidth: number,\r\n  baseHeight: number\r\n): Size {\r\n  const width = (grid.inset.bottomRight.x - grid.inset.topLeft.x) * baseWidth;\r\n  const height = (grid.inset.bottomRight.y - grid.inset.topLeft.y) * baseHeight;\r\n  return new Size(width, height);\r\n}\r\n\r\n/**\r\n * Gets the cell size for a grid in pixels for each grid type\r\n * @param {Grid} grid\r\n * @param {number} gridWidth Width of the grid in pixels after inset\r\n * @param {number} gridHeight Height of the grid in pixels after inset\r\n * @returns {Size}\r\n */\r\nexport function getCellPixelSize(\r\n  grid: Grid,\r\n  gridWidth: number,\r\n  gridHeight: number\r\n): Size {\r\n  if (grid.size.x === 0 || grid.size.y === 0) {\r\n    return new Size(0, 0);\r\n  }\r\n  switch (grid.type) {\r\n    case \"square\":\r\n      return new Size(gridWidth / grid.size.x, gridHeight / grid.size.y);\r\n    case \"hexVertical\":\r\n      const radiusVert = gridWidth / grid.size.x / SQRT3;\r\n      return new Size(radiusVert * SQRT3, radiusVert * 2, radiusVert);\r\n    case \"hexHorizontal\":\r\n      const radiusHorz = gridHeight / grid.size.y / SQRT3;\r\n      return new Size(radiusHorz * 2, radiusHorz * SQRT3, radiusHorz);\r\n    default:\r\n      throw GRID_TYPE_NOT_IMPLEMENTED;\r\n  }\r\n}\r\n\r\n/**\r\n * Find the center location of a cell in the grid.\r\n * Hex is addressed in an offset coordinate system with even numbered columns/rows offset to the right\r\n * @param {Grid} grid\r\n * @param {number} col X-axis coordinate of the cell\r\n * @param {number} row Y-axis coordinate of the cell\r\n * @param {Size} cellSize Cell size in pixels\r\n * @returns {Vector2}\r\n */\r\nexport function getCellLocation(\r\n  grid: Grid,\r\n  col: number,\r\n  row: number,\r\n  cellSize: Size\r\n): Vector2 {\r\n  switch (grid.type) {\r\n    case \"square\":\r\n      return {\r\n        x: col * cellSize.width + cellSize.width / 2,\r\n        y: row * cellSize.height + cellSize.height / 2,\r\n      };\r\n    case \"hexVertical\":\r\n      return {\r\n        x: cellSize.radius * SQRT3 * (col - 0.5 * (row & 1)),\r\n        y: ((cellSize.radius * 3) / 2) * row,\r\n      };\r\n    case \"hexHorizontal\":\r\n      return {\r\n        x: ((cellSize.radius * 3) / 2) * col,\r\n        y: cellSize.radius * SQRT3 * (row - 0.5 * (col & 1)),\r\n      };\r\n    default:\r\n      throw GRID_TYPE_NOT_IMPLEMENTED;\r\n  }\r\n}\r\n\r\n/**\r\n * Find the coordinates of the nearest cell in the grid to a point in pixels\r\n * @param {Grid} grid\r\n * @param {number} x X location to look for in pixels\r\n * @param {number} y Y location to look for in pixels\r\n * @param {Size} cellSize Cell size in pixels\r\n * @returns {Vector2}\r\n */\r\nexport function getNearestCellCoordinates(\r\n  grid: Grid,\r\n  x: number,\r\n  y: number,\r\n  cellSize: Size\r\n): Vector2 {\r\n  switch (grid.type) {\r\n    case \"square\":\r\n      return Vector2.divide(Vector2.floorTo({ x, y }, cellSize), cellSize);\r\n    case \"hexVertical\":\r\n      // Find nearest cell in cube coordinates the convert to offset coordinates\r\n      const cubeXVert = ((SQRT3 / 3) * x - (1 / 3) * y) / cellSize.radius;\r\n      const cubeZVert = ((2 / 3) * y) / cellSize.radius;\r\n      const cubeYVert = -cubeXVert - cubeZVert;\r\n      const cubeVert = new Vector3(cubeXVert, cubeYVert, cubeZVert);\r\n      return hexCubeToOffset(Vector3.cubeRound(cubeVert), \"hexVertical\");\r\n    case \"hexHorizontal\":\r\n      const cubeXHorz = ((2 / 3) * x) / cellSize.radius;\r\n      const cubeZHorz = (-(1 / 3) * x + (SQRT3 / 3) * y) / cellSize.radius;\r\n      const cubeYHorz = -cubeXHorz - cubeZHorz;\r\n      const cubeHorz = new Vector3(cubeXHorz, cubeYHorz, cubeZHorz);\r\n      return hexCubeToOffset(Vector3.cubeRound(cubeHorz), \"hexHorizontal\");\r\n    default:\r\n      throw GRID_TYPE_NOT_IMPLEMENTED;\r\n  }\r\n}\r\n\r\n/**\r\n * Find the corners of a grid cell\r\n * @param {Grid} grid\r\n * @param {number} x X location of the cell in pixels\r\n * @param {number} y Y location of the cell in pixels\r\n * @param {Size} cellSize Cell size in pixels\r\n * @returns {Vector2[]}\r\n */\r\nexport function getCellCorners(\r\n  grid: Grid,\r\n  x: number,\r\n  y: number,\r\n  cellSize: Size\r\n): Vector2[] {\r\n  const position = new Vector2(x, y);\r\n  switch (grid.type) {\r\n    case \"square\":\r\n      const halfSize = Vector2.multiply(cellSize, 0.5);\r\n      return [\r\n        Vector2.add(position, Vector2.multiply(halfSize, { x: -1, y: -1 })),\r\n        Vector2.add(position, Vector2.multiply(halfSize, { x: 1, y: -1 })),\r\n        Vector2.add(position, Vector2.multiply(halfSize, { x: 1, y: 1 })),\r\n        Vector2.add(position, Vector2.multiply(halfSize, { x: -1, y: 1 })),\r\n      ];\r\n    case \"hexVertical\":\r\n      const up = Vector2.subtract(position, { x: 0, y: cellSize.radius });\r\n      return [\r\n        up,\r\n        Vector2.rotate(up, position, 60),\r\n        Vector2.rotate(up, position, 120),\r\n        Vector2.rotate(up, position, 180),\r\n        Vector2.rotate(up, position, 240),\r\n        Vector2.rotate(up, position, 300),\r\n      ];\r\n    case \"hexHorizontal\":\r\n      const right = Vector2.add(position, { x: cellSize.radius, y: 0 });\r\n      return [\r\n        right,\r\n        Vector2.rotate(right, position, 60),\r\n        Vector2.rotate(right, position, 120),\r\n        Vector2.rotate(right, position, 180),\r\n        Vector2.rotate(right, position, 240),\r\n        Vector2.rotate(right, position, 300),\r\n      ];\r\n    default:\r\n      throw GRID_TYPE_NOT_IMPLEMENTED;\r\n  }\r\n}\r\n\r\n/**\r\n * Get the height of a grid based off of its width\r\n * @param {Grid} grid\r\n * @param {number} gridWidth Width of the grid in pixels after inset\r\n * @returns {number}\r\n */\r\nfunction getGridHeightFromWidth(\r\n  grid: Pick<Grid, \"type\" | \"size\">,\r\n  gridWidth: number\r\n): number {\r\n  switch (grid.type) {\r\n    case \"square\":\r\n      return (grid.size.y * gridWidth) / grid.size.x;\r\n    case \"hexVertical\":\r\n      const cellHeightVert = (gridWidth / grid.size.x / SQRT3) * 2;\r\n      return grid.size.y * cellHeightVert * (3 / 4) + cellHeightVert * (1 / 4);\r\n    case \"hexHorizontal\":\r\n      const cellHeightHroz = gridWidth / ((grid.size.x - 1) * (3 / 4) + 1);\r\n      return grid.size.y * cellHeightHroz * (SQRT3 / 2);\r\n    default:\r\n      throw GRID_TYPE_NOT_IMPLEMENTED;\r\n  }\r\n}\r\n\r\n/**\r\n * Get the default inset for a grid\r\n * @param {Grid} grid Grid with no inset property set\r\n * @param {number} mapWidth Width of the map in pixels before inset\r\n * @param {number} mapHeight Height of the map in pixels before inset\r\n * @returns {GridInset}\r\n */\r\nexport function getGridDefaultInset(\r\n  grid: Pick<Grid, \"type\" | \"size\">,\r\n  mapWidth: number,\r\n  mapHeight: number\r\n): GridInset {\r\n  // Max the width of the inset and figure out the resulting height value\r\n  const insetHeightNorm = getGridHeightFromWidth(grid, mapWidth) / mapHeight;\r\n  return { topLeft: { x: 0, y: 0 }, bottomRight: { x: 1, y: insetHeightNorm } };\r\n}\r\n\r\n/**\r\n * Get an updated inset for a grid when its size changes\r\n * @param {Grid} grid Grid with an inset property set\r\n * @param {number} mapWidth Width of the map in pixels before inset\r\n * @param {number} mapHeight Height of the map in pixels before inset\r\n * @returns {GridInset}\r\n */\r\nexport function getGridUpdatedInset(\r\n  grid: Grid,\r\n  mapWidth: number,\r\n  mapHeight: number\r\n): GridInset {\r\n  let inset = {\r\n    topLeft: { ...grid.inset.topLeft },\r\n    bottomRight: { ...grid.inset.bottomRight },\r\n  };\r\n  // Take current inset width and use it to calculate the new height\r\n  if (grid.size.x > 0 && grid.size.x > 0) {\r\n    // Convert to px relative to map size\r\n    const gridWidth = (inset.bottomRight.x - inset.topLeft.x) * mapWidth;\r\n    // Calculate the new inset height and convert back to normalized form\r\n    const insetHeightNorm = getGridHeightFromWidth(grid, gridWidth) / mapHeight;\r\n    inset.bottomRight.y = inset.topLeft.y + insetHeightNorm;\r\n  }\r\n  return inset;\r\n}\r\n\r\n/**\r\n * Get the max zoom for a grid\r\n * @param {Grid=} grid\r\n * @returns {number}\r\n */\r\nexport function getGridMaxZoom(grid?: Grid): number {\r\n  if (!grid) {\r\n    return 10;\r\n  }\r\n  // Return max grid size / 2\r\n  return Math.max(Math.max(grid.size.x, grid.size.y) / 2, 5);\r\n}\r\n\r\n/**\r\n * Convert from a 3D cube hex representation to a 2D offset one\r\n * @param {Vector3} cube Cube representation of the hex cell\r\n * @param {(\"hexVertical\"|\"hexHorizontal\")} type\r\n * @returns {Vector2}\r\n */\r\nexport function hexCubeToOffset(\r\n  cube: Vector3,\r\n  type: \"hexVertical\" | \"hexHorizontal\"\r\n) {\r\n  if (type === \"hexVertical\") {\r\n    const x = cube.x + (cube.z + (cube.z & 1)) / 2;\r\n    const y = cube.z;\r\n    return new Vector2(x, y);\r\n  } else {\r\n    const x = cube.x;\r\n    const y = cube.z + (cube.x + (cube.x & 1)) / 2;\r\n    return new Vector2(x, y);\r\n  }\r\n}\r\n/**\r\n * Convert from a 2D offset hex representation to a 3D cube one\r\n * @param {Vector2} offset Offset representation of the hex cell\r\n * @param {(\"hexVertical\"|\"hexHorizontal\")} type\r\n * @returns {Vector3}\r\n */\r\nexport function hexOffsetToCube(\r\n  offset: Vector2,\r\n  type: \"hexVertical\" | \"hexHorizontal\"\r\n) {\r\n  if (type === \"hexVertical\") {\r\n    const x = offset.x - (offset.y + (offset.y & 1)) / 2;\r\n    const z = offset.y;\r\n    const y = -x - z;\r\n    return { x, y, z };\r\n  } else {\r\n    const x = offset.x;\r\n    const z = offset.y - (offset.x + (offset.x & 1)) / 2;\r\n    const y = -x - z;\r\n    return { x, y, z };\r\n  }\r\n}\r\n\r\n/**\r\n * Get the distance between a and b on the grid\r\n * @param {Grid} grid\r\n * @param {Vector2} a\r\n * @param {Vector2} b\r\n * @param {Size} cellSize\r\n */\r\nexport function gridDistance(\r\n  grid: Grid,\r\n  a: Vector2,\r\n  b: Vector2,\r\n  cellSize: Size\r\n) {\r\n  // Get grid coordinates\r\n  const aCoord = getNearestCellCoordinates(grid, a.x, a.y, cellSize);\r\n  const bCoord = getNearestCellCoordinates(grid, b.x, b.y, cellSize);\r\n  if (grid.type === \"square\") {\r\n    if (grid.measurement.type === \"chebyshev\") {\r\n      return Vector2.componentMax(\r\n        Vector2.abs(Vector2.subtract(aCoord, bCoord))\r\n      );\r\n    } else if (grid.measurement.type === \"alternating\") {\r\n      // Alternating diagonal distance like D&D 3.5 and Pathfinder\r\n      const delta = Vector2.abs(Vector2.subtract(aCoord, bCoord));\r\n      const max = Vector2.componentMax(delta);\r\n      const min = Vector2.componentMin(delta);\r\n      return max + Math.floor(0.5 * min);\r\n    } else if (grid.measurement.type === \"euclidean\") {\r\n      return Vector2.magnitude(\r\n        Vector2.divide(Vector2.subtract(a, b), cellSize)\r\n      );\r\n    } else if (grid.measurement.type === \"manhattan\") {\r\n      return Math.abs(aCoord.x - bCoord.x) + Math.abs(aCoord.y - bCoord.y);\r\n    }\r\n  } else {\r\n    if (grid.measurement.type === \"manhattan\") {\r\n      // Convert to cube coordinates to get distance easier\r\n      const aCube = hexOffsetToCube(aCoord, grid.type);\r\n      const bCube = hexOffsetToCube(bCoord, grid.type);\r\n      return (\r\n        (Math.abs(aCube.x - bCube.x) +\r\n          Math.abs(aCube.y - bCube.y) +\r\n          Math.abs(aCube.z - bCube.z)) /\r\n        2\r\n      );\r\n    } else if (grid.measurement.type === \"euclidean\") {\r\n      return Vector2.magnitude(\r\n        Vector2.divide(Vector2.subtract(a, b), cellSize)\r\n      );\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n\r\n/**\r\n * Parse a string representation of scale e.g. 5ft into a `GridScale`\r\n * @param {string} scale\r\n * @returns {GridScale}\r\n */\r\n\r\nexport function parseGridScale(scale: string | null): GridScale {\r\n  if (typeof scale === \"string\") {\r\n    const match = scale.match(/(\\d*)(\\.\\d*)?([a-zA-Z]*)/);\r\n    if (match) {\r\n      const integer = parseFloat(match[1]);\r\n      const fractional = parseFloat(match[2]);\r\n      const unit = match[3] || \"\";\r\n      if (!isNaN(integer) && !isNaN(fractional)) {\r\n        return {\r\n          multiplier: integer + fractional,\r\n          unit: unit,\r\n          digits: match[2].length - 1,\r\n        };\r\n      } else if (!isNaN(integer) && isNaN(fractional)) {\r\n        return { multiplier: integer, unit: unit, digits: 0 };\r\n      }\r\n    }\r\n  }\r\n  return { multiplier: 1, unit: \"\", digits: 0 };\r\n}\r\n\r\n/**\r\n * Get all factors of a number\r\n * @param {number} n\r\n * @returns {number[]}\r\n */\r\nfunction factors(n: number): number[] {\r\n  const numbers = Array.from(Array(n + 1), (_, i) => i);\r\n  return numbers.filter((i) => n % i === 0);\r\n}\r\n\r\n/**\r\n * Greatest common divisor\r\n * Uses the Euclidean algorithm https://en.wikipedia.org/wiki/Euclidean_algorithm\r\n * @param {number} a\r\n * @param {number} b\r\n * @returns {number}\r\n */\r\nfunction gcd(a: number, b: number): number {\r\n  while (b !== 0) {\r\n    const t = b;\r\n    b = a % b;\r\n    a = t;\r\n  }\r\n  return a;\r\n}\r\n\r\n/**\r\n * Find all dividers that fit into two numbers\r\n * @param {number} a\r\n * @param {number} b\r\n * @returns {number[]}\r\n */\r\nfunction dividers(a: number, b: number): number[] {\r\n  const d = gcd(a, b);\r\n  return factors(d);\r\n}\r\n\r\n// The mean and standard deviation of > 1500 maps from the web\r\nconst gridSizeMean = { x: 31.567792, y: 32.597987 };\r\nconst gridSizeStd = { x: 14.438842, y: 15.582376 };\r\n\r\n// Most grid sizes are above 10 and below 200\r\nconst minGridSize = 10;\r\nconst maxGridSize = 200;\r\n\r\n/**\r\n * Get whether the grid size is likely valid by checking whether it exceeds a bounds\r\n * @param {number} x\r\n * @param {number} y\r\n * @returns {boolean}\r\n */\r\nexport function gridSizeVaild(x: number, y: number): boolean {\r\n  return (\r\n    x > minGridSize && y > minGridSize && x < maxGridSize && y < maxGridSize\r\n  );\r\n}\r\n\r\n/**\r\n * Finds a grid size for an image by finding the closest size to the average grid size\r\n * @param {HTMLImageElement} image\r\n * @param {number[]} candidates\r\n * @returns {Vector2 | null}\r\n */\r\nfunction gridSizeHeuristic(\r\n  image: HTMLImageElement,\r\n  candidates: number[]\r\n): Vector2 | null {\r\n  const width = image.width;\r\n  const height = image.height;\r\n  // Find the best candidate by comparing the absolute z-scores of each axis\r\n  let bestX = 1;\r\n  let bestY = 1;\r\n  let bestScore = Number.MAX_VALUE;\r\n  for (let scale of candidates) {\r\n    const x = Math.floor(width / scale);\r\n    const y = Math.floor(height / scale);\r\n    const xScore = Math.abs((x - gridSizeMean.x) / gridSizeStd.x);\r\n    const yScore = Math.abs((y - gridSizeMean.y) / gridSizeStd.y);\r\n    if (xScore < bestScore || yScore < bestScore) {\r\n      bestX = x;\r\n      bestY = y;\r\n      bestScore = Math.min(xScore, yScore);\r\n    }\r\n  }\r\n\r\n  if (gridSizeVaild(bestX, bestY)) {\r\n    return { x: bestX, y: bestY };\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Finds the grid size of an image by running the image through a machine learning model\r\n * @param {HTMLImageElement} image\r\n * @param {number[]} candidates\r\n * @returns {Vector2 | null}\r\n */\r\nasync function gridSizeML(\r\n  image: HTMLImageElement,\r\n  candidates: number[]\r\n): Promise<Vector2 | null> {\r\n  // TODO: check this function because of context and CanvasImageSource -> JSDoc and Typescript do not match\r\n  const width = image.width;\r\n  const height = image.height;\r\n  const ratio = width / height;\r\n  let canvas = document.createElement(\"canvas\");\r\n  let context = canvas.getContext(\"2d\");\r\n  canvas.width = 2048;\r\n  canvas.height = Math.floor(2048 / ratio);\r\n\r\n  // TODO: handle if context is null\r\n  if (!context) {\r\n    return null;\r\n  }\r\n\r\n  context.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n\r\n  let imageData = context.getImageData(\r\n    0,\r\n    Math.floor(canvas.height / 2) - 16,\r\n    2048,\r\n    32\r\n  );\r\n  for (let i = 0; i < imageData.data.length; i += 4) {\r\n    const r = imageData.data[i];\r\n    const g = imageData.data[i + 1];\r\n    const b = imageData.data[i + 2];\r\n    // ITU-R 601-2 Luma Transform\r\n    const luma = (r * 299) / 1000 + (g * 587) / 1000 + (b * 114) / 1000;\r\n\r\n    imageData.data[i] = imageData.data[i + 1] = imageData.data[i + 2] = luma;\r\n  }\r\n\r\n  const model = new GridSizeModel();\r\n  const prediction = await model.predict(imageData);\r\n\r\n  // Find the candidate that is closest to the prediction\r\n  let bestScale = 1;\r\n  let bestScore = Number.MAX_VALUE;\r\n  for (let scale of candidates) {\r\n    const x = Math.floor(width / scale);\r\n    const score = Math.abs(x - prediction);\r\n    if (score < bestScore && x > minGridSize && x < maxGridSize) {\r\n      bestScale = scale;\r\n      bestScore = score;\r\n    }\r\n  }\r\n\r\n  let x = Math.floor(width / bestScale);\r\n  let y = Math.floor(height / bestScale);\r\n\r\n  if (gridSizeVaild(x, y)) {\r\n    return { x, y };\r\n  } else {\r\n    // Fallback to raw prediction\r\n    x = Math.round(prediction);\r\n    y = Math.floor(x / ratio);\r\n  }\r\n\r\n  if (gridSizeVaild(x, y)) {\r\n    return { x, y };\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Finds the grid size of an image by either using a ML model or falling back to a heuristic\r\n * @param {HTMLImageElement} image\r\n * @returns {Vector2}\r\n */\r\nexport async function getGridSizeFromImage(image: HTMLImageElement) {\r\n  const width = image.width;\r\n  const height = image.height;\r\n  const candidates = dividers(width, height);\r\n  let prediction;\r\n\r\n  // Try and use ML grid detection\r\n  try {\r\n    prediction = await gridSizeML(image, candidates);\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  if (!prediction) {\r\n    prediction = gridSizeHeuristic(image, candidates);\r\n  }\r\n  if (!prediction) {\r\n    prediction = { x: 22, y: 22 };\r\n  }\r\n\r\n  return prediction;\r\n}\r\n","import imageOutline from \"image-outline\";\r\n\r\nimport blobToBuffer from \"./blobToBuffer\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nimport { Outline } from \"../types/Outline\";\r\n\r\nconst lightnessDetectionOffset = 0.1;\r\n\r\n/**\r\n * @param {HTMLImageElement} image\r\n * @returns {boolean} True is the image is light\r\n */\r\nexport function getImageLightness(image: HTMLImageElement): boolean {\r\n  const width = image.width;\r\n  const height = image.height;\r\n  let canvas = document.createElement(\"canvas\");\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  let context = canvas.getContext(\"2d\");\r\n  if (!context) {\r\n    return false;\r\n  }\r\n\r\n  context.drawImage(image, 0, 0);\r\n  const imageData = context.getImageData(0, 0, width, height);\r\n\r\n  const data = imageData.data;\r\n  let lightPixels = 0;\r\n  let darkPixels = 0;\r\n  // Loop over every pixels rgba values\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    const r = data[i];\r\n    const g = data[i + 1];\r\n    const b = data[i + 2];\r\n\r\n    const max = Math.max(Math.max(r, g), b);\r\n    if (max < 128) {\r\n      darkPixels++;\r\n    } else {\r\n      lightPixels++;\r\n    }\r\n  }\r\n\r\n  const norm = (lightPixels - darkPixels) / (width * height);\r\n  return norm + lightnessDetectionOffset >= 0;\r\n}\r\n\r\ntype CanvasImage = {\r\n  file: Uint8Array;\r\n  width: number;\r\n  height: number;\r\n  mime: string;\r\n};\r\n\r\n/**\r\n * @param {HTMLCanvasElement} canvas\r\n * @param {string} type\r\n * @param {number} quality\r\n * @returns {Promise<CanvasImage>}\r\n */\r\nexport async function canvasToImage(\r\n  canvas: HTMLCanvasElement,\r\n  type: string,\r\n  quality: number\r\n): Promise<CanvasImage | undefined> {\r\n  return new Promise((resolve) => {\r\n    canvas.toBlob(\r\n      async (blob) => {\r\n        if (blob) {\r\n          const file = await blobToBuffer(blob);\r\n          resolve({\r\n            file,\r\n            width: canvas.width,\r\n            height: canvas.height,\r\n            mime: type,\r\n          });\r\n        } else {\r\n          resolve(undefined);\r\n        }\r\n      },\r\n      type,\r\n      quality\r\n    );\r\n  });\r\n}\r\n\r\n/**\r\n * @param {HTMLImageElement} image the image to resize\r\n * @param {number} size the size of the longest edge of the new image\r\n * @param {string} type the mime type of the image\r\n * @param {number} quality if image is a jpeg or webp this is the quality setting\r\n * @returns {Promise<CanvasImage | undefined>}\r\n */\r\nexport async function resizeImage(\r\n  image: HTMLImageElement,\r\n  size: number,\r\n  type: string,\r\n  quality: number\r\n): Promise<CanvasImage | undefined> {\r\n  const width = image.width;\r\n  const height = image.height;\r\n  const ratio = width / height;\r\n  let canvas = document.createElement(\"canvas\");\r\n  if (ratio > 1) {\r\n    canvas.width = size;\r\n    canvas.height = Math.round(size / ratio);\r\n  } else {\r\n    canvas.width = Math.round(size * ratio);\r\n    canvas.height = size;\r\n  }\r\n  let context = canvas.getContext(\"2d\");\r\n  if (context) {\r\n    context.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n  } else {\r\n    return undefined;\r\n  }\r\n  return await canvasToImage(canvas, type, quality);\r\n}\r\n\r\n/**\r\n * Create a image file with resolution `size`x`size` with cover cropping\r\n * @param {HTMLImageElement} image the image to resize\r\n * @param {string} type the mime type of the image\r\n * @param {number} size the width and height of the thumbnail\r\n * @param {number} quality if image is a jpeg or webp this is the quality setting\r\n */\r\nexport async function createThumbnail(\r\n  image: HTMLImageElement,\r\n  type: string,\r\n  size = 300,\r\n  quality = 0.5\r\n): Promise<CanvasImage | undefined> {\r\n  let canvas = document.createElement(\"canvas\");\r\n  canvas.width = size;\r\n  canvas.height = size;\r\n  let context = canvas.getContext(\"2d\");\r\n  const ratio = image.width / image.height;\r\n  if (ratio > 1) {\r\n    const center = image.width / 2;\r\n    const halfHeight = image.height / 2;\r\n    if (context) {\r\n      context.drawImage(\r\n        image,\r\n        center - halfHeight,\r\n        0,\r\n        image.height,\r\n        image.height,\r\n        0,\r\n        0,\r\n        canvas.width,\r\n        canvas.height\r\n      );\r\n    }\r\n  } else {\r\n    const center = image.height / 2;\r\n    const halfWidth = image.width / 2;\r\n    if (context) {\r\n      context.drawImage(\r\n        image,\r\n        0,\r\n        center - halfWidth,\r\n        image.width,\r\n        image.width,\r\n        0,\r\n        0,\r\n        canvas.width,\r\n        canvas.height\r\n      );\r\n    }\r\n  }\r\n\r\n  return await canvasToImage(canvas, type, quality);\r\n}\r\n\r\n/**\r\n * Get the outline of an image\r\n * @param {HTMLImageElement} image\r\n * @returns {Outline}\r\n */\r\nexport function getImageOutline(\r\n  image: HTMLImageElement,\r\n  maxPoints: number = 100\r\n): Outline {\r\n  // Basic rect outline for fail conditions\r\n  const defaultOutline: Outline = {\r\n    type: \"rect\",\r\n    x: 0,\r\n    y: 0,\r\n    width: image.width,\r\n    height: image.height,\r\n  };\r\n  try {\r\n    let outlinePoints = imageOutline(image, {\r\n      opacityThreshold: 1, // Allow everything except full transparency\r\n    });\r\n\r\n    if (outlinePoints) {\r\n      if (outlinePoints.length > maxPoints) {\r\n        outlinePoints = Vector2.resample(outlinePoints, maxPoints);\r\n      }\r\n      const bounds = Vector2.getBoundingBox(outlinePoints);\r\n\r\n      // Reject outline if it's area is less than 5% of the image\r\n      const imageArea = image.width * image.height;\r\n      const area = bounds.width * bounds.height;\r\n      if (area < imageArea * 0.05) {\r\n        return defaultOutline;\r\n      }\r\n\r\n      // Detect if the outline is a rectangle or circle\r\n      if (Vector2.rectangular(outlinePoints)) {\r\n        return {\r\n          type: \"rect\",\r\n          x: Math.round(bounds.min.x),\r\n          y: Math.round(bounds.min.y),\r\n          width: Math.round(bounds.width),\r\n          height: Math.round(bounds.height),\r\n        };\r\n      } else if (\r\n        Vector2.circular(\r\n          outlinePoints,\r\n          Math.max(bounds.width / 10, bounds.height / 10)\r\n        )\r\n      ) {\r\n        return {\r\n          type: \"circle\",\r\n          x: Math.round(bounds.center.x),\r\n          y: Math.round(bounds.center.y),\r\n          radius: Math.round(Math.min(bounds.width, bounds.height) / 2),\r\n        };\r\n      } else {\r\n        // Flatten and round outline to save on storage size\r\n        const points = outlinePoints\r\n          .map(({ x, y }) => [Math.round(x), Math.round(y)])\r\n          .flat();\r\n        return { type: \"path\", points };\r\n      }\r\n    } else {\r\n      return defaultOutline;\r\n    }\r\n  } catch {\r\n    return defaultOutline;\r\n  }\r\n}\r\n","import { applyChange, Diff, revertChange, diff as deepDiff } from \"deep-diff\";\r\nimport get from \"lodash.get\";\r\n\r\nexport function applyChanges<LHS>(target: LHS, changes: Diff<LHS>[]) {\r\n  for (let change of changes) {\r\n    if (change.path && (change.kind === \"E\" || change.kind === \"A\")) {\r\n      // If editing an object or array ensure that the value exists\r\n      const valid = get(target, change.path) !== undefined;\r\n      if (valid) {\r\n        applyChange(target, true, change);\r\n      }\r\n    } else {\r\n      applyChange(target, true, change);\r\n    }\r\n  }\r\n}\r\n\r\nexport function revertChanges<LHS>(target: LHS, changes: Diff<LHS>[]) {\r\n  for (let change of changes) {\r\n    revertChange(target, true, change);\r\n  }\r\n}\r\n\r\nexport const diff = deepDiff;\r\n","import { Diff } from \"deep-diff\";\r\n\r\nimport { diff, revertChanges } from \"../helpers/diff\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\n/**\r\n * Implementation of the Command Pattern\r\n * Wraps an update function with internal state to support undo\r\n */\r\nclass Action<State> {\r\n  /**\r\n   * The update function called with the current state and should return the updated state\r\n   * This is implemented in the child class\r\n   */\r\n  update(state: State): State {\r\n    return state;\r\n  }\r\n\r\n  /**\r\n   * The changes caused by the last state update\r\n   */\r\n  changes: Diff<State, State>[] | undefined;\r\n\r\n  /**\r\n   * Executes the action update on the state\r\n   * @param {State} state The current state to update\r\n   */\r\n  execute(state: State): State {\r\n    if (state && this.update) {\r\n      let newState = this.update(cloneDeep(state));\r\n      this.changes = diff(state, newState);\r\n      return newState;\r\n    }\r\n    return state;\r\n  }\r\n\r\n  /**\r\n   * Reverts the changes caused by the last call of `execute`\r\n   * @param {State} state The current state to perform the undo on\r\n   * @returns {State} The state with the last changes reverted\r\n   */\r\n  undo(state: State): State {\r\n    if (state && this.changes) {\r\n      let revertedState = cloneDeep(state);\r\n      revertChanges(revertedState, this.changes);\r\n      return revertedState;\r\n    }\r\n    return state;\r\n  }\r\n}\r\n\r\nexport default Action;\r\n","import Action from \"./Action\";\r\n\r\nimport { ID } from \"../types/Action\";\r\n\r\nclass AddStatesAction<State extends ID> extends Action<Record<string, State>> {\r\n  states: State[];\r\n\r\n  constructor(states: State[]) {\r\n    super();\r\n    this.states = states;\r\n  }\r\n\r\n  update(statesById: Record<string, State>) {\r\n    for (let state of this.states) {\r\n      statesById[state.id] = state;\r\n    }\r\n    return statesById;\r\n  }\r\n}\r\n\r\nexport default AddStatesAction;\r\n","import { MultiPolygon, Ring, Polygon, Geom } from \"polygon-clipping\";\r\nimport shortid from \"shortid\";\r\nimport { Fog, FogState } from \"../types/Fog\";\r\n\r\nexport function addPolygonDifferenceToFog(\r\n  fog: Fog,\r\n  difference: MultiPolygon,\r\n  shapes: FogState\r\n) {\r\n  for (let i = 0; i < difference.length; i++) {\r\n    let newId = shortid.generate();\r\n    // Holes detected\r\n    let holes = [];\r\n    if (difference[i].length > 1) {\r\n      for (let j = 1; j < difference[i].length; j++) {\r\n        holes.push(\r\n          difference[i][j].map(([x, y]: [x: number, y: number]) => ({ x, y }))\r\n        );\r\n      }\r\n    }\r\n\r\n    const points = difference[i][0].map(([x, y]: [x: number, y: number]) => ({\r\n      x,\r\n      y,\r\n    }));\r\n\r\n    shapes[newId] = {\r\n      ...fog,\r\n      id: newId,\r\n      data: {\r\n        points,\r\n        holes,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport function addPolygonIntersectionToFog(\r\n  shape: Fog,\r\n  intersection: MultiPolygon,\r\n  shapes: FogState\r\n) {\r\n  for (let i = 0; i < intersection.length; i++) {\r\n    let newId = shortid.generate();\r\n\r\n    const points = intersection[i][0].map(([x, y]: [x: number, y: number]) => ({\r\n      x,\r\n      y,\r\n    }));\r\n\r\n    shapes[newId] = {\r\n      ...shape,\r\n      id: newId,\r\n      data: {\r\n        points,\r\n        holes: [],\r\n      },\r\n      // Default intersection visibility to false\r\n      visible: false,\r\n    };\r\n  }\r\n}\r\n\r\nexport function fogToGeometry(fog: Fog): Geom {\r\n  const shapePoints: Ring = fog.data.points.map(({ x, y }) => [x, y]);\r\n  const shapeHoles: Polygon = fog.data.holes.map((hole) =>\r\n    hole.map(({ x, y }) => [x, y])\r\n  );\r\n  return [[shapePoints, ...shapeHoles]];\r\n}\r\n","import polygonClipping from \"polygon-clipping\";\r\n\r\nimport Action from \"./Action\";\r\nimport {\r\n  addPolygonDifferenceToFog,\r\n  addPolygonIntersectionToFog,\r\n  fogToGeometry,\r\n} from \"../helpers/actions\";\r\n\r\nimport { Fog, FogState } from \"../types/Fog\";\r\n\r\nclass CutFogAction extends Action<FogState> {\r\n  fogs: Fog[];\r\n\r\n  constructor(fog: Fog[]) {\r\n    super();\r\n    this.fogs = fog;\r\n  }\r\n\r\n  update(fogsById: FogState): FogState {\r\n    let actionGeom = this.fogs.map(fogToGeometry);\r\n    let cutFogs: FogState = {};\r\n    for (let fog of Object.values(fogsById)) {\r\n      const fogGeom = fogToGeometry(fog);\r\n      try {\r\n        const difference = polygonClipping.difference(fogGeom, ...actionGeom);\r\n        const intersection = polygonClipping.intersection(\r\n          fogGeom,\r\n          ...actionGeom\r\n        );\r\n        addPolygonDifferenceToFog(fog, difference, cutFogs);\r\n        addPolygonIntersectionToFog(fog, intersection, cutFogs);\r\n      } catch {\r\n        console.error(\"Unable to find intersection for fogs\");\r\n      }\r\n    }\r\n    return cutFogs;\r\n  }\r\n}\r\n\r\nexport default CutFogAction;\r\n","import Action from \"./Action\";\r\n\r\nimport { ID } from \"../types/Action\";\r\n\r\nclass EditStatesAction<State extends ID> extends Action<Record<string, State>> {\r\n  edits: Partial<State>[];\r\n\r\n  constructor(edits: Partial<State>[]) {\r\n    super();\r\n    this.edits = edits;\r\n  }\r\n\r\n  update(statesById: Record<string, State>) {\r\n    for (let edit of this.edits) {\r\n      if (edit.id !== undefined && edit.id in statesById) {\r\n        statesById[edit.id] = { ...statesById[edit.id], ...edit };\r\n      }\r\n    }\r\n    return statesById;\r\n  }\r\n}\r\n\r\nexport default EditStatesAction;\r\n","import Action from \"./Action\";\r\nimport { omit } from \"../helpers/shared\";\r\n\r\nimport { ID } from \"../types/Action\";\r\n\r\nclass RemoveStatesAction<State extends ID> extends Action<\r\n  Record<string, State>\r\n> {\r\n  stateIds: string[];\r\n\r\n  constructor(stateIds: string[]) {\r\n    super();\r\n    this.stateIds = stateIds;\r\n  }\r\n\r\n  update(statesById: Record<string, State>) {\r\n    return omit(statesById, this.stateIds);\r\n  }\r\n}\r\n\r\nexport default RemoveStatesAction;\r\n","import polygonClipping from \"polygon-clipping\";\r\n\r\nimport Action from \"./Action\";\r\nimport { addPolygonDifferenceToFog, fogToGeometry } from \"../helpers/actions\";\r\n\r\nimport { Fog, FogState } from \"../types/Fog\";\r\n\r\nclass SubtractFogAction extends Action<FogState> {\r\n  fogs: Fog[];\r\n\r\n  constructor(fogs: Fog[]) {\r\n    super();\r\n    this.fogs = fogs;\r\n  }\r\n\r\n  update(fogsById: FogState): FogState {\r\n    const actionGeom = this.fogs.map(fogToGeometry);\r\n    let subtractedFogs: FogState = {};\r\n    for (let fog of Object.values(fogsById)) {\r\n      const fogGeom = fogToGeometry(fog);\r\n      try {\r\n        const difference = polygonClipping.difference(fogGeom, ...actionGeom);\r\n        addPolygonDifferenceToFog(fog, difference, subtractedFogs);\r\n      } catch {\r\n        console.error(\"Unable to find difference for fogs\");\r\n      }\r\n    }\r\n    return subtractedFogs;\r\n  }\r\n}\r\n\r\nexport default SubtractFogAction;\r\n","export default __webpack_public_path__ + \"static/media/Blank.a2523542.jpg\";","export default __webpack_public_path__ + \"static/media/Grass.c8fbf8b3.jpg\";","export default __webpack_public_path__ + \"static/media/Sand.afb8a587.jpg\";","export default __webpack_public_path__ + \"static/media/Stone.0950a99c.jpg\";","export default __webpack_public_path__ + \"static/media/Water.557990a0.jpg\";","export default __webpack_public_path__ + \"static/media/Wood.49f7ad7c.jpg\";","import Case from \"case\";\r\n\r\nimport { DefaultMap } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\n\r\nimport blankImage from \"./Blank.jpg\";\r\nimport grassImage from \"./Grass.jpg\";\r\nimport sandImage from \"./Sand.jpg\";\r\nimport stoneImage from \"./Stone.jpg\";\r\nimport waterImage from \"./Water.jpg\";\r\nimport woodImage from \"./Wood.jpg\";\r\n\r\nimport unknownImage from \"./Unknown.jpg\";\r\n\r\nexport const mapSources = {\r\n  blank: blankImage,\r\n  grass: grassImage,\r\n  sand: sandImage,\r\n  stone: stoneImage,\r\n  water: waterImage,\r\n  wood: woodImage,\r\n};\r\n\r\nexport function getDefaultMaps(userId: string): {\r\n  maps: DefaultMap[];\r\n  mapStates: MapState[];\r\n} {\r\n  const mapKeys = Object.keys(mapSources);\r\n  let maps: DefaultMap[] = [];\r\n  let mapStates: MapState[] = [];\r\n  for (let i = 0; i < mapKeys.length; i++) {\r\n    const key = mapKeys[i];\r\n    const name = Case.capital(key);\r\n    const id = `__default-${name}`;\r\n    const map: DefaultMap = {\r\n      id,\r\n      key,\r\n      name,\r\n      owner: userId,\r\n      grid: {\r\n        size: { x: 22, y: 22 },\r\n        inset: { topLeft: { x: 0, y: 0 }, bottomRight: { x: 1, y: 1 } },\r\n        type: \"square\",\r\n        measurement: { type: \"chebyshev\", scale: \"5ft\" },\r\n      },\r\n      width: 1024,\r\n      height: 1024,\r\n      type: \"default\",\r\n      created: mapKeys.length - i,\r\n      lastModified: Date.now(),\r\n      showGrid: key !== \"stone\",\r\n      snapToGrid: true,\r\n    };\r\n    maps.push(map);\r\n    const state: MapState = {\r\n      mapId: id,\r\n      tokens: {},\r\n      drawings: {},\r\n      fogs: {},\r\n      editFlags: [\"drawing\", \"tokens\", \"notes\"],\r\n      notes: {},\r\n    };\r\n    mapStates.push(state);\r\n  }\r\n  return { maps, mapStates };\r\n}\r\n\r\nexport const unknownSource = unknownImage;\r\n","export default __webpack_public_path__ + \"static/media/Unknown.65718e15.jpg\";","export default __webpack_public_path__ + \"static/media/Aberration.f9592c94.png\";","import Case from \"case\";\r\nimport { DefaultToken } from \"../types/Token\";\r\n\r\nimport aberration from \"./Aberration.png\";\r\nimport artificer from \"./Artificer.png\";\r\nimport barbarian from \"./Barbarian.png\";\r\nimport bard from \"./Bard.png\";\r\nimport beast from \"./Beast.png\";\r\nimport bloodHunter from \"./Blood Hunter.png\";\r\nimport celestial from \"./Celestial.png\";\r\nimport cleric from \"./Cleric.png\";\r\nimport construct from \"./Construct.png\";\r\nimport dragon from \"./Dragon.png\";\r\nimport druid from \"./Druid.png\";\r\nimport elemental from \"./Elemental.png\";\r\nimport fey from \"./Fey.png\";\r\nimport fiend from \"./Fiend.png\";\r\nimport fighter from \"./Fighter.png\";\r\nimport giant from \"./Giant.png\";\r\nimport goblinoid from \"./Goblinoid.png\";\r\nimport humanoid from \"./Humanoid.png\";\r\nimport monk from \"./Monk.png\";\r\nimport monstrosity from \"./Monstrosity.png\";\r\nimport ooze from \"./Ooze.png\";\r\nimport paladin from \"./Paladin.png\";\r\nimport plant from \"./Plant.png\";\r\nimport ranger from \"./Ranger.png\";\r\nimport rogue from \"./Rogue.png\";\r\nimport shapechanger from \"./Shapechanger.png\";\r\nimport sorcerer from \"./Sorcerer.png\";\r\nimport titan from \"./Titan.png\";\r\nimport undead from \"./Undead.png\";\r\nimport warlock from \"./Warlock.png\";\r\nimport wizard from \"./Wizard.png\";\r\nimport unknown from \"./Unknown.png\";\r\n\r\nexport const tokenSources = {\r\n  barbarian,\r\n  bard,\r\n  cleric,\r\n  druid,\r\n  fighter,\r\n  monk,\r\n  paladin,\r\n  ranger,\r\n  rogue,\r\n  sorcerer,\r\n  warlock,\r\n  wizard,\r\n  artificer,\r\n  bloodHunter,\r\n  aberration,\r\n  beast,\r\n  celestial,\r\n  construct,\r\n  dragon,\r\n  elemental,\r\n  fey,\r\n  fiend,\r\n  giant,\r\n  goblinoid,\r\n  humanoid,\r\n  monstrosity,\r\n  ooze,\r\n  plant,\r\n  shapechanger,\r\n  titan,\r\n  undead,\r\n};\r\n\r\nfunction getDefaultTokenSize(key: string) {\r\n  switch (key) {\r\n    case \"dragon\":\r\n    case \"elemental\":\r\n    case \"giant\":\r\n    case \"ooze\":\r\n    case \"titan\":\r\n      return 2;\r\n    default:\r\n      return 1;\r\n  }\r\n}\r\n\r\nexport function getDefaultTokens(userId: string): DefaultToken[] {\r\n  const tokenKeys = Object.keys(tokenSources);\r\n  let tokens: DefaultToken[] = [];\r\n  for (let i = 0; i < tokenKeys.length; i++) {\r\n    const key = tokenKeys[i];\r\n    const name = Case.capital(key);\r\n    const token: DefaultToken = {\r\n      key,\r\n      name,\r\n      id: `__default-${name}`,\r\n      type: \"default\",\r\n      defaultSize: getDefaultTokenSize(key),\r\n      defaultLabel: \"\",\r\n      defaultCategory: \"character\",\r\n      hideInSidebar: false,\r\n      width: 256,\r\n      height: 256,\r\n      outline: { type: \"circle\", x: 128, y: 128, radius: 128 },\r\n      owner: userId,\r\n      created: tokenKeys.length - i,\r\n      lastModified: Date.now(),\r\n    };\r\n    tokens.push(token);\r\n  }\r\n  return tokens;\r\n}\r\n\r\nexport const unknownSource = unknown;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAABn6hpJAAAYGklEQVR4Ae2dXWxcRxXHx17bu4baTojTfLn+ygsFGkAqUYuKgqIWEKoAqZVayX2oUKtCBC+8lLwgeKr8UvUVRSAUUZFIkAfUt0hRkKGljVGqVKS0tGnsOKpb+mE7G+xde3eZs2Tt9WbnzN175947M/d/JWt375k5c87v3D2+e+erS+AAAc8IdHd318K6VK1Wu8LWdbFet4tGw2YQAAEzBHrMqIEWAwR+IXXcbUCPKyr+KA39kyvG+monEoA9kT0qTTlijzmxW/Iv2QISQOyY+QbwE4DnAykIeE0ACcDr8MI5EOAJIAHwfCAFAa8JIAF4HV44BwI8ATwE5PlAaiEBXT//yspKaKsHBweVYwh8HCOAO4DQlwoqgoD7BJAA3I8hPACB0ATwE4BHl5fi+/giZqQjIyND8tbWjDIHtJTL5fHFxcUsjXuwMipIAHxY9krxeb6IGemRI0fE6OioGWUOaJmZmXlSJoAnHTDVaxOz8y/H6zDCORAIRwAJIBw31AIBLwjgJ4AXYfTPCe55SJRuPv9IRfMIdwDR+KE2CDhNAAnA6fDBeBCIRgAJIBo/1AYBpwn4/AzgKzIyQ1Gi09/fv3f37t1RVASuu75eEUtL4YewBm7IkoL5fIHt9lxYWLDEUr/N8Hn9s/MydJEGmgwNDYljx44lcgVcung5UwlgbGJEjI2PKNlOT08rZXE+BJRzAZTtYi6AEg0EIAACLhLAMwAXowabQcAQAZ+fARhCBDVxEDh1+kVWLXebf/r0abbuwYMHlfJ7771XKSMB1y43VZjquvgTAXcAFDkcIJBRAkgAGQ083AYBIoAEgOsABDJMAAkgw8GH6yDg8kNA6rBVjmMoFAq5Wk25vFugyPf19YmNjUqgslELRbU1avuon00CLieASzJkY6qwPfLII+xIM1W95vNrayXx8syF5lN4DwJeEXA5ATgViFde+0toe+8/HGlAY+h2o1bkfD537hyrnuvqu3LlCltXJ+cq67oJubouyvAMwMWowWYQMEQACcAQSKgBARcJIAG4GDXYDAKGCCABGAIJNSDgIgEkABejBptBwBABJABDIKEGBFwkYGs34JyEya7m89RTT8nJWerFG95+813x8pwfffgT4xMuXluC6wZ00iG90UuaIvNSfkhTJlGxrQmAvvxsAqBRevk87dzV/qBBgEmN4mtYwF3wJ06caBRr+8pNYT169GjbOo2TTzz+w8bbRF9/f+q3bHtcX/+7777L1o3Sl88p1rXLjQPgpgpTm/IfkvKalVOF60U429KQ4SdAGtTRJghYQgAJwJJAwAwQSIMAEkAa1NEmCFhCAAnAkkDADBBIgwASQBrU0SYIWEIACcCSQMAMEEiDgK3dgGmwiLVNrpuPGj579qyy/ccefkwpIwHXHRe1i5DTzXXzkV1cl1tc3XzUbpRjdnZWWZ3rIlRWslyQRgKg0Tu0mIfyoEE+1M/PHVf+PS/W1zeURcrldaXMpIC2sb5r5K66yldeM6kZunwiQDtMFYvFkZMnT15l/FqQsgcYuXFRGgmAlvFSruRDHtIIP26QD5WhLz+t2GPD0dOTBkYbPIcNQQnQNnPyyMk/9toPqs9UOTwDMEUSekDAQQJIAA4GDSaDgCkCSACmSEIPCDhIAAnAwaDBZBAwRQAJwBRJ6AEBBwng8XVCQeP6+aOawE01fvrppyOp53Rz/fzUqI19/VFs0o0D4KYLN9auoG7jdset6cLtRLGeM50AviKtfYGzWHbv5R599FGuiHj7zStCt1NOuVxmdQQR5uVYg13Dw0GKMmWoVxMHCEQjMDU1JVZXV/eeOXPmfABND8syxQDltEVMJwDq7NTuYjE6OsoaRiv5bCSwJVd3d070F/pZWyAEgSQI0HdieXmZVrjRfn9kGRpPYORofz9iRDWUgAAI2E4ACcD2CME+EIiRABJAjHChGgRsJ4AEYHuEYB8IxEjA9EPAGE11W/WVN/gdbTnvHvz+g5yY7W7TTSXW6eYajtKlxum1VcZNFSabdd2ENvqFOwAbowKbQCAhAkgACYFGMyBgIwFvfwL09eVFTjHqqhEIKoMDBGwgsLS0Im7cMDK2pyN3vE0Aw8O7MMino0sBhdMkcOniZVEqrSVuAn4CJI4cDYKAPQSQAOyJBSwBgcQJIAEkjhwNgoA9BLx9BmAP4v9b8szPngltUpSpxJP3TLLtZq0vn4UhhRwP3dLuOt02ynEHYGNUYBMIJEQACSAh0GgGBGwk0OlPAOo436typL+/f69uQw9a79+W9fxVfnRynpYDyfUYm57dSdMo6xEB2luiUumV+2EUtF7J7kJaUGOFKbggZRVGvinqNAHcJ2ue36zd8mb37t2CVjbhDlro4+WZC1wRp2Rd3V1iz4HPOWUzjLWPwNjomFwEZ0Pkcvp/Jn+/MHOpUlHviiW9G5d/c0G8xE+AIJRQBgQ8JYAE4Glg4RYIBCGg/QkgVzGtBVFEZRYWFsT09HTQ4pkqp+vKe+ihhzLFw0Vndasgc9OBuRWDiUVj1eB2XO4/HGSZwHY19edwB6BnhBIg4C0BJABvQwvHQEBPAAlAzwglQMBbAkgA3oYWjoGAngASgJ4RSoCAtwSQALwNLRwDAT0BJAA9I5QAAW8JaMcBcJ7r+ja5ujoZtwSzrj+Wm7YZZ12dT5ycs2tycpKryk5hZSsGEHLLmeumGgdQ71QRbqowOcJds9wYgTQh4A4gTfpoGwRSJoAEkHIA0DwIpEkACSBN+mgbBFImgASQcgDQPAikSQAJIE36aBsEUiYQqRcgZdvRPAhkgsDE+MQ2P1/7x9/k6kHbToX+kFoC4LpMyBuuW0zXHaOTc7Si1OX0RpHpugGj6NbV5br6uC5C0svVfe6553RNK+XHjx9XynwUyCn5sbkVn+bYTIZiEAABUwSQAEyRhB4QcJAAEoCDQYPJIGCKABKAKZLQAwIOEkACcDBoMBkETBFAAjBFEnpAwEECSAAOBg0mg4ApAs3jAH4hlR41pRh6zBHQjU3gxgno6pqz8nZNXF//sWd+Kkql8u2Vbp35ze9+rZRFGX+gVGpAwI1dMTkd+IufPyQHAqlHAr31zpunyuW1ksal56X8z80J4G55Ir4FyDXWQJwtAjVRE6W19Ww5bcjbgYEhUa1Wldq6ugRt4ac7/kAF8BNAhwlyEPCYABKAx8GFayCgI4AEoCMEOQh4TAAJwOPgwjUQ0BFAAtARghwEPCbQ3AvgsZt+uxZnVx/X5Xb6pdMs2GeffVYpX1m6qZSR4InHfyjyhV4xvGfHbeV0O1Afvydb04VvA9TBCSSADmChaGcEPvpgSVmhT/Hlbq5Q2agITkdzWbwPRwAJIBw31ApAgOvnzxf66v/hOTWlNYGxAhwgAzI8AzAAESpAwFUCSACuRg52g4ABAkgABiBCBQi4SgAJwNXIwW4QMEAACcAARKgAAVcJaHsBmmcdjY6OiqmpqU1fBwcHN9+3e8PtHhxlemSc/d7t/Ej7HDetNqptjz38GKviwe8/qJTrxgEoK8Ys4MYucEuVx2yWlepxB2BlWGAUCCRDQHsHkIwZaMVHAjSST3UEWQ+ABgJxOlS6cT44ASSA4KxQskMC7YbxNlTQUGDdKD/VUOCGDrxGJ4CfANEZQgMIOEsACcDZ0MFwEIhOAAkgOkNoAAFnCeAZgLOh2zKcps6GPX5/6rdsVa4b8Ny5c2zdo0ePKuU/fuYnSplOwE0zprrcdOE4pwofPHhQZ7p1ctwBWBcSGAQCyRFAAkiONVoCAesI4CeAdSHJikFdoqcnxzrb3d0tNuRYANXRJRfAz+XwP0zFJ8h5JIAglFDGOAH53RV7DnyO1UsLinxw/RNlGUogOh3KyhDUCSB94kIAgQwTQALIcPDhOgggAeAaAIEME4j0DKC1P3ZpaUVcunh5Eyc3XZibKrypQPGG2w2XqmRturACk5HTXN82txuukcYtU6K77jhzue8C1aPvEj3w5J55cPrDynAHEJYc6oGABwSQADwIIlwAgbAEkADCkkM9EPCAQKRnAB74DxdSI1AT1WpN03pNdHfLAQOKo4uRKargdAsBJIAWIPiYDIFarUs+8PqYbay3r1cO9NmlLEODiXBEI4AEEI0faocmEP0OIHTTqLhJAM8ANlHgDQhkj4C1dwBYNjyZi7F1LQH6zU233Y3f3tyc/hMnTrBGcusFcHpJaatdbEMtwtbxKc1i3RLrnE/cmAhqI8o122xjku9xB5AkbbQFApYRQAKwLCAwBwSSJIAEkCRttAUClhFAArAsIDAHBJIkYO1DwCQhuN7WvruG6y6US+vi4w+Xle7kcjlx5/6dSjkJanJwzofvf1J/ZQvGLCSf1svr4v1rHylbyskFQe7cx/ujrAxBnQASgAcXQuOJPS2RxR0kbpRVlatKASUB/Sg9lQYz5/9vZxdrR7d2JKEZW3zWEmsCuP/wESU73fTIuKYLuzhVWLeDL7cMdpTuNGXwbgl03WIuThfmfNJ183HXNMXBxiXM8AxAd5VDDgIeE0AC8Di4cA0EdASQAHSEIAcBjwkgAXgcXLgGAjoCSAA6QpCDgMcEkAA8Di5cAwEdgVi7AXWNQx4/geE9OzYbob79jz5Y2vzc7g2NJdg5PCh0Ywra1TV5juykgT7N9rfqT9vGVntc/OxkAtD1x0YJhI3jBCbvmeRdekktzhd6N4W07DRtt8UdNACHEkBjwFC7qbU0Oo+SiW5KLze1lpsqTPZxutvZxPnUiYxrV6cnzjEXurbDyvETICw51AMBDwggAXgQRLgAAmEJIAGEJYd6IOABASQAD4IIF0AgLAEkgLDkUA8EPCCABOBBEOECCIQl0NwN+Eep5F+conK5PD4zM/Okqkw+XxBjEyMqcf18TW4Gc2P5pvjut3+gLLdzx07BTa3UTRWO0k3ITQc9e/as0uY0BcePH1c2r1sF99iPfnpb3eLKf28713zijsHPNH9UvudYpjVVuF0XYqNbU+lIAEG+0Ceau1zbValWq2LuvYV2ovo56lq9eWNVKW8Irl2/KiqVSuPjba9SzwvyJD/gQ4hZqticAP4kP9Of8lhcXDwi/55UFRgdHRWHD39NJa6fJye5VV7YyhAaJzAwtP3LTPGhHXvoVXXQaj2NcQKqMlk7T1/+VpatDNbWSmLudXUCaC2v+nxtYU4mgA2VmM5TApjjCjRk+AnQIIFXEMggASSADAYdLoNAgwASQIMEXkEggwSQADIYdLgMAg0CSAANEngFgQwSQALIYNDhMgg0CDR3AzbOWfHKTa3kxgiQ8dw4gShjBHRg0honMDk5qTMtFnm7PvVGQzSfn5tay00VJh3cdGFOL9Xl7CI5ji0CViaA1bU1aaG6H3rLfLyLSqB1fYCaHKnVl+8V9Ko6aAci3WIctJiHLUerj7bYZYMdViaAxcX35UAU2qMGR9wEWlcIogE+ew7sYgf6BBk5x63kE7dPrfo/+c8yO7CptXyWPuMZQJaiDV9BoIUAEkALEHwEgSwRQALIUrThKwi0EEACaAGCjyCQJQJWPgTUBYB2HR4bHZO7rbY3X9dNyOmP0oXIdTHOztZnXyqbjtKFyE275brTyJi0utQ4m8mutKYLU9tZOnAHkKVow1cQaCHQ/l9oSyHTHzc22LnM9f/s6AY0Td2cPurj72bWC6CW5P4iqR20/4HpI5fLsT5VqxVB8/25o1Qqc+JUZIkngPqqKPP8WgUT4xOyHxo3J6lcEQEavXPfzgCl0ivywfVPjDe+c3iAXfGHVvoxsdiHccM1CvEt0wCCGAR8JoAE4HN04RsIaAggAWgAQQwCPhNAAvA5uvANBDQEEn8IqLHHiJibSqxrIMoYAk43N76A6nFjCDi9Nsu4abm68QfcdOEoYxuiXBs2sw5rG+4AwpJDPRDwgAASgAdBhAsgEJYAEkBYcqgHAh4Q6PQZwF+lzztUfl+/fv2B559//iWVnM7ncj3iq4cOc0UCya4tXBPciMJ9e/eKQqE/kC4UAgEbCJRKa+LipQtaU+SuQGOy0DJTcIWRbRN1mgBojKWyYblfWZHbs4xazuXMDNOkEYXccGH1glbb/McHELCKgGbLr4at9B1Ufg8bhYK84idAEEooAwKeEuj0DsBTDFtuxdFNRJtpxtW9uGW5X++46cKYKmwu1rgDMMcSmkDAOQJIAM6FDAaDgDkCSADmWEITCDhHAAnAuZDBYBAwRyDxh4A9cjWZr3/ja6wHs6++Lvv4+e7CA/sPKNcEJOW0wYUtx+L1j20xJTE7Pv5wWdAOQi4cuo1QyIfLb7wlt5y7oXSnqlkhSVkxZUHiCYD8pSTAHbo+fqpLKwa5smpQzdGLg4uRTkZbi7nypaB/Frp/GHRN6v4p6ZjYKMdPABujAptAICECqdwBJOSbVc1EHV9Ae+3lC71W+RTFGB0PbrowN1WYbOKmC3N6qS43hZnkvh24A/AtovAHBDoggATQASwUBQHfCCAB+BZR+AMCHRBAAugAFoqCgG8EkAB8iyj8AYEOCJjuBXhdtv1Nrn25iMcdL774IrtoyLe+9R3R28s/8b76zjWxvq7eYmx4eJfo68tzpjglW/60qO2rtsmh9bI6NjbZ2WrLpYuXW0/VPxeLN9ue7+RkuVwWb73zT6ZKbVEKH2cKNETFxpuor6YTAC1S8BfOKLlgyND8/DxXRE6dvUPk8/yXt7xeZvdiq8iBGz4drn6h4ogBN1WY2osyXXhpKfBiOh27VqtV5WjCJa4ebS7Ifn+4ymFk+AkQhhrqgIAnBJAAPAkk3ACBMASQAMJQQx0Q8IQAEoAngYQbIBCGABJAGGqoAwKeEEAC8CSQcAMEwhAw3Q0YxIY1WeiXXMFXX331511dXQWuzP59d7ELgvy3WBJrq9SU+ujp6RUDA3eoC0ASG4F8oc+r2Y3LK5+KZb6LT8huQOoDfIGBamStf0b/bSJ7ls3ZbhqBGtp+avunY8eOiaEhdREa0KHr0+2XOwft379/u2J8SoTA4I7PioGhz4Rqa3p6mq3HTRfWjSHgpgvff/iIst35hffEtYWrSvktwZx8HdcVSlKOnwBJ0kZbIGAZASQAywICc0AgSQJIAEnSRlsgYBkBJADLAgJzQCBJAkgASdJGWyBgGQEkAMsCAnNAIEkCaYwDSNI/tJVBAlxXX5Spwj6itDUBzEvYgxzwYrE4IuXKHUZoo4dCgV9ToLe3R272wCxcIUdJ9OSSQZTL5USXraMyuECElFWrFXY9h5BqY61WKqkHltWq9UE+uoE8C7EaGEJ5Mld354Yd0lU5efLkVVlmTFVuampKfOnLd6vE9fM0UEi1AgwV6OnpEWOjyiZY3Z0Kdw4PeDUyTuf/3HsLYu51674PrNmzF1/h5DTC71dcARtleAZgY1RgEwgkRAAJICHQaAYEbCSABGBjVGATCCREAAkgIdBoBgRsJIAEYGNUYBMIJETA1l6AhNxHMy4S4Kblkj/clF5uqjDVjbCz8C+r1apzvQAuJwC2D2l1dXXv8vIyOxCgeKMouL7daqWXHydAV0yAg7oTdUelUpVtVXTFvJFXqzVvfHHZEf2Vaa93D3CmnTlz5ryUq1dw4CrfkuXzBdEtB+hEPSbGJ+SuPvyvrU8/im9Diqj2x1H/5o3VONRCZ4cE+KuyQ2UoDgIg4BYBJAC34gVrQcAoASQAozihDATcIoAE4Fa8YC0IGCXg8kNAoyCgLBsEuKnC2SCw3UvcAWzngU8gkCkCSACZCjecBYHtBJAAtvPAJxDIFAGfnwE8LCMZaRSPHCU4+vcLM5eiXhGv/eNvWhVf+PwhMTig3ulIq8CxAteuX5U76cw5ZrV/5vqcAIoGwrVSqTBLhgVsoBJghG9VFpJjyQNqdL9YRfprgm07ErpRl+3qZPUcfgJkNfLwGwQkASQAXAYgkGECPv8EyHBYs+16m59SOySR+oq9cqpw6GmIUq936zbjDiDb3xV4n3ECSAAZvwDgfrYJIAFkO/7wPuMEvPtNYzieNI6AdiCK/SgUCqdqNXFf7A1Z0oBcEeiF9fUSbaaRxDEvG6n/9pddhHgG0EQcDwGbYLR5Sz34iYxWWVtbK7Vp3+dTS0mx9RliVN/wEyAqQdQHAYcJ4A7A4eDB9M4J+NiV1zmFrRq4A9higXcgkDkCSACZCzkcBoEtAkgAWyzwDgQyRwAJIHMhh8MgsEUACWCLBd6BQOYIYCCQPSH/njRlvz3mxG7JrGyB/nCAAAiAAAikQeB/ouPV9fSJmg0AAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/Bard.f6b83678.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAABn6hpJAAAUSUlEQVR4Ae2dXWgdxxWAV3/WFSSW01itYsuyRTFJ2uAf2lAXF+z0JVBCoCQPIYJAwZDitzYvCYQ0hoKfUvKUEmoI6CH1Q5tCCIE8xcV26tYJSl1waNzEP7HBJSWWHIEl2VfqjGNZ98p3zuxq9mdm9lsw3t0zc+ac79x7tHfP7GySsEEAAhCAAAQgUD8CXfVz2VuPX1KWPeitdfkb9iel8s/5q0UjBMIkcESZvVijf78JM0xxWd0dlzt4AwEIZCFAAshCi7YQiIwACSCygOIOBLIQIAFkoUVbCERGgAQQWUBxBwJZCJAAstCiLQQiI0ACiCyguAOBLAR6szSuYdt+5fOuMvweGRkZ7O6uTz6en5/fcvny5T1lsFVjHFP/miWNFdQwzASUw7VZic/JTfKRjo+PJ6Ojo/koC0DL0aNHk2PH9PeylG2dGmW6lJECG6Q+f3ICCwzmQqAMAiSAMigzBgQ8JcA9AE8Dg1m5EpjKSVt0P5m5Asjpk4EaCIRIgAQQYtSwGQI5ESAB5AQSNRAIkUDM9wB2qIAMugRlYGBgeGhoyEVF6r7XrzeTqamrqduH3rC/v7HqsueFCxdCd98b+6O7qdFC9ojad5poMjg4mOzfv79FZXG7pyZP1yoBbB4bSTZvGVkV0IMHD66qXw6dovu+8BMgh08FKiAQKgESQKiRw24I5EAg5nsAOeBBxWoJHD/xvtj1+AlRLAqfffZZo/zSpUtGmRbY5FLnycnJRUEe5M8DrgCEiCKCQOwESACxRxj/ICAQIAEIcBBBIHYCJIDYI4x/EBAIhHwTcK3yy3jjpdFo9CwuSvdsBCq3RGvWrElu3ChnHQlXW+3e0KJgAnrxmLmCx8hdfcgJ4JSisdlE5Iknnlj1TLMlnbOzc8kHR08uHfI/BCQCzyvhAamBj7KQE4CPPKOyyVbKk5yVSnVSP59lO3fuNJqnSoQvK6H+Z9qMV6umDmWc5x5AGZQZAwKeEiABeBoYzIJAGQRIAGVQZgwIeEqABOBpYDALAmUQIAGUQZkxIOApARKAp4HBLAiUQcDXMuB55by4ms++ffvWqs3I6NNPPks+OB9ODX94+L5koNEw+lOFwKUMWIW9no+pVya+oP5t88lOXxOA/vKLCUDP0uvv15OvOm96EmBZs/g6W5DtbHd3V1LEq8Em3jyUzZCW1jHW8lvcy7x79uzZzH1aOujPs/kvVkvDMnf5CVAmbcaCgGcESACeBQRzIFAmARJAmbQZCwKeESABeBYQzIFAmQRIAGXSZiwIeEaABOBZQDAHAmUS8LUMWCaD4MeSSn0hlvJcVu4tMphjY2NG9epxYKPMZ0EVCUDXQvViHsZNT/LRdX5p+/zMheT69RvGJvPz142yPAW6dr9pZJOzyp6eHmcdKPCXgH7D1MzMzMjExMQ5wcqLSvYTQZ67qIoEoBdGMK7koz3UM/ykST66jf7y6xV7fNh6e6vA6IPn2JCWgH7NnNp0lhc/+2n15dWOewB5kUQPBAIkQAIIMGiYDIG8CJAA8iKJHggESIAEEGDQMBkCeREgAeRFEj0QCJAAt68DCJpU59fm+1jrr6qWX+S4jo8De/lJyzsB7FBevip5qsp7PU8++aTUJPn0k88T25ty5ufnRR1phP1qrsG969enaSq08XK5d8FeRFUQODV5+uZ6D+Pj48bhr127NvzWW28dMTZYFjymdmeWD1e/l3cC0MXOPTZzRkdHxSZ6JZ8yFvPo7u5Rq/AMiLYghEAeBKamriaNRn/y0PYHjOqmp6f1CjfW749qk9usMe4BGMOBAALxEyABxB9jPISAkQAJwIgGAQTiJ0ACiD/GeAgBI4G8bwIaB0IgE5BKfT6W+bQ3RZbcZFrVSGN8HJgrgGo+S4wKAS8IkAC8CANGQKAaAtH+BFizpj/pUYt1SJtuU8a2pr8v6WK+UBmovR1Dzzfp6+tN9HwA0/b117nM7TGp73g+2gSwfv293kzyuffbg2oWGBmg4yewJic3bNigJrfdSPSMQNM2NzdrEhV2Xv4TWdiwKIYABHwgQALwIQrYAIGKCJAAKgLPsBDwgUC09wB8gNtqw8GDB1sP79j3sdZftzr/HUFZcSLGx4G5AlgRZA4hUCcCJIA6RRtfIbCCQNafALpwPrxCx+3DgYGBYdsLPfR6/76s53/bcIcdXdzr6ZUfz57z5P0FDm7SNScC0jskms0+9T6MhnUkVS7UC2qYJxQkyUUlb1oVqQZZE8Au1eeISfHQ0FAirXii++mFPj44etKkIrjzXaq+/52N3xLtjslf0VGEIgH95d88an4viJ4nkOYNUSdOHj3VbJrfiqWM2KL+nReNuSXkJ0AaSrSBQKQESACRBha3IJCGQNafAGl01raNVOrzscxXZaAoMVZJf3lsrgCWWbAHgdoRIAHULuQ4DIFlAiSAZRbsQaB2BEgAtQs5DkNgmUCwNwG7LYt95PH0vdah6/zSpuVlvMREsgEZBFZLINgEsGlkUyLNqlotkNZ+eoafbZJPbBObWv1nP34C/ASIP8Z4CAEjgWCvAIweFSiQ6vx62Kpq/b+ef93o9XNf6vdImreNGzcahZJMd3Kp5Uu6XfQanbkliPGRXpvPkpwrAIkOMghEToAEEHmAcQ8CEgESgEQHGQQiJ0ACiDzAuAcBiQAJQKKDDAKRE6h1FUC/sUe/tMO0zc3NRbV4iclPzvtBQM9rGdsyZjXmHx8dT5qp1vuxqsq8IpBdY0At9Ou6pDf2dKkGPszyk8p8GvfWF80Xcm+/964Ykcff/ZlRLpXqdCdJ7lLKk/TqcV10S2/41bqlrYwSom2Gq2TfamTmT85qtNEHAhAIigAJIKhwYSwE8iVAAsiXJ9ogEBQBEkBQ4cJYCORLgASQL0+0QSAoAiSAoMKFsRDIlwAJIF+eaINAUARaJwK9pCz/qWS9qs8O7t2719hE18xPTZ42yrVgcVEU3xQOD98n1ud1ozRvULGPdGcL6ZFfl8d9f7/9D3cO1nrm0daDlfvV5GmXerutlr/Sw9Zj27hF6m61I+/9np7u5J71a41qm82F5Mr/pDd+fdP1+w9sUxOBzDOB/v2fTw7Pz1vfR/c7pe3t1gTwoDqxx2idEugv3eiofi1Z521q6mpy8bycADr3bD870GioBFDNh77dEo4gkB8BPbGsv9FnVJh20tnddw8mCwsLRj1qGP0KP9v2R92Ab5kNE3IIREyABBBxcHENAjYCJAAbIeQQiJgACSDi4OIaBGwESAA2QsghEDGB1ipAxG4uuzbx5qHlgw57LqW+Dupunzpz0nzXVjfa+qhDLn7v9jCZd14ZesfY56mPdxplRQpsZcCixi7jcd+ibF+t3mgTwOA9dyV9a6J1b7Xxph8E2ghE+w3RX36p5tpGgQMI1JSAw3VnTYnhNgQiIkACiCiYuAKBrARIAFmJ0R4CEREgAUQUTFyBQFYCJICsxGgPgYgIVFYFOH7ifSNGSWbslFLw2GPy23JTqunYTFq+W1q6u6Oykk5ufdj8N+BwMilaIc0TqKqWLxqM8A4C5ujf0ZQTEIBAbARIALFFFH8gkIEACSADLJpCIDYCJIDYIoo/EMhAgASQARZNIRAbARJAbBHFHwhkIOBUBpRW0LXZsPCanHtsj89K+p/7sphSn1Tm0/Y4lfocHumVWEllPolhlTKXx3Jd3v5bpc9VjS1/C6uyinEhAIFSCJAASsHMIBDwkwAJwM+4YBUESiFAAigFM4NAwE8CJAA/44JVECiFAAmgFMwMAgE/CZAA/IwLVkGgFAJdLaPolwU+1XJs3Q2xlm91yqGByyOwh3eYH7211vKFNwv/4MntDh6F19U2h0CaJ2Dr60JjamrK2P2FF164KdMvB/3vpa+M7ZYEZ8+dFV8O+uHk35K5udml5qb/f6kEr3MFYMLDeQjUgAAJoAZBxkUImAiQAExkOA+BGhAgAdQgyLgIARMBEoCJDOchUAMCJIAaBBkXIWAisPQ48KKpgVTqkx5DNelbOm97ZHfjxo1LTTP/71KOyzxYSwcXm5/6uEXRit2PHv7nijMrDh0eJXaxuSrOUrlOKvNpalLfFVRrccgVQC3CjJMQ6EyABNCZC2chUAsCJIBahBknIdCZAAmgMxfOQqAWBEgAtQgzTkKgMwESQGcunIVALQiQAGoRZpyEQGcCS/MAOksdz0q1fpf6s6NZYneptl2kzZLuMyfNjwqLziihpFf3leQSC1tfLZc2SbetVi/V+m19JZuqktmW13/m6X2FmcYVQGFoUQwB/wmQAPyPERZCoDACJIDC0KIYAv4TIAH4HyMshEBhBEgAhaFFMQT8J0AC8D9GWAiBwgjYy4DCirPJycLsqkyxVBazGSWVtlz0SuVUm002uWSzra8kd9Erlfn0mCGW+tatW2fE9fefm1cM1p3uf+OQse/uXY8YZWkEXAGkoUQbCERKgAQQaWBxCwJpCJAA0lCiDQQiJUACiDSwuAWBNARIAGko0QYCkRIgAUQaWNyCQBoCJIA0lGgDgUgJ2OcBBOi4VHN3qU/bUBQ1rqTXZpPNX0m3ra9tbOTpCPzoL+Y5AlrDv39hnidw/xvv2wZ52dDgQ30+ygRgcJjTEKgjgQOS0/wEkOggg0DkBEgAkQcY9yAgESABSHSQQSByAiSAyAOMexCQCJAAJDrIIBA5gdpVAaSyl451UaUv27jS56wom4r0V/LHJrM97is9LlxkX5vdRcmlMqFUItT23P9GYnzztxJ3cQVQVNTQC4EACJAAAggSJkKgKAIkgKLIohcCARAgAQQQJEyEQFEESABFkUUvBAIgQAIIIEiYCIGiCJAAiiKLXggEQKArhY3GOuLCa3L+OHNywajettS1S93cOKijoMh6vKNpxu4h2mx05pZAqvVLcwR09xD7SjwO75DfHK3mAUgb8wAkOsggEDsB+U947N7jHwRqToAEUPMPAO7XmwAJoN7xx/uaEyAB1PwDgPv1JkACqHf88b7mBNzKgJ/J+ePMb1dfBpTi4mOJULJXy2Isx8Xoky2OvskpA/oWEeyBQEAE5D/hATmCqRCAQHYCJIDszOgBgWgIkACiCSWOQCA7ARJAdmb0gEA0BEgA0YQSRyCQnQAJIDszekAgGgJp5gFIzhofFdadFoR5AtIcAd3X9riwbmPaQpwnYPJFn6fe3k4nNh62z+srQ++0A2g52vqw/De8e795Lo5Sw+PALSzZhUDtCMjpo3Y4cBgC9SJAAqhXvPEWAm0ESABtODiAQL0IkADqFW+8hUAbARJAGw4OIFAvAq5lwJW09qgTR1ae7HQslQhvtn+vU69vzkmrDesWLiVE86h2ia2cY9fgV4vYym1+0V22Rirz6VZSqc9S5tPdxe84VwAaERsEakqABFDTwOM2BDQBEgCfAwjUmAAJoMbBx3UIkAD4DECgxgRIADUOPq5DoDdnBB8rfXtbdB5p2WcXAhDwjIBYIyzI1kGld8pFt3UOgaRcmF+gu9nmGEiqq5p/INkU29wEyVctq2rugkst3+aTpdbv9B3mJ4CNPnIIREyABBBxcHENAjYCJAAbIeQQiJgACSDi4OIaBGwESAA2QsghEDEBEkDEwcU1CNgIOJUQbMoN8n51/nmD7Obp3bt3P9/V1dUwtTl27JhJ5HzeqcToMrpQnoytNOmCydbXVo6T+m990fL3UIiRpFfLLKU8W/fCvqd5TwSyOaLlc+rfAanh8ePHf6XkxgQg9UUGAQikJ2BJeekV0RICEAiPAAkgvJhhMQRyI0ACyA0liiAQHgESQHgxw2II5EaABJAbShRBIDwCJIDwYobFEMiNQGH1RUcL9ePC+rFh47Z///5kcNDc5NTk6WRq6qqxvxYMNAaSDRs2tLWZePNQ23FZB5XNP3BxUKqLP2pRXFRfy7CS2LFWL6lekp1XO1uWDnz4v4p5AGn8vqAarZUazszMjCh5j6lNd3dX0mjoOUfmra+vN7lx44a5ARII5EdAf/kv5qcuH02+JoBtNvcmJibOqTabTe3Gx8eTh7Y/aBLfPK+vEPSVAhsESiCwpYQxMg/BPYDMyOgAgXgIkADiiSWeQCAzARJAZmR0gEA8BEgA8cQSTyCQmYCvNwEzO5JXh927Hrmtqre3N9k8arzPeLtdHjvd362m/JiH7bHoaI39Sp/+dXoyuXpVXMz6ZdXnwMp+vh9zBeB7hLAPAgUSCPkKQKypXrt2bXh6elqcCDDz9UwyNzdrxLvQ7MtlnoC+kmDzn4D0WUgWFy8rD/RaFqZt2iTw+XyXz8Y52nZE9d/joqO/v5H8cOePXVTc7Du2ZSzp7pYvtqqagejsXH0U7FWu/jU2d+VPZWze4g8EINBGgATQhoMDCNSLAAmgXvHGWwi0ESABtOHgAAL1IsDtaU/i/czT+zyxpBwzrly5knx15atSBjtx8mjSbPLUZyfYXAF0osI5CNSEAAmgJoHGTQh0IkAC6ESFcxCoCYGYJwLdpWJoXDEoZXxHe3p6T6Vsa2xmmwSkO37vgW3J2rvNS5wZlQcq+OLSueSLi+dLsV79/tcPdLjO1JtROpqlGFziIDHfBNQBc92u5nHzqJniY7OgGi0sLLjaG0z/pvI3D7YpHdZfftcEkHKosJrxEyCseGEtBHIlQALIFSfKIBAWARJAWPHCWgjkSoAEkCtOlEEgLAIkgLDihbUQyJUACSBXnCiDQFgEYp4HkEck9DwC/QaiwrdGo3F4cTHZVfhAngywsLD46vXrc6+WZM4FNc5iSWMFNUzM8wDyCISu4JcyW2V2dlZabioPX3zToVfYLIWtb477ZA8/AXyKBrZAoGQCJICSgTMcBHwiQALwKRrYAoGSCZAASgbOcBDwiQAJwKdoYAsESiZAAigZOMNBwCcCJACfooEtECiZABOBSgYuDPe4km0Q5LGJPlQO6X9sEIAABCBQBYH/A6EbXu6b8xOQAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","// eslint-disable-next-line no-unused-vars\r\nimport Dexie, { Version } from \"dexie\";\r\nimport shortid from \"shortid\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport Case from \"case\";\r\nimport chunk from \"lodash.chunk\";\r\n\r\nimport blobToBuffer from \"./helpers/blobToBuffer\";\r\nimport { getGridDefaultInset } from \"./helpers/grid\";\r\nimport { createThumbnail, getImageOutline } from \"./helpers/image\";\r\nimport {\r\n  AddStatesAction,\r\n  EditStatesAction,\r\n  RemoveStatesAction,\r\n  SubtractFogAction,\r\n  CutFogAction,\r\n} from \"./actions\";\r\nimport { getDefaultMaps } from \"./maps\";\r\nimport { getDefaultTokens } from \"./tokens\";\r\nimport { Outline } from \"./types/Outline\";\r\nimport { Group, GroupContainer } from \"./types/Group\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\nexport type UpgradeEventHandler = (versionNumber: number) => void;\r\n\r\ntype VersionCallback = (\r\n  version: Version,\r\n  onUpgrade?: UpgradeEventHandler\r\n) => void;\r\n\r\n/**\r\n * Mapping of version number to their upgrade function\r\n */\r\nexport const versions: Record<number, VersionCallback> = {\r\n  // v1.2.0\r\n  1(v) {\r\n    v.stores({\r\n      maps: \"id, owner\",\r\n      states: \"mapId\",\r\n      tokens: \"id, owner\",\r\n      user: \"key\",\r\n    });\r\n  },\r\n  // v1.2.1 - Move from blob files to array buffers\r\n  2(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(2);\r\n      const maps = await Dexie.waitFor(tx.table(\"maps\").toArray());\r\n      let mapBuffers: Record<string, ArrayBuffer> = {};\r\n      for (let map of maps) {\r\n        mapBuffers[map.id] = await Dexie.waitFor(blobToBuffer(map.file));\r\n      }\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.file = mapBuffers[map.id];\r\n        });\r\n    });\r\n  },\r\n  // v1.3.0 - Added new default tokens\r\n  3(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(3);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          function mapTokenId(id: string) {\r\n            switch (id) {\r\n              case \"__default-Axes\":\r\n                return \"__default-Barbarian\";\r\n              case \"__default-Bird\":\r\n                return \"__default-Druid\";\r\n              case \"__default-Book\":\r\n                return \"__default-Wizard\";\r\n              case \"__default-Crown\":\r\n                return \"__default-Humanoid\";\r\n              case \"__default-Dragon\":\r\n                return \"__default-Dragon\";\r\n              case \"__default-Eye\":\r\n                return \"__default-Warlock\";\r\n              case \"__default-Fist\":\r\n                return \"__default-Monk\";\r\n              case \"__default-Horse\":\r\n                return \"__default-Fey\";\r\n              case \"__default-Leaf\":\r\n                return \"__default-Druid\";\r\n              case \"__default-Lion\":\r\n                return \"__default-Monstrosity\";\r\n              case \"__default-Money\":\r\n                return \"__default-Humanoid\";\r\n              case \"__default-Moon\":\r\n                return \"__default-Cleric\";\r\n              case \"__default-Potion\":\r\n                return \"__default-Sorcerer\";\r\n              case \"__default-Shield\":\r\n                return \"__default-Paladin\";\r\n              case \"__default-Skull\":\r\n                return \"__default-Undead\";\r\n              case \"__default-Snake\":\r\n                return \"__default-Beast\";\r\n              case \"__default-Sun\":\r\n                return \"__default-Cleric\";\r\n              case \"__default-Swords\":\r\n                return \"__default-Fighter\";\r\n              case \"__default-Tree\":\r\n                return \"__default-Plant\";\r\n              case \"__default-Triangle\":\r\n                return \"__default-Sorcerer\";\r\n              default:\r\n                return \"__default-Fighter\";\r\n            }\r\n          }\r\n          for (let stateId in state.tokens) {\r\n            state.tokens[stateId].tokenId = mapTokenId(\r\n              state.tokens[stateId].tokenId\r\n            );\r\n            state.tokens[stateId].lastEditedBy = \"\";\r\n            state.tokens[stateId].rotation = 0;\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.3.1 - Added show grid option\r\n  4(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(4);\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.showGrid = false;\r\n        });\r\n    });\r\n  },\r\n  // v1.4.0 - Added fog subtraction\r\n  5(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(5);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let fogAction of state.fogDrawActions) {\r\n            if (fogAction.type === \"add\" || fogAction.type === \"edit\") {\r\n              for (let shape of fogAction.shapes) {\r\n                shape.data.holes = [];\r\n              }\r\n            }\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.4.2 - Added map resolutions\r\n  6(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(6);\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.resolutions = {};\r\n          map.quality = \"original\";\r\n        });\r\n    });\r\n  },\r\n  // v1.5.0 - Fixed default token rogue spelling\r\n  7(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(7);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let id in state.tokens) {\r\n            if (state.tokens[id].tokenId === \"__default-Rouge\") {\r\n              state.tokens[id].tokenId = \"__default-Rogue\";\r\n            }\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.5.0 - Added map snap to grid option\r\n  8(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(8);\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.snapToGrid = true;\r\n        });\r\n    });\r\n  },\r\n  // v1.5.1 - Added lock, visibility and modified to tokens\r\n  9(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(9);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let id in state.tokens) {\r\n            state.tokens[id].lastModifiedBy = state.tokens[id].lastEditedBy;\r\n            delete state.tokens[id].lastEditedBy;\r\n            state.tokens[id].lastModified = Date.now();\r\n            state.tokens[id].locked = false;\r\n            state.tokens[id].visible = true;\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.5.1 - Added token prop category and remove isVehicle bool\r\n  10(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(10);\r\n      return tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          token.category = token.isVehicle ? \"vehicle\" : \"character\";\r\n          delete token.isVehicle;\r\n        });\r\n    });\r\n  },\r\n  // v1.5.2 - Added automatic cache invalidation to maps\r\n  11(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(11);\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.lastUsed = map.lastModified;\r\n        });\r\n    });\r\n  },\r\n  // v1.5.2 - Added automatic cache invalidation to tokens\r\n  12(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(12);\r\n      return tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          token.lastUsed = token.lastModified;\r\n        });\r\n    });\r\n  },\r\n  // v1.6.0 - Added map grouping and grid scale and offset\r\n  13(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(13);\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.group = \"\";\r\n          map.grid = {\r\n            size: { x: map.gridX, y: map.gridY },\r\n            inset: getGridDefaultInset(\r\n              { size: { x: map.gridX, y: map.gridY }, type: \"square\" },\r\n              map.width,\r\n              map.height\r\n            ),\r\n            type: \"square\",\r\n          };\r\n          delete map.gridX;\r\n          delete map.gridY;\r\n          delete map.gridType;\r\n        });\r\n    });\r\n  },\r\n  // v1.6.0 - Added token grouping\r\n  14(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(14);\r\n      return tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          token.group = \"\";\r\n        });\r\n    });\r\n  },\r\n  // v1.6.1 - Added width and height to tokens\r\n  15(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(15);\r\n      const tokens = await Dexie.waitFor(tx.table(\"tokens\").toArray());\r\n      let tokenSizes: Record<string, { width: number; height: number }> = {};\r\n      for (let token of tokens) {\r\n        const url = URL.createObjectURL(new Blob([token.file]));\r\n        let image = new Image();\r\n        tokenSizes[token.id] = await Dexie.waitFor(\r\n          new Promise((resolve) => {\r\n            image.onload = () => {\r\n              resolve({ width: image.width, height: image.height });\r\n            };\r\n            image.src = url;\r\n          })\r\n        );\r\n      }\r\n      return tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          token.width = tokenSizes[token.id].width;\r\n          token.height = tokenSizes[token.id].height;\r\n        });\r\n    });\r\n  },\r\n  // v1.7.0 - Added note tool\r\n  16(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(16);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          state.notes = {};\r\n          state.editFlags = [...state.editFlags, \"notes\"];\r\n        });\r\n    });\r\n  },\r\n  // 1.7.0 (hotfix) - Optimized fog shape edits to only include needed data\r\n  17(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(17);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let i = 0; i < state.fogDrawActions.length; i++) {\r\n            const action = state.fogDrawActions[i];\r\n            if (action && action.type === \"edit\") {\r\n              for (let j = 0; j < action.shapes.length; j++) {\r\n                const shape = action.shapes[j];\r\n                const temp = { ...shape };\r\n                state.fogDrawActions[i].shapes[j] = {\r\n                  id: temp.id,\r\n                  visible: temp.visible,\r\n                };\r\n              }\r\n            }\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // 1.8.0 - Added note text only mode, converted draw and fog representations\r\n  18(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(18);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let id in state.notes) {\r\n            state.notes[id].textOnly = false;\r\n          }\r\n\r\n          state.drawShapes = convertOldActionsToShapes(\r\n            state.mapDrawActions,\r\n            state.mapDrawActionIndex\r\n          );\r\n          state.fogShapes = convertOldActionsToShapes(\r\n            state.fogDrawActions,\r\n            state.fogDrawActionIndex\r\n          );\r\n\r\n          delete state.mapDrawActions;\r\n          delete state.mapDrawActionIndex;\r\n          delete state.fogDrawActions;\r\n          delete state.fogDrawActionIndex;\r\n        });\r\n    });\r\n  },\r\n  // 1.8.0 - Add thumbnail to maps and add measurement to grid\r\n  19(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(19);\r\n      const userId = (await Dexie.waitFor(tx.table(\"user\").get(\"userId\")))\r\n        .value;\r\n      const maps = await Dexie.waitFor(tx.table(\"maps\").toArray());\r\n      const thumbnails: Record<string, any> = {};\r\n      for (let map of maps) {\r\n        try {\r\n          if (map.owner === userId) {\r\n            thumbnails[map.id] = await createDataThumbnail(map);\r\n          }\r\n        } catch {}\r\n      }\r\n      return tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          map.thumbnail = thumbnails[map.id];\r\n          map.grid.measurement = { type: \"chebyshev\", scale: \"5ft\" };\r\n        });\r\n    });\r\n  },\r\n  // 1.8.0 - Add thumbnail to tokens\r\n  20(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(20);\r\n      const userId = (await Dexie.waitFor(tx.table(\"user\").get(\"userId\")))\r\n        .value;\r\n      const tokens = await Dexie.waitFor(tx.table(\"tokens\").toArray());\r\n      const thumbnails: Record<string, any> = {};\r\n      for (let token of tokens) {\r\n        try {\r\n          if (token.owner === userId) {\r\n            thumbnails[token.id] = await createDataThumbnail(token);\r\n          }\r\n        } catch {}\r\n      }\r\n      return tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          token.thumbnail = thumbnails[token.id];\r\n        });\r\n    });\r\n  },\r\n  // 1.8.0 - Upgrade for Dexie.Observable\r\n  21(v) {\r\n    v.stores({});\r\n  },\r\n  // v1.8.1 - Shorten fog shape ids\r\n  22(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(22);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let id of Object.keys(state.fogShapes)) {\r\n            const newId = shortid.generate();\r\n            state.fogShapes[newId] = state.fogShapes[id];\r\n            state.fogShapes[newId].id = newId;\r\n            delete state.fogShapes[id];\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.9.0 - Add outlines to tokens\r\n  23(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(23);\r\n      const tokens = await Dexie.waitFor(tx.table(\"tokens\").toArray());\r\n      const tokenOutlines = await Dexie.waitFor(\r\n        Promise.all(tokens.map(createDataOutline))\r\n      );\r\n\r\n      return tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          const tokenOutline = tokenOutlines.find((el) => el.id === token.id);\r\n          if (tokenOutline) {\r\n            token.outline = tokenOutline.outline;\r\n          } else {\r\n            token.outline = {\r\n              type: \"rect\",\r\n              width: token.width,\r\n              height: token.height,\r\n              x: 0,\r\n              y: 0,\r\n            };\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.9.0 - Move map assets into new table\r\n  24(v, onUpgrade) {\r\n    v.stores({ assets: \"id, owner\" }).upgrade(async (tx) => {\r\n      onUpgrade?.(24);\r\n\r\n      const primaryKeys = await Dexie.waitFor(\r\n        tx.table(\"maps\").toCollection().primaryKeys()\r\n      );\r\n      const keyChunks = chunk(primaryKeys, 4);\r\n\r\n      for (let keys of keyChunks) {\r\n        let assets = [];\r\n        let maps = await Dexie.waitFor(tx.table(\"maps\").bulkGet(keys));\r\n        while (maps.length > 0) {\r\n          const map = maps.pop();\r\n          assets.push({\r\n            id: uuid(),\r\n            owner: map.owner,\r\n            file: map.file,\r\n            width: map.width,\r\n            height: map.height,\r\n            mime: \"\",\r\n            prevId: map.id,\r\n            prevType: \"map\",\r\n          });\r\n\r\n          for (let resolution in map.resolutions) {\r\n            const mapRes = map.resolutions[resolution];\r\n            assets.push({\r\n              id: uuid(),\r\n              owner: map.owner,\r\n              file: mapRes.file,\r\n              width: mapRes.width,\r\n              height: mapRes.height,\r\n              mime: \"\",\r\n              prevId: map.id,\r\n              prevType: \"mapResolution\",\r\n              resolution,\r\n            });\r\n          }\r\n          if (map.thumbnail) {\r\n            assets.push({\r\n              id: uuid(),\r\n              owner: map.owner,\r\n              file: map.thumbnail.file,\r\n              width: map.thumbnail.width,\r\n              height: map.thumbnail.height,\r\n              mime: \"\",\r\n              prevId: map.id,\r\n              prevType: \"mapThumbnail\",\r\n            });\r\n          }\r\n        }\r\n        await tx.table(\"assets\").bulkAdd(assets);\r\n      }\r\n    });\r\n  },\r\n  // v1.9.0 - Move token assets into new table\r\n  25(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(25);\r\n\r\n      const primaryKeys = await Dexie.waitFor(\r\n        tx.table(\"tokens\").toCollection().primaryKeys()\r\n      );\r\n      const keyChunks = chunk(primaryKeys, 4);\r\n\r\n      for (let keys of keyChunks) {\r\n        let assets = [];\r\n        let tokens = await Dexie.waitFor(tx.table(\"tokens\").bulkGet(keys));\r\n        while (tokens.length > 0) {\r\n          let token = tokens.pop();\r\n          assets.push({\r\n            id: uuid(),\r\n            owner: token.owner,\r\n            file: token.file,\r\n            width: token.width,\r\n            height: token.height,\r\n            mime: \"\",\r\n            prevId: token.id,\r\n            prevType: \"token\",\r\n          });\r\n          if (token.thumbnail) {\r\n            assets.push({\r\n              id: uuid(),\r\n              owner: token.owner,\r\n              file: token.thumbnail.file,\r\n              width: token.thumbnail.width,\r\n              height: token.thumbnail.height,\r\n              mime: \"\",\r\n              prevId: token.id,\r\n              prevType: \"tokenThumbnail\",\r\n            });\r\n          }\r\n        }\r\n        await tx.table(\"assets\").bulkAdd(assets);\r\n      }\r\n    });\r\n  },\r\n  // v1.9.0 - Create foreign keys for assets\r\n  26(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(26);\r\n\r\n      let mapUpdates: Record<string, any> = {};\r\n      let tokenUpdates: Record<string, any> = {};\r\n\r\n      const primaryKeys = await Dexie.waitFor(\r\n        tx.table(\"assets\").toCollection().primaryKeys()\r\n      );\r\n      const keyChunks = chunk(primaryKeys, 4);\r\n\r\n      for (let keys of keyChunks) {\r\n        let assets = await Dexie.waitFor(tx.table(\"assets\").bulkGet(keys));\r\n        while (assets.length > 0) {\r\n          const asset = assets.pop();\r\n          const { prevId, id, prevType, resolution } = asset;\r\n          if (prevType === \"token\" || prevType === \"tokenThumbnail\") {\r\n            if (!(prevId in tokenUpdates)) {\r\n              tokenUpdates[prevId] = {};\r\n            }\r\n          } else {\r\n            if (!(prevId in mapUpdates)) {\r\n              mapUpdates[prevId] = {};\r\n            }\r\n          }\r\n\r\n          if (prevType === \"map\") {\r\n            mapUpdates[prevId].file = id;\r\n          } else if (prevType === \"token\") {\r\n            tokenUpdates[prevId].file = id;\r\n          } else if (prevType === \"mapThumbnail\") {\r\n            mapUpdates[prevId].thumbnail = id;\r\n          } else if (prevType === \"tokenThumbnail\") {\r\n            tokenUpdates[prevId].thumbnail = id;\r\n          } else if (prevType === \"mapResolution\") {\r\n            mapUpdates[prevId][resolution] = id;\r\n          }\r\n        }\r\n      }\r\n\r\n      await tx\r\n        .table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          if (map.id in mapUpdates) {\r\n            for (let key in mapUpdates[map.id]) {\r\n              map[key] = mapUpdates[map.id][key];\r\n            }\r\n          }\r\n          delete map.resolutions;\r\n        });\r\n      await tx\r\n        .table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          if (token.id in tokenUpdates) {\r\n            for (let key in tokenUpdates[token.id]) {\r\n              token[key] = tokenUpdates[token.id][key];\r\n            }\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.9.0 - Remove asset migration helpers\r\n  27(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(27);\r\n      tx.table(\"assets\").toCollection().modify({\r\n        prevId: undefined,\r\n        prevType: undefined,\r\n        resolution: undefined,\r\n      });\r\n    });\r\n  },\r\n  // v1.9.0 - Remap map resolution assets\r\n  28(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(28);\r\n      tx.table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          const resolutions = [\"low\", \"medium\", \"high\", \"ultra\"];\r\n          map.resolutions = {};\r\n          for (let res of resolutions) {\r\n            if (res in map) {\r\n              map.resolutions[res] = map[res];\r\n              delete map[res];\r\n            }\r\n          }\r\n          delete map.lastUsed;\r\n        });\r\n    });\r\n  },\r\n  // v1.9.0 - Move tokens to use more defaults\r\n  29(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(29);\r\n      tx.table(\"tokens\")\r\n        .toCollection()\r\n        .modify(async (token) => {\r\n          token.defaultCategory = token.category;\r\n          delete token.category;\r\n          token.defaultLabel = \"\";\r\n          delete token.lastUsed;\r\n        });\r\n    });\r\n  },\r\n  // v1.9.0 - Move tokens to use more defaults and add token outline to token states\r\n  30(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(30);\r\n      const tokens = await Dexie.waitFor(tx.table(\"tokens\").toArray());\r\n      tx.table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let id in state.tokens) {\r\n            if (!state.tokens[id]?.tokenId) {\r\n              delete state.tokens[id];\r\n              continue;\r\n            }\r\n            if (!state.tokens[id].tokenId.startsWith(\"__default\")) {\r\n              const token = tokens.find(\r\n                (token) => token.id === state.tokens[id].tokenId\r\n              );\r\n              if (token) {\r\n                state.tokens[id].category = token.defaultCategory;\r\n                state.tokens[id].file = token.file;\r\n                state.tokens[id].type = \"file\";\r\n                state.tokens[id].outline = token.outline;\r\n                state.tokens[id].width = token.width;\r\n                state.tokens[id].height = token.height;\r\n                state.tokens[id].owner = token.owner;\r\n              } else {\r\n                state.tokens[id].category = \"character\";\r\n                state.tokens[id].type = \"file\";\r\n                state.tokens[id].file = \"\";\r\n                state.tokens[id].outline = {\r\n                  type: \"rect\",\r\n                  width: 256,\r\n                  height: 256,\r\n                  x: 0,\r\n                  y: 0,\r\n                };\r\n                state.tokens[id].width = 256;\r\n                state.tokens[id].height = 256;\r\n              }\r\n            } else {\r\n              state.tokens[id].category = \"character\";\r\n              state.tokens[id].type = \"default\";\r\n              state.tokens[id].key = Case.camel(\r\n                state.tokens[id].tokenId.slice(10)\r\n              );\r\n              state.tokens[id].outline = {\r\n                type: \"circle\",\r\n                x: 128,\r\n                y: 128,\r\n                radius: 128,\r\n              };\r\n              state.tokens[id].width = 256;\r\n              state.tokens[id].height = 256;\r\n            }\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.9.0 - Remove maps not owned by user as cache is now done on the asset level\r\n  31(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(31);\r\n      const userId = (await Dexie.waitFor(tx.table(\"user\").get(\"userId\")))\r\n        ?.value;\r\n      if (userId) {\r\n        tx.table(\"maps\").where(\"owner\").notEqual(userId).delete();\r\n      }\r\n    });\r\n  },\r\n  // v1.9.0 - Remove tokens not owned by user as cache is now done on the asset level\r\n  32(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(32);\r\n      const userId = (await Dexie.waitFor(tx.table(\"user\").get(\"userId\")))\r\n        ?.value;\r\n      if (userId) {\r\n        tx.table(\"tokens\").where(\"owner\").notEqual(userId).delete();\r\n      }\r\n    });\r\n  },\r\n  // v1.9.0 - Store default maps and tokens in db\r\n  33(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(33);\r\n      const userId = (await Dexie.waitFor(tx.table(\"user\").get(\"userId\")))\r\n        ?.value;\r\n      if (!userId) {\r\n        return;\r\n      }\r\n      const { maps } = getDefaultMaps(userId);\r\n      tx.table(\"maps\").bulkAdd(maps);\r\n      const tokens = getDefaultTokens(userId);\r\n      tx.table(\"tokens\").bulkAdd(tokens);\r\n    });\r\n  },\r\n  // v1.9.0 - Add new group table\r\n  34(v, onUpgrade) {\r\n    v.stores({ groups: \"id\" }).upgrade(async (tx) => {\r\n      onUpgrade?.(34);\r\n      function groupItems(items: { id: string; group: string }[]) {\r\n        let groups: Group[] = [];\r\n        let subGroups: Record<string, GroupContainer> = {};\r\n        for (let item of items) {\r\n          if (!item.group) {\r\n            groups.push({ id: item.id, type: \"item\" });\r\n          } else if (item.group in subGroups) {\r\n            subGroups[item.group].items.push({ id: item.id, type: \"item\" });\r\n          } else {\r\n            subGroups[item.group] = {\r\n              id: uuid(),\r\n              type: \"group\",\r\n              name: item.group,\r\n              items: [{ id: item.id, type: \"item\" }],\r\n            };\r\n          }\r\n        }\r\n        groups.push(...Object.values(subGroups));\r\n        return groups;\r\n      }\r\n\r\n      let maps = await Dexie.waitFor(tx.table(\"maps\").toArray());\r\n      maps = maps.sort((a, b) => b.created - a.created);\r\n      const mapGroupItems = groupItems(maps);\r\n      tx.table(\"groups\").add({ id: \"maps\", items: mapGroupItems });\r\n\r\n      let tokens = await Dexie.waitFor(tx.table(\"tokens\").toArray());\r\n      tokens = tokens.sort((a, b) => b.created - a.created);\r\n      const tokenGroupItems = groupItems(tokens);\r\n      tx.table(\"groups\").add({ id: \"tokens\", items: tokenGroupItems });\r\n    });\r\n  },\r\n  // v1.9.0 - Remove map and token group in respective tables\r\n  35(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(35);\r\n      tx.table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          delete map.group;\r\n        });\r\n      tx.table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          delete token.group;\r\n        });\r\n    });\r\n  },\r\n  36(v) {\r\n    v.stores({\r\n      _changes: null,\r\n      _intercomm: null,\r\n      _syncNodes: null,\r\n      _uncommittedChanges: null,\r\n    });\r\n  },\r\n  // v1.10.0 - Add rotation to notes\r\n  37(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(37);\r\n      tx.table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          for (let id in state.notes) {\r\n            state.notes[id].rotation = 0;\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.10.0 - Delete groups again\r\n  38(v, onUpgrade) {\r\n    v.stores({}).upgrade(async (tx) => {\r\n      onUpgrade?.(38);\r\n      tx.table(\"maps\")\r\n        .toCollection()\r\n        .modify((map) => {\r\n          delete map.group;\r\n        });\r\n      tx.table(\"tokens\")\r\n        .toCollection()\r\n        .modify((token) => {\r\n          delete token.group;\r\n        });\r\n    });\r\n  },\r\n  // v1.10.0 - Rename drawShapes and fogShapes in state\r\n  39(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(39);\r\n      tx.table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          state.drawings = state.drawShapes;\r\n          state.fogs = state.fogShapes;\r\n\r\n          delete state.drawShapes;\r\n          delete state.fogShapes;\r\n        });\r\n    });\r\n  },\r\n  // v1.10.0 (patch 1) - Rename drawShapes and fogShapes in state again (some people's didn't work)\r\n  40(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(40);\r\n      tx.table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          if (state.drawShapes) {\r\n            state.drawings = cloneDeep(state.drawShapes);\r\n            delete state.drawShapes;\r\n          }\r\n          if (state.fogShapes) {\r\n            state.fogs = cloneDeep(state.fogShapes);\r\n            delete state.fogShapes;\r\n          }\r\n        });\r\n    });\r\n  },\r\n  // v1.10.0 (patch 2) - Rename drawShapes and fogShapes in state again again (some people's still didn't work)\r\n  41(v, onUpgrade) {\r\n    v.stores({}).upgrade((tx) => {\r\n      onUpgrade?.(41);\r\n      return tx\r\n        .table(\"states\")\r\n        .toCollection()\r\n        .modify((state) => {\r\n          if (state.drawShapes) {\r\n            state.drawings = cloneDeep(state.drawShapes);\r\n            delete state.drawShapes;\r\n          }\r\n          if (state.fogShapes) {\r\n            state.fogs = cloneDeep(state.fogShapes);\r\n            delete state.fogShapes;\r\n          }\r\n        });\r\n    });\r\n  },\r\n};\r\n\r\nexport const latestVersion = 41;\r\n\r\n/**\r\n * Load versions onto a database up to a specific version number\r\n * @param {Dexie} db\r\n * @param {number=} upTo version number to load up to, latest version if undefined\r\n * @param {UpgradeEventHandler=} onUpgrade\r\n */\r\nexport function loadVersions(\r\n  db: Dexie,\r\n  upTo: number | undefined = latestVersion,\r\n  onUpgrade: UpgradeEventHandler | undefined\r\n) {\r\n  for (let versionNumber = 1; versionNumber <= upTo; versionNumber++) {\r\n    versions[versionNumber](db.version(versionNumber), onUpgrade);\r\n  }\r\n}\r\n\r\n/**\r\n * Convert from the previous representation of actions (1.7.0) to the new representation (1.8.0)\r\n * and combine into shapes\r\n */\r\nfunction convertOldActionsToShapes(actions: any[], actionIndex: number) {\r\n  let newShapes = {};\r\n  for (let i = 0; i <= actionIndex; i++) {\r\n    const action = actions[i];\r\n    if (!action) {\r\n      continue;\r\n    }\r\n    let newAction;\r\n    if (action.shapes) {\r\n      if (action.type === \"add\") {\r\n        newAction = new AddStatesAction(action.shapes);\r\n      } else if (action.type === \"edit\") {\r\n        newAction = new EditStatesAction(action.shapes);\r\n      } else if (action.type === \"remove\") {\r\n        newAction = new RemoveStatesAction(action.shapes);\r\n      } else if (action.type === \"subtract\") {\r\n        newAction = new SubtractFogAction(action.shapes);\r\n      } else if (action.type === \"cut\") {\r\n        newAction = new CutFogAction(action.shapes);\r\n      }\r\n    } else if (action.type === \"remove\" && action.shapeIds) {\r\n      newAction = new RemoveStatesAction(action.shapeIds);\r\n    }\r\n\r\n    if (newAction) {\r\n      newShapes = newAction.execute(newShapes);\r\n    }\r\n  }\r\n  return newShapes;\r\n}\r\n\r\n// Helper to create a thumbnail for a file in a db\r\nasync function createDataThumbnail(data: any): Promise<{\r\n  file: Uint8Array;\r\n  width: number;\r\n  height: number;\r\n  type: \"file\";\r\n  id: \"thumbnail\";\r\n}> {\r\n  let url: string;\r\n  if (data?.resolutions?.low?.file) {\r\n    url = URL.createObjectURL(new Blob([data.resolutions.low.file]));\r\n  } else {\r\n    url = URL.createObjectURL(new Blob([data.file]));\r\n  }\r\n  return await Dexie.waitFor(\r\n    new Promise((resolve) => {\r\n      let image = new Image();\r\n      image.onload = async () => {\r\n        const thumbnail = await createThumbnail(image, \"\");\r\n        if (thumbnail) {\r\n          resolve({\r\n            file: thumbnail.file,\r\n            width: thumbnail.width,\r\n            height: thumbnail.height,\r\n            type: \"file\",\r\n            id: \"thumbnail\",\r\n          });\r\n        }\r\n      };\r\n      image.src = url;\r\n    }),\r\n    60000 * 10 // 10 minute timeout\r\n  );\r\n}\r\n\r\nasync function createDataOutline(\r\n  data: any\r\n): Promise<{ id: string; outline: Outline }> {\r\n  const url = URL.createObjectURL(new Blob([data.file]));\r\n  return await Dexie.waitFor(\r\n    new Promise((resolve) => {\r\n      let image = new Image();\r\n      image.onload = async () => {\r\n        resolve({ id: data.id, outline: getImageOutline(image) });\r\n      };\r\n      image.onerror = () => {\r\n        resolve({\r\n          id: data.id,\r\n          outline: {\r\n            type: \"rect\",\r\n            width: data.width,\r\n            height: data.height,\r\n            x: 0,\r\n            y: 0,\r\n          },\r\n        });\r\n      };\r\n      image.src = url;\r\n    })\r\n  );\r\n}\r\n","const monsters: string[] = [\r\n  \"Aboleth\",\r\n  \"Acolyte\",\r\n  \"Black Dragon\",\r\n  \"Blue Dragon\",\r\n  \"Brass Dragon\",\r\n  \"Bronze Dragon\",\r\n  \"Copper Dragon\",\r\n  \"Gold Dragon\",\r\n  \"Green Dragon\",\r\n  \"Red Dragon\",\r\n  \"Silver Dragon\",\r\n  \"White Dragon\",\r\n  \"Air Elemental\",\r\n  \"Androsphinx\",\r\n  \"Animated Armor\",\r\n  \"Ankheg\",\r\n  \"Ape\",\r\n  \"Archmage\",\r\n  \"Assassin\",\r\n  \"Awakened Shrub\",\r\n  \"Awakened Tree\",\r\n  \"Axe Beak\",\r\n  \"Azer\",\r\n  \"Baboon\",\r\n  \"Badger\",\r\n  \"Balor\",\r\n  \"Bandit\",\r\n  \"Bandit Captain\",\r\n  \"Barbed Devil\",\r\n  \"Basilisk\",\r\n  \"Bat\",\r\n  \"Bearded Devil\",\r\n  \"Behir\",\r\n  \"Berserker\",\r\n  \"Black Bear\",\r\n  \"Black Pudding\",\r\n  \"Blink Dog\",\r\n  \"Blood Hawk\",\r\n  \"Boar\",\r\n  \"Bone Devil\",\r\n  \"Brown Bear\",\r\n  \"Bugbear\",\r\n  \"Bulette\",\r\n  \"Camel\",\r\n  \"Cat\",\r\n  \"Centaur\",\r\n  \"Chain Devil\",\r\n  \"Chimera\",\r\n  \"Chuul\",\r\n  \"Clay Golem\",\r\n  \"Cloaker\",\r\n  \"Cloud Giant\",\r\n  \"Cockatrice\",\r\n  \"Commoner\",\r\n  \"Constrictor Snake\",\r\n  \"Couatl\",\r\n  \"Crab\",\r\n  \"Crocodile\",\r\n  \"Cult Fanatic\",\r\n  \"Cultist\",\r\n  \"Darkmantle\",\r\n  \"Death Dog\",\r\n  \"Deep Gnome\",\r\n  \"Deer\",\r\n  \"Deva\",\r\n  \"Dire Wolf\",\r\n  \"Diseased Giant Rat\",\r\n  \"Djinni\",\r\n  \"Doppelganger\",\r\n  \"Draft Horse\",\r\n  \"Dragon Turtle\",\r\n  \"Dretch\",\r\n  \"Drider\",\r\n  \"Drow\",\r\n  \"Druid\",\r\n  \"Dryad\",\r\n  \"Duergar\",\r\n  \"Dust Mephit\",\r\n  \"Eagle\",\r\n  \"Earth Elemental\",\r\n  \"Efreeti\",\r\n  \"Elephant\",\r\n  \"Elk\",\r\n  \"Erinyes\",\r\n  \"Ettercap\",\r\n  \"Ettin\",\r\n  \"Fire Elemental\",\r\n  \"Fire Giant\",\r\n  \"Flesh Golem\",\r\n  \"Flying Snake\",\r\n  \"Flying Sword\",\r\n  \"Frog\",\r\n  \"Frost Giant\",\r\n  \"Gargoyle\",\r\n  \"Gelatinous Cube\",\r\n  \"Ghast\",\r\n  \"Ghost\",\r\n  \"Ghoul\",\r\n  \"Giant Ape\",\r\n  \"Giant Badger\",\r\n  \"Giant Bat\",\r\n  \"Giant Boar\",\r\n  \"Giant Centipede\",\r\n  \"Giant Constrictor Snake\",\r\n  \"Giant Crab\",\r\n  \"Giant Crocodile\",\r\n  \"Giant Eagle\",\r\n  \"Giant Elk\",\r\n  \"Giant Fire Beetle\",\r\n  \"Giant Frog\",\r\n  \"Giant Goat\",\r\n  \"Giant Hyena\",\r\n  \"Giant Lizard\",\r\n  \"Giant Octopus\",\r\n  \"Giant Owl\",\r\n  \"Giant Poisonous Snake\",\r\n  \"Giant Rat\",\r\n  \"Giant Scorpion\",\r\n  \"Giant Sea Horse\",\r\n  \"Giant Shark\",\r\n  \"Giant Spider\",\r\n  \"Giant Toad\",\r\n  \"Giant Vulture\",\r\n  \"Giant Wasp\",\r\n  \"Giant Weasel\",\r\n  \"Giant Wolf Spider\",\r\n  \"Gibbering Mouther\",\r\n  \"Glabrezu\",\r\n  \"Gladiator\",\r\n  \"Gnoll\",\r\n  \"Goat\",\r\n  \"Goblin\",\r\n  \"Gorgon\",\r\n  \"Gray Ooze\",\r\n  \"Green Hag\",\r\n  \"Grick\",\r\n  \"Griffon\",\r\n  \"Grimlock\",\r\n  \"Guard\",\r\n  \"Guardian Naga\",\r\n  \"Gynosphinx\",\r\n  \"Harpy\",\r\n  \"Hawk\",\r\n  \"Hell Hound\",\r\n  \"Hezrou\",\r\n  \"Hill Giant\",\r\n  \"Hippogriff\",\r\n  \"Hobgoblin\",\r\n  \"Homunculus\",\r\n  \"Horned Devil\",\r\n  \"Hunter Shark\",\r\n  \"Hydra\",\r\n  \"Hyena\",\r\n  \"Ice Devil\",\r\n  \"Ice Mephit\",\r\n  \"Imp\",\r\n  \"Incubus\",\r\n  \"Invisible Stalker\",\r\n  \"Iron Golem\",\r\n  \"Jackal\",\r\n  \"Killer Whale\",\r\n  \"Knight\",\r\n  \"Kobold\",\r\n  \"Kraken\",\r\n  \"Lamia\",\r\n  \"Lemure\",\r\n  \"Lich\",\r\n  \"Lion\",\r\n  \"Lizard\",\r\n  \"Lizardfolk\",\r\n  \"Mage\",\r\n  \"Magma Mephit\",\r\n  \"Magmin\",\r\n  \"Mammoth\",\r\n  \"Manticore\",\r\n  \"Marilith\",\r\n  \"Mastiff\",\r\n  \"Medusa\",\r\n  \"Merfolk\",\r\n  \"Merrow\",\r\n  \"Mimic\",\r\n  \"Minotaur\",\r\n  \"Minotaur Skeleton\",\r\n  \"Mule\",\r\n  \"Mummy\",\r\n  \"Mummy Lord\",\r\n  \"Nalfeshnee\",\r\n  \"Night Hag\",\r\n  \"Nightmare\",\r\n  \"Noble\",\r\n  \"Ochre Jelly\",\r\n  \"Octopus\",\r\n  \"Ogre\",\r\n  \"Ogre Zombie\",\r\n  \"Oni\",\r\n  \"Orc\",\r\n  \"Otyugh\",\r\n  \"Owl\",\r\n  \"Owlbear\",\r\n  \"Panther\",\r\n  \"Pegasus\",\r\n  \"Phase Spider\",\r\n  \"Pit Fiend\",\r\n  \"Planetar\",\r\n  \"Plesiosaurus\",\r\n  \"Poisonous Snake\",\r\n  \"Polar Bear\",\r\n  \"Pony\",\r\n  \"Priest\",\r\n  \"Pseudodragon\",\r\n  \"Purple Worm\",\r\n  \"Quasit\",\r\n  \"Quipper\",\r\n  \"Rakshasa\",\r\n  \"Rat\",\r\n  \"Raven\",\r\n  \"Reef Shark\",\r\n  \"Remorhaz\",\r\n  \"Rhinoceros\",\r\n  \"Riding Horse\",\r\n  \"Roc\",\r\n  \"Roper\",\r\n  \"Rug of Smothering\",\r\n  \"Rust Monster\",\r\n  \"Saber-Toothed Tiger\",\r\n  \"Sahuagin\",\r\n  \"Salamander\",\r\n  \"Satyr\",\r\n  \"Scorpion\",\r\n  \"Scout\",\r\n  \"Sea Hag\",\r\n  \"Sea Horse\",\r\n  \"Shadow\",\r\n  \"Shambling Mound\",\r\n  \"Shield Guardian\",\r\n  \"Shrieker\",\r\n  \"Skeleton\",\r\n  \"Solar\",\r\n  \"Specter\",\r\n  \"Spider\",\r\n  \"Spirit Naga\",\r\n  \"Sprite\",\r\n  \"Spy\",\r\n  \"Steam Mephit\",\r\n  \"Stirge\",\r\n  \"Stone Giant\",\r\n  \"Stone Golem\",\r\n  \"Storm Giant\",\r\n  \"Succubus\",\r\n  \"Swarm of Bats\",\r\n  \"Swarm of Beetles\",\r\n  \"Swarm of Centipedes\",\r\n  \"Swarm of Insects\",\r\n  \"Swarm of Poisonous Snakes\",\r\n  \"Swarm of Quippers\",\r\n  \"Swarm of Rats\",\r\n  \"Swarm of Ravens\",\r\n  \"Swarm of Spiders\",\r\n  \"Swarm of Wasps\",\r\n  \"Tarrasque\",\r\n  \"Thug\",\r\n  \"Tiger\",\r\n  \"Treant\",\r\n  \"Tribal Warrior\",\r\n  \"Triceratops\",\r\n  \"Troll\",\r\n  \"Tyrannosaurus Rex\",\r\n  \"Unicorn\",\r\n  \"Vampire\",\r\n  \"Vampire Spawn\",\r\n  \"Veteran\",\r\n  \"Violet Fungus\",\r\n  \"Vrock\",\r\n  \"Vulture\",\r\n  \"Warhorse\",\r\n  \"Warhorse Skeleton\",\r\n  \"Water Elemental\",\r\n  \"Weasel\",\r\n  \"Werebear\",\r\n  \"Wereboar\",\r\n  \"Wererat\",\r\n  \"Weretiger\",\r\n  \"Werewolf\",\r\n  \"Wight\",\r\n  \"Will-o'-Wisp\",\r\n  \"Winter Wolf\",\r\n  \"Wolf\",\r\n  \"Worg\",\r\n  \"Wraith\",\r\n  \"Wyvern\",\r\n  \"Xorn\",\r\n  \"Zombie\"\r\n];\r\n\r\nexport default monsters;\r\n\r\nexport function getRandomMonster(): string {\r\n  return monsters[Math.floor(Math.random() * monsters.length)];\r\n}\r\n","// Arquivo: owlbear-rodeo-legacy/src/database.ts\r\n\r\nimport Dexie, { DexieOptions } from \"dexie\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { loadVersions, UpgradeEventHandler } from \"./upgrade\";\r\nimport { getDefaultMaps } from \"./maps\";\r\nimport { getDefaultTokens } from \"./tokens\";\r\nimport { getRandomMonster } from \"./helpers/monsters\";\r\n\r\nfunction populate(db: Dexie) {\r\n  db.on(\"populate\", () => {\r\n    // ========== PRIORIDADE 1: Usar dados do Laravel ==========\r\n    const laravelUserId = localStorage.getItem('owlbear_user_id');\r\n    const laravelName = localStorage.getItem('owlbear_user_name');\r\n    \r\n    const userId = laravelUserId || uuid();\r\n    const nickname = laravelName || getRandomMonster();\r\n    \r\n    console.log(\" Populando database com:\", { userId, nickname, fromLaravel: !!laravelName });\r\n    \r\n    db.table(\"user\").add({ key: \"userId\", value: userId });\r\n    db.table(\"user\").add({ key: \"nickname\", value: nickname });\r\n    \r\n    const { maps, mapStates } = getDefaultMaps(userId);\r\n    db.table(\"maps\").bulkAdd(maps);\r\n    db.table(\"states\").bulkAdd(mapStates);\r\n    const tokens = getDefaultTokens(userId);\r\n    db.table(\"tokens\").bulkAdd(tokens);\r\n    db.table(\"groups\").bulkAdd([\r\n      { id: \"maps\", items: maps.map((map) => ({ id: map.id, type: \"item\" })) },\r\n      { id: \"tokens\", items: tokens.map((token) => ({ id: token.id, type: \"item\" })) },\r\n    ]);\r\n  });\r\n}\r\n\r\nexport function getDatabase(\r\n  options: DexieOptions,\r\n  name: string | undefined = \"OwlbearRodeoDB\",\r\n  versionNumber: number | undefined = undefined,\r\n  populateData: boolean | undefined = true,\r\n  onUpgrade: UpgradeEventHandler | undefined = undefined\r\n): Dexie {\r\n  const db = new Dexie(name, options);\r\n  loadVersions(db, versionNumber, onUpgrade);\r\n\r\n  // Integrao com Laravel removida do database.ts para evitar conflitos com Web Workers\r\n  // Os dados sero salvos localmente no IndexedDB do navegador\r\n  // Para integrao futura, use as APIs REST diretamente nos componentes React\r\n  \r\n  if (populateData) {\r\n    populate(db);\r\n  }\r\n  \r\n  return db;\r\n}","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Dexie from \"dexie\";\r\nimport * as Comlink from \"comlink\";\r\n\r\nimport ErrorBanner from \"../components/banner/ErrorBanner\";\r\n\r\nimport { getDatabase } from \"../database\";\r\n\r\n//@ts-ignore\r\nimport DatabaseWorker from \"worker-loader!../workers/DatabaseWorker\"; // eslint-disable-line import/no-webpack-loader-syntax\r\nimport { DatabaseWorkerService } from \"../workers/DatabaseWorker\";\r\n\r\nexport type DatabaseStatus = \"loading\" | \"disabled\" | \"upgrading\" | \"loaded\";\r\n\r\ntype DatabaseContextValue = {\r\n  database: Dexie | undefined;\r\n  databaseStatus: DatabaseStatus;\r\n  databaseError: Error | undefined;\r\n  worker: Comlink.Remote<DatabaseWorkerService>;\r\n};\r\n\r\nconst DatabaseContext =\r\n  React.createContext<DatabaseContextValue | undefined>(undefined);\r\n\r\nconst worker: Comlink.Remote<DatabaseWorkerService> = Comlink.wrap(\r\n  new DatabaseWorker()\r\n);\r\n\r\nexport function DatabaseProvider({ children }: { children: React.ReactNode }) {\r\n  const [database, setDatabase] = useState<Dexie>();\r\n  const [databaseStatus, setDatabaseStatus] =\r\n    useState<DatabaseStatus>(\"loading\");\r\n  const [databaseError, setDatabaseError] = useState<Error>();\r\n\r\n  useEffect(() => {\r\n    // Create a test database and open it to see if indexedDB is enabled\r\n    let testDBRequest = window.indexedDB.open(\"__test\");\r\n    testDBRequest.onsuccess = async function () {\r\n      testDBRequest.result.close();\r\n      let db = getDatabase(\r\n        { autoOpen: false },\r\n        undefined,\r\n        undefined,\r\n        true,\r\n        () => {\r\n          setDatabaseStatus(\"upgrading\");\r\n        }\r\n      );\r\n      setDatabase(db);\r\n      db.on(\"ready\", () => {\r\n        setDatabaseStatus(\"loaded\");\r\n      });\r\n      db.on(\"versionchange\", () => {\r\n        // When another tab loads a new version of the database refresh the page\r\n        window.location.reload();\r\n      });\r\n      await db.open();\r\n      window.indexedDB.deleteDatabase(\"__test\");\r\n    };\r\n    // If indexedb disabled create an in memory database\r\n    testDBRequest.onerror = async function () {\r\n      console.warn(\"Database is disabled, no state will be saved\");\r\n      const indexedDB = await import(\"fake-indexeddb\");\r\n      const IDBKeyRange = await import(\"fake-indexeddb/lib/FDBKeyRange\");\r\n      let db = getDatabase({ indexedDB, IDBKeyRange, autoOpen: false });\r\n      setDatabase(db);\r\n      db.on(\"ready\", () => {\r\n        setDatabaseStatus(\"disabled\");\r\n      });\r\n      await db.open();\r\n      window.indexedDB.deleteDatabase(\"__test\");\r\n    };\r\n\r\n    function handleDatabaseError(event: PromiseRejectionEvent) {\r\n      if (event) {\r\n        event.preventDefault();\r\n        if (event.reason instanceof Dexie.DexieError) {\r\n          if (event.reason?.inner?.name === \"QuotaExceededError\") {\r\n            setDatabaseError({\r\n              name: event.reason?.name,\r\n              message:\r\n                \"Storage Quota Exceeded Please Clear Space and Try Again.\",\r\n            });\r\n          } else if (event.reason?.inner?.name === \"DatabaseClosedError\") {\r\n            setDatabaseError({\r\n              name: event.reason?.name,\r\n              message: \"Database closed, please refresh your browser.\",\r\n            });\r\n          } else {\r\n            setDatabaseError({\r\n              name: event.reason?.name,\r\n              message: \"Something went wrong, please refresh your browser.\",\r\n            });\r\n          }\r\n        } else {\r\n          setDatabaseError({\r\n            name: event.reason?.name,\r\n            message: \"Something went wrong, please refresh your browser.\",\r\n          });\r\n        }\r\n        console.error(event.reason);\r\n      }\r\n    }\r\n    window.addEventListener(\"unhandledrejection\", handleDatabaseError);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"unhandledrejection\", handleDatabaseError);\r\n    };\r\n  }, []);\r\n\r\n  const value = {\r\n    database,\r\n    databaseStatus,\r\n    databaseError,\r\n    worker,\r\n  };\r\n  return (\r\n    <DatabaseContext.Provider value={value}>\r\n      <>\r\n        {children}\r\n        <ErrorBanner\r\n          error={databaseError}\r\n          onRequestClose={() => setDatabaseError(undefined)}\r\n        />\r\n      </>\r\n    </DatabaseContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useDatabase() {\r\n  const context = useContext(DatabaseContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useDatabase must be used within a DatabaseProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default DatabaseContext;\r\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/DatabaseWorker.7f8257b1.worker.js\");\n}\n","// Arquivo: owlbear-rodeo-legacy/src/contexts/UserIdContext.tsx\r\n\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\n\r\nimport { useDatabase } from \"./DatabaseContext\";\r\n\r\nconst UserIdContext = React.createContext<string | undefined>(undefined);\r\n\r\nexport function UserIdProvider({ children }: { children: React.ReactNode }) {\r\n  const { database, databaseStatus } = useDatabase();\r\n\r\n  const [userId, setUserId] = useState<string | undefined>();\r\n  \r\n  useEffect(() => {\r\n    if (!database || databaseStatus === \"loading\") {\r\n      return;\r\n    }\r\n    \r\n    async function loadUserId() {\r\n      if (database) {\r\n        // ========== PRIORIDADE 1: Usar userId do Laravel (localStorage) ==========\r\n        const laravelUserId = localStorage.getItem('owlbear_user_id');\r\n        \r\n        if (laravelUserId) {\r\n          console.log(\" Usando userId do Laravel:\", laravelUserId);\r\n          \r\n          // Salva no IndexedDB para manter compatibilidade\r\n          await database.table(\"user\").put({\r\n            key: \"userId\",\r\n            value: laravelUserId\r\n          });\r\n          \r\n          setUserId(laravelUserId);\r\n          return;\r\n        }\r\n        \r\n        // ========== FALLBACK: Usar userId do IndexedDB (comportamento original) ==========\r\n        const storedUserId = await database.table(\"user\").get(\"userId\");\r\n        if (storedUserId) {\r\n          console.log(\" Usando userId do IndexedDB:\", storedUserId.value);\r\n          setUserId(storedUserId.value);\r\n        }\r\n      }\r\n    }\r\n\r\n    loadUserId();\r\n  }, [database, databaseStatus]);\r\n\r\n  return (\r\n    <UserIdContext.Provider value={userId}>{children}</UserIdContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useUserId() {\r\n  return useContext(UserIdContext);\r\n}\r\n\r\nexport default UserIdContext;","import { useEffect, useState } from \"react\";\r\n\r\nfunction useDebounce<Type>(value: Type, delay: number): Type | undefined {\r\n  const [debouncedValue, setDebouncedValue] = useState<Type>();\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n    return () => {\r\n      clearTimeout(timeout);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\nexport default useDebounce;\r\n","import { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport { Diff } from \"deep-diff\";\r\n\r\nimport useDebounce from \"./useDebounce\";\r\nimport { diff, applyChanges } from \"../helpers/diff\";\r\nimport Session from \"../network/Session\";\r\n\r\n/**\r\n * @param update The updated state or a state function passed into setState\r\n * @param sync Whether to sync the update with the session\r\n * @param force Whether to force a full update, usefull when partialUpdates is enabled\r\n */\r\nexport type SetNetworkedState<S> = (\r\n  update: React.SetStateAction<S>,\r\n  sync?: boolean,\r\n  force?: boolean\r\n) => void;\r\n\r\ntype Update<T> = {\r\n  id: string;\r\n  changes: Diff<T>[];\r\n};\r\n\r\n/**\r\n * Helper to sync a react state to a `Session`\r\n *\r\n * @param {S} initialState\r\n * @param {Session} session `Session` instance\r\n * @param {string} eventName Name of the event to send to the session\r\n * @param {number} debounceRate Amount to debounce before sending to the session (ms)\r\n * @param {boolean} partialUpdates Allow sending of partial updates to the session\r\n * @param {string} partialUpdatesKey Key to lookup in the state to identify a partial update\r\n */\r\nfunction useNetworkedState<S extends { readonly [x: string]: any } | null>(\r\n  initialState: S,\r\n  session: Session,\r\n  eventName: string,\r\n  debounceRate: number = 500,\r\n  partialUpdates: boolean = true,\r\n  partialUpdatesKey: string = \"id\"\r\n): [S, SetNetworkedState<S>] {\r\n  const [state, _setState] = useState(initialState);\r\n  // Used to control whether the state needs to be sent to the socket\r\n  const dirtyRef = useRef(false);\r\n\r\n  // Used to force a full update\r\n  const forceUpdateRef = useRef(false);\r\n\r\n  // Update dirty at the same time as state\r\n  const setState = useCallback<SetNetworkedState<S>>(\r\n    (update, sync = true, force = false) => {\r\n      dirtyRef.current = sync;\r\n      forceUpdateRef.current = force;\r\n      _setState(update);\r\n    },\r\n    []\r\n  );\r\n\r\n  const debouncedState = useDebounce(state, debounceRate);\r\n  const lastSyncedStateRef = useRef<S>();\r\n  useEffect(() => {\r\n    if (dirtyRef.current) {\r\n      // If partial updates enabled, send just the changes to the socket\r\n      if (\r\n        lastSyncedStateRef.current &&\r\n        debouncedState &&\r\n        partialUpdates &&\r\n        !forceUpdateRef.current\r\n      ) {\r\n        const changes = diff(lastSyncedStateRef.current, debouncedState);\r\n        if (changes) {\r\n          if (!debouncedState) {\r\n            return;\r\n          }\r\n          const update = { id: debouncedState[partialUpdatesKey], changes };\r\n          session.socket?.emit(`${eventName}_update`, update);\r\n        }\r\n      } else {\r\n        session.socket?.emit(eventName, debouncedState);\r\n      }\r\n      dirtyRef.current = false;\r\n      forceUpdateRef.current = false;\r\n      lastSyncedStateRef.current = cloneDeep(debouncedState);\r\n    }\r\n  }, [\r\n    session.socket,\r\n    eventName,\r\n    debouncedState,\r\n    partialUpdates,\r\n    partialUpdatesKey,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    function handleSocketEvent(data: S) {\r\n      _setState(data);\r\n      lastSyncedStateRef.current = data;\r\n    }\r\n\r\n    function handleSocketUpdateEvent(update: Update<S>) {\r\n      _setState((prevState) => {\r\n        if (prevState && prevState[partialUpdatesKey] === update.id) {\r\n          let newState = { ...prevState };\r\n          applyChanges(newState, update.changes);\r\n          if (lastSyncedStateRef.current) {\r\n            applyChanges(lastSyncedStateRef.current, update.changes);\r\n          }\r\n          return newState;\r\n        } else {\r\n          return prevState;\r\n        }\r\n      });\r\n    }\r\n\r\n    session.socket?.on(eventName, handleSocketEvent);\r\n    session.socket?.on(`${eventName}_update`, handleSocketUpdateEvent);\r\n    return () => {\r\n      session.socket?.off(eventName, handleSocketEvent);\r\n      session.socket?.off(`${eventName}_update`, handleSocketUpdateEvent);\r\n    };\r\n  }, [session.socket, eventName, partialUpdatesKey]);\r\n\r\n  return [state, setState];\r\n}\r\n\r\nexport default useNetworkedState;\r\n","import React, { useEffect, useContext } from \"react\";\r\n\r\nimport { useDatabase } from \"./DatabaseContext\";\r\nimport { useUserId } from \"./UserIdContext\";\r\n\r\nimport useNetworkedState, {\r\n  SetNetworkedState,\r\n} from \"../hooks/useNetworkedState\";\r\nimport Session, { SessionStatus } from \"../network/Session\";\r\nimport { PlayerState } from \"../types/PlayerState\";\r\n\r\nexport const PlayerStateContext = React.createContext<PlayerState | undefined>(\r\n  undefined\r\n);\r\nexport const PlayerUpdaterContext = React.createContext<\r\n  SetNetworkedState<PlayerState> | undefined\r\n>(undefined);\r\n\r\ntype PlayerProviderProps = {\r\n  session: Session;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function PlayerProvider({ session, children }: PlayerProviderProps) {\r\n  const userId = useUserId();\r\n  const { database, databaseStatus } = useDatabase();\r\n\r\n  const [playerState, setPlayerState] = useNetworkedState<PlayerState>(\r\n    {\r\n      nickname: \"\",\r\n      timer: undefined,\r\n      dice: { share: false, rolls: [] },\r\n      diceRolls: [],       // <-- ADICIONADO: evita TS2345\r\n      sessionId: undefined,\r\n      userId,\r\n    },\r\n    session,\r\n    \"player_state\",\r\n    500,\r\n    false\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!database || databaseStatus === \"loading\") {\r\n      return;\r\n    }\r\n    async function loadNickname() {\r\n      const storedNickname = await database?.table(\"user\").get(\"nickname\");\r\n      if (storedNickname !== undefined) {\r\n        setPlayerState((prevState) => ({\r\n          ...prevState,\r\n          nickname: storedNickname.value,\r\n        }));\r\n      }\r\n    }\r\n\r\n    loadNickname();\r\n  }, [database, databaseStatus, setPlayerState]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      playerState.nickname &&\r\n      database !== undefined &&\r\n      (databaseStatus === \"loaded\" || databaseStatus === \"disabled\")\r\n    ) {\r\n      database\r\n        .table(\"user\")\r\n        .update(\"nickname\", { value: playerState.nickname });\r\n    }\r\n  }, [playerState, database, databaseStatus]);\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setPlayerState((prevState) => {\r\n        if (prevState) {\r\n          return {\r\n            ...prevState,\r\n            userId,\r\n          };\r\n        }\r\n        return prevState;\r\n      });\r\n    }\r\n  }, [userId, setPlayerState]);\r\n\r\n  useEffect(() => {\r\n    function updateSessionId() {\r\n      setPlayerState((prevState) => {\r\n        if (prevState) {\r\n          return {\r\n            ...prevState,\r\n            sessionId: session.id,\r\n          };\r\n        }\r\n        return prevState;\r\n      });\r\n    }\r\n    function handleSocketConnect() {\r\n      // Set the player state to trigger a sync\r\n      updateSessionId();\r\n    }\r\n\r\n    function handleSocketStatus(status: SessionStatus) {\r\n      if (status === \"joined\") {\r\n        updateSessionId();\r\n      }\r\n    }\r\n\r\n    session.on(\"status\", handleSocketStatus);\r\n    session.socket?.on(\"connect\", handleSocketConnect);\r\n    session.socket?.io.on(\"reconnect\", handleSocketConnect);\r\n\r\n    return () => {\r\n      session.off(\"status\", handleSocketStatus);\r\n      session.socket?.off(\"connect\", handleSocketConnect);\r\n      session.socket?.io.off(\"reconnect\", handleSocketConnect);\r\n    };\r\n  }, [session, setPlayerState]); // <-- dependncias adicionadas\r\n\r\n  return (\r\n    <PlayerStateContext.Provider value={playerState}>\r\n      <PlayerUpdaterContext.Provider value={setPlayerState}>\r\n        {children}\r\n      </PlayerUpdaterContext.Provider>\r\n    </PlayerStateContext.Provider>\r\n  );\r\n}\r\n\r\nexport function usePlayerState() {\r\n  const context = useContext(PlayerStateContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"usePlayerState must be used within a PlayerProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function usePlayerUpdater() {\r\n  const context = useContext(PlayerUpdaterContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"usePlayerUpdater must be used within a PlayerProvider\");\r\n  }\r\n  return context;\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Session from \"../network/Session\";\r\n\r\nimport { PartyState } from \"../types/PartyState\";\r\n\r\nconst PartyContext = React.createContext<PartyState | undefined>(undefined);\r\n\r\ntype PartyProviderProps = {\r\n  session: Session;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function PartyProvider({ session, children }: PartyProviderProps) {\r\n  const [partyState, setPartyState] = useState<PartyState>({});\r\n\r\n  useEffect(() => {\r\n    function handleSocketPartyState(partyState: PartyState) {\r\n      if (partyState && session.id) {\r\n        const { [session.id]: _, ...otherMembersState } = partyState;\r\n        setPartyState(otherMembersState);\r\n      } else {\r\n        setPartyState({});\r\n      }\r\n    }\r\n\r\n    session.socket?.on(\"party_state\", handleSocketPartyState);\r\n\r\n    return () => {\r\n      session.socket?.off(\"party_state\", handleSocketPartyState);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <PartyContext.Provider value={partyState}>{children}</PartyContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useParty() {\r\n  const context = useContext(PartyContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useParty must be used within a PartyProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default PartyContext;\r\n","import React, { useState, useContext, useCallback, useEffect } from \"react\";\r\nimport * as Comlink from \"comlink\";\r\nimport { encode } from \"@msgpack/msgpack\";\r\nimport { useLiveQuery } from \"dexie-react-hooks\";\r\n\r\nimport { useDatabase } from \"./DatabaseContext\";\r\n\r\nimport useDebounce from \"../hooks/useDebounce\";\r\n\r\nimport { omit } from \"../helpers/shared\";\r\nimport { Asset } from \"../types/Asset\";\r\n\r\nexport type GetAssetEventHanlder = (\r\n  assetId: string\r\n) => Promise<Asset | undefined>;\r\nexport type AddAssetsEventHandler = (assets: Asset[]) => Promise<void>;\r\nexport type PutAssetEventsHandler = (asset: Asset) => Promise<void>;\r\n\r\ntype AssetsContextValue = {\r\n  getAsset: GetAssetEventHanlder;\r\n  addAssets: AddAssetsEventHandler;\r\n  putAsset: PutAssetEventsHandler;\r\n};\r\n\r\nconst AssetsContext =\r\n  React.createContext<AssetsContextValue | undefined>(undefined);\r\n\r\n// 100 MB max cache size\r\nconst maxCacheSize = 1e8;\r\n\r\nexport function AssetsProvider({ children }: { children: React.ReactNode }) {\r\n  const { worker, database, databaseStatus } = useDatabase();\r\n\r\n  useEffect(() => {\r\n    if (databaseStatus === \"loaded\") {\r\n      worker.cleanAssetCache(maxCacheSize);\r\n    }\r\n  }, [worker, databaseStatus]);\r\n\r\n  const getAsset = useCallback<GetAssetEventHanlder>(\r\n    async (assetId) => {\r\n      if (database) {\r\n        return await database.table(\"assets\").get(assetId);\r\n      }\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const addAssets = useCallback<AddAssetsEventHandler>(\r\n    async (assets) => {\r\n      if (database) {\r\n        await database.table(\"assets\").bulkAdd(assets);\r\n      }\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const putAsset = useCallback<PutAssetEventsHandler>(\r\n    async (asset) => {\r\n      if (database) {\r\n        // Check for broadcast channel and attempt to use worker to put map to avoid UI lockup\r\n        // Safari doesn't support BC so fallback to single thread\r\n        if (window.BroadcastChannel) {\r\n          const packedAsset = encode(asset);\r\n          const success = await worker.putData(\r\n            Comlink.transfer(packedAsset, [packedAsset.buffer]),\r\n            \"assets\"\r\n          );\r\n          if (!success) {\r\n            await database.table(\"assets\").put(asset);\r\n          }\r\n        } else {\r\n          await database.table(\"assets\").put(asset);\r\n        }\r\n      }\r\n    },\r\n    [database, worker]\r\n  );\r\n\r\n  const value = {\r\n    getAsset,\r\n    addAssets,\r\n    putAsset,\r\n  };\r\n\r\n  return (\r\n    <AssetsContext.Provider value={value}>{children}</AssetsContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAssets() {\r\n  const context = useContext(AssetsContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAssets must be used within a AssetsProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\n/**\r\n * @typedef AssetURL\r\n * @property {string} url\r\n * @property {string} id\r\n * @property {number} references\r\n */\r\n\r\ntype AssetURL = {\r\n  url: string | null;\r\n  id: string;\r\n  references: number;\r\n};\r\n\r\ntype AssetURLs = Record<string, AssetURL>;\r\n\r\nexport const AssetURLsStateContext =\r\n  React.createContext<AssetURLs | undefined>(undefined);\r\n\r\nexport const AssetURLsUpdaterContext =\r\n  React.createContext<\r\n    React.Dispatch<React.SetStateAction<AssetURLs>> | undefined\r\n  >(undefined);\r\n\r\n/**\r\n * Helper to manage sharing of custom image sources between uses of useAssetURL\r\n */\r\nexport function AssetURLsProvider({ children }: { children: React.ReactNode }) {\r\n  const [assetURLs, setAssetURLs] = useState<AssetURLs>({});\r\n  const { database } = useDatabase();\r\n\r\n  // Keep track of the assets that need to be loaded\r\n  const [assetKeys, setAssetKeys] = useState<string[]>([]);\r\n\r\n  // Load assets after 100ms\r\n  const loadingDebouncedAssetURLs = useDebounce(assetURLs, 100);\r\n\r\n  // Update the asset keys to load when a url is added without an asset attached\r\n  useEffect(() => {\r\n    if (!loadingDebouncedAssetURLs) {\r\n      return;\r\n    }\r\n    let keysToLoad: string[] = [];\r\n    for (let url of Object.values(loadingDebouncedAssetURLs)) {\r\n      if (url.url === null) {\r\n        keysToLoad.push(url.id);\r\n      }\r\n    }\r\n    if (keysToLoad.length > 0) {\r\n      setAssetKeys(keysToLoad);\r\n    }\r\n  }, [loadingDebouncedAssetURLs]);\r\n\r\n  // Get the new assets whenever the keys change\r\n  const assets = useLiveQuery<Asset[]>(\r\n    () => database?.table(\"assets\").bulkGet(assetKeys) || [],\r\n    [database, assetKeys]\r\n  );\r\n\r\n  // Update asset URLs when assets are loaded\r\n  useEffect(() => {\r\n    if (!assets || assets.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // Assets are about to be loaded so clear the keys to load\r\n    setAssetKeys([]);\r\n\r\n    setAssetURLs((prevURLs) => {\r\n      let newURLs = { ...prevURLs };\r\n      for (let asset of assets) {\r\n        if (asset && newURLs[asset.id]?.url === null) {\r\n          newURLs[asset.id] = {\r\n            ...newURLs[asset.id],\r\n            url: URL.createObjectURL(\r\n              new Blob([asset.file], { type: asset.mime })\r\n            ),\r\n          };\r\n        }\r\n      }\r\n      return newURLs;\r\n    });\r\n  }, [assets]);\r\n\r\n  // Clean up asset URLs every minute\r\n  const cleanUpDebouncedAssetURLs = useDebounce(assetURLs, 60 * 1000);\r\n\r\n  // Revoke url when no more references\r\n  useEffect(() => {\r\n    setAssetURLs((prevURLs) => {\r\n      let urlsToCleanup = [];\r\n      for (let url of Object.values(prevURLs)) {\r\n        if (url.references <= 0) {\r\n          url.url && URL.revokeObjectURL(url.url);\r\n          urlsToCleanup.push(url.id);\r\n        }\r\n      }\r\n      if (urlsToCleanup.length > 0) {\r\n        return omit(prevURLs, urlsToCleanup);\r\n      } else {\r\n        return prevURLs;\r\n      }\r\n    });\r\n  }, [cleanUpDebouncedAssetURLs]);\r\n\r\n  return (\r\n    <AssetURLsStateContext.Provider value={assetURLs}>\r\n      <AssetURLsUpdaterContext.Provider value={setAssetURLs}>\r\n        {children}\r\n      </AssetURLsUpdaterContext.Provider>\r\n    </AssetURLsStateContext.Provider>\r\n  );\r\n}\r\n\r\n/**\r\n * Helper function to load either file or default asset into a URL\r\n */\r\nexport function useAssetURL(\r\n  assetId: string | null,\r\n  type: \"file\" | \"default\" | null,\r\n  defaultSources: Record<string, string>,\r\n  unknownSource?: string\r\n) {\r\n  const assetURLs = useContext(AssetURLsStateContext);\r\n  if (assetURLs === undefined) {\r\n    throw new Error(\"useAssetURL must be used within a AssetURLsProvider\");\r\n  }\r\n  const setAssetURLs = useContext(AssetURLsUpdaterContext);\r\n  if (setAssetURLs === undefined) {\r\n    throw new Error(\"useAssetURL must be used within a AssetURLsProvider\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!assetId || type !== \"file\") {\r\n      return;\r\n    }\r\n    const updateAssetURL = () => {\r\n      const increaseReferences = (prevURLs: AssetURLs): AssetURLs => {\r\n        return {\r\n          ...prevURLs,\r\n          [assetId]: {\r\n            ...prevURLs[assetId],\r\n            references: prevURLs[assetId].references + 1,\r\n          },\r\n        };\r\n      };\r\n\r\n      const createReference = (prevURLs: AssetURLs): AssetURLs => {\r\n        return {\r\n          ...prevURLs,\r\n          [assetId]: { url: null, id: assetId, references: 1 },\r\n        };\r\n      };\r\n      setAssetURLs?.((prevURLs) => {\r\n        if (assetId in prevURLs) {\r\n          // Check if the asset url is already added and increase references\r\n          return increaseReferences(prevURLs);\r\n        } else {\r\n          return createReference(prevURLs);\r\n        }\r\n      });\r\n    };\r\n\r\n    updateAssetURL();\r\n\r\n    return () => {\r\n      // Decrease references\r\n      setAssetURLs((prevURLs) => {\r\n        if (assetId in prevURLs) {\r\n          return {\r\n            ...prevURLs,\r\n            [assetId]: {\r\n              ...prevURLs[assetId],\r\n              references: prevURLs[assetId].references - 1,\r\n            },\r\n          };\r\n        } else {\r\n          return prevURLs;\r\n        }\r\n      });\r\n    };\r\n  }, [assetId, setAssetURLs, type]);\r\n\r\n  if (!assetId) {\r\n    return unknownSource;\r\n  }\r\n\r\n  if (type === \"default\") {\r\n    return defaultSources[assetId];\r\n  }\r\n\r\n  if (type === \"file\") {\r\n    return assetURLs[assetId]?.url || unknownSource;\r\n  }\r\n\r\n  return unknownSource;\r\n}\r\n\r\ntype FileData = {\r\n  file: string;\r\n  type: \"file\";\r\n  thumbnail?: string;\r\n  quality?: string;\r\n  resolutions?: Record<string, string>;\r\n};\r\n\r\ntype DefaultData = {\r\n  key: string;\r\n  type: \"default\";\r\n};\r\n\r\n/**\r\n * Load a map or token into a URL taking into account a thumbnail and multiple resolutions\r\n */\r\nexport function useDataURL(\r\n  data: FileData | DefaultData | null,\r\n  defaultSources: Record<string, string>,\r\n  unknownSource: string | undefined = undefined,\r\n  thumbnail = false\r\n) {\r\n  const [assetId, setAssetId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    function loadAssetId() {\r\n      if (!data) {\r\n        return;\r\n      }\r\n      if (data.type === \"default\") {\r\n        setAssetId(data.key);\r\n      } else {\r\n        if (thumbnail && data.thumbnail) {\r\n          setAssetId(data.thumbnail);\r\n        } else if (\r\n          data.resolutions &&\r\n          data.quality &&\r\n          data.quality !== \"original\"\r\n        ) {\r\n          setAssetId(data.resolutions[data.quality]);\r\n        } else {\r\n          setAssetId(data.file);\r\n        }\r\n      }\r\n    }\r\n\r\n    loadAssetId();\r\n  }, [data, thumbnail]);\r\n\r\n  const assetURL = useAssetURL(\r\n    assetId || null,\r\n    data?.type || null,\r\n    defaultSources,\r\n    unknownSource\r\n  );\r\n  return assetURL;\r\n}\r\n\r\nexport default AssetsContext;\r\n","import { v4 as uuid } from \"uuid\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\nimport { keyBy } from \"./shared\";\r\nimport { Group, GroupContainer, GroupItem } from \"../types/Group\";\r\n\r\n/**\r\n * Transform an array of group ids to their groups\r\n */\r\nexport function groupsFromIds(groupIds: string[], groups: Group[]): Group[] {\r\n  const groupsByIds = keyBy(groups, \"id\");\r\n  const filteredGroups: Group[] = [];\r\n  for (let groupId of groupIds) {\r\n    if (groupId in groupsByIds) {\r\n      filteredGroups.push(groupsByIds[groupId]);\r\n    }\r\n  }\r\n  return filteredGroups;\r\n}\r\n\r\n/**\r\n * Get all items from a group including all sub groups\r\n */\r\nexport function getGroupItems(group: Group): GroupItem[] {\r\n  if (group.type === \"group\") {\r\n    let groups = [];\r\n    for (let item of group.items) {\r\n      groups.push(...getGroupItems(item));\r\n    }\r\n    return groups;\r\n  } else {\r\n    return [group];\r\n  }\r\n}\r\n\r\n/**\r\n * Transform an array of groups into their assosiated items\r\n */\r\nexport function itemsFromGroups<Item>(\r\n  groups: Group[],\r\n  allItems: Item[],\r\n  itemKey = \"id\"\r\n): Item[] {\r\n  const allItemsById = keyBy(allItems, itemKey);\r\n  const groupedItems: Item[] = [];\r\n\r\n  for (let group of groups) {\r\n    const groupItems = getGroupItems(group);\r\n    const items = groupItems.map((item) => allItemsById[item.id]);\r\n    groupedItems.push(...items);\r\n  }\r\n\r\n  return groupedItems;\r\n}\r\n\r\n/**\r\n * Combine a group and a group item\r\n */\r\nexport function combineGroups(a: Group, b: Group): GroupContainer {\r\n  switch (a.type) {\r\n    case \"item\":\r\n      if (b.type !== \"item\") {\r\n        throw new Error(\"Unable to combine two GroupContainers\");\r\n      }\r\n      return {\r\n        id: uuid(),\r\n        type: \"group\",\r\n        items: [a, b],\r\n        name: \"\",\r\n      };\r\n    case \"group\":\r\n      if (b.type !== \"item\") {\r\n        throw new Error(\"Unable to combine two GroupContainers\");\r\n      }\r\n      return {\r\n        id: a.id,\r\n        type: \"group\",\r\n        items: [...a.items, b],\r\n        name: a.name,\r\n      };\r\n    default:\r\n      throw new Error(\"Group type not implemented\");\r\n  }\r\n}\r\n\r\n/**\r\n * Immutably move group at indices `indices` into group at index `into`\r\n */\r\nexport function moveGroupsInto(\r\n  groups: Group[],\r\n  into: number,\r\n  indices: number[]\r\n): Group[] {\r\n  const newGroups = cloneDeep(groups);\r\n\r\n  const intoGroup = newGroups[into];\r\n  let fromGroups: Group[] = [];\r\n  for (let i of indices) {\r\n    fromGroups.push(newGroups[i]);\r\n  }\r\n\r\n  let combined: Group = intoGroup;\r\n  for (let fromGroup of fromGroups) {\r\n    combined = combineGroups(combined, fromGroup);\r\n  }\r\n\r\n  // Replace and remove old groups\r\n  newGroups[into] = combined;\r\n  for (let fromGroup of fromGroups) {\r\n    const i = newGroups.findIndex((group) => group.id === fromGroup.id);\r\n    newGroups.splice(i, 1);\r\n  }\r\n\r\n  return newGroups;\r\n}\r\n\r\n/**\r\n * Immutably move group at indices `indices` to index `to`\r\n */\r\nexport function moveGroups(\r\n  groups: Group[],\r\n  to: number,\r\n  indices: number[]\r\n): Group[] {\r\n  const newGroups = cloneDeep(groups);\r\n\r\n  let fromGroups = [];\r\n  for (let i of indices) {\r\n    fromGroups.push(newGroups[i]);\r\n  }\r\n\r\n  // Remove old groups\r\n  for (let fromGroup of fromGroups) {\r\n    const i = newGroups.findIndex((group) => group.id === fromGroup.id);\r\n    newGroups.splice(i, 1);\r\n  }\r\n\r\n  // Add back at new index\r\n  newGroups.splice(to, 0, ...fromGroups);\r\n\r\n  return newGroups;\r\n}\r\n\r\n/**\r\n * Move items from a sub group to the start of the base group\r\n * @param fromId The id of the group to move from\r\n * @param indices The indices of the items in the group\r\n */\r\nexport function ungroup(groups: Group[], fromId: string, indices: number[]) {\r\n  const newGroups = cloneDeep(groups);\r\n\r\n  const fromIndex = newGroups.findIndex((group) => group.id === fromId);\r\n  const from = newGroups[fromIndex];\r\n  if (from.type !== \"group\") {\r\n    throw new Error(`Unable to ungroup ${fromId}, not a group`);\r\n  }\r\n\r\n  let items: GroupItem[] = [];\r\n  for (let i of indices) {\r\n    items.push(from.items[i]);\r\n  }\r\n\r\n  // Remove items from previous group\r\n  for (let item of items) {\r\n    const i = from.items.findIndex((el) => el.id === item.id);\r\n    from.items.splice(i, 1);\r\n  }\r\n\r\n  // If we have no more items in the group delete it\r\n  if (from.items.length === 0) {\r\n    newGroups.splice(fromIndex, 1);\r\n  }\r\n\r\n  // Add to base group\r\n  newGroups.splice(0, 0, ...items);\r\n\r\n  return newGroups;\r\n}\r\n\r\n/**\r\n * Recursively find a group within a group array\r\n */\r\nexport function findGroup(groups: Group[], groupId: string): Group | undefined {\r\n  for (let group of groups) {\r\n    if (group.id === groupId) {\r\n      return group;\r\n    }\r\n    const items = getGroupItems(group);\r\n    for (let item of items) {\r\n      if (item.id === groupId) {\r\n        return item;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Transform and item array to a record of item ids to item names\r\n */\r\nexport function getItemNames<Item extends { name: string; id: string }>(\r\n  items: Item[]\r\n) {\r\n  let names: Record<string, string> = {};\r\n  for (let item of items) {\r\n    names[item.id] = item.name;\r\n  }\r\n  return names;\r\n}\r\n\r\n/**\r\n * Immutably rename a group\r\n */\r\nexport function renameGroup(\r\n  groups: Group[],\r\n  groupId: string,\r\n  newName: string\r\n): Group[] {\r\n  let newGroups = cloneDeep(groups);\r\n  const groupIndex = newGroups.findIndex((group) => group.id === groupId);\r\n  const group = newGroups[groupIndex];\r\n  if (group.type !== \"group\") {\r\n    throw new Error(`Unable to rename group ${groupId}, not of type group`);\r\n  }\r\n  if (groupIndex >= 0) {\r\n    group.name = newName;\r\n  }\r\n  return newGroups;\r\n}\r\n\r\n/**\r\n * Remove items from groups including sub groups\r\n * @param {Group[]} groups\r\n * @param {string[]} itemIds\r\n */\r\nexport function removeGroupsItems(groups: Group[], itemIds: string[]): Group[] {\r\n  let newGroups = cloneDeep(groups);\r\n\r\n  for (let i = newGroups.length - 1; i >= 0; i--) {\r\n    const group = newGroups[i];\r\n    if (group.type === \"item\") {\r\n      if (itemIds.includes(group.id)) {\r\n        newGroups.splice(i, 1);\r\n      }\r\n    } else {\r\n      const items = group.items;\r\n      for (let j = items.length - 1; j >= 0; j--) {\r\n        const item = items[j];\r\n        if (itemIds.includes(item.id)) {\r\n          group.items.splice(j, 1);\r\n        }\r\n      }\r\n      // Remove group if no items are left\r\n      if (group.items.length === 0) {\r\n        newGroups.splice(i, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  return newGroups;\r\n}\r\n","import React, {\r\n  useEffect,\r\n  useState,\r\n  useContext,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useLiveQuery } from \"dexie-react-hooks\";\r\n\r\nimport { useDatabase } from \"./DatabaseContext\";\r\n\r\nimport { Map } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\n\r\nimport { removeGroupsItems } from \"../helpers/group\";\r\n\r\nimport { Group } from \"../types/Group\";\r\n\r\nexport type AddMapEventHandler = (map: Map) => Promise<void>;\r\nexport type RemoveMapsEventHandler = (ids: string[]) => Promise<void>;\r\nexport type ResetMapEventHandler = (id: string) => Promise<MapState>;\r\nexport type UpdateMapEventHanlder = (\r\n  id: string,\r\n  update: Partial<Map>\r\n) => Promise<void>;\r\nexport type UpdateMapStateEventHandler = (\r\n  id: string,\r\n  update: Partial<MapState>\r\n) => Promise<void>;\r\nexport type GetMapStateEventHandler = (\r\n  id: string\r\n) => Promise<MapState | undefined>;\r\nexport type GetMapEventHandler = (id: string) => Promise<Map | undefined>;\r\nexport type UpdateMapGroupsEventHandler = (groups: Group[]) => Promise<void>;\r\n\r\ntype MapDataContextValue = {\r\n  maps: Array<Map>;\r\n  mapStates: MapState[];\r\n  /** Adds a map to the database, also adds an assosiated state and group for that map */\r\n  addMap: AddMapEventHandler;\r\n  removeMaps: RemoveMapsEventHandler;\r\n  resetMap: ResetMapEventHandler;\r\n  updateMap: UpdateMapEventHanlder;\r\n  updateMapState: UpdateMapStateEventHandler;\r\n  getMapState: GetMapStateEventHandler;\r\n  getMap: GetMapEventHandler;\r\n  mapsLoading: boolean;\r\n  updateMapGroups: UpdateMapGroupsEventHandler;\r\n  mapsById: Record<string, Map>;\r\n  mapGroups: Group[];\r\n};\r\n\r\nconst MapDataContext =\r\n  React.createContext<MapDataContextValue | undefined>(undefined);\r\n\r\nconst defaultMapState: Omit<MapState, \"mapId\"> = {\r\n  tokens: {},\r\n  drawings: {},\r\n  fogs: {},\r\n  editFlags: [\"drawing\", \"tokens\", \"notes\"],\r\n  notes: {},\r\n};\r\n\r\nexport function MapDataProvider({ children }: { children: React.ReactNode }) {\r\n  const { database } = useDatabase();\r\n\r\n  const mapsQuery = useLiveQuery<Map[]>(\r\n    () => database?.table(\"maps\").toArray() || [],\r\n    [database]\r\n  );\r\n  const mapStatesQuery = useLiveQuery<MapState[]>(\r\n    () => database?.table(\"states\").toArray() || [],\r\n    [database]\r\n  );\r\n\r\n  const maps = useMemo(() => mapsQuery || [], [mapsQuery]);\r\n  const mapStates = useMemo(() => mapStatesQuery || [], [mapStatesQuery]);\r\n  const mapsLoading = useMemo(\r\n    () => !mapsQuery || !mapStatesQuery,\r\n    [mapsQuery, mapStatesQuery]\r\n  );\r\n\r\n  const mapGroupQuery = useLiveQuery(\r\n    () => database?.table(\"groups\").get(\"maps\"),\r\n    [database]\r\n  );\r\n\r\n  const [mapGroups, setMapGroups] = useState<Group[]>([]);\r\n  useEffect(() => {\r\n    async function updateMapGroups() {\r\n      const group = await database?.table(\"groups\").get(\"maps\");\r\n      setMapGroups(group.items);\r\n    }\r\n    if (database && mapGroupQuery) {\r\n      updateMapGroups();\r\n    }\r\n  }, [mapGroupQuery, database]);\r\n\r\n  const getMap = useCallback<GetMapEventHandler>(\r\n    async (mapId) => {\r\n      let map = await database?.table(\"maps\").get(mapId);\r\n      return map;\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const getMapState = useCallback<GetMapStateEventHandler>(\r\n    async (mapId) => {\r\n      let mapState = await database?.table(\"states\").get(mapId);\r\n      return mapState;\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const addMap = useCallback<AddMapEventHandler>(\r\n    async (map) => {\r\n      if (database) {\r\n        // Just update map database as react state will be updated with an Observable\r\n        const state = { ...defaultMapState, mapId: map.id };\r\n        await database.table(\"maps\").add(map);\r\n        await database.table(\"states\").add(state);\r\n        const group = await database.table(\"groups\").get(\"maps\");\r\n        await database.table(\"groups\").update(\"maps\", {\r\n          items: [{ id: map.id, type: \"item\" }, ...group.items],\r\n        });\r\n      }\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const removeMaps = useCallback<RemoveMapsEventHandler>(\r\n    async (ids) => {\r\n      if (database) {\r\n        const maps = await database.table(\"maps\").bulkGet(ids);\r\n        // Remove assets linked with maps\r\n        let assetIds = [];\r\n        for (let map of maps) {\r\n          if (map.type === \"file\") {\r\n            assetIds.push(map.file);\r\n            assetIds.push(map.thumbnail);\r\n            for (let res of Object.values(map.resolutions)) {\r\n              assetIds.push(res);\r\n            }\r\n          }\r\n        }\r\n\r\n        const group = await database.table(\"groups\").get(\"maps\");\r\n        let items = removeGroupsItems(group.items, ids);\r\n        await database.table(\"groups\").update(\"maps\", { items });\r\n\r\n        await database.table(\"maps\").bulkDelete(ids);\r\n        await database.table(\"states\").bulkDelete(ids);\r\n        await database.table(\"assets\").bulkDelete(assetIds);\r\n      }\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const resetMap = useCallback<ResetMapEventHandler>(\r\n    async (id) => {\r\n      const state: MapState = { ...defaultMapState, mapId: id };\r\n      await database?.table(\"states\").put(state);\r\n      return state;\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const updateMap = useCallback<UpdateMapEventHanlder>(\r\n    async (id, update) => {\r\n      await database?.table(\"maps\").update(id, update);\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const updateMapState = useCallback<UpdateMapStateEventHandler>(\r\n    async (id, update) => {\r\n      await database?.table(\"states\").update(id, update);\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const updateMapGroups = useCallback<UpdateMapGroupsEventHandler>(\r\n    async (groups) => {\r\n      // Update group state immediately to avoid animation delay\r\n      setMapGroups(groups);\r\n      await database?.table(\"groups\").update(\"maps\", { items: groups });\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const [mapsById, setMapsById] = useState<Record<string, Map>>({});\r\n  useEffect(() => {\r\n    setMapsById(\r\n      maps.reduce((obj: Record<string, Map>, map) => {\r\n        obj[map.id] = map;\r\n        return obj;\r\n      }, {})\r\n    );\r\n  }, [maps]);\r\n\r\n  const value = {\r\n    maps,\r\n    mapStates,\r\n    mapGroups,\r\n    addMap,\r\n    removeMaps,\r\n    resetMap,\r\n    updateMap,\r\n    updateMapState,\r\n    getMap,\r\n    mapsLoading,\r\n    getMapState,\r\n    updateMapGroups,\r\n    mapsById,\r\n  };\r\n  return (\r\n    <MapDataContext.Provider value={value}>{children}</MapDataContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useMapData() {\r\n  const context = useContext(MapDataContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useMapData must be used within a MapDataProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default MapDataContext;\r\n","import React, {\r\n  useEffect,\r\n  useState,\r\n  useContext,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { useLiveQuery } from \"dexie-react-hooks\";\r\n\r\nimport { useDatabase } from \"./DatabaseContext\";\r\n\r\nimport { removeGroupsItems } from \"../helpers/group\";\r\n\r\nimport { Token } from \"../types/Token\";\r\nimport { Group } from \"../types/Group\";\r\n\r\nexport type AddTokenEventHandler = (token: Token) => Promise<void>;\r\nexport type RemoveTokensEventHandler = (ids: string[]) => Promise<void>;\r\nexport type UpdateTokenEventHandler = (\r\n  id: string,\r\n  update: Partial<Token>\r\n) => Promise<void>;\r\nexport type GetTokenEventHandler = (\r\n  tokenId: string\r\n) => Promise<Token | undefined>;\r\nexport type UpdateTokenGroupsEventHandler = (groups: Group[]) => Promise<void>;\r\nexport type UpdateTokensHiddenEventHandler = (\r\n  ids: string[],\r\n  hideInSidebar: boolean\r\n) => Promise<void>;\r\n\r\ntype TokenDataContextValue = {\r\n  tokens: Token[];\r\n  addToken: AddTokenEventHandler;\r\n  tokenGroups: Group[];\r\n  removeTokens: RemoveTokensEventHandler;\r\n  updateToken: UpdateTokenEventHandler;\r\n  getToken: GetTokenEventHandler;\r\n  tokensById: Record<string, Token>;\r\n  tokensLoading: boolean;\r\n  updateTokenGroups: UpdateTokenGroupsEventHandler;\r\n  updateTokensHidden: UpdateTokensHiddenEventHandler;\r\n};\r\n\r\nconst TokenDataContext =\r\n  React.createContext<TokenDataContextValue | undefined>(undefined);\r\n\r\nexport function TokenDataProvider({ children }: { children: React.ReactNode }) {\r\n  const { database } = useDatabase();\r\n\r\n  const tokensQuery = useLiveQuery<Token[]>(\r\n    () => database?.table(\"tokens\").toArray() || [],\r\n    [database]\r\n  );\r\n\r\n  const tokens = useMemo(() => tokensQuery || [], [tokensQuery]);\r\n  const tokensLoading = useMemo(() => !tokensQuery, [tokensQuery]);\r\n\r\n  const tokenGroupQuery = useLiveQuery(\r\n    () => database?.table(\"groups\").get(\"tokens\"),\r\n    [database]\r\n  );\r\n\r\n  const [tokenGroups, setTokenGroups] = useState<Group[]>([]);\r\n  useEffect(() => {\r\n    async function updateTokenGroups() {\r\n      const group = await database?.table(\"groups\").get(\"tokens\");\r\n      setTokenGroups(group.items);\r\n    }\r\n    if (database && tokenGroupQuery) {\r\n      updateTokenGroups();\r\n    }\r\n  }, [tokenGroupQuery, database]);\r\n\r\n  const getToken = useCallback<GetTokenEventHandler>(\r\n    async (tokenId) => {\r\n      let token = await database?.table(\"tokens\").get(tokenId);\r\n      return token;\r\n    },\r\n    [database]\r\n  );\r\n\r\n  // Add token and add it to the token group\r\n  const addToken = useCallback<AddTokenEventHandler>(\r\n    async (token) => {\r\n      if (database) {\r\n        await database.table(\"tokens\").add(token);\r\n        const group = await database.table(\"groups\").get(\"tokens\");\r\n        await database.table(\"groups\").update(\"tokens\", {\r\n          items: [{ id: token.id, type: \"item\" }, ...group.items],\r\n        });\r\n      }\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const removeTokens = useCallback<RemoveTokensEventHandler>(\r\n    async (ids) => {\r\n      if (database) {\r\n        const tokens = await database.table(\"tokens\").bulkGet(ids);\r\n        let assetIds = [];\r\n        for (let token of tokens) {\r\n          if (token.type === \"file\") {\r\n            assetIds.push(token.file);\r\n            assetIds.push(token.thumbnail);\r\n          }\r\n        }\r\n\r\n        const group = await database.table(\"groups\").get(\"tokens\");\r\n        let items = removeGroupsItems(group.items, ids);\r\n        await database.table(\"groups\").update(\"tokens\", { items });\r\n\r\n        await database.table(\"tokens\").bulkDelete(ids);\r\n        await database.table(\"assets\").bulkDelete(assetIds);\r\n      }\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const updateToken = useCallback<UpdateTokenEventHandler>(\r\n    async (id, update) => {\r\n      await database?.table(\"tokens\").update(id, update);\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const updateTokensHidden = useCallback<UpdateTokensHiddenEventHandler>(\r\n    async (ids: string[], hideInSidebar: boolean) => {\r\n      await Promise.all(\r\n        ids.map((id) => database?.table(\"tokens\").update(id, { hideInSidebar }))\r\n      );\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const updateTokenGroups = useCallback<UpdateTokenGroupsEventHandler>(\r\n    async (groups: Group[]) => {\r\n      // Update group state immediately to avoid animation delay\r\n      setTokenGroups(groups);\r\n      await database?.table(\"groups\").update(\"tokens\", { items: groups });\r\n    },\r\n    [database]\r\n  );\r\n\r\n  const [tokensById, setTokensById] = useState({});\r\n  useEffect(() => {\r\n    setTokensById(\r\n      tokens.reduce((obj: Record<string, Token>, token: Token) => {\r\n        obj[token.id] = token;\r\n        return obj;\r\n      }, {})\r\n    );\r\n  }, [tokens]);\r\n\r\n  const value = {\r\n    tokens,\r\n    addToken,\r\n    tokenGroups,\r\n    removeTokens,\r\n    updateToken,\r\n    tokensById,\r\n    tokensLoading,\r\n    getToken,\r\n    updateTokenGroups,\r\n    updateTokensHidden,\r\n  };\r\n\r\n  return (\r\n    <TokenDataContext.Provider value={value}>\r\n      {children}\r\n    </TokenDataContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useTokenData() {\r\n  const context = useContext(TokenDataContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useTokenData must be used within a TokenDataProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default TokenDataContext;\r\n","import { useState, useCallback } from \"react\";\r\nimport Action from \"../actions/Action\";\r\nimport { DrawingState } from \"../types/Drawing\";\r\nimport { FogState } from \"../types/Fog\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport { Notes } from \"../types/Note\";\r\nimport { TokenStates } from \"../types/TokenState\";\r\n\r\nexport type DrawingsAction = {\r\n  type: \"drawings\";\r\n  action: Action<DrawingState>;\r\n};\r\nexport type FogsAction = { type: \"fogs\"; action: Action<FogState> };\r\nexport type TokensAction = { type: \"tokens\"; action: Action<TokenStates> };\r\nexport type NotesAction = { type: \"notes\"; action: Action<Notes> };\r\n\r\nexport type MapAction =\r\n  | DrawingsAction\r\n  | FogsAction\r\n  | TokensAction\r\n  | NotesAction;\r\n\r\nexport type MapActions = {\r\n  actions: MapAction[][];\r\n  actionIndex: number;\r\n};\r\n\r\nexport type AddActionsEventHandler = (actions: MapAction[]) => void;\r\nexport type UpdateActionIndexEventHandler = (change: number) => void;\r\nexport type ResetActionsEventHandler = () => void;\r\n\r\nconst defaultMapActions: MapActions = {\r\n  actions: [],\r\n  actionIndex: -1,\r\n};\r\n\r\nfunction useMapActions(\r\n  setCurrentMapState: React.Dispatch<React.SetStateAction<MapState | null>>\r\n): [\r\n  MapActions,\r\n  AddActionsEventHandler,\r\n  UpdateActionIndexEventHandler,\r\n  ResetActionsEventHandler\r\n] {\r\n  const [mapActions, setMapActions] = useState(defaultMapActions);\r\n\r\n  function applyMapActionsToState(\r\n    mapState: MapState,\r\n    actions: MapAction[]\r\n  ): MapState {\r\n    for (let mapAction of actions) {\r\n      if (mapAction.type === \"drawings\") {\r\n        mapState.drawings = mapAction.action.execute(mapState.drawings);\r\n      } else if (mapAction.type === \"fogs\") {\r\n        mapState.fogs = mapAction.action.execute(mapState.fogs);\r\n      } else if (mapAction.type === \"tokens\") {\r\n        mapState.tokens = mapAction.action.execute(mapState.tokens);\r\n      } else if (mapAction.type === \"notes\") {\r\n        mapState.notes = mapAction.action.execute(mapState.notes);\r\n      }\r\n    }\r\n    return mapState;\r\n  }\r\n\r\n  function undoMapActionsToState(\r\n    mapState: MapState,\r\n    actions: MapAction[]\r\n  ): MapState {\r\n    for (let mapAction of actions) {\r\n      if (mapAction.type === \"drawings\") {\r\n        mapState.drawings = mapAction.action.undo(mapState.drawings);\r\n      } else if (mapAction.type === \"fogs\") {\r\n        mapState.fogs = mapAction.action.undo(mapState.fogs);\r\n      } else if (mapAction.type === \"tokens\") {\r\n        mapState.tokens = mapAction.action.undo(mapState.tokens);\r\n      } else if (mapAction.type === \"notes\") {\r\n        mapState.notes = mapAction.action.undo(mapState.notes);\r\n      }\r\n    }\r\n    return mapState;\r\n  }\r\n\r\n  function addActions(actions: MapAction[]) {\r\n    setMapActions((prevActions) => {\r\n      const newActions = [\r\n        ...prevActions.actions.slice(0, prevActions.actionIndex + 1),\r\n        actions,\r\n      ];\r\n      const newIndex = newActions.length - 1;\r\n      return {\r\n        actions: newActions,\r\n        actionIndex: newIndex,\r\n      };\r\n    });\r\n\r\n    // Update map state by performing the actions on it\r\n    setCurrentMapState((prevMapState) => {\r\n      if (!prevMapState) {\r\n        return prevMapState;\r\n      }\r\n      let state = { ...prevMapState };\r\n      state = applyMapActionsToState(state, actions);\r\n      return state;\r\n    });\r\n  }\r\n\r\n  function updateActionIndex(change: number) {\r\n    const prevIndex = mapActions.actionIndex;\r\n    const newIndex = Math.min(\r\n      Math.max(mapActions.actionIndex + change, -1),\r\n      mapActions.actions.length - 1\r\n    );\r\n\r\n    setMapActions((prevMapActions) => ({\r\n      ...prevMapActions,\r\n      actionIndex: newIndex,\r\n    }));\r\n\r\n    // Update map state by either performing the actions or undoing them\r\n    setCurrentMapState((prevMapState) => {\r\n      if (!prevMapState) {\r\n        return prevMapState;\r\n      }\r\n      let state = { ...prevMapState };\r\n      if (prevIndex < newIndex) {\r\n        // Redo\r\n        for (let i = prevIndex + 1; i < newIndex + 1; i++) {\r\n          const actions = mapActions.actions[i];\r\n          state = applyMapActionsToState(state, actions);\r\n        }\r\n      } else {\r\n        // Undo\r\n        for (let i = prevIndex; i > newIndex; i--) {\r\n          const actions = mapActions.actions[i];\r\n          state = undoMapActionsToState(state, actions);\r\n        }\r\n      }\r\n      return state;\r\n    });\r\n  }\r\n\r\n  const resetActions = useCallback(() => {\r\n    setMapActions(defaultMapActions);\r\n  }, []);\r\n\r\n  return [mapActions, addActions, updateActionIndex, resetActions];\r\n}\r\n\r\nexport default useMapActions;\r\n","import { IconButton, IconButtonProps } from \"theme-ui\";\r\n\r\ntype RadioButttonProps = {\r\n  isSelected: boolean;\r\n} & IconButtonProps;\r\n\r\nfunction RadioIconButton({\r\n  title,\r\n  onClick,\r\n  isSelected,\r\n  disabled,\r\n  children,\r\n  ...props\r\n}: RadioButttonProps) {\r\n  return (\r\n    <IconButton\r\n      aria-label={title}\r\n      title={title}\r\n      onClick={onClick}\r\n      sx={{ color: isSelected ? \"primary\" : \"text\" }}\r\n      disabled={disabled}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nRadioIconButton.defaultProps = {\r\n  disabled: false,\r\n};\r\n\r\nexport default RadioIconButton;\r\n","import ReactSelect, { Props } from \"react-select\";\r\nimport Creatable from \"react-select/creatable\";\r\nimport { useThemeUI } from \"theme-ui\";\r\n\r\ntype SelectProps = {\r\n  creatable?: boolean;\r\n} & Props;\r\n\r\nfunction Select({ creatable, ...props }: SelectProps) {\r\n  const { theme } = useThemeUI();\r\n\r\n  const Component: any = creatable ? Creatable : ReactSelect;\r\n\r\n  return (\r\n    <Component\r\n      styles={{\r\n        menu: (provided: any, state: any) => ({\r\n          ...provided,\r\n          backgroundColor: theme.colors?.background,\r\n          color: theme.colors?.text,\r\n          borderRadius: \"4px\",\r\n          borderColor: theme.colors?.gray,\r\n          borderStyle: \"solid\",\r\n          borderWidth: \"1px\",\r\n          fontFamily: (theme.fonts as any)?.body2,\r\n          opacity: state.isDisabled ? 0.5 : 1,\r\n        }),\r\n        control: (provided: any, state: any) => ({\r\n          ...provided,\r\n          backgroundColor: \"transparent\",\r\n          color: theme.colors?.text,\r\n          borderColor: theme.colors?.text,\r\n          opacity: state.isDisabled ? 0.5 : 1,\r\n        }),\r\n        singleValue: (provided: any) => ({\r\n          ...provided,\r\n          color: theme.colors?.text,\r\n          fontFamily: (theme.fonts as any).body2,\r\n        }),\r\n        option: (provided: any, state: any) => ({\r\n          ...provided,\r\n          color: theme.colors?.text,\r\n          opacity: state.isDisabled ? 0.5 : 1,\r\n        }),\r\n        dropdownIndicator: (provided: any, state: any) => ({\r\n          ...provided,\r\n          color: theme.colors?.text,\r\n          \":hover\": {\r\n            color: state.isDisabled\r\n              ? theme.colors?.disabled\r\n              : theme.colors?.primary,\r\n          },\r\n        }),\r\n        input: (provided: any, state: any) => ({\r\n          ...provided,\r\n          color: theme.colors?.text,\r\n          opacity: state.isDisabled ? 0.5 : 1,\r\n        }),\r\n        container: (provided: any) => ({\r\n          ...provided,\r\n          margin: \"4px 0\",\r\n        }),\r\n      }}\r\n      theme={(t: any) => ({\r\n        ...t,\r\n        colors: {\r\n          ...t.colors,\r\n          primary: theme.colors?.primary,\r\n          primary50: theme.colors?.secondary,\r\n          primary25: theme.colors?.highlight,\r\n        },\r\n      })}\r\n      captureMenuScroll={false}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nSelect.defaultProps = {\r\n  creatable: false,\r\n};\r\n\r\nexport default Select;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Flex, Box, Label, Input, Checkbox } from \"theme-ui\";\r\n\r\nimport { isEmpty } from \"../../helpers/shared\";\r\nimport { getGridUpdatedInset } from \"../../helpers/grid\";\r\n\r\nimport { useDataURL } from \"../../contexts/AssetsContext\";\r\nimport { mapSources as defaultMapSources } from \"../../maps\";\r\n\r\nimport Divider from \"../Divider\";\r\nimport Select from \"../Select\";\r\nimport { Map, MapQuality } from \"../../types/Map\";\r\nimport { EditFlag, MapState } from \"../../types/MapState\";\r\nimport {\r\n  MapSettingsChangeEventHandler,\r\n  MapStateSettingsChangeEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Grid, GridMeasurementType, GridType } from \"../../types/Grid\";\r\n\r\ntype QualityTypeSetting = { value: MapQuality; label: string };\r\nconst qualitySettings: QualityTypeSetting[] = [\r\n  { value: \"low\", label: \"Low\" },\r\n  { value: \"medium\", label: \"Medium\" },\r\n  { value: \"high\", label: \"High\" },\r\n  { value: \"ultra\", label: \"Ultra High\" },\r\n  { value: \"original\", label: \"Original\" },\r\n];\r\n\r\ntype GridTypeSetting = { value: GridType; label: string };\r\nconst gridTypeSettings: GridTypeSetting[] = [\r\n  { value: \"square\", label: \"Square\" },\r\n  { value: \"hexVertical\", label: \"Hex Vertical\" },\r\n  { value: \"hexHorizontal\", label: \"Hex Horizontal\" },\r\n];\r\n\r\ntype GridMeasurementTypeSetting = { value: GridMeasurementType; label: string };\r\nconst gridSquareMeasurementTypeSettings: GridMeasurementTypeSetting[] = [\r\n  { value: \"chebyshev\", label: \"Chessboard (D&D 5e)\" },\r\n  { value: \"alternating\", label: \"Alternating Diagonal (D&D 3.5e)\" },\r\n  { value: \"euclidean\", label: \"Euclidean\" },\r\n  { value: \"manhattan\", label: \"Manhattan\" },\r\n];\r\n\r\nconst gridHexMeasurementTypeSettings: GridMeasurementTypeSetting[] = [\r\n  { value: \"manhattan\", label: \"Manhattan\" },\r\n  { value: \"euclidean\", label: \"Euclidean\" },\r\n];\r\n\r\ntype MapSettingsProps = {\r\n  map: Map;\r\n  mapState: MapState;\r\n  onSettingsChange: MapSettingsChangeEventHandler;\r\n  onStateSettingsChange: MapStateSettingsChangeEventHandler;\r\n};\r\n\r\nfunction MapSettings({\r\n  map,\r\n  mapState,\r\n  onSettingsChange,\r\n  onStateSettingsChange,\r\n}: MapSettingsProps) {\r\n  function handleFlagChange(\r\n    event: React.ChangeEvent<HTMLInputElement>,\r\n    flag: EditFlag\r\n  ) {\r\n    if (event.target.checked) {\r\n      onStateSettingsChange({ editFlags: [...mapState.editFlags, flag] });\r\n    } else {\r\n      onStateSettingsChange({\r\n        editFlags: mapState.editFlags.filter((f) => f !== flag),\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleGridSizeXChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = parseInt(event.target.value) || 0;\r\n    let grid = {\r\n      ...map.grid,\r\n      size: {\r\n        ...map.grid.size,\r\n        x: value,\r\n      },\r\n    };\r\n    grid.inset = getGridUpdatedInset(grid, map.width, map.height);\r\n    onSettingsChange({ grid });\r\n  }\r\n\r\n  function handleGridSizeYChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = parseInt(event.target.value) || 0;\r\n    let grid = {\r\n      ...map.grid,\r\n      size: {\r\n        ...map.grid.size,\r\n        y: value,\r\n      },\r\n    };\r\n    grid.inset = getGridUpdatedInset(grid, map.width, map.height);\r\n    onSettingsChange({ grid });\r\n  }\r\n\r\n  function handleGridTypeChange(option: GridTypeSetting | null) {\r\n    if (!option) {\r\n      return;\r\n    }\r\n    const type = option.value;\r\n    let grid: Grid = {\r\n      ...map.grid,\r\n      type,\r\n      measurement: {\r\n        ...map.grid.measurement,\r\n        type: type === \"square\" ? \"chebyshev\" : \"manhattan\",\r\n      },\r\n    };\r\n    grid.inset = getGridUpdatedInset(grid, map.width, map.height);\r\n    onSettingsChange({ grid });\r\n  }\r\n\r\n  function handleGridMeasurementTypeChange(\r\n    option: GridMeasurementTypeSetting | null\r\n  ) {\r\n    if (!option) {\r\n      return;\r\n    }\r\n    const grid = {\r\n      ...map.grid,\r\n      measurement: {\r\n        ...map.grid.measurement,\r\n        type: option.value,\r\n      },\r\n    };\r\n    onSettingsChange({ grid });\r\n  }\r\n\r\n  function handleQualityChange(option: QualityTypeSetting | null) {\r\n    if (!option) {\r\n      return;\r\n    }\r\n    onSettingsChange({ quality: option.value });\r\n  }\r\n\r\n  function handleGridMeasurementScaleChange(\r\n    event: React.ChangeEvent<HTMLInputElement>\r\n  ) {\r\n    const grid = {\r\n      ...map.grid,\r\n      measurement: {\r\n        ...map.grid.measurement,\r\n        scale: event.target.value,\r\n      },\r\n    };\r\n    onSettingsChange({ grid });\r\n  }\r\n\r\n  const mapURL = useDataURL(map, defaultMapSources);\r\n  const [mapSize, setMapSize] = useState(0);\r\n  useEffect(() => {\r\n    async function updateMapSize() {\r\n      if (mapURL) {\r\n        const response = await fetch(mapURL);\r\n        const blob = await response.blob();\r\n        let size = blob.size;\r\n        size /= 1000000; // Bytes to Megabytes\r\n        setMapSize(parseFloat(size.toFixed(2)));\r\n      } else {\r\n        setMapSize(0);\r\n      }\r\n    }\r\n    updateMapSize();\r\n  }, [mapURL]);\r\n\r\n  const mapEmpty = !map || isEmpty(map);\r\n  const mapStateEmpty = !mapState || isEmpty(mapState);\r\n\r\n  return (\r\n    <Flex sx={{ flexDirection: \"column\" }}>\r\n      <Flex>\r\n        <Box mt={2} mr={1} sx={{ flexGrow: 1 }}>\r\n          <Label htmlFor=\"gridX\">Columns</Label>\r\n          <Input\r\n            type=\"number\"\r\n            name=\"gridX\"\r\n            value={`${(map && map.grid.size.x) || 0}`}\r\n            onChange={handleGridSizeXChange}\r\n            disabled={mapEmpty}\r\n            min={1}\r\n            my={1}\r\n          />\r\n        </Box>\r\n        <Box mt={2} ml={1} sx={{ flexGrow: 1 }}>\r\n          <Label htmlFor=\"gridY\">Rows</Label>\r\n          <Input\r\n            type=\"number\"\r\n            name=\"gridY\"\r\n            value={`${(map && map.grid.size.y) || 0}`}\r\n            onChange={handleGridSizeYChange}\r\n            disabled={mapEmpty}\r\n            min={1}\r\n            my={1}\r\n          />\r\n        </Box>\r\n      </Flex>\r\n      <Box mt={2} sx={{ flexGrow: 1 }}>\r\n        <Label htmlFor=\"name\">Name</Label>\r\n        <Input\r\n          name=\"name\"\r\n          value={(map && map.name) || \"\"}\r\n          onChange={(e) => onSettingsChange({ name: e.target.value })}\r\n          disabled={mapEmpty}\r\n          my={1}\r\n        />\r\n      </Box>\r\n      <Flex\r\n        mt={2}\r\n        mb={mapEmpty || map.type === \"default\" ? 2 : 0}\r\n        sx={{ flexDirection: \"column\" }}\r\n      >\r\n        <Flex sx={{ alignItems: \"flex-end\" }}>\r\n          <Box sx={{ width: \"50%\" }}>\r\n            <Label>Grid Type</Label>\r\n            <Select\r\n              isDisabled={mapEmpty}\r\n              options={gridTypeSettings}\r\n              value={\r\n                mapEmpty\r\n                  ? undefined\r\n                  : gridTypeSettings.find((s) => s.value === map.grid.type)\r\n              }\r\n              onChange={handleGridTypeChange as any}\r\n              isSearchable={false}\r\n            />\r\n          </Box>\r\n          <Flex sx={{ flexGrow: 1, flexDirection: \"column\" }} ml={2}>\r\n            <Label>\r\n              <Checkbox\r\n                checked={!mapEmpty && map.showGrid}\r\n                disabled={mapEmpty}\r\n                onChange={(e) =>\r\n                  onSettingsChange({ showGrid: e.target.checked })\r\n                }\r\n              />\r\n              Draw Grid\r\n            </Label>\r\n            <Label>\r\n              <Checkbox\r\n                checked={!mapEmpty && map.snapToGrid}\r\n                disabled={mapEmpty}\r\n                onChange={(e) =>\r\n                  onSettingsChange({ snapToGrid: e.target.checked })\r\n                }\r\n              />\r\n              Snap to Grid\r\n            </Label>\r\n          </Flex>\r\n        </Flex>\r\n        <Flex sx={{ alignItems: \"flex-end\" }}>\r\n          <Box my={2} sx={{ width: \"50%\" }}>\r\n            <Label>Grid Measurement</Label>\r\n            <Select\r\n              isDisabled={mapEmpty}\r\n              options={\r\n                map && map.grid.type === \"square\"\r\n                  ? gridSquareMeasurementTypeSettings\r\n                  : gridHexMeasurementTypeSettings\r\n              }\r\n              value={\r\n                mapEmpty\r\n                  ? undefined\r\n                  : gridSquareMeasurementTypeSettings.find(\r\n                      (s) => s.value === map.grid.measurement.type\r\n                    )\r\n              }\r\n              onChange={handleGridMeasurementTypeChange as any}\r\n              isSearchable={false}\r\n            />\r\n          </Box>\r\n          <Box m={2} mr={0} sx={{ flexGrow: 1 }}>\r\n            <Label htmlFor=\"gridMeasurementScale\">Grid Scale</Label>\r\n            <Input\r\n              name=\"gridMeasurementScale\"\r\n              value={`${map && map.grid.measurement.scale}`}\r\n              onChange={handleGridMeasurementScaleChange}\r\n              disabled={mapEmpty}\r\n              min={1}\r\n              my={1}\r\n              autoComplete=\"off\"\r\n            />\r\n          </Box>\r\n        </Flex>\r\n      </Flex>\r\n      {!mapEmpty && map.type !== \"default\" && (\r\n        <Flex my={2} sx={{ alignItems: \"center\" }}>\r\n          <Box mb={1} sx={{ width: \"50%\" }}>\r\n            <Label>Quality</Label>\r\n            <Select\r\n              options={qualitySettings}\r\n              value={\r\n                mapEmpty\r\n                  ? undefined\r\n                  : qualitySettings.find((s) => s.value === map.quality)\r\n              }\r\n              isDisabled={mapEmpty}\r\n              onChange={handleQualityChange as any}\r\n              isOptionDisabled={\r\n                ((option: QualityTypeSetting) =>\r\n                  mapEmpty ||\r\n                  (option.value !== \"original\" &&\r\n                    !map.resolutions[option.value])) as any\r\n              }\r\n              isSearchable={false}\r\n            />\r\n          </Box>\r\n          <Label sx={{ width: \"50%\" }} ml={2}>\r\n            Size: {mapSize > 0 && `${mapSize}MB`}\r\n          </Label>\r\n        </Flex>\r\n      )}\r\n      <Divider fill />\r\n      <Box my={2} sx={{ flexGrow: 1 }}>\r\n        <Label>Allow Others to Edit</Label>\r\n        <Flex my={1}>\r\n          <Label>\r\n            <Checkbox\r\n              checked={!mapStateEmpty && mapState.editFlags.includes(\"fog\")}\r\n              disabled={mapStateEmpty}\r\n              onChange={(e) => handleFlagChange(e, \"fog\")}\r\n            />\r\n            Fog\r\n          </Label>\r\n          <Label>\r\n            <Checkbox\r\n              checked={!mapStateEmpty && mapState.editFlags.includes(\"drawing\")}\r\n              disabled={mapStateEmpty}\r\n              onChange={(e) => handleFlagChange(e, \"drawing\")}\r\n            />\r\n            Drawings\r\n          </Label>\r\n          <Label>\r\n            <Checkbox\r\n              checked={!mapStateEmpty && mapState.editFlags.includes(\"tokens\")}\r\n              disabled={mapStateEmpty}\r\n              onChange={(e) => handleFlagChange(e, \"tokens\")}\r\n            />\r\n            Tokens\r\n          </Label>\r\n          <Label>\r\n            <Checkbox\r\n              checked={!mapStateEmpty && mapState.editFlags.includes(\"notes\")}\r\n              disabled={mapStateEmpty}\r\n              onChange={(e) => handleFlagChange(e, \"notes\")}\r\n            />\r\n            Notes\r\n          </Label>\r\n        </Flex>\r\n      </Box>\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default MapSettings;\r\n","import { useEffect, useState } from \"react\";\r\nimport useImage from \"use-image\";\r\n\r\nimport { useDataURL } from \"../contexts/AssetsContext\";\r\n\r\nimport { mapSources as defaultMapSources } from \"../maps\";\r\n\r\nimport { Map } from \"../types/Map\";\r\n\r\nfunction useMapImage(\r\n  map: Map | null\r\n): [HTMLImageElement | undefined, \"loaded\" | \"loading\" | \"failed\"] {\r\n  const mapURL = useDataURL(map, defaultMapSources);\r\n  const [mapImage, mapImageStatus] = useImage(mapURL || \"\");\r\n\r\n  // Create a map source that only updates when the image is fully loaded\r\n  const [loadedMapImage, setLoadedMapImage] = useState<HTMLImageElement>();\r\n  useEffect(() => {\r\n    if (mapImageStatus === \"loaded\" && mapImage) {\r\n      setLoadedMapImage(mapImage);\r\n    }\r\n  }, [mapImage, mapImageStatus]);\r\n\r\n  return [loadedMapImage, mapImageStatus];\r\n}\r\n\r\nexport default useMapImage;\r\n","import React, { useEffect } from \"react\";\r\n\r\nfunction usePreventOverscroll(elementRef: React.RefObject<HTMLElement>) {\r\n  useEffect(() => {\r\n    // Stop overscroll on chrome and safari\r\n    // also stop pinch to zoom on chrome\r\n    function preventOverscroll(event: WheelEvent) {\r\n      event.preventDefault();\r\n    }\r\n    const element = elementRef.current;\r\n    if (element) {\r\n      element.addEventListener(\"wheel\", preventOverscroll, {\r\n        passive: false,\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (element) {\r\n        element.removeEventListener(\"wheel\", preventOverscroll);\r\n      }\r\n    };\r\n  }, [elementRef]);\r\n}\r\n\r\nexport default usePreventOverscroll;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { EventEmitter } from \"events\";\r\n\r\nconst keyboardEmitter = new EventEmitter();\r\nkeyboardEmitter.setMaxListeners(100);\r\n\r\nconst KeyboardContext = React.createContext({ keyEmitter: keyboardEmitter });\r\n\r\nexport function KeyboardProvider({ children }: { children: React.ReactNode }) {\r\n  const [keyEmitter] = useState(keyboardEmitter);\r\n  useEffect(() => {\r\n    function handleKeyDown(event: Event) {\r\n      // Ignore text input\r\n      if (\r\n        event.target instanceof HTMLInputElement ||\r\n        event.target instanceof HTMLTextAreaElement\r\n      ) {\r\n        return;\r\n      }\r\n      keyEmitter.emit(\"keyDown\", event);\r\n    }\r\n\r\n    function handleKeyUp(event: Event) {\r\n      // Ignore text input\r\n      if (\r\n        event.target instanceof HTMLInputElement ||\r\n        event.target instanceof HTMLTextAreaElement\r\n      ) {\r\n        return;\r\n      }\r\n      keyEmitter.emit(\"keyUp\", event);\r\n    }\r\n\r\n    document.body.addEventListener(\"keydown\", handleKeyDown);\r\n    document.body.addEventListener(\"keyup\", handleKeyUp);\r\n    document.body.tabIndex = 1;\r\n    return () => {\r\n      document.body.removeEventListener(\"keydown\", handleKeyDown);\r\n      document.body.removeEventListener(\"keyup\", handleKeyUp);\r\n      document.body.tabIndex = 0;\r\n    };\r\n  }, [keyEmitter]);\r\n\r\n  return (\r\n    <KeyboardContext.Provider value={{ keyEmitter }}>\r\n      {children}\r\n    </KeyboardContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useKeyboard(\r\n  onKeyDown?: (event: KeyboardEvent) => void,\r\n  onKeyUp?: (event: KeyboardEvent) => void\r\n) {\r\n  const context = useContext(KeyboardContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useKeyboard must be used within a KeyboardProvider\");\r\n  }\r\n  const { keyEmitter } = context;\r\n  useEffect(() => {\r\n    if (onKeyDown) {\r\n      keyEmitter.on(\"keyDown\", onKeyDown);\r\n    }\r\n    if (onKeyUp) {\r\n      keyEmitter.on(\"keyUp\", onKeyUp);\r\n    }\r\n\r\n    return () => {\r\n      if (onKeyDown) {\r\n        keyEmitter.off(\"keyDown\", onKeyDown);\r\n      }\r\n      if (onKeyUp) {\r\n        keyEmitter.off(\"keyUp\", onKeyUp);\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\n/**\r\n * Handler to handle a blur event. Useful when using a shortcut that uses the Alt or Cmd\r\n * @param {FocusEvent} onBlur\r\n */\r\nexport function useBlur(onBlur: EventListenerOrEventListenerObject) {\r\n  useEffect(() => {\r\n    if (onBlur) {\r\n      window.addEventListener(\"blur\", onBlur);\r\n    }\r\n    return () => {\r\n      if (onBlur) {\r\n        window.removeEventListener(\"blur\", onBlur);\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\nexport default KeyboardContext;\r\n","/**\r\n * @param {KeyboardEvent} event\r\n * @returns {boolean}\r\n */\r\nfunction hasModifier(event: KeyboardEvent): boolean {\r\n  return event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\r\n}\r\n\r\n/**\r\n * Key press without any modifiers and ignoring capitals\r\n * @param {KeyboardEvent} event\r\n * @param {string} key\r\n * @returns {boolean}\r\n */\r\nfunction singleKey(event: KeyboardEvent, key: string): boolean {\r\n  return (\r\n    !hasModifier(event) &&\r\n    (event.key === key || event.key === key.toUpperCase())\r\n  );\r\n}\r\n\r\nfunction undo(event: KeyboardEvent): boolean {\r\n  const { key, ctrlKey, metaKey, shiftKey } = event;\r\n  return (key === \"z\" || key === \"Z\") && (ctrlKey || metaKey) && !shiftKey;\r\n}\r\n\r\nfunction redo(event: KeyboardEvent): boolean {\r\n  const { key, ctrlKey, metaKey, shiftKey } = event;\r\n  return (key === \"z\" || key === \"Z\") && (ctrlKey || metaKey) && shiftKey;\r\n}\r\n\r\nfunction copy(event: KeyboardEvent): boolean {\r\n  const { key, ctrlKey, metaKey, shiftKey } = event;\r\n  return (key === \"c\" || key === \"C\") && (ctrlKey || metaKey) && !shiftKey;\r\n}\r\n\r\nfunction paste(event: KeyboardEvent): boolean {\r\n  const { key, ctrlKey, metaKey, shiftKey } = event;\r\n  return (key === \"v\" || key === \"V\") && (ctrlKey || metaKey) && !shiftKey;\r\n}\r\n\r\nfunction zoomIn(event: KeyboardEvent): boolean {\r\n  const { key, ctrlKey, metaKey } = event;\r\n  return (key === \"=\" || key === \"+\") && !ctrlKey && !metaKey;\r\n}\r\n\r\nfunction zoomOut(event: KeyboardEvent): boolean {\r\n  const { key, ctrlKey, metaKey } = event;\r\n  return (key === \"-\" || key === \"_\") && !ctrlKey && !metaKey;\r\n}\r\n\r\ntype Shortcut = (event: KeyboardEvent) => boolean;\r\n\r\nconst shortcuts: Record<string, Shortcut> = {\r\n  // Tools\r\n  move: (event) => singleKey(event, \" \"),\r\n  moveTool: (event) => singleKey(event, \"w\"),\r\n  drawingTool: (event) => singleKey(event, \"d\"),\r\n  fogTool: (event) => singleKey(event, \"f\"),\r\n  measureTool: (event) => singleKey(event, \"m\"),\r\n  pointerTool: (event) => singleKey(event, \"q\"),\r\n  noteTool: (event) => singleKey(event, \"n\"),\r\n  // Map editor\r\n  gridNudgeUp: ({ key }) => key === \"ArrowUp\",\r\n  gridNudgeLeft: ({ key }) => key === \"ArrowLeft\",\r\n  gridNudgeRight: ({ key }) => key === \"ArrowRight\",\r\n  gridNudgeDown: ({ key }) => key === \"ArrowDown\",\r\n  // Drawing tool\r\n  drawBrush: (event) => singleKey(event, \"b\"),\r\n  drawPaint: (event) => singleKey(event, \"p\"),\r\n  drawLine: (event) => singleKey(event, \"l\"),\r\n  drawRect: (event) => singleKey(event, \"r\"),\r\n  drawCircle: (event) => singleKey(event, \"c\"),\r\n  drawTriangle: (event) => singleKey(event, \"t\"),\r\n  drawErase: (event) => singleKey(event, \"e\"),\r\n  drawBlend: (event) => singleKey(event, \"o\"),\r\n  drawFill: (event) => singleKey(event, \"g\"),\r\n  // Fog tool\r\n  fogPolygon: (event) => singleKey(event, \"p\"),\r\n  fogRectangle: (event) => singleKey(event, \"r\"),\r\n  fogBrush: (event) => singleKey(event, \"b\"),\r\n  fogToggle: (event) => singleKey(event, \"t\"),\r\n  fogErase: (event) => singleKey(event, \"e\"),\r\n  fogLayer: (event) => singleKey(event, \"l\"),\r\n  fogPreview: (event) => singleKey(event, \"f\"),\r\n  fogCut: (event) => singleKey(event, \"c\"),\r\n  fogFinishPolygon: ({ key }) => key === \"Enter\",\r\n  fogCancelPolygon: ({ key }) => key === \"Escape\",\r\n  // Select tool\r\n  selectTool: (event) => singleKey(event, \"s\"),\r\n  selectPath: (event) => singleKey(event, \"l\"),\r\n  selectRect: (event) => singleKey(event, \"r\"),\r\n  // Stage interaction\r\n  stageZoomIn: zoomIn,\r\n  stageZoomOut: zoomOut,\r\n  stagePrecisionZoom: ({ key }) => key === \"Shift\",\r\n  // Select\r\n  selectRange: ({ key }) => key === \"Shift\",\r\n  selectMultiple: ({ key }) => key === \"Control\" || key === \"Meta\",\r\n  // Common\r\n  undo,\r\n  redo,\r\n  copy,\r\n  paste,\r\n  delete: ({ key }) => key === \"Backspace\" || key === \"Delete\",\r\n  disableSnapping: ({ key }) => key === \"Control\" || key === \"Meta\",\r\n  duplicate: ({ key }) => key === \"Alt\",\r\n};\r\n\r\nexport default shortcuts;\r\n","import { useRef, useEffect, useState } from \"react\";\r\nimport { useGesture } from \"react-use-gesture\";\r\nimport { Handlers } from \"react-use-gesture/dist/types\";\r\nimport normalizeWheel from \"normalize-wheel\";\r\nimport Konva from \"konva\";\r\n\r\nimport { useKeyboard, useBlur } from \"../contexts/KeyboardContext\";\r\nimport { MapStage } from \"../contexts/MapStageContext\";\r\n\r\nimport shortcuts from \"../shortcuts\";\r\n\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\nconst wheelZoomSpeed = -1;\r\nconst touchZoomSpeed = 0.005;\r\nconst minZoom = 0.1;\r\n\r\ntype StageScaleChangeEventHandler = (newScale: number) => void;\r\n\r\nfunction useStageInteraction(\r\n  stageRef: MapStage,\r\n  stageScale: number,\r\n  onStageScaleChange: StageScaleChangeEventHandler,\r\n  stageTranslateRef: React.MutableRefObject<Vector2>,\r\n  layerRef: React.RefObject<Konva.Layer>,\r\n  maxZoom = 10,\r\n  tool = \"move\",\r\n  preventInteraction = false,\r\n  gesture: Handlers = {}\r\n) {\r\n  const isInteractingWithCanvas = useRef(false);\r\n  const pinchPreviousDistanceRef = useRef<number>(0);\r\n  const pinchPreviousOriginRef = useRef<Vector2>({ x: 0, y: 0 });\r\n\r\n  const [zoomSpeed, setZoomSpeed] = useState(1);\r\n\r\n  // Prevent accessibility pinch to zoom on Mac\r\n  useEffect(() => {\r\n    function handleGesture(e: Event) {\r\n      e.preventDefault();\r\n    }\r\n    window.addEventListener(\"gesturestart\", handleGesture);\r\n    window.addEventListener(\"gesturechange\", handleGesture);\r\n    return () => {\r\n      window.removeEventListener(\"gesturestart\", handleGesture);\r\n      window.removeEventListener(\"gesturechange\", handleGesture);\r\n    };\r\n  });\r\n\r\n  useGesture(\r\n    {\r\n      ...gesture,\r\n      onWheelStart: (props) => {\r\n        const { event } = props;\r\n        const layer = layerRef.current;\r\n        isInteractingWithCanvas.current =\r\n          layer !== null && event.target === layer.getCanvas()._canvas;\r\n        gesture.onWheelStart && gesture.onWheelStart(props);\r\n      },\r\n      onWheel: (props) => {\r\n        const stage = stageRef.current;\r\n        if (\r\n          preventInteraction ||\r\n          !isInteractingWithCanvas.current ||\r\n          stage === null\r\n        ) {\r\n          return;\r\n        }\r\n        const { event, last } = props;\r\n        // Prevent double zoom on wheel end\r\n        if (!last) {\r\n          const { pixelY } = normalizeWheel(event);\r\n\r\n          const newScale = Math.min(\r\n            Math.max(\r\n              stageScale +\r\n                (pixelY * wheelZoomSpeed * stageScale * zoomSpeed) /\r\n                  window.innerHeight,\r\n              minZoom\r\n            ),\r\n            maxZoom\r\n          );\r\n\r\n          // Center on pointer\r\n          const pointer = stage.getPointerPosition();\r\n          if (pointer) {\r\n            const newTranslate = {\r\n              x: pointer.x - ((pointer.x - stage.x()) / stageScale) * newScale,\r\n              y: pointer.y - ((pointer.y - stage.y()) / stageScale) * newScale,\r\n            };\r\n\r\n            stage.position(newTranslate);\r\n\r\n            stageTranslateRef.current = newTranslate;\r\n\r\n            onStageScaleChange(newScale);\r\n          }\r\n        }\r\n\r\n        gesture.onWheel && gesture.onWheel(props);\r\n      },\r\n      onPinchStart: (props) => {\r\n        const { event } = props;\r\n        const layer = layerRef.current;\r\n        isInteractingWithCanvas.current =\r\n          layer !== null && event.target === layer.getCanvas()._canvas;\r\n        const { da, origin } = props;\r\n        const [distance] = da;\r\n        const [originX, originY] = origin;\r\n        pinchPreviousDistanceRef.current = distance;\r\n        pinchPreviousOriginRef.current = { x: originX, y: originY };\r\n        gesture.onPinchStart && gesture.onPinchStart(props);\r\n      },\r\n      onPinch: (props) => {\r\n        const layer = layerRef.current;\r\n        const stage = stageRef.current;\r\n        if (\r\n          preventInteraction ||\r\n          !isInteractingWithCanvas.current ||\r\n          layer === null ||\r\n          stage === null\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        const { da, origin } = props;\r\n        const [distance] = da;\r\n        const [originX, originY] = origin;\r\n\r\n        // Apply scale\r\n        const distanceDelta = distance - pinchPreviousDistanceRef.current;\r\n        const originXDelta = originX - pinchPreviousOriginRef.current.x;\r\n        const originYDelta = originY - pinchPreviousOriginRef.current.y;\r\n        const newScale = Math.min(\r\n          Math.max(\r\n            stageScale +\r\n              distanceDelta * touchZoomSpeed * stageScale * zoomSpeed,\r\n            minZoom\r\n          ),\r\n          maxZoom\r\n        );\r\n\r\n        const canvasRect = layer.getCanvas()._canvas.getBoundingClientRect();\r\n        const relativeOrigin = {\r\n          x: originX - canvasRect.left,\r\n          y: originY - canvasRect.top,\r\n        };\r\n\r\n        // Center on pinch origin\r\n        const centeredTranslate = {\r\n          x:\r\n            relativeOrigin.x -\r\n            ((relativeOrigin.x - stage.x()) / stageScale) * newScale,\r\n          y:\r\n            relativeOrigin.y -\r\n            ((relativeOrigin.y - stage.y()) / stageScale) * newScale,\r\n        };\r\n\r\n        // Add pinch movement\r\n        const newTranslate = {\r\n          x: centeredTranslate.x + originXDelta,\r\n          y: centeredTranslate.y + originYDelta,\r\n        };\r\n\r\n        stage.position(newTranslate);\r\n        stageTranslateRef.current = newTranslate;\r\n\r\n        onStageScaleChange(newScale);\r\n\r\n        pinchPreviousDistanceRef.current = distance;\r\n        pinchPreviousOriginRef.current = { x: originX, y: originY };\r\n        gesture.onPinch && gesture.onPinch(props);\r\n      },\r\n      onDragStart: (props) => {\r\n        const { event } = props;\r\n        const layer = layerRef.current;\r\n        isInteractingWithCanvas.current =\r\n          layer !== null && event.target === layer.getCanvas()._canvas;\r\n        gesture.onDragStart && gesture.onDragStart(props);\r\n      },\r\n      onDrag: (props) => {\r\n        const { delta, pinching, buttons } = props;\r\n        const stage = stageRef.current;\r\n        if (\r\n          preventInteraction ||\r\n          pinching ||\r\n          !isInteractingWithCanvas.current ||\r\n          stage === null\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        const [dx, dy] = delta;\r\n        const stageTranslate = stageTranslateRef.current;\r\n        // Move with move tool and left click or any mouse button but right click\r\n        if ((tool === \"move\" && buttons < 2) || buttons > 2) {\r\n          const newTranslate = {\r\n            x: stageTranslate.x + dx,\r\n            y: stageTranslate.y + dy,\r\n          };\r\n          stage.position(newTranslate);\r\n          stage.draw();\r\n          stageTranslateRef.current = newTranslate;\r\n        }\r\n        gesture.onDrag && gesture.onDrag(props);\r\n      },\r\n    },\r\n    {\r\n      // Fix drawing using old pointer end position on touch devices when drawing new shapes\r\n      drag: { delay: 300 },\r\n      domTarget: window,\r\n      eventOptions: {\r\n        passive: false,\r\n      },\r\n    }\r\n  );\r\n\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    // TODO: Find better way to detect whether keyboard event should fire.\r\n    // This one fires on all open stages\r\n    const stage = stageRef.current;\r\n    if (preventInteraction || stage === null) {\r\n      return;\r\n    }\r\n    if (shortcuts.stageZoomIn(event) || shortcuts.stageZoomOut(event)) {\r\n      const pixelY = shortcuts.stageZoomIn(event) ? -100 : 100;\r\n      const newScale = Math.min(\r\n        Math.max(\r\n          stageScale +\r\n            (pixelY * wheelZoomSpeed * stageScale * zoomSpeed) /\r\n              window.innerHeight,\r\n          minZoom\r\n        ),\r\n        maxZoom\r\n      );\r\n\r\n      // Center on pointer\r\n      const pointer = { x: window.innerWidth / 2, y: window.innerHeight / 2 };\r\n      const newTranslate = {\r\n        x: pointer.x - ((pointer.x - stage.x()) / stageScale) * newScale,\r\n        y: pointer.y - ((pointer.y - stage.y()) / stageScale) * newScale,\r\n      };\r\n\r\n      stage.position(newTranslate);\r\n      stageTranslateRef.current = newTranslate;\r\n\r\n      onStageScaleChange(newScale);\r\n    }\r\n\r\n    if (shortcuts.stagePrecisionZoom(event)) {\r\n      setZoomSpeed(0.25);\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (shortcuts.stagePrecisionZoom(event)) {\r\n      setZoomSpeed(1);\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n\r\n  function handleBlur() {\r\n    setZoomSpeed(1);\r\n  }\r\n\r\n  useBlur(handleBlur);\r\n}\r\n\r\nexport default useStageInteraction;\r\n","import Konva from \"konva\";\r\nimport { useEffect, useRef } from \"react\";\r\n\r\nimport { MapStage } from \"../contexts/MapStageContext\";\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\ntype ImageData = {\r\n  id: string;\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nfunction useImageCenter(\r\n  data: ImageData | null,\r\n  stageRef: MapStage,\r\n  stageWidth: number,\r\n  stageHeight: number,\r\n  stageTranslateRef: React.MutableRefObject<Vector2>,\r\n  setStageScale: React.Dispatch<React.SetStateAction<number>>,\r\n  imageLayerRef: React.RefObject<Konva.Layer>,\r\n  containerRef: React.RefObject<HTMLDivElement>,\r\n  responsive = false\r\n) {\r\n  const stageRatio = stageWidth / stageHeight;\r\n  const imageRatio = data ? data.width / data.height : 1;\r\n\r\n  let imageWidth: number;\r\n  let imageHeight: number;\r\n  if (stageRatio > imageRatio) {\r\n    imageWidth = data ? stageHeight / (data.height / data.width) : stageWidth;\r\n    imageHeight = stageHeight;\r\n  } else {\r\n    imageWidth = stageWidth;\r\n    imageHeight = data ? stageWidth * (data.height / data.width) : stageHeight;\r\n  }\r\n\r\n  // Reset image translate and stage scale\r\n  const previousDataIdRef = useRef<string>();\r\n  const previousStageRatioRef = useRef(stageRatio);\r\n  useEffect(() => {\r\n    if (!data) {\r\n      return;\r\n    }\r\n\r\n    const layer = imageLayerRef.current;\r\n    const container = containerRef.current;\r\n    const stage = stageRef.current;\r\n    if (!container || !stage) {\r\n      return;\r\n    }\r\n    const containerRect = container.getBoundingClientRect();\r\n    const previousDataId = previousDataIdRef.current;\r\n    const previousStageRatio = previousStageRatioRef.current;\r\n\r\n    // Update when the id has changed and if responsive update when the stage changes\r\n    const shouldUpdate = responsive\r\n      ? previousDataId !== data.id || previousStageRatio !== stageRatio\r\n      : previousDataId !== data.id;\r\n\r\n    if (layer && shouldUpdate) {\r\n      let newTranslate;\r\n      if (stageRatio > imageRatio) {\r\n        newTranslate = {\r\n          x: -(imageWidth - containerRect.width) / 2,\r\n          y: 0,\r\n        };\r\n      } else {\r\n        newTranslate = {\r\n          x: 0,\r\n          y: -(imageHeight - containerRect.height) / 2,\r\n        };\r\n      }\r\n      layer.position(newTranslate);\r\n      stage.position({ x: 0, y: 0 });\r\n      stageTranslateRef.current = { x: 0, y: 0 };\r\n\r\n      setStageScale(1);\r\n    }\r\n    previousDataIdRef.current = data.id;\r\n    previousStageRatioRef.current = stageRatio;\r\n  });\r\n\r\n  return [imageWidth, imageHeight];\r\n}\r\n\r\nexport default useImageCenter;\r\n","import React, { useContext } from \"react\";\r\nimport { FullGestureState } from \"react-use-gesture/dist/types\";\r\nimport useDebounce from \"../hooks/useDebounce\";\r\nimport { TypedEmitter } from \"tiny-typed-emitter\";\r\nimport Konva from \"konva\";\r\n\r\nexport type MapDragEvent = Omit<FullGestureState<\"drag\">, \"event\"> & {\r\n  event: React.PointerEvent<Element> | PointerEvent;\r\n};\r\n\r\nexport type MapDragEventHandler = (props: MapDragEvent) => void;\r\n\r\nexport interface MapInteractionEvents {\r\n  dragStart: MapDragEventHandler;\r\n  drag: MapDragEventHandler;\r\n  dragEnd: MapDragEventHandler;\r\n}\r\n\r\nexport class MapInteractionEmitter extends TypedEmitter<MapInteractionEvents> {}\r\n\r\ntype MapInteraction = {\r\n  stageScale: number;\r\n  stageWidth: number;\r\n  stageHeight: number;\r\n  setPreventMapInteraction: React.Dispatch<React.SetStateAction<boolean>>;\r\n  mapWidth: number;\r\n  mapHeight: number;\r\n  interactionEmitter: MapInteractionEmitter | null;\r\n};\r\n\r\nexport const StageScaleContext = React.createContext<\r\n  MapInteraction[\"stageScale\"] | undefined\r\n>(undefined);\r\nexport const DebouncedStageScaleContext = React.createContext<\r\n  MapInteraction[\"stageScale\"] | undefined\r\n>(undefined);\r\nexport const StageWidthContext = React.createContext<\r\n  MapInteraction[\"stageWidth\"] | undefined\r\n>(undefined);\r\nexport const StageHeightContext = React.createContext<\r\n  MapInteraction[\"stageHeight\"] | undefined\r\n>(undefined);\r\nexport const SetPreventMapInteractionContext = React.createContext<\r\n  MapInteraction[\"setPreventMapInteraction\"] | undefined\r\n>(undefined);\r\nexport const MapWidthContext = React.createContext<\r\n  MapInteraction[\"mapWidth\"] | undefined\r\n>(undefined);\r\nexport const MapHeightContext = React.createContext<\r\n  MapInteraction[\"mapHeight\"] | undefined\r\n>(undefined);\r\nexport const InteractionEmitterContext = React.createContext<\r\n  MapInteraction[\"interactionEmitter\"] | undefined\r\n>(undefined);\r\n\r\nexport function MapInteractionProvider({\r\n  value,\r\n  children,\r\n}: {\r\n  value: MapInteraction;\r\n  children: React.ReactNode;\r\n}) {\r\n  const {\r\n    stageScale,\r\n    stageWidth,\r\n    stageHeight,\r\n    setPreventMapInteraction,\r\n    mapWidth,\r\n    mapHeight,\r\n    interactionEmitter,\r\n  } = value;\r\n  const debouncedStageScale = useDebounce(stageScale, 200);\r\n  return (\r\n    <InteractionEmitterContext.Provider value={interactionEmitter}>\r\n      <SetPreventMapInteractionContext.Provider\r\n        value={setPreventMapInteraction}\r\n      >\r\n        <StageWidthContext.Provider value={stageWidth}>\r\n          <StageHeightContext.Provider value={stageHeight}>\r\n            <MapWidthContext.Provider value={mapWidth}>\r\n              <MapHeightContext.Provider value={mapHeight}>\r\n                <StageScaleContext.Provider value={stageScale}>\r\n                  <DebouncedStageScaleContext.Provider\r\n                    value={debouncedStageScale || 1}\r\n                  >\r\n                    {children}\r\n                  </DebouncedStageScaleContext.Provider>\r\n                </StageScaleContext.Provider>\r\n              </MapHeightContext.Provider>\r\n            </MapWidthContext.Provider>\r\n          </StageHeightContext.Provider>\r\n        </StageWidthContext.Provider>\r\n      </SetPreventMapInteractionContext.Provider>\r\n    </InteractionEmitterContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useInteractionEmitter() {\r\n  const context = useContext(InteractionEmitterContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useInteractionEmitter must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useSetPreventMapInteraction() {\r\n  const context = useContext(SetPreventMapInteractionContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useSetPreventMapInteraction must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useStageWidth() {\r\n  const context = useContext(StageWidthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useStageWidth must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useStageHeight() {\r\n  const context = useContext(StageHeightContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useStageHeight must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useMapWidth() {\r\n  const context = useContext(MapWidthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useMapWidth must be used within a MapInteractionProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useMapHeight() {\r\n  const context = useContext(MapHeightContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useMapHeight must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useStageScale() {\r\n  const context = useContext(StageScaleContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useStageScale must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useDebouncedStageScale() {\r\n  const context = useContext(DebouncedStageScaleContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useDebouncedStageScale must be used within a MapInteractionProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function leftMouseButton(event: MapDragEvent): boolean;\r\nexport function leftMouseButton(\r\n  event: Konva.KonvaEventObject<PointerEvent>\r\n): boolean;\r\nexport function leftMouseButton(\r\n  event: Konva.KonvaEventObject<MouseEvent>\r\n): boolean;\r\n\r\nexport function leftMouseButton(event: any) {\r\n  if (event.evt) {\r\n    // Konva events\r\n    // Check for undefined (touch) and mouse left click (0)\r\n    return event.evt.button === undefined || event.evt.button === 0;\r\n  } else {\r\n    // Drag event\r\n    return event.buttons <= 1;\r\n  }\r\n}\r\n\r\nexport function middleMouseButton(event: MapDragEvent) {\r\n  return event.buttons === 4;\r\n}\r\n\r\nexport function rightMouseButton(event: MapDragEvent) {\r\n  return event.buttons === 2;\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\n\r\nimport Vector2 from \"../helpers/Vector2\";\r\nimport Size from \"../helpers/Size\";\r\nimport { getGridPixelSize, getCellPixelSize } from \"../helpers/grid\";\r\n\r\nimport { Grid } from \"../types/Grid\";\r\n\r\nimport useSetting from \"../hooks/useSetting\";\r\n\r\nimport shortcuts from \"../shortcuts\";\r\n\r\nimport { useBlur, useKeyboard } from \"./KeyboardContext\";\r\n\r\n/**\r\n * @typedef GridContextValue\r\n * @property {Grid} grid Base grid value\r\n * @property {Size} gridPixelSize Size of the grid in pixels\r\n * @property {Size} gridCellPixelSize Size of each cell in pixels\r\n * @property {Size} gridCellNormalizedSize Size of each cell normalized to the grid\r\n * @property {Vector2} gridOffset Offset of the grid from the top left in pixels\r\n * @property {number} gridStrokeWidth Stroke width of the grid in pixels\r\n * @property {Vector2} gridCellPixelOffset Offset of the grid cells to convert the center position of hex cells to the top left\r\n */\r\ntype GridContextValue = {\r\n  grid: Grid;\r\n  gridPixelSize: Size;\r\n  gridCellPixelSize: Size;\r\n  gridCellNormalizedSize: Size;\r\n  gridOffset: Vector2;\r\n  gridStrokeWidth: number;\r\n  gridCellPixelOffset: Vector2;\r\n  gridSnappingSensitivity: number;\r\n};\r\n\r\n/**\r\n * @type {GridContextValue}\r\n */\r\nconst defaultValue: GridContextValue = {\r\n  grid: {\r\n    size: new Vector2(0, 0),\r\n    inset: { topLeft: new Vector2(0, 0), bottomRight: new Vector2(1, 1) },\r\n    type: \"square\",\r\n    measurement: {\r\n      scale: \"\",\r\n      type: \"euclidean\",\r\n    },\r\n  },\r\n  gridPixelSize: new Size(0, 0),\r\n  gridCellPixelSize: new Size(0, 0, 0),\r\n  gridCellNormalizedSize: new Size(0, 0, 0),\r\n  gridOffset: new Vector2(0, 0),\r\n  gridStrokeWidth: 0,\r\n  gridCellPixelOffset: new Vector2(0, 0),\r\n  gridSnappingSensitivity: 0,\r\n};\r\n\r\nexport const GridContext = React.createContext(defaultValue.grid);\r\nexport const GridPixelSizeContext = React.createContext(\r\n  defaultValue.gridPixelSize\r\n);\r\nexport const GridCellPixelSizeContext = React.createContext(\r\n  defaultValue.gridCellPixelSize\r\n);\r\nexport const GridCellNormalizedSizeContext = React.createContext(\r\n  defaultValue.gridCellNormalizedSize\r\n);\r\nexport const GridOffsetContext = React.createContext(defaultValue.gridOffset);\r\nexport const GridStrokeWidthContext = React.createContext(\r\n  defaultValue.gridStrokeWidth\r\n);\r\nexport const GridCellPixelOffsetContext = React.createContext(\r\n  defaultValue.gridCellPixelOffset\r\n);\r\nexport const GridSnappingSensitivityContext = React.createContext(\r\n  defaultValue.gridSnappingSensitivity\r\n);\r\n\r\nconst defaultStrokeWidth = 1 / 10;\r\n\r\ntype GridProviderProps = {\r\n  grid: Grid | null;\r\n  width: number;\r\n  height: number;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function GridProvider({\r\n  grid: inputGrid,\r\n  width,\r\n  height,\r\n  children,\r\n}: GridProviderProps) {\r\n  let grid: Grid;\r\n\r\n  if (!inputGrid || !inputGrid.size.x || !inputGrid.size.y) {\r\n    grid = defaultValue.grid;\r\n  } else {\r\n    grid = inputGrid;\r\n  }\r\n\r\n  const [gridPixelSize, setGridPixelSize] = useState(\r\n    defaultValue.gridCellPixelSize\r\n  );\r\n  const [gridCellPixelSize, setGridCellPixelSize] = useState(\r\n    defaultValue.gridCellPixelSize\r\n  );\r\n  const [gridCellNormalizedSize, setGridCellNormalizedSize] = useState(\r\n    defaultValue.gridCellNormalizedSize\r\n  );\r\n  const [gridOffset, setGridOffset] = useState(defaultValue.gridOffset);\r\n  const [gridStrokeWidth, setGridStrokeWidth] = useState(\r\n    defaultValue.gridStrokeWidth\r\n  );\r\n  const [gridCellPixelOffset, setGridCellPixelOffset] = useState(\r\n    defaultValue.gridCellPixelOffset\r\n  );\r\n\r\n  useEffect(() => {\r\n    const _gridPixelSize = getGridPixelSize(grid, width, height);\r\n    const _gridCellPixelSize = getCellPixelSize(\r\n      grid,\r\n      _gridPixelSize.width,\r\n      _gridPixelSize.height\r\n    );\r\n    const _gridCellNormalizedSize = new Size(\r\n      _gridCellPixelSize.width / width,\r\n      _gridCellPixelSize.height / height\r\n    );\r\n    const _gridOffset = Vector2.multiply(grid.inset.topLeft, {\r\n      x: width,\r\n      y: height,\r\n    });\r\n    const _gridStrokeWidth =\r\n      (_gridCellPixelSize.width < _gridCellPixelSize.height\r\n        ? _gridCellPixelSize.width\r\n        : _gridCellPixelSize.height) * defaultStrokeWidth;\r\n\r\n    let _gridCellPixelOffset = { x: 0, y: 0 };\r\n    // Move hex tiles to top left\r\n    if (grid.type === \"hexVertical\" || grid.type === \"hexHorizontal\") {\r\n      _gridCellPixelOffset = Vector2.multiply(_gridCellPixelSize, 0.5);\r\n    }\r\n\r\n    setGridPixelSize(_gridPixelSize);\r\n    setGridCellPixelSize(_gridCellPixelSize);\r\n    setGridCellNormalizedSize(_gridCellNormalizedSize);\r\n    setGridOffset(_gridOffset);\r\n    setGridStrokeWidth(_gridStrokeWidth);\r\n    setGridCellPixelOffset(_gridCellPixelOffset);\r\n  }, [grid, width, height]);\r\n\r\n  const [gridSnappingSensitivity, setGridSnappingSensitivity] = useState(\r\n    defaultValue.gridSnappingSensitivity\r\n  );\r\n  const [defaultSnappingSensitivity] = useSetting<number>(\r\n    \"map.gridSnappingSensitivity\"\r\n  );\r\n  useEffect(() => {\r\n    if (\r\n      gridSnappingSensitivity !== defaultSnappingSensitivity &&\r\n      gridSnappingSensitivity !== -1 // Snapping not disabled\r\n    ) {\r\n      setGridSnappingSensitivity(defaultSnappingSensitivity);\r\n    }\r\n  }, [defaultSnappingSensitivity, gridSnappingSensitivity]);\r\n\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.disableSnapping(event)) {\r\n      setGridSnappingSensitivity(-1);\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (shortcuts.disableSnapping(event)) {\r\n      setGridSnappingSensitivity(defaultSnappingSensitivity);\r\n    }\r\n  }\r\n\r\n  function handleBlur() {\r\n    setGridSnappingSensitivity(defaultSnappingSensitivity);\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n  useBlur(handleBlur);\r\n\r\n  return (\r\n    <GridContext.Provider value={grid}>\r\n      <GridPixelSizeContext.Provider value={gridPixelSize}>\r\n        <GridCellPixelSizeContext.Provider value={gridCellPixelSize}>\r\n          <GridCellNormalizedSizeContext.Provider\r\n            value={gridCellNormalizedSize}\r\n          >\r\n            <GridOffsetContext.Provider value={gridOffset}>\r\n              <GridStrokeWidthContext.Provider value={gridStrokeWidth}>\r\n                <GridCellPixelOffsetContext.Provider\r\n                  value={gridCellPixelOffset}\r\n                >\r\n                  <GridSnappingSensitivityContext.Provider\r\n                    value={gridSnappingSensitivity}\r\n                  >\r\n                    {children}\r\n                  </GridSnappingSensitivityContext.Provider>\r\n                </GridCellPixelOffsetContext.Provider>\r\n              </GridStrokeWidthContext.Provider>\r\n            </GridOffsetContext.Provider>\r\n          </GridCellNormalizedSizeContext.Provider>\r\n        </GridCellPixelSizeContext.Provider>\r\n      </GridPixelSizeContext.Provider>\r\n    </GridContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useGrid() {\r\n  const context = useContext(GridContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGrid must be used within a GridProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridPixelSize() {\r\n  const context = useContext(GridPixelSizeContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGridPixelSize must be used within a GridProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridCellPixelSize() {\r\n  const context = useContext(GridCellPixelSizeContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGridCellPixelSize must be used within a GridProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridCellNormalizedSize() {\r\n  const context = useContext(GridCellNormalizedSizeContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useGridCellNormalizedSize must be used within a GridProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridOffset() {\r\n  const context = useContext(GridOffsetContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGridOffset must be used within a GridProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridStrokeWidth() {\r\n  const context = useContext(GridStrokeWidthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGridStrokeWidth must be used within a GridProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridCellPixelOffset() {\r\n  const context = useContext(GridCellPixelOffsetContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useGridCellPixelOffset must be used within a GridProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useGridSnappingSensitivity() {\r\n  const context = useContext(GridSnappingSensitivityContext);\r\n  if (context === undefined) {\r\n    throw new Error(\r\n      \"useGridSnappingSensitivity must be used within a GridProvider\"\r\n    );\r\n  }\r\n  return context;\r\n}\r\n","import React, { useContext } from \"react\";\r\n\r\nimport {\r\n  InteractionEmitterContext,\r\n  SetPreventMapInteractionContext,\r\n  StageWidthContext,\r\n  StageHeightContext,\r\n  MapWidthContext,\r\n  MapHeightContext,\r\n  StageScaleContext,\r\n  DebouncedStageScaleContext,\r\n  useInteractionEmitter,\r\n  useSetPreventMapInteraction,\r\n  useStageWidth,\r\n  useStageHeight,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  useStageScale,\r\n  useDebouncedStageScale,\r\n} from \"../contexts/MapInteractionContext\";\r\nimport { MapStageProvider, useMapStage } from \"../contexts/MapStageContext\";\r\nimport UserIdContext, { useUserId } from \"../contexts/UserIdContext\";\r\nimport SettingsContext, { useSettings } from \"../contexts/SettingsContext\";\r\nimport KeyboardContext from \"../contexts/KeyboardContext\";\r\nimport AssetsContext, {\r\n  AssetURLsStateContext,\r\n  AssetURLsUpdaterContext,\r\n  useAssets,\r\n} from \"../contexts/AssetsContext\";\r\nimport {\r\n  useGrid,\r\n  useGridCellPixelSize,\r\n  useGridCellNormalizedSize,\r\n  useGridStrokeWidth,\r\n  useGridCellPixelOffset,\r\n  useGridOffset,\r\n  useGridPixelSize,\r\n  useGridSnappingSensitivity,\r\n  GridContext,\r\n  GridPixelSizeContext,\r\n  GridCellPixelSizeContext,\r\n  GridCellNormalizedSizeContext,\r\n  GridOffsetContext,\r\n  GridStrokeWidthContext,\r\n  GridCellPixelOffsetContext,\r\n  GridSnappingSensitivityContext,\r\n} from \"../contexts/GridContext\";\r\nimport DatabaseContext, { useDatabase } from \"../contexts/DatabaseContext\";\r\n\r\ntype StageRender = (wrapped: React.ReactNode) => React.ReactElement;\r\n\r\ntype KonvaBridgeProps = {\r\n  stageRender: StageRender;\r\n  children: React.ReactNode;\r\n};\r\n\r\n/**\r\n * Provide a bridge for konva that forwards our contexts\r\n */\r\nfunction KonvaBridge({\r\n  stageRender,\r\n  children,\r\n}: KonvaBridgeProps): React.ReactElement {\r\n  const mapStageRef = useMapStage();\r\n  const userId = useUserId();\r\n  const settings = useSettings();\r\n  const assets = useAssets();\r\n  const assetURLs = useContext(AssetURLsStateContext);\r\n  const setAssetURLs = useContext(AssetURLsUpdaterContext);\r\n  const keyboardValue = useContext(KeyboardContext);\r\n\r\n  const stageScale = useStageScale();\r\n  const stageWidth = useStageWidth();\r\n  const stageHeight = useStageHeight();\r\n  const setPreventMapInteraction = useSetPreventMapInteraction();\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const interactionEmitter = useInteractionEmitter();\r\n  const debouncedStageScale = useDebouncedStageScale();\r\n\r\n  const grid = useGrid();\r\n  const gridPixelSize = useGridPixelSize();\r\n  const gridCellNormalizedSize = useGridCellNormalizedSize();\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n  const gridStrokeWidth = useGridStrokeWidth();\r\n  const gridCellPixelOffset = useGridCellPixelOffset();\r\n  const gridOffset = useGridOffset();\r\n  const gridSnappingSensitivity = useGridSnappingSensitivity();\r\n\r\n  const database = useDatabase();\r\n\r\n  return stageRender(\r\n    <DatabaseContext.Provider value={database}>\r\n      <UserIdContext.Provider value={userId}>\r\n        <SettingsContext.Provider value={settings}>\r\n          <KeyboardContext.Provider value={keyboardValue}>\r\n            <MapStageProvider value={mapStageRef}>\r\n              <AssetsContext.Provider value={assets}>\r\n                <AssetURLsStateContext.Provider value={assetURLs}>\r\n                  <AssetURLsUpdaterContext.Provider value={setAssetURLs}>\r\n                    <InteractionEmitterContext.Provider\r\n                      value={interactionEmitter}\r\n                    >\r\n                      <SetPreventMapInteractionContext.Provider\r\n                        value={setPreventMapInteraction}\r\n                      >\r\n                        <StageWidthContext.Provider value={stageWidth}>\r\n                          <StageHeightContext.Provider value={stageHeight}>\r\n                            <MapWidthContext.Provider value={mapWidth}>\r\n                              <MapHeightContext.Provider value={mapHeight}>\r\n                                <StageScaleContext.Provider value={stageScale}>\r\n                                  <DebouncedStageScaleContext.Provider\r\n                                    value={debouncedStageScale}\r\n                                  >\r\n                                    <GridContext.Provider value={grid}>\r\n                                      <GridPixelSizeContext.Provider\r\n                                        value={gridPixelSize}\r\n                                      >\r\n                                        <GridCellPixelSizeContext.Provider\r\n                                          value={gridCellPixelSize}\r\n                                        >\r\n                                          <GridCellNormalizedSizeContext.Provider\r\n                                            value={gridCellNormalizedSize}\r\n                                          >\r\n                                            <GridOffsetContext.Provider\r\n                                              value={gridOffset}\r\n                                            >\r\n                                              <GridStrokeWidthContext.Provider\r\n                                                value={gridStrokeWidth}\r\n                                              >\r\n                                                <GridCellPixelOffsetContext.Provider\r\n                                                  value={gridCellPixelOffset}\r\n                                                >\r\n                                                  <GridSnappingSensitivityContext.Provider\r\n                                                    value={\r\n                                                      gridSnappingSensitivity\r\n                                                    }\r\n                                                  >\r\n                                                    {children}\r\n                                                  </GridSnappingSensitivityContext.Provider>\r\n                                                </GridCellPixelOffsetContext.Provider>\r\n                                              </GridStrokeWidthContext.Provider>\r\n                                            </GridOffsetContext.Provider>\r\n                                          </GridCellNormalizedSizeContext.Provider>\r\n                                        </GridCellPixelSizeContext.Provider>\r\n                                      </GridPixelSizeContext.Provider>\r\n                                    </GridContext.Provider>\r\n                                  </DebouncedStageScaleContext.Provider>\r\n                                </StageScaleContext.Provider>\r\n                              </MapHeightContext.Provider>\r\n                            </MapWidthContext.Provider>\r\n                          </StageHeightContext.Provider>\r\n                        </StageWidthContext.Provider>\r\n                      </SetPreventMapInteractionContext.Provider>\r\n                    </InteractionEmitterContext.Provider>\r\n                  </AssetURLsUpdaterContext.Provider>\r\n                </AssetURLsStateContext.Provider>\r\n              </AssetsContext.Provider>\r\n            </MapStageProvider>\r\n          </KeyboardContext.Provider>\r\n        </SettingsContext.Provider>\r\n      </UserIdContext.Provider>\r\n    </DatabaseContext.Provider>\r\n  );\r\n}\r\n\r\nexport default KonvaBridge;\r\n","function ResetMapIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M17.65 6.35c-1.63-1.63-3.94-2.57-6.48-2.31-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20c3.19 0 5.93-1.87 7.21-4.56.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53-1.13 2.43-3.84 3.97-6.8 3.31-2.22-.49-4.01-2.3-4.48-4.52C5.31 9.44 8.26 6 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ResetMapIcon;\r\n","function GridOnIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H5c-.55 0-1-.45-1-1v-3h4v4zm0-6H4v-4h4v4zm0-6H4V5c0-.55.45-1 1-1h3v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm5 12h-3v-4h4v3c0 .55-.45 1-1 1zm1-6h-4v-4h4v4zm0-6h-4V4h3c.55 0 1 .45 1 1v3z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default GridOnIcon;\r\n","function GridOffIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M8 4v.89l2 2V4h4v4h-2.89l2 2H14v.89l2 2V10h4v4h-2.89l2 2H20v.89l2 2V4c0-1.1-.9-2-2-2H5.11l2 2H8zm8 0h3c.55 0 1 .45 1 1v3h-4V4zm6.16 17.88L2.12 1.84c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L2 4.55V20c0 1.1.9 2 2 2h15.45l1.3 1.3c.39.39 1.02.39 1.41 0 .39-.39.39-1.03 0-1.42zM10 12.55L11.45 14H10v-1.45zm-6-6L5.45 8H4V6.55zM8 20H5c-.55 0-1-.45-1-1v-3h4v4zm0-6H4v-4h3.45l.55.55V14zm6 6h-4v-4h3.45l.55.55V20zm2 0v-1.45L17.45 20H16z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default GridOffIcon;\r\n","import { Group, Rect } from \"react-konva\";\r\nimport useImage from \"use-image\";\r\n\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport {\r\n  useGrid,\r\n  useGridPixelSize,\r\n  useGridOffset,\r\n  useGridCellPixelSize,\r\n} from \"../../contexts/GridContext\";\r\n\r\nimport squarePatternDark from \"../../images/SquarePatternDark.png\";\r\nimport squarePatternLight from \"../../images/SquarePatternLight.png\";\r\nimport hexPatternDark from \"../../images/HexPatternDark.png\";\r\nimport hexPatternLight from \"../../images/HexPatternLight.png\";\r\n\r\nfunction Grid({ stroke }: { stroke: \"black\" | \"white\" }) {\r\n  const grid = useGrid();\r\n  const gridPixelSize = useGridPixelSize();\r\n  const gridOffset = useGridOffset();\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n\r\n  let imageSource;\r\n  if (grid.type === \"square\") {\r\n    if (stroke === \"black\") {\r\n      imageSource = squarePatternDark;\r\n    } else {\r\n      imageSource = squarePatternLight;\r\n    }\r\n  } else {\r\n    if (stroke === \"black\") {\r\n      imageSource = hexPatternDark;\r\n    } else {\r\n      imageSource = hexPatternLight;\r\n    }\r\n  }\r\n\r\n  const [patternImage] = useImage(imageSource);\r\n\r\n  if (!grid?.size.x || !grid?.size.y) {\r\n    return null;\r\n  }\r\n\r\n  const negativeGridOffset = Vector2.multiply(gridOffset, -1);\r\n\r\n  let patternProps: Record<any, any> = {};\r\n  if (grid.type === \"square\") {\r\n    // Square grid pattern is 150 DPI\r\n    const scale = gridCellPixelSize.width / 300;\r\n    if (scale > 0) {\r\n      patternProps.fillPatternScaleX = scale;\r\n      patternProps.fillPatternScaleY = scale;\r\n      patternProps.fillPatternOffsetX = gridCellPixelSize.width / scale / 2;\r\n      patternProps.fillPatternOffsetY = gridCellPixelSize.height / scale / 2;\r\n    }\r\n  } else if (grid.type === \"hexVertical\") {\r\n    // Hex tile pattern is 153 DPI to better fit hex tiles\r\n    const scale = gridCellPixelSize.width / 153;\r\n    if (scale > 0) {\r\n      patternProps.fillPatternScaleX = scale;\r\n      patternProps.fillPatternScaleY = scale;\r\n      patternProps.fillPatternOffsetY = gridCellPixelSize.radius / scale / 2;\r\n    }\r\n  } else if (grid.type === \"hexHorizontal\") {\r\n    const scale = gridCellPixelSize.height / 153;\r\n    if (scale > 0) {\r\n      patternProps.fillPatternScaleX = scale;\r\n      patternProps.fillPatternScaleY = scale;\r\n      patternProps.fillPatternOffsetY = -gridCellPixelSize.radius / scale / 2;\r\n      patternProps.fillPatternRotation = 90;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Group>\r\n      <Rect\r\n        width={gridPixelSize.width}\r\n        height={gridPixelSize.height}\r\n        offset={negativeGridOffset}\r\n        fillPatternImage={patternImage}\r\n        fillPatternRepeat=\"repeat\"\r\n        opacity={stroke === \"black\" ? 0.8 : 0.4}\r\n        {...patternProps}\r\n      />\r\n    </Group>\r\n  );\r\n}\r\n\r\nGrid.defaultProps = {\r\n  strokeWidth: 0.1,\r\n  stroke: \"white\",\r\n};\r\n\r\nexport default Grid;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAAY1BMVEVHcEwAAAAAAAAAAAAAAAAwMDAzMzMAAAAAAAAvLy8AAAAAAAAvLy8AAAAAAAAAAAAvLy8AAAAAAAAuLi4AAAAAAAAtLS0wMDAtLS0tLS0sLCwpKSkuLi4yMjIxMTEvLy8wMDAb2rkAAAAAHXRSTlMAAQMHDor/CA+LBBCMBgoSjQsXkBMek4iMjY+Ty9Nxt1kAAAIHSURBVHgB7dg1esNAFIDBNTOzhfe/ZGCrcKLuOd/8lerRcgpWrz8YjsavjYaDfi/pR6zJdJaxZtMJrF+w5pPFMmMtF5M5LFiwYMGC9cDBggULFizBggULFixYggULFixYsAQLFixYsGAJFixYsGDBEixYsGDBgiVYsGDBggVLsGDBggULlmDBggULFizBggULFixYggULFixYsAQLFixYsGAJFixYsGDBEixYsGDBgiVYsGDBggVLsGDBggULlmDBggULFizBggULFixYggULFixYsAQLFixYsGAJFixYsGDBEixYsGDBgiVYsGD1gvUeK1apH6zVerPNWNvNetWPVVoNJqHaTfeHjHXYT3eTWKXdcLqI1HF/Omes82l/XMQqXUaz2TJO19u9KDNWWdxv12Wo0jhWVVU3bf5qm7qqxqGCBQsWrEfCsht2yDmrQ07wHXI37JBXhw55z/L4B0uwYMGCBQuWYMGCBQsWLMGCBQsWLFiCBQsWLFiwBAsWLFiwYAkWLFiwYP3TYMGCBQsWLMGCBQsWLFiCBQsWLFiwBAsWLFiwYAkWLFiwYMESLFiwYMGCJViwYMGCBUuwYMGCBQuWYMGCBQsWLMGCBQsWLFiCBQsWLFiwBAsWLFiwYAkWLFiwYMESLFiwYMGCJViwYMGCBUuwYMGCBQuWYMGCBQsWLMGCBesZNkX1AafTbREAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAAclBMVEVHcEz////////////////y8vLx8fH////////////y8vL////y8vL////////////////////////////////////z8/P////////z8/P////////z8/P09PT09PT09PT09PT09PT09PT19fXz8/Py8vKNxtxmAAAAJXRSTlMAAQULFZD/AgwXkhiTDQMGDhkECREclQojmBQtnYyPkZKUl5zQ8NmpTQAAAhtJREFUeAHs2EWS5DAUQEEVMzOTff8jznQXrop2vyPymfZpkpSCVSiWypXqb5VyqVhIelGtWG80z1jNRr1YA/IGq9U+Y7Vbb7Fgde5YnXBYsGDBEixYsGDBgiVYsGDBggVLsGDBggULlmDBggULFizBggULFixYggULFixYsAQLFixYsGAJFixYsGDBEixYsGDBgiVYsGDBggVLsGDBggULlmDBggULFizBggULFixYggULFixYsAQLFixYsGAJFixYsGDBEixYsGDBgiVYsGDBggVLsGDBggULlmDBggULFizBggULFixYggULFixYsAQLFqzCT7U4dXv9wRVr0O91a6FKw2ExUr3ReDI9Y00n41GvGKo0mtXrnTj1x4P54oy1mA/G/U6o0njZaAVqMJmv1mes9Wo+GbRClTbb3T5Sh+MpO2Nlp+NhH6tUDVeePy6x+lNYsGDBguVv+HnGWV9kBP9F5oZfZNXhi6xnWfyDJViwYMGCBUuwYMGCBQuWYMGCBQsWLMGCBQsWLFiCBQsWLFiwBAsWLFiwYAkWLFiwYMESLFiwYMGCJViwYMGCBUuwYMGCBQuWYMGCBQsWLMGCBQsWLFiCBQsWLFiwBAsWLFiwYAkWLFiwYMESLFiwYMGCJViwYMGCBUuwYMGCBQuWYMGCBQsWLMGCBQsWLFiCBQsWLFiwBAsWLFiwYAkWLFiwYMESrPR/wzOwAOSnRca66R6qAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATIAAAEJCAMAAAAgpVuZAAAC+lBMVEVHcEz////////////////z8/Px8fHz8/P////////////////////////////////z8/Px8fH////////29vb////////////////////////////29vb////////09PTz8/P////////39/f09PTx8fHx8fH19fX////////09PTy8vLz8/P39/f////////////x8fHx8fH19fX09PTz8/P09PT19fX39/fz8/Pz8/P4+Pj19fXy8vL09PT39/fz8/Pz8/Px8fHy8vL29vb////9/f3////4+Pjy8vLw8PDz8/P////x8fH29vb+/v78/Pz29vbz8/Py8vL09PT39/fy8vL19fX////////////////29vbx8fH29vb39/fy8vLy8vL////////7+/v09PTz8/P4+Pj09PT09PT6+vr////////////////////////////////z8/Py8vLy8vL29vbx8fHy8vL////////////////////5+fny8vLx8fH09PTz8/P////////////////////z8/P09PT////19fX////////////////09PT39/fy8vL19fX////////4+Pj7+/v////////9/f3z8/P////39/fx8fH29vbz8/Pz8/P6+vr09PT29vbz8/P////z8/Py8vL4+Pjz8/P09PT29vb09PT8/Pz09PTz8/P19fX5+fny8vL5+fn09PTz8/Py8vL39/f6+vr19fX39/fy8vL4+Pj19fX19fX09PT4+Pj09PTz8/P7+/vy8vLy8vLz8/P7+/vy8vL39/fy8vL09PTz8/Pz8/P4+Pj09PTz8/P6+vr39/fz8/P6+vrz8/P19fXz8/P29vby8vL19fX09PT39/f6+vr29vb09PTz8/P09PT19fXx8fH4+Pjx8fH39/fz8/P39/f09PT19fX29vb09PT19fXy8vL29vbz8/P29vb09PT39/fy8vL19fX4+Pj////09PT29vb39/fy8vL6+vrdq/snAAAA/nRSTlMAAw0ZKvP/hiASBwECChUl1eUXGoYTFiYEDhwtiQkM1eYpCzez/vuNBhHD/7s8EAUI+OtTlpJc7Y7Oyypk77CU8GjE+KRRTUpn5P6iFNfNVUmr+81E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noqBfGOmBybQQslcCy3lWuhBQhotgtjubGDXRp+nUkLxyCCN91C/UiU0okMLscUVz6Vc8cx3csUjAQuZHiqghc5uYjvoTce8Iwd4aKm04jFJC13/IENa797sJG89qtG/l1c8UgWHPaKReqhbSAuNZF9jM4anHT5Iime+hOIxsYea1g5oS5uieg1Lta8xSfHIa6FW0kJFXAud9rUldqwVyNlEEGuWUDzyWqilQwuNO7sKmLzOksn/xqF27TjjB3CJJa+F/iLgYzApnn7SisdULfQNaaHXAWiP79AVj2x3JI+0WK6FHqFiCLm36YrHLq145JEWF9BCwJZNDnnFI7uMn9Y94zZasXxPkYcUj0VC8ZjdQzlu/yUbWcXVTknFY34PNbV6TglGFzgWSike87VQYrnv1+9QWuBZKKd4zO+hEpor8llk1SmR0VIFj/k9VHN5IYusekpkQldDTPApMM0/11GCRZWzos0uLCQW76FiE52PIccVk5Amp3jMf9DsjWU98UWPiHC6k91qY01TTkPflOQkuUfM/L31D2+t64l+zXm9utmfg58S5Z/bBzkr/OmndK+dhZ0SHteDRRZp6WaRhfWOSojpg76JsVG9w7pbZBEsslO7Y2TRFFmMiky0VGQqMhWZikxFpiJTkanIVGQqMhWZikxFpiJTkanIVGQqMhWZikxFpiJTkanIVGQqMhWZikxFpiJTkanIVGQqMhWZikxFpiJTkanIVGQqsv8FE0HNxadZOb8AAAAASUVORK5CYII=\"","import { useEffect, useState } from \"react\";\r\nimport useImage from \"use-image\";\r\n\r\nimport { useDataURL } from \"../../contexts/AssetsContext\";\r\n\r\nimport { mapSources as defaultMapSources } from \"../../maps\";\r\n\r\nimport { getImageLightness } from \"../../helpers/image\";\r\n\r\nimport Grid from \"../konva/Grid\";\r\nimport { Map } from \"../../types/Map\";\r\n\r\nfunction MapGrid({ map }: { map: Map }) {\r\n  let mapSourceMap = map;\r\n  const mapURL = useDataURL(\r\n    mapSourceMap,\r\n    defaultMapSources,\r\n    undefined,\r\n    map.type === \"file\"\r\n  );\r\n\r\n  const [mapImage, mapLoadingStatus] = useImage(mapURL || \"\");\r\n\r\n  const [isImageLight, setIsImageLight] = useState(true);\r\n\r\n  // When the map changes find the average lightness of its pixels\r\n  useEffect(() => {\r\n    if (mapLoadingStatus === \"loaded\" && mapImage) {\r\n      setIsImageLight(getImageLightness(mapImage));\r\n    }\r\n  }, [mapImage, mapLoadingStatus]);\r\n\r\n  return <Grid stroke={isImageLight ? \"black\" : \"white\"} />;\r\n}\r\n\r\nexport default MapGrid;\r\n","import { useRef } from \"react\";\r\nimport { Group, Circle, Rect } from \"react-konva\";\r\nimport Konva from \"konva\";\r\n\r\nimport {\r\n  useDebouncedStageScale,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  useSetPreventMapInteraction,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { GridInset } from \"../../types/Grid\";\r\n\r\ntype MapGridEditorProps = {\r\n  map: Map;\r\n  onGridChange: (inset: GridInset) => void;\r\n};\r\n\r\nfunction MapGridEditor({ map, onGridChange }: MapGridEditorProps) {\r\n  const stageScale = useDebouncedStageScale();\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const setPreventMapInteraction = useSetPreventMapInteraction();\r\n\r\n  const mapSize = { x: mapWidth, y: mapHeight };\r\n\r\n  function getHandlePositions() {\r\n    const topLeft = Vector2.multiply(map.grid.inset.topLeft, mapSize);\r\n    const bottomRight = Vector2.multiply(map.grid.inset.bottomRight, mapSize);\r\n\r\n    const size = Vector2.subtract(bottomRight, topLeft);\r\n    const offset = Vector2.multiply(topLeft, -1);\r\n\r\n    return {\r\n      topLeft,\r\n      topRight: { x: bottomRight.x, y: topLeft.y },\r\n      bottomRight,\r\n      bottomLeft: { x: topLeft.x, y: bottomRight.y },\r\n      size,\r\n      offset,\r\n    };\r\n  }\r\n  const handlePositions = getHandlePositions();\r\n\r\n  const handlePreviousPositionRef = useRef<Vector2>();\r\n\r\n  function handleScaleCircleDragStart(\r\n    event: Konva.KonvaEventObject<MouseEvent>\r\n  ) {\r\n    const handle = event.target;\r\n    const position = getHandleNormalizedPosition(handle);\r\n    handlePreviousPositionRef.current = position;\r\n  }\r\n\r\n  function handleScaleCircleDragMove(\r\n    event: Konva.KonvaEventObject<MouseEvent>\r\n  ) {\r\n    const handle = event.target;\r\n    onGridChange(getHandleInset(handle));\r\n    handlePreviousPositionRef.current = getHandleNormalizedPosition(handle);\r\n  }\r\n\r\n  function handleScaleCircleDragEnd(event: Konva.KonvaEventObject<MouseEvent>) {\r\n    onGridChange(getHandleInset(event.target));\r\n    setPreventMapInteraction(false);\r\n  }\r\n\r\n  function handleInteractivePointerDown() {\r\n    setPreventMapInteraction(true);\r\n  }\r\n\r\n  function handleInteractivePointerUp() {\r\n    setPreventMapInteraction(false);\r\n  }\r\n\r\n  function getHandleInset(handle: Konva.Node): GridInset {\r\n    const name = handle.name();\r\n\r\n    // Find distance and direction of dragging\r\n    const previousPosition = handlePreviousPositionRef.current;\r\n    if (!previousPosition) {\r\n      return map.grid.inset;\r\n    }\r\n    const position = getHandleNormalizedPosition(handle);\r\n    const distance = Vector2.distance(previousPosition, position);\r\n    const direction = Vector2.normalize(\r\n      Vector2.subtract(position, previousPosition)\r\n    );\r\n\r\n    const inset = {\r\n      topLeft: { ...map.grid.inset.topLeft },\r\n      bottomRight: { ...map.grid.inset.bottomRight },\r\n    };\r\n\r\n    if (direction.x === 0 && direction.y === 0) {\r\n      return inset;\r\n    }\r\n\r\n    // Scale the grid direction by the distance dragged and the\r\n    // dot product between the drag direction and the grid direction\r\n    // This drags the handle while keeping the aspect ratio\r\n    if (name === \"topLeft\") {\r\n      // Top left to bottom right\r\n      const gridDirection = Vector2.normalize(\r\n        Vector2.subtract(inset.topLeft, inset.bottomRight)\r\n      );\r\n      const dot = Vector2.dot(direction, gridDirection);\r\n      const offset = Vector2.multiply(gridDirection, distance * dot);\r\n      const newPosition = Vector2.add(previousPosition, offset);\r\n      return {\r\n        topLeft: newPosition,\r\n        bottomRight: inset.bottomRight,\r\n      };\r\n    } else if (name === \"topRight\") {\r\n      // Top right to bottom left\r\n      const gridDirection = Vector2.normalize(\r\n        Vector2.subtract(\r\n          { x: inset.bottomRight.x, y: inset.topLeft.y },\r\n          { x: inset.topLeft.x, y: inset.bottomRight.y }\r\n        )\r\n      );\r\n      const dot = Vector2.dot(direction, gridDirection);\r\n      const offset = Vector2.multiply(gridDirection, distance * dot);\r\n      const newPosition = Vector2.add(previousPosition, offset);\r\n      return {\r\n        topLeft: { x: inset.topLeft.x, y: newPosition.y },\r\n        bottomRight: { x: newPosition.x, y: inset.bottomRight.y },\r\n      };\r\n    } else if (name === \"bottomRight\") {\r\n      // Bottom right to top left\r\n      const gridDirection = Vector2.normalize(\r\n        Vector2.subtract(inset.bottomRight, inset.topLeft)\r\n      );\r\n      const dot = Vector2.dot(direction, gridDirection);\r\n      const offset = Vector2.multiply(gridDirection, distance * dot);\r\n      const newPosition = Vector2.add(previousPosition, offset);\r\n      return {\r\n        topLeft: inset.topLeft,\r\n        bottomRight: newPosition,\r\n      };\r\n    } else if (name === \"bottomLeft\") {\r\n      // Bottom left to top right\r\n      const gridDirection = Vector2.normalize(\r\n        Vector2.subtract(\r\n          { x: inset.topLeft.x, y: inset.bottomRight.y },\r\n          { x: inset.bottomRight.x, y: inset.topLeft.y }\r\n        )\r\n      );\r\n      const dot = Vector2.dot(direction, gridDirection);\r\n      const offset = Vector2.multiply(gridDirection, distance * dot);\r\n      const newPosition = Vector2.add(previousPosition, offset);\r\n      return {\r\n        topLeft: { x: newPosition.x, y: inset.topLeft.y },\r\n        bottomRight: { x: inset.bottomRight.x, y: newPosition.y },\r\n      };\r\n    } else if (name === \"center\") {\r\n      const offset = Vector2.subtract(position, previousPosition);\r\n      return {\r\n        topLeft: Vector2.add(inset.topLeft, offset),\r\n        bottomRight: Vector2.add(inset.bottomRight, offset),\r\n      };\r\n    } else {\r\n      return inset;\r\n    }\r\n  }\r\n\r\n  function nudgeGrid(direction: Vector2, scale: number) {\r\n    const inset = map.grid.inset;\r\n    const gridSizeNormalized = Vector2.divide(\r\n      Vector2.subtract(inset.bottomRight, inset.topLeft),\r\n      map.grid.size\r\n    );\r\n    const offset = Vector2.multiply(\r\n      Vector2.multiply(direction, gridSizeNormalized),\r\n      Math.min(scale / (stageScale * stageScale), 1)\r\n    );\r\n    onGridChange({\r\n      topLeft: Vector2.add(inset.topLeft, offset),\r\n      bottomRight: Vector2.add(inset.bottomRight, offset),\r\n    });\r\n  }\r\n\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    const nudgeAmount = event.shiftKey ? 2 : 0.5;\r\n    if (shortcuts.gridNudgeUp(event)) {\r\n      // Stop arrow up/down scrolling if overflowing\r\n      event.preventDefault();\r\n      nudgeGrid({ x: 0, y: -1 }, nudgeAmount);\r\n    }\r\n    if (shortcuts.gridNudgeLeft(event)) {\r\n      nudgeGrid({ x: -1, y: 0 }, nudgeAmount);\r\n    }\r\n    if (shortcuts.gridNudgeRight(event)) {\r\n      nudgeGrid({ x: 1, y: 0 }, nudgeAmount);\r\n    }\r\n    if (shortcuts.gridNudgeDown(event)) {\r\n      event.preventDefault();\r\n      nudgeGrid({ x: 0, y: 1 }, nudgeAmount);\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  function getHandleNormalizedPosition(handle: Konva.Node) {\r\n    return Vector2.divide({ x: handle.x(), y: handle.y() }, mapSize);\r\n  }\r\n\r\n  const editCircleRadius = Math.max(\r\n    (Math.min(mapWidth, mapHeight) / 30) * Math.max(1 / stageScale, 1),\r\n    1\r\n  );\r\n\r\n  const editCircleProps = {\r\n    radius: editCircleRadius,\r\n    fill: \"rgba(0, 0, 0, 0.5)\",\r\n    stroke: \"white\",\r\n    strokeWidth: editCircleRadius / 5,\r\n    draggable: true,\r\n    onDragStart: handleScaleCircleDragStart,\r\n    onDragMove: handleScaleCircleDragMove,\r\n    onDragEnd: handleScaleCircleDragEnd,\r\n    onMouseDown: handleInteractivePointerDown,\r\n    onMouseUp: handleInteractivePointerUp,\r\n    onTouchStart: handleInteractivePointerDown,\r\n    onTouchEnd: handleInteractivePointerUp,\r\n  };\r\n\r\n  const editRectProps = {\r\n    fill: \"transparent\",\r\n    stroke: \"rgba(255, 255, 255, 0.75)\",\r\n    strokeWidth: editCircleRadius / 10,\r\n  };\r\n\r\n  return (\r\n    <Group>\r\n      <Rect\r\n        width={handlePositions.size.x}\r\n        height={handlePositions.size.y}\r\n        offset={handlePositions.offset}\r\n        {...editRectProps}\r\n      />\r\n      <Circle\r\n        x={handlePositions.topLeft.x}\r\n        y={handlePositions.topLeft.y}\r\n        name=\"topLeft\"\r\n        {...editCircleProps}\r\n      />\r\n      <Circle\r\n        x={handlePositions.topRight.x}\r\n        y={handlePositions.topRight.y}\r\n        name=\"topRight\"\r\n        {...editCircleProps}\r\n      />\r\n      <Circle\r\n        x={handlePositions.bottomRight.x}\r\n        y={handlePositions.bottomRight.y}\r\n        name=\"bottomRight\"\r\n        {...editCircleProps}\r\n      />\r\n      <Circle\r\n        x={handlePositions.bottomLeft.x}\r\n        y={handlePositions.bottomLeft.y}\r\n        name=\"bottomLeft\"\r\n        {...editCircleProps}\r\n      />\r\n      <Circle\r\n        x={(handlePositions.topLeft.x + handlePositions.bottomRight.x) / 2}\r\n        y={(handlePositions.topLeft.y + handlePositions.bottomRight.y) / 2}\r\n        name=\"center\"\r\n        {...editCircleProps}\r\n        radius={editCircleRadius / 1.5}\r\n      />\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default MapGridEditor;\r\n","import React, { useState, useRef } from \"react\";\r\nimport { Box, IconButton } from \"theme-ui\";\r\nimport { Stage, Layer, Image } from \"react-konva\";\r\nimport Konva from \"konva\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\n\r\nimport useMapImage from \"../../hooks/useMapImage\";\r\nimport usePreventOverscroll from \"../../hooks/usePreventOverscroll\";\r\nimport useStageInteraction from \"../../hooks/useStageInteraction\";\r\nimport useImageCenter from \"../../hooks/useImageCenter\";\r\nimport useResponsiveLayout from \"../../hooks/useResponsiveLayout\";\r\n\r\nimport { getGridDefaultInset, getGridMaxZoom } from \"../../helpers/grid\";\r\nimport KonvaBridge from \"../../helpers/KonvaBridge\";\r\n\r\nimport { MapInteractionProvider } from \"../../contexts/MapInteractionContext\";\r\nimport { GridProvider } from \"../../contexts/GridContext\";\r\n\r\nimport ResetMapIcon from \"../../icons/ResetMapIcon\";\r\nimport GridOnIcon from \"../../icons/GridOnIcon\";\r\nimport GridOffIcon from \"../../icons/GridOffIcon\";\r\n\r\nimport MapGrid from \"./MapGrid\";\r\nimport MapGridEditor from \"./MapGridEditor\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { GridInset } from \"../../types/Grid\";\r\nimport { MapSettingsChangeEventHandler } from \"../../types/Events\";\r\n\r\ntype MapEditorProps = {\r\n  map: Map;\r\n  onSettingsChange: MapSettingsChangeEventHandler;\r\n};\r\n\r\nfunction MapEditor({ map, onSettingsChange }: MapEditorProps) {\r\n  const [mapImage] = useMapImage(map);\r\n\r\n  const [stageWidth, setStageWidth] = useState(1);\r\n  const [stageHeight, setStageHeight] = useState(1);\r\n  const [stageScale, setStageScale] = useState(1);\r\n\r\n  const defaultInset = getGridDefaultInset(map.grid, map.width, map.height);\r\n\r\n  const stageTranslateRef = useRef({ x: 0, y: 0 });\r\n  const mapStageRef = useRef<Konva.Stage>(null);\r\n  const mapLayerRef = useRef<Konva.Layer>(null);\r\n  const [preventMapInteraction, setPreventMapInteraction] = useState(false);\r\n\r\n  function handleResize(width?: number, height?: number): void {\r\n    if (width) {\r\n      setStageWidth(width);\r\n    }\r\n\r\n    if (height) {\r\n      setStageHeight(height);\r\n    }\r\n  }\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  usePreventOverscroll(containerRef);\r\n\r\n  const [mapWidth, mapHeight] = useImageCenter(\r\n    map,\r\n    mapStageRef,\r\n    stageWidth,\r\n    stageHeight,\r\n    stageTranslateRef,\r\n    setStageScale,\r\n    mapLayerRef,\r\n    containerRef,\r\n    true\r\n  );\r\n\r\n  useStageInteraction(\r\n    mapStageRef,\r\n    stageScale,\r\n    setStageScale,\r\n    stageTranslateRef,\r\n    mapLayerRef,\r\n    getGridMaxZoom(map.grid),\r\n    \"move\",\r\n    preventMapInteraction\r\n  );\r\n\r\n  function handleGridChange(inset: GridInset) {\r\n    onSettingsChange({\r\n      grid: {\r\n        ...map.grid,\r\n        inset,\r\n      },\r\n    });\r\n  }\r\n\r\n  function handleMapReset() {\r\n    onSettingsChange({\r\n      grid: {\r\n        ...map.grid,\r\n        inset: defaultInset,\r\n      },\r\n    });\r\n  }\r\n\r\n  const [showGridControls, setShowGridControls] = useState(true);\r\n\r\n  const mapInteraction = {\r\n    stageScale,\r\n    stageWidth,\r\n    stageHeight,\r\n    setPreventMapInteraction,\r\n    mapWidth,\r\n    mapHeight,\r\n    interactionEmitter: null,\r\n  };\r\n\r\n  const gridChanged =\r\n    map.grid.inset.topLeft.x !== defaultInset.topLeft.x ||\r\n    map.grid.inset.topLeft.y !== defaultInset.topLeft.y ||\r\n    map.grid.inset.bottomRight.x !== defaultInset.bottomRight.x ||\r\n    map.grid.inset.bottomRight.y !== defaultInset.bottomRight.y;\r\n\r\n  const gridValid = map.grid.size.x !== 0 && map.grid.size.y !== 0;\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  return (\r\n    <MapInteractionProvider value={mapInteraction}>\r\n      <GridProvider grid={map?.grid} width={mapWidth} height={mapHeight}>\r\n        <Box\r\n          sx={{\r\n            width: \"100%\",\r\n            height: layout.screenSize === \"large\" ? \"500px\" : \"300px\",\r\n            cursor: \"move\",\r\n            touchAction: \"none\",\r\n            outline: \"none\",\r\n            position: \"relative\",\r\n          }}\r\n          bg=\"muted\"\r\n          ref={containerRef}\r\n        >\r\n          <ReactResizeDetector\r\n            handleWidth\r\n            handleHeight\r\n            onResize={handleResize}\r\n            targetRef={containerRef}\r\n          >\r\n            <KonvaBridge\r\n              stageRender={(children: React.ReactNode) => (\r\n                <Stage\r\n                  // @ts-ignore https://github.com/konvajs/react-konva/issues/342\r\n                  width={stageWidth}\r\n                  height={stageHeight}\r\n                  scale={{ x: stageScale, y: stageScale }}\r\n                  ref={mapStageRef}\r\n                >\r\n                  {children}\r\n                </Stage>\r\n              )}\r\n            >\r\n              <Layer ref={mapLayerRef}>\r\n                <Image image={mapImage} width={mapWidth} height={mapHeight} />\r\n                {showGridControls && gridValid && (\r\n                  <>\r\n                    <MapGrid map={map} />\r\n                    <MapGridEditor map={map} onGridChange={handleGridChange} />\r\n                  </>\r\n                )}\r\n              </Layer>\r\n            </KonvaBridge>\r\n          </ReactResizeDetector>\r\n          {gridChanged && gridValid && (\r\n            <IconButton\r\n              title=\"Reset Grid\"\r\n              aria-label=\"Reset Grid\"\r\n              onClick={handleMapReset}\r\n              bg=\"overlay\"\r\n              sx={{\r\n                borderRadius: \"50%\",\r\n                position: \"absolute\",\r\n                bottom: 0,\r\n                left: 0,\r\n              }}\r\n              m={2}\r\n            >\r\n              <ResetMapIcon />\r\n            </IconButton>\r\n          )}\r\n          <IconButton\r\n            title={\r\n              showGridControls ? \"Hide Grid Controls\" : \"Show Grid Controls\"\r\n            }\r\n            aria-label={\r\n              showGridControls ? \"Hide Grid Controls\" : \"Show Grid Controls\"\r\n            }\r\n            onClick={() => setShowGridControls(!showGridControls)}\r\n            bg=\"overlay\"\r\n            sx={{\r\n              borderRadius: \"50%\",\r\n              position: \"absolute\",\r\n              bottom: 0,\r\n              right: 0,\r\n            }}\r\n            m={2}\r\n            p=\"6px\"\r\n          >\r\n            {showGridControls ? <GridOnIcon /> : <GridOffIcon />}\r\n          </IconButton>\r\n        </Box>\r\n      </GridProvider>\r\n    </MapInteractionProvider>\r\n  );\r\n}\r\n\r\nexport default MapEditor;\r\n","import { useState } from \"react\";\r\nimport { Button, Flex, Label, useThemeUI } from \"theme-ui\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport MapSettings from \"../components/map/MapSettings\";\r\nimport MapEditor from \"../components/map/MapEditor\";\r\n\r\nimport { isEmpty } from \"../helpers/shared\";\r\nimport { getGridDefaultInset } from \"../helpers/grid\";\r\n\r\nimport useResponsiveLayout from \"../hooks/useResponsiveLayout\";\r\nimport { Map } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport {\r\n  UpdateMapEventHanlder,\r\n  UpdateMapStateEventHandler,\r\n} from \"../contexts/MapDataContext\";\r\n\r\ntype EditMapProps = {\r\n  isOpen: boolean;\r\n  onDone: () => void;\r\n  map: Map;\r\n  mapState: MapState;\r\n  onUpdateMap: UpdateMapEventHanlder;\r\n  onUpdateMapState: UpdateMapStateEventHandler;\r\n};\r\n\r\nfunction EditMapModal({\r\n  isOpen,\r\n  onDone,\r\n  map,\r\n  mapState,\r\n  onUpdateMap,\r\n  onUpdateMapState,\r\n}: EditMapProps) {\r\n  const { theme } = useThemeUI();\r\n\r\n  function handleClose() {\r\n    setMapSettingChanges({});\r\n    setMapStateSettingChanges({});\r\n    onDone();\r\n  }\r\n\r\n  async function handleSave() {\r\n    await applyMapChanges();\r\n    onDone();\r\n  }\r\n\r\n  /**\r\n   * Map settings\r\n   */\r\n  // Local cache of map setting changes\r\n  // Applied when done is clicked or map selection is changed\r\n  const [mapSettingChanges, setMapSettingChanges] = useState<Partial<Map>>({});\r\n  const [mapStateSettingChanges, setMapStateSettingChanges] = useState<\r\n    Partial<MapState>\r\n  >({});\r\n\r\n  function handleMapSettingsChange(change: Partial<Map>) {\r\n    setMapSettingChanges((prevChanges) => ({\r\n      ...prevChanges,\r\n      ...change,\r\n    }));\r\n  }\r\n\r\n  function handleMapStateSettingsChange(change: Partial<MapState>) {\r\n    setMapStateSettingChanges((prevChanges) => ({\r\n      ...prevChanges,\r\n      ...change,\r\n    }));\r\n  }\r\n\r\n  async function applyMapChanges() {\r\n    if (!isEmpty(mapSettingChanges) || !isEmpty(mapStateSettingChanges)) {\r\n      // Ensure grid values are positive\r\n      let verifiedChanges: Partial<Map> = { ...mapSettingChanges };\r\n      if (verifiedChanges.grid) {\r\n        verifiedChanges.grid.size.x = verifiedChanges.grid.size.x || 1;\r\n        verifiedChanges.grid.size.y = verifiedChanges.grid.size.y || 1;\r\n      }\r\n      // Ensure inset isn't flipped\r\n      if (verifiedChanges.grid) {\r\n        const inset = verifiedChanges.grid.inset;\r\n        if (\r\n          inset.topLeft.x > inset.bottomRight.x ||\r\n          inset.topLeft.y > inset.bottomRight.y\r\n        ) {\r\n          verifiedChanges.grid.inset = getGridDefaultInset(\r\n            { size: verifiedChanges.grid.size, type: map.grid.type },\r\n            map.width,\r\n            map.height\r\n          );\r\n        }\r\n      }\r\n      await onUpdateMap(map.id, mapSettingChanges);\r\n      await onUpdateMapState(map.id, mapStateSettingChanges);\r\n\r\n      setMapSettingChanges({});\r\n      setMapStateSettingChanges({});\r\n    }\r\n  }\r\n\r\n  const selectedMapWithChanges =\r\n    map &&\r\n    ({\r\n      ...map,\r\n      ...mapSettingChanges,\r\n    } as Map);\r\n  const selectedMapStateWithChanges: MapState = mapState && {\r\n    ...mapState,\r\n    ...mapStateSettingChanges,\r\n  };\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  if (!map) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={handleClose}\r\n      style={{\r\n        content: {\r\n          maxWidth: layout.modalSize,\r\n          width: \"calc(100% - 16px)\",\r\n          padding: 0,\r\n          display: \"flex\",\r\n          overflow: \"hidden\",\r\n        },\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          width: \"100%\",\r\n        }}\r\n      >\r\n        <Label pt={2} pb={1} px={3}>\r\n          Edit map\r\n        </Label>\r\n        <SimpleBar\r\n          style={{\r\n            minHeight: 0,\r\n            padding: \"16px\",\r\n            backgroundColor: theme.colors?.muted as string,\r\n            margin: \"0 8px\",\r\n            height: \"100%\",\r\n          }}\r\n        >\r\n          <MapEditor\r\n            map={selectedMapWithChanges}\r\n            onSettingsChange={handleMapSettingsChange}\r\n          />\r\n          <MapSettings\r\n            map={selectedMapWithChanges}\r\n            mapState={selectedMapStateWithChanges}\r\n            onSettingsChange={handleMapSettingsChange}\r\n            onStateSettingsChange={handleMapStateSettingsChange}\r\n          />\r\n        </SimpleBar>\r\n        <Button m={3} onClick={handleSave}>\r\n          Save\r\n        </Button>\r\n      </Flex>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default EditMapModal;\r\n","import { Box, Label, Flex, Button, Text } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\ntype ConfirmModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: () => void;\r\n  onConfirm: () => void;\r\n  confirmText: string;\r\n  label: string;\r\n  description: string;\r\n};\r\n\r\nfunction ConfirmModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  onConfirm,\r\n  confirmText,\r\n  label,\r\n  description,\r\n}: ConfirmModalProps) {\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{ content: { maxWidth: \"300px\" } }}\r\n    >\r\n      <Box>\r\n        <Label py={2}>{label}</Label>\r\n        {description && (\r\n          <Text as=\"p\" mb={2} variant=\"caption\">\r\n            {description}\r\n          </Text>\r\n        )}\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }} m={1} ml={0} onClick={onRequestClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button sx={{ flexGrow: 1 }} m={1} mr={0} onClick={onConfirm}>\r\n            {confirmText}\r\n          </Button>\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nConfirmModal.defaultProps = {\r\n  label: \"Are you sure?\",\r\n  description: \"\",\r\n  confirmText: \"Yes\",\r\n};\r\n\r\nexport default ConfirmModal;\r\n","import { Box, Text } from \"theme-ui\";\r\n\r\nimport Link from \"./Link\";\r\n\r\nfunction DatabaseDisabledMessage({ type }: { type: string }) {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        textAlign: \"center\",\r\n        borderRadius: \"2px\",\r\n        gridArea: \"1 / 1 / span 1 / span 4\",\r\n      }}\r\n      bg=\"highlight\"\r\n      p={1}\r\n    >\r\n      <Text as=\"p\" variant=\"body2\">\r\n        {type} saving is unavailable. See <Link to=\"/faq#database\">FAQ</Link>{\" \"}\r\n        for more information.\r\n      </Text>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default DatabaseDisabledMessage;\r\n","import { useState } from \"react\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\nexport type ImageDropEvent = {\r\n  files: File[];\r\n  dropPosition: Vector2;\r\n};\r\n\r\nfunction useImageDrop(\r\n  onImageDrop: (event: ImageDropEvent) => void,\r\n  supportFileTypes = [\"image/jpeg\", \"image/gif\", \"image/png\", \"image/webp\"]\r\n) {\r\n  const { addToast } = useToasts();\r\n\r\n  const [dragging, setDragging] = useState(false);\r\n  function onDragEnter(event: React.DragEvent<HTMLDivElement>) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    setDragging(true);\r\n  }\r\n\r\n  function onDragLeave(event: React.DragEvent<HTMLDivElement>) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    setDragging(false);\r\n  }\r\n\r\n  function onDragOver(event: React.DragEvent<HTMLDivElement>) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    if (event.dataTransfer) {\r\n      event.dataTransfer.dropEffect = \"copy\";\r\n    }\r\n  }\r\n\r\n  async function onDrop(event: React.DragEvent<HTMLDivElement>) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    let imageFiles = [];\r\n\r\n    // Check if the dropped image is from a URL\r\n    const html = event.dataTransfer?.getData(\"text/html\");\r\n    if (html) {\r\n      try {\r\n        const urlMatch = html.match(/src=\"?([^\"\\s]+)\"?\\s*/);\r\n        if (!urlMatch) {\r\n          throw new Error(\"Unable to find image source\");\r\n        }\r\n        const url = urlMatch[1].replace(\"&amp;\", \"&\"); // Reverse html encoding of url parameters\r\n        let name = \"\";\r\n        const altMatch = html.match(/alt=\"?([^\"]+)\"?\\s*/);\r\n        if (altMatch && altMatch.length > 1) {\r\n          name = altMatch[1];\r\n        }\r\n        const response = await fetch(url);\r\n        if (response.ok) {\r\n          const blob = await response.blob();\r\n          const file = new File([blob], name, {\r\n            type: blob.type,\r\n          });\r\n          if (supportFileTypes.includes(file.type)) {\r\n            imageFiles.push(file);\r\n          } else {\r\n            addToast(`Unsupported file type for ${file.name}`);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        if (e instanceof Error) {\r\n          if (e.message === \"Failed to fetch\") {\r\n            addToast(\"Unable to import image: failed to fetch\");\r\n          } else {\r\n            addToast(\"Unable to import image\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const files = event.dataTransfer?.files || [];\r\n    for (let file of files) {\r\n      if (supportFileTypes.includes(file.type)) {\r\n        imageFiles.push(file);\r\n      } else {\r\n        addToast(`Unsupported file type for ${file.name}`);\r\n      }\r\n    }\r\n    const dropPosition = new Vector2(event.clientX, event.clientY);\r\n    onImageDrop({ files: imageFiles, dropPosition });\r\n    setDragging(false);\r\n  }\r\n\r\n  const containerListeners = { onDragEnter };\r\n  const overlayListeners = { onDragLeave, onDragOver, onDrop };\r\n\r\n  return { dragging, containerListeners, overlayListeners };\r\n}\r\n\r\nexport default useImageDrop;\r\n","import React from \"react\";\r\nimport { Box, Flex, Text } from \"theme-ui\";\r\n\r\nimport useImageDrop, { ImageDropEvent } from \"../../hooks/useImageDrop\";\r\n\r\ntype ImageDropProps = {\r\n  onDrop: (event: ImageDropEvent) => void;\r\n  dropText: string;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nfunction ImageDrop({ onDrop, dropText, children }: ImageDropProps) {\r\n  const { dragging, containerListeners, overlayListeners } =\r\n    useImageDrop(onDrop);\r\n  return (\r\n    <Box {...containerListeners}>\r\n      {children}\r\n      {dragging && (\r\n        <Flex\r\n          bg=\"overlay\"\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            right: 0,\r\n            left: 0,\r\n            bottom: 0,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            cursor: \"copy\",\r\n          }}\r\n          {...overlayListeners}\r\n        >\r\n          <Text sx={{ pointerEvents: \"none\", color: \"primary\" }}>\r\n            {dropText || \"Drop image to import\"}\r\n          </Text>\r\n        </Flex>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ImageDrop;\r\n","import { Image, ImageProps } from \"theme-ui\";\r\n\r\nimport { useDataURL } from \"../../contexts/AssetsContext\";\r\nimport { mapSources as defaultMapSources } from \"../../maps\";\r\nimport { Map } from \"../../types/Map\";\r\n\r\ntype MapTileImageProps = {\r\n  map: Map;\r\n} & ImageProps;\r\n\r\nfunction MapTileImage({ map, ...props }: MapTileImageProps) {\r\n  const mapURL = useDataURL(\r\n    map,\r\n    defaultMapSources,\r\n    undefined,\r\n    map.type === \"file\"\r\n  );\r\n\r\n  return <Image src={mapURL} {...props} />;\r\n}\r\n\r\nexport default MapTileImage;\r\n","import React from \"react\";\r\nimport { Map } from \"../../types/Map\";\r\n\r\nimport Tile from \"../tile/Tile\";\r\nimport MapImage from \"./MapTileImage\";\r\n\r\ntype MapTileProps = {\r\n  map: Map;\r\n  isSelected: boolean;\r\n  onSelect: (mapId: string) => void;\r\n  onEdit: (mapId: string) => void;\r\n  onDoubleClick: () => void;\r\n  canEdit: boolean;\r\n  badges: React.ReactChild[];\r\n};\r\n\r\nfunction MapTile({\r\n  map,\r\n  isSelected,\r\n  onSelect,\r\n  onEdit,\r\n  onDoubleClick,\r\n  canEdit,\r\n  badges,\r\n}: MapTileProps) {\r\n  return (\r\n    <Tile\r\n      title={map.name}\r\n      isSelected={isSelected}\r\n      onSelect={() => onSelect(map.id)}\r\n      onEdit={() => onEdit(map.id)}\r\n      onDoubleClick={() => canEdit && onDoubleClick()}\r\n      canEdit={canEdit}\r\n      badges={badges}\r\n      editTitle=\"Edit Map\"\r\n    >\r\n      <MapImage map={map} />\r\n    </Tile>\r\n  );\r\n}\r\n\r\nexport default MapTile;\r\n","import { Grid } from \"theme-ui\";\r\n\r\nimport Tile from \"../tile/Tile\";\r\nimport MapImage from \"./MapTileImage\";\r\n\r\nimport useResponsiveLayout from \"../../hooks/useResponsiveLayout\";\r\n\r\nimport { Map } from \"../../types/Map\";\r\nimport { GroupContainer } from \"../../types/Group\";\r\n\r\ntype MapTileGroupProps = {\r\n  group: GroupContainer;\r\n  maps: Map[];\r\n  isSelected: boolean;\r\n  onSelect: (groupId: string) => void;\r\n  onDoubleClick: () => void;\r\n};\r\n\r\nfunction MapTileGroup({\r\n  group,\r\n  maps,\r\n  isSelected,\r\n  onSelect,\r\n  onDoubleClick,\r\n}: MapTileGroupProps) {\r\n  const layout = useResponsiveLayout();\r\n\r\n  return (\r\n    <Tile\r\n      title={group.name}\r\n      isSelected={isSelected}\r\n      onSelect={() => onSelect(group.id)}\r\n      onDoubleClick={onDoubleClick}\r\n    >\r\n      <Grid\r\n        columns={`repeat(${layout.groupGridColumns}, 1fr)`}\r\n        p={2}\r\n        sx={{\r\n          gridGap: 2,\r\n          gridTemplateRows: `repeat(${layout.groupGridColumns}, 1fr)`,\r\n        }}\r\n      >\r\n        {maps\r\n          .slice(0, layout.groupGridColumns * layout.groupGridColumns)\r\n          .map((map) => (\r\n            <MapImage\r\n              sx={{ borderRadius: \"8px\" }}\r\n              map={map}\r\n              key={`${map.id}-group-tile`}\r\n            />\r\n          ))}\r\n      </Grid>\r\n    </Tile>\r\n  );\r\n}\r\n\r\nexport default MapTileGroup;\r\n","import { useRef } from \"react\";\r\nimport {\r\n  DndContext,\r\n  useDndContext,\r\n  useDndMonitor,\r\n  DragEndEvent,\r\n} from \"@dnd-kit/core\";\r\n\r\nimport { Props } from \"@dnd-kit/core/dist/components/DndContext/DndContext\";\r\n\r\n/**\r\n * Wrap a dnd-kit DndContext with a position monitor to get the\r\n * active drag element on drag end\r\n * TODO: use look into fixing this upstream\r\n * Related: https://github.com/clauderic/dnd-kit/issues/238\r\n */\r\n\r\ntype DragEndWithOverlayEvent = {\r\n  overlayNodeClientRect?: DOMRect;\r\n};\r\n\r\nexport type CustomDragEndEvent = DragEndWithOverlayEvent & DragEndEvent;\r\n\r\ntype CustomDragProps = {\r\n  onDragEnd?: (event: CustomDragEndEvent) => void;\r\n};\r\n\r\nfunction DragPositionMonitor({ onDragEnd }: CustomDragProps) {\r\n  const { overlayNode } = useDndContext();\r\n\r\n  const overlayNodeClientRectRef = useRef<DOMRect>();\r\n  function handleDragMove() {\r\n    if (overlayNode?.nodeRef?.current) {\r\n      overlayNodeClientRectRef.current =\r\n        overlayNode.nodeRef.current.getBoundingClientRect();\r\n    }\r\n  }\r\n\r\n  function handleDragEnd(props: DragEndEvent) {\r\n    onDragEnd &&\r\n      onDragEnd({\r\n        ...props,\r\n        overlayNodeClientRect: overlayNodeClientRectRef.current,\r\n      });\r\n  }\r\n  useDndMonitor({ onDragEnd: handleDragEnd, onDragMove: handleDragMove });\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * @param {CustomDragProps} props\r\n */\r\nfunction DragContext({\r\n  children,\r\n  onDragEnd,\r\n  ...props\r\n}: CustomDragProps & Props) {\r\n  return (\r\n    <DndContext {...props}>\r\n      <DragPositionMonitor onDragEnd={onDragEnd} />\r\n      {children}\r\n    </DndContext>\r\n  );\r\n}\r\n\r\nexport default DragContext;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\nimport Fuse from \"fuse.js\";\r\n\r\nimport { useKeyboard, useBlur } from \"./KeyboardContext\";\r\n\r\nimport { getGroupItems, groupsFromIds } from \"../helpers/group\";\r\n\r\nimport shortcuts from \"../shortcuts\";\r\nimport { Group, GroupItem } from \"../types/Group\";\r\n\r\nexport type GroupSelectMode = \"single\" | \"multiple\" | \"range\";\r\nexport type GroupSelectModeChangeEventHandler = (\r\n  selectMode: GroupSelectMode\r\n) => void;\r\nexport type GroupOpenEventHandler = (groupId: string) => void;\r\nexport type GroupCloseEventHandler = () => void;\r\nexport type GroupsChangeEventHandler = (newGroups: Group[]) => void;\r\nexport type SubgroupsChangeEventHandler = (\r\n  items: GroupItem[],\r\n  groupId: string\r\n) => void;\r\nexport type GroupSelectEventHandler = (groupId: string) => void;\r\nexport type GroupsSelectEventHandler = (groupIds: string[]) => void;\r\nexport type GroupClearSelectionEventHandler = () => void;\r\nexport type GroupFilterChangeEventHandler = (filter: string) => void;\r\nexport type GroupClearFilterEventHandler = () => void;\r\n\r\ntype GroupContextValue = {\r\n  groups: Group[];\r\n  activeGroups: Group[] | GroupItem[];\r\n  openGroupId: string | undefined;\r\n  openGroupItems: GroupItem[];\r\n  filter: string | undefined;\r\n  filteredGroupItems: GroupItem[];\r\n  selectedGroupIds: string[];\r\n  selectMode: GroupSelectMode;\r\n  onSelectModeChange: GroupSelectModeChangeEventHandler;\r\n  onGroupOpen: GroupOpenEventHandler;\r\n  onGroupClose: GroupCloseEventHandler;\r\n  onGroupsChange: GroupsChangeEventHandler;\r\n  onSubgroupChange: SubgroupsChangeEventHandler;\r\n  onGroupSelect: GroupSelectEventHandler;\r\n  onClearSelection: GroupClearSelectionEventHandler;\r\n  onFilterChange: GroupFilterChangeEventHandler;\r\n  onFilterClear: GroupClearFilterEventHandler;\r\n};\r\n\r\nconst GroupContext =\r\n  React.createContext<GroupContextValue | undefined>(undefined);\r\n\r\ntype GroupProviderProps = {\r\n  groups: Group[];\r\n  itemNames: Record<string, string>;\r\n  onGroupsChange: GroupsChangeEventHandler;\r\n  onGroupsSelect: GroupsSelectEventHandler;\r\n  disabled: boolean;\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport function GroupProvider({\r\n  groups,\r\n  itemNames,\r\n  onGroupsChange,\r\n  onGroupsSelect,\r\n  disabled,\r\n  children,\r\n}: GroupProviderProps) {\r\n  const [selectedGroupIds, setSelectedGroupIds] = useState<string[]>([]);\r\n  const [selectMode, setSelectMode] = useState<GroupSelectMode>(\"single\");\r\n\r\n  /**\r\n   * Group Open\r\n   */\r\n  const [openGroupId, setOpenGroupId] = useState<string>();\r\n  const [openGroupItems, setOpenGroupItems] = useState<GroupItem[]>([]);\r\n  useEffect(() => {\r\n    if (openGroupId) {\r\n      const openGroups = groupsFromIds([openGroupId], groups);\r\n      if (openGroups.length === 1) {\r\n        const openGroup = openGroups[0];\r\n        setOpenGroupItems(getGroupItems(openGroup));\r\n      } else {\r\n        // Close group if we can't find it\r\n        // This can happen if it was deleted or all it's items were deleted\r\n        setOpenGroupItems([]);\r\n        setOpenGroupId(undefined);\r\n      }\r\n    } else {\r\n      setOpenGroupItems([]);\r\n    }\r\n  }, [openGroupId, groups]);\r\n\r\n  function handleGroupOpen(groupId: string) {\r\n    setSelectedGroupIds([]);\r\n    setOpenGroupId(groupId);\r\n  }\r\n\r\n  function handleGroupClose() {\r\n    setSelectedGroupIds([]);\r\n    setOpenGroupId(undefined);\r\n  }\r\n\r\n  /**\r\n   * Search\r\n   */\r\n  const [filter, setFilter] = useState<string>();\r\n  const [filteredGroupItems, setFilteredGroupItems] = useState<GroupItem[]>([]);\r\n  const [fuse, setFuse] = useState<Fuse<GroupItem & { name: string }>>();\r\n  // Update search index when items change\r\n  useEffect(() => {\r\n    let items = [];\r\n    for (let group of groups) {\r\n      const itemsToAdd = getGroupItems(group);\r\n      const namedItems = itemsToAdd.map((item) => ({\r\n        ...item,\r\n        name: itemNames[item.id],\r\n      }));\r\n      items.push(...namedItems);\r\n    }\r\n    setFuse(new Fuse(items, { keys: [\"name\"] }));\r\n  }, [groups, itemNames]);\r\n\r\n  // Perform search when search changes\r\n  useEffect(() => {\r\n    if (filter && fuse) {\r\n      const query = fuse.search(filter);\r\n      setFilteredGroupItems(query.map((result) => result.item));\r\n      setOpenGroupId(undefined);\r\n    } else {\r\n      setFilteredGroupItems([]);\r\n    }\r\n  }, [filter, fuse]);\r\n\r\n  /**\r\n   * Handlers\r\n   */\r\n\r\n  const activeGroups = openGroupId\r\n    ? openGroupItems\r\n    : filter\r\n    ? filteredGroupItems\r\n    : groups;\r\n\r\n  function handleGroupsChange(newGroups: Group[]) {\r\n    onGroupsChange(newGroups);\r\n  }\r\n\r\n  function handleSubgroupChange(items: GroupItem[], groupId: string) {\r\n    const groupIndex = groups.findIndex((group) => group.id === groupId);\r\n    let updatedGroups = cloneDeep(groups);\r\n    const group = updatedGroups[groupIndex];\r\n    if (group.type === \"group\") {\r\n      updatedGroups[groupIndex] = {\r\n        ...group,\r\n        items,\r\n      };\r\n      onGroupsChange(updatedGroups);\r\n    } else {\r\n      throw new Error(`Group ${group} not a subgroup`);\r\n    }\r\n  }\r\n\r\n  function handleGroupSelect(groupId: string) {\r\n    let groupIds: string[] = [];\r\n    switch (selectMode) {\r\n      case \"single\":\r\n        groupIds = [groupId];\r\n        break;\r\n      case \"multiple\":\r\n        if (selectedGroupIds.includes(groupId)) {\r\n          groupIds = selectedGroupIds.filter((id) => id !== groupId);\r\n        } else {\r\n          groupIds = [...selectedGroupIds, groupId];\r\n        }\r\n        break;\r\n      case \"range\":\r\n        if (selectedGroupIds.length > 0) {\r\n          const currentIndex = activeGroups.findIndex((g) => g.id === groupId);\r\n          const lastIndex = activeGroups.findIndex(\r\n            (g) => g.id === selectedGroupIds[selectedGroupIds.length - 1]\r\n          );\r\n          let idsToAdd: string[] = [];\r\n          let idsToRemove: string[] = [];\r\n          const direction = currentIndex > lastIndex ? 1 : -1;\r\n          for (\r\n            let i = lastIndex + direction;\r\n            direction < 0 ? i >= currentIndex : i <= currentIndex;\r\n            i += direction\r\n          ) {\r\n            const id = activeGroups[i].id;\r\n            if (selectedGroupIds.includes(id)) {\r\n              idsToRemove.push(id);\r\n            } else {\r\n              idsToAdd.push(id);\r\n            }\r\n          }\r\n          groupIds = [...selectedGroupIds, ...idsToAdd].filter(\r\n            (id) => !idsToRemove.includes(id)\r\n          );\r\n        } else {\r\n          groupIds = [groupId];\r\n        }\r\n        break;\r\n      default:\r\n        groupIds = [];\r\n    }\r\n    setSelectedGroupIds(groupIds);\r\n    onGroupsSelect(groupIds);\r\n  }\r\n\r\n  function handleClearSelection() {\r\n    setSelectedGroupIds([]);\r\n    onGroupsSelect([]);\r\n  }\r\n\r\n  /**\r\n   * Shortcuts\r\n   */\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    if (shortcuts.selectRange(event)) {\r\n      setSelectMode(\"range\");\r\n    }\r\n    if (shortcuts.selectMultiple(event)) {\r\n      setSelectMode(\"multiple\");\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    if (shortcuts.selectRange(event) && selectMode === \"range\") {\r\n      setSelectMode(\"single\");\r\n    }\r\n    if (shortcuts.selectMultiple(event) && selectMode === \"multiple\") {\r\n      setSelectMode(\"single\");\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n\r\n  // Set select mode to single when cmd+tabing\r\n  function handleBlur() {\r\n    setSelectMode(\"single\");\r\n  }\r\n\r\n  useBlur(handleBlur);\r\n\r\n  const value = {\r\n    groups,\r\n    activeGroups,\r\n    openGroupId,\r\n    openGroupItems,\r\n    filter,\r\n    filteredGroupItems,\r\n    selectedGroupIds,\r\n    selectMode,\r\n    onSelectModeChange: setSelectMode,\r\n    onGroupOpen: handleGroupOpen,\r\n    onGroupClose: handleGroupClose,\r\n    onGroupsChange: handleGroupsChange,\r\n    onSubgroupChange: handleSubgroupChange,\r\n    onGroupSelect: handleGroupSelect,\r\n    onClearSelection: handleClearSelection,\r\n    onFilterChange: setFilter,\r\n    onFilterClear: () => setFilter(undefined),\r\n  };\r\n\r\n  return (\r\n    <GroupContext.Provider value={value}>{children}</GroupContext.Provider>\r\n  );\r\n}\r\n\r\nGroupProvider.defaultProps = {\r\n  groups: [],\r\n  itemNames: {},\r\n  onGroupsChange: () => {},\r\n  onGroupsSelect: () => {},\r\n  disabled: false,\r\n};\r\n\r\nexport function useGroup() {\r\n  const context = useContext(GroupContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useGroup must be used within a GroupProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default GroupContext;\r\n","function usePreventSelect() {\r\n  function clearSelection() {\r\n    window?.getSelection()?.removeAllRanges();\r\n    // @ts-ignore\r\n    document?.selection?.empty();\r\n  }\r\n  function preventSelect() {\r\n    clearSelection();\r\n    document.body.classList.add(\"no-select\");\r\n  }\r\n\r\n  function resumeSelect() {\r\n    document.body.classList.remove(\"no-select\");\r\n  }\r\n\r\n  return [preventSelect, resumeSelect];\r\n}\r\n\r\nexport default usePreventSelect;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport {\r\n  MouseSensor,\r\n  TouchSensor,\r\n  KeyboardSensor,\r\n  useSensor,\r\n  useSensors,\r\n  closestCenter,\r\n  RectEntry,\r\n} from \"@dnd-kit/core\";\r\n\r\nimport DragContext, { CustomDragEndEvent } from \"./DragContext\";\r\nimport { DragStartEvent, DragOverEvent, ViewRect } from \"@dnd-kit/core\";\r\nimport { DragCancelEvent } from \"@dnd-kit/core/dist/types\";\r\n\r\nimport { useGroup } from \"./GroupContext\";\r\n\r\nimport { moveGroupsInto, moveGroups, ungroup } from \"../helpers/group\";\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\nimport usePreventSelect from \"../hooks/usePreventSelect\";\r\nimport { GroupItem } from \"../types/Group\";\r\n\r\nconst TileDragIdContext =\r\n  React.createContext<string | undefined | null>(undefined);\r\nconst TileOverGroupIdContext =\r\n  React.createContext<string | undefined | null>(undefined);\r\nconst TileDragCursorContext =\r\n  React.createContext<string | undefined | null>(undefined);\r\n\r\nexport const BASE_SORTABLE_ID = \"__base__\";\r\nexport const GROUP_SORTABLE_ID = \"__group__\";\r\nexport const GROUP_ID_PREFIX = \"__group__\";\r\nexport const UNGROUP_ID = \"__ungroup__\";\r\nexport const ADD_TO_MAP_ID = \"__add__\";\r\n\r\n// Custom rectIntersect that takes a point\r\nfunction rectIntersection(rects: RectEntry[], point: Vector2) {\r\n  for (let rect of rects) {\r\n    const [id, bounds] = rect;\r\n    if (\r\n      id &&\r\n      bounds &&\r\n      point.x > bounds.offsetLeft &&\r\n      point.x < bounds.offsetLeft + bounds.width &&\r\n      point.y > bounds.offsetTop &&\r\n      point.y < bounds.offsetTop + bounds.height\r\n    ) {\r\n      return id;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\ntype TileDragProviderProps = {\r\n  onDragAdd?: (selectedGroupIds: string[], rect: DOMRect) => void;\r\n  onDragStart?: (event: DragStartEvent) => void;\r\n  onDragEnd?: (event: CustomDragEndEvent) => void;\r\n  onDragCancel?: (event: DragCancelEvent) => void;\r\n  children?: React.ReactNode;\r\n};\r\n\r\nexport function TileDragProvider({\r\n  onDragAdd,\r\n  onDragStart,\r\n  onDragEnd,\r\n  onDragCancel,\r\n  children,\r\n}: TileDragProviderProps) {\r\n  const {\r\n    groups,\r\n    activeGroups,\r\n    openGroupId,\r\n    selectedGroupIds,\r\n    onGroupsChange,\r\n    onSubgroupChange,\r\n    onGroupSelect,\r\n    onClearSelection,\r\n    filter,\r\n  } = useGroup();\r\n\r\n  const mouseSensor = useSensor(MouseSensor, {\r\n    activationConstraint: { distance: 3 },\r\n  });\r\n  const touchSensor = useSensor(TouchSensor, {\r\n    activationConstraint: { delay: 250, tolerance: 5 },\r\n  });\r\n  const keyboardSensor = useSensor(KeyboardSensor);\r\n\r\n  const sensors = useSensors(mouseSensor, touchSensor, keyboardSensor);\r\n\r\n  const [dragId, setDragId] = useState<string | null>(null);\r\n  const [overId, setOverId] = useState<string | null>(null);\r\n  const [dragCursor, setDragCursor] = useState(\"pointer\");\r\n\r\n  const [preventSelect, resumeSelect] = usePreventSelect();\r\n\r\n  const [overGroupId, setOverGroupId] = useState<string | null>(null);\r\n  useEffect(() => {\r\n    setOverGroupId(\r\n      (overId && overId.startsWith(GROUP_ID_PREFIX) && overId.slice(9)) || null\r\n    );\r\n  }, [overId]);\r\n\r\n  function handleDragStart(event: DragStartEvent) {\r\n    const { active } = event;\r\n    setDragId(active.id);\r\n    setOverId(null);\r\n    if (!selectedGroupIds.includes(active.id)) {\r\n      onGroupSelect(active.id);\r\n    }\r\n    setDragCursor(\"grabbing\");\r\n\r\n    onDragStart && onDragStart(event);\r\n\r\n    preventSelect();\r\n  }\r\n\r\n  function handleDragOver(event: DragOverEvent) {\r\n    const { over } = event;\r\n\r\n    setOverId(over?.id || null);\r\n    if (over) {\r\n      if (\r\n        over.id.startsWith(UNGROUP_ID) ||\r\n        over.id.startsWith(GROUP_ID_PREFIX)\r\n      ) {\r\n        setDragCursor(\"alias\");\r\n      } else if (over.id.startsWith(ADD_TO_MAP_ID)) {\r\n        setDragCursor(onDragAdd ? \"copy\" : \"no-drop\");\r\n      } else {\r\n        setDragCursor(\"grabbing\");\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleDragEnd(event: CustomDragEndEvent) {\r\n    const { active, over, overlayNodeClientRect } = event;\r\n\r\n    setDragId(null);\r\n    setOverId(null);\r\n    setDragCursor(\"pointer\");\r\n    if (active && over && active.id !== over.id) {\r\n      let selectedIndices = selectedGroupIds.map((groupId) =>\r\n        activeGroups.findIndex((group) => group.id === groupId)\r\n      );\r\n      // Maintain current group sorting\r\n      selectedIndices = selectedIndices.sort((a, b) => a - b);\r\n\r\n      if (over.id.startsWith(GROUP_ID_PREFIX)) {\r\n        onClearSelection();\r\n        // Handle tile group\r\n        const overId = over.id.slice(9);\r\n        if (overId !== active.id) {\r\n          const overGroupIndex = activeGroups.findIndex(\r\n            (group) => group.id === overId\r\n          );\r\n          const newGroups = moveGroupsInto(\r\n            activeGroups,\r\n            overGroupIndex,\r\n            selectedIndices\r\n          );\r\n          if (!openGroupId) {\r\n            onGroupsChange(newGroups);\r\n          }\r\n        }\r\n      } else if (over.id === UNGROUP_ID) {\r\n        if (openGroupId) {\r\n          onClearSelection();\r\n          // Handle tile ungroup\r\n          const newGroups = ungroup(groups, openGroupId, selectedIndices);\r\n          onGroupsChange(newGroups);\r\n        }\r\n      } else if (over.id === ADD_TO_MAP_ID) {\r\n        onDragAdd &&\r\n          overlayNodeClientRect &&\r\n          onDragAdd(selectedGroupIds, overlayNodeClientRect);\r\n      } else if (!filter) {\r\n        // Hanlde tile move only if we have no filter\r\n        const overGroupIndex = activeGroups.findIndex(\r\n          (group) => group.id === over.id\r\n        );\r\n        const newGroups = moveGroups(\r\n          activeGroups,\r\n          overGroupIndex,\r\n          selectedIndices\r\n        );\r\n        if (openGroupId) {\r\n          onSubgroupChange(newGroups as GroupItem[], openGroupId);\r\n        } else {\r\n          onGroupsChange(newGroups);\r\n        }\r\n      }\r\n    }\r\n\r\n    resumeSelect();\r\n\r\n    onDragEnd && onDragEnd(event);\r\n  }\r\n\r\n  function handleDragCancel(event: DragCancelEvent) {\r\n    setDragId(null);\r\n    setOverId(null);\r\n    setDragCursor(\"pointer\");\r\n\r\n    resumeSelect();\r\n\r\n    onDragCancel && onDragCancel(event);\r\n  }\r\n\r\n  function customCollisionDetection(rects: RectEntry[], rect: ViewRect) {\r\n    const rectCenter = {\r\n      x: rect.left + rect.width / 2,\r\n      y: rect.top + rect.height / 2,\r\n    };\r\n\r\n    // Find whether out rect center is outside our add to map rect\r\n    const addRect = rects.find(([id]) => id === ADD_TO_MAP_ID);\r\n    if (addRect) {\r\n      const intersectingAddRect = rectIntersection([addRect], rectCenter);\r\n      if (!intersectingAddRect) {\r\n        return ADD_TO_MAP_ID;\r\n      }\r\n    }\r\n\r\n    // Find whether out rect center is outside our ungroup rect\r\n    if (openGroupId) {\r\n      const ungroupRect = rects.find(([id]) => id === UNGROUP_ID);\r\n      if (ungroupRect) {\r\n        const intersectingGroupRect = rectIntersection(\r\n          [ungroupRect],\r\n          rectCenter\r\n        );\r\n        if (!intersectingGroupRect) {\r\n          return UNGROUP_ID;\r\n        }\r\n      }\r\n    }\r\n\r\n    const otherRects = rects.filter(\r\n      ([id]) => id !== ADD_TO_MAP_ID && id !== UNGROUP_ID\r\n    );\r\n\r\n    return closestCenter(otherRects, rect);\r\n  }\r\n\r\n  return (\r\n    <DragContext\r\n      onDragStart={handleDragStart}\r\n      onDragEnd={handleDragEnd}\r\n      onDragOver={handleDragOver}\r\n      onDragCancel={handleDragCancel}\r\n      sensors={sensors}\r\n      collisionDetection={customCollisionDetection}\r\n    >\r\n      <TileDragIdContext.Provider value={dragId}>\r\n        <TileOverGroupIdContext.Provider value={overGroupId}>\r\n          <TileDragCursorContext.Provider value={dragCursor}>\r\n            {children}\r\n          </TileDragCursorContext.Provider>\r\n        </TileOverGroupIdContext.Provider>\r\n      </TileDragIdContext.Provider>\r\n    </DragContext>\r\n  );\r\n}\r\n\r\nexport function useTileDragId() {\r\n  const context = useContext(TileDragIdContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useTileDrag must be used within a TileDragProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useTileOverGroupId() {\r\n  const context = useContext(TileOverGroupIdContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useTileDrag must be used within a TileDragProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function useTileDragCursor() {\r\n  const context = useContext(TileDragCursorContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useTileDrag must be used within a TileDragProvider\");\r\n  }\r\n  return context;\r\n}\r\n","import React from \"react\";\r\nimport { Box } from \"theme-ui\";\r\nimport { useDroppable } from \"@dnd-kit/core\";\r\nimport { useSortable } from \"@dnd-kit/sortable\";\r\nimport { animated, useSpring } from \"react-spring\";\r\n\r\nimport { GROUP_ID_PREFIX } from \"../../contexts/TileDragContext\";\r\n\r\ntype SortableTileProps = {\r\n  id: string;\r\n  disableGrouping: boolean;\r\n  disableSorting: boolean;\r\n  hidden: boolean;\r\n  children: React.ReactNode;\r\n  isDragging: boolean;\r\n  cursor: string;\r\n};\r\n\r\nfunction SortableTile({\r\n  id,\r\n  disableGrouping,\r\n  disableSorting,\r\n  hidden,\r\n  children,\r\n  isDragging,\r\n  cursor,\r\n}: SortableTileProps) {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setDroppableNodeRef,\r\n    setDraggableNodeRef,\r\n    over,\r\n    active,\r\n  } = useSortable({ id });\r\n\r\n  const { setNodeRef: setGroupNodeRef } = useDroppable({\r\n    id: `${GROUP_ID_PREFIX}${id}`,\r\n    disabled: disableGrouping,\r\n  });\r\n\r\n  const dragStyle = {\r\n    cursor,\r\n    opacity: isDragging ? 0.25 : undefined,\r\n  };\r\n\r\n  // Sort div left aligned\r\n  const sortDropStyle: React.CSSProperties = {\r\n    position: \"absolute\",\r\n    left: \"-5px\",\r\n    top: 0,\r\n    width: \"2px\",\r\n    height: \"100%\",\r\n    borderRadius: \"2px\",\r\n    visibility: over?.id === id && !disableSorting ? \"visible\" : \"hidden\",\r\n  };\r\n\r\n  // Group div center aligned\r\n  const groupDropStyle: React.CSSProperties = {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    borderWidth: \"4px\",\r\n    borderRadius: \"4px\",\r\n    borderStyle:\r\n      over?.id === `${GROUP_ID_PREFIX}${id}` && active?.id !== id\r\n        ? \"solid\"\r\n        : \"none\",\r\n  };\r\n\r\n  const { opacity } = useSpring({ opacity: hidden ? 0 : 1 });\r\n\r\n  return (\r\n    <animated.div style={{ opacity, position: \"relative\" }}>\r\n      <Box\r\n        ref={setDraggableNodeRef}\r\n        style={dragStyle}\r\n        {...listeners}\r\n        {...attributes}\r\n      >\r\n        {children}\r\n      </Box>\r\n      <Box\r\n        sx={{\r\n          width: \"100%\",\r\n          height: 0,\r\n          paddingTop: \"100%\",\r\n          pointerEvents: \"none\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n        }}\r\n      >\r\n        <Box ref={setDroppableNodeRef} style={sortDropStyle} bg=\"primary\" />\r\n        <Box\r\n          ref={setGroupNodeRef}\r\n          style={groupDropStyle}\r\n          sx={{ borderColor: \"primary\" }}\r\n        />\r\n      </Box>\r\n    </animated.div>\r\n  );\r\n}\r\n\r\nSortableTile.defaultProps = {\r\n  cursor: \"pointer\",\r\n};\r\n\r\nexport default SortableTile;\r\n","import React from \"react\";\r\nimport { Box, ThemeUIStyleObject } from \"theme-ui\";\r\nimport { useInView } from \"react-intersection-observer\";\r\n\r\nfunction LazyTile({ children }: { children: React.ReactNode }) {\r\n  const [ref, inView] = useInView({ triggerOnce: false });\r\n\r\n  const sx: ThemeUIStyleObject = inView\r\n    ? {}\r\n    : { width: \"100%\", height: \"0\", paddingTop: \"100%\", position: \"relative\" };\r\n\r\n  return (\r\n    <Box sx={sx} ref={ref}>\r\n      {inView ? (\r\n        children\r\n      ) : (\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            borderRadius: \"4px\",\r\n          }}\r\n          bg=\"background\"\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default LazyTile;\r\n","import React from \"react\";\r\nimport { SortableContext } from \"@dnd-kit/sortable\";\r\n\r\nimport { moveGroupsInto } from \"../../helpers/group\";\r\nimport { keyBy } from \"../../helpers/shared\";\r\n\r\nimport SortableTile from \"./SortableTile\";\r\nimport LazyTile from \"./LazyTile\";\r\n\r\nimport {\r\n  useTileDragId,\r\n  useTileDragCursor,\r\n  useTileOverGroupId,\r\n  BASE_SORTABLE_ID,\r\n  GROUP_SORTABLE_ID,\r\n} from \"../../contexts/TileDragContext\";\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { Group } from \"../../types/Group\";\r\n\r\ntype SortableTilesProps = {\r\n  renderTile: (group: Group) => React.ReactNode;\r\n  subgroup: boolean;\r\n};\r\n\r\nfunction SortableTiles({ renderTile, subgroup }: SortableTilesProps) {\r\n  const dragId = useTileDragId();\r\n  const dragCursor = useTileDragCursor();\r\n  const overGroupId = useTileOverGroupId();\r\n  const {\r\n    groups,\r\n    selectedGroupIds: allSelectedIds,\r\n    filter,\r\n    openGroupId,\r\n    openGroupItems,\r\n    filteredGroupItems,\r\n  } = useGroup();\r\n\r\n  const activeGroups = subgroup\r\n    ? openGroupItems\r\n    : filter\r\n    ? filteredGroupItems\r\n    : groups;\r\n\r\n  const sortableId = subgroup ? GROUP_SORTABLE_ID : BASE_SORTABLE_ID;\r\n\r\n  // Only populate selected groups if needed\r\n  let selectedGroupIds: string[] = [];\r\n  if ((subgroup && openGroupId) || (!subgroup && !openGroupId)) {\r\n    selectedGroupIds = allSelectedIds;\r\n  }\r\n  const disableSorting = !!((openGroupId && !subgroup) || filter);\r\n  const disableGrouping = !!(subgroup || disableSorting || filter);\r\n\r\n  function renderSortableGroup(group: Group, selectedGroups: Group[]) {\r\n    if (overGroupId === group.id && dragId && group.id !== dragId) {\r\n      // If dragging over a group render a preview of that group\r\n      const previewGroup = moveGroupsInto(\r\n        [group, ...selectedGroups],\r\n        0,\r\n        selectedGroups.map((_, i) => i + 1)\r\n      )[0];\r\n      return renderTile(previewGroup);\r\n    }\r\n    return renderTile(group);\r\n  }\r\n\r\n  function renderTiles() {\r\n    const groupsByIds = keyBy(activeGroups, \"id\");\r\n    const selectedGroupIdsSet = new Set(selectedGroupIds);\r\n    let selectedGroups: Group[] = [];\r\n    let hasSelectedContainerGroup = false;\r\n    for (let groupId of selectedGroupIds) {\r\n      const group = groupsByIds[groupId];\r\n      if (group) {\r\n        selectedGroups.push(group);\r\n        if (group.type === \"group\") {\r\n          hasSelectedContainerGroup = true;\r\n        }\r\n      }\r\n    }\r\n    return activeGroups.map((group: Group) => {\r\n      const isDragging = dragId !== null && selectedGroupIdsSet.has(group.id);\r\n      const disableTileGrouping =\r\n        disableGrouping || isDragging || hasSelectedContainerGroup;\r\n      return (\r\n        <LazyTile key={group.id}>\r\n          <SortableTile\r\n            id={group.id}\r\n            disableGrouping={disableTileGrouping}\r\n            disableSorting={disableSorting}\r\n            hidden={group.id === openGroupId}\r\n            isDragging={isDragging}\r\n            cursor={dragCursor || \"\"}\r\n          >\r\n            {renderSortableGroup(group, selectedGroups)}\r\n          </SortableTile>\r\n        </LazyTile>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <SortableContext items={activeGroups} id={sortableId}>\r\n      {renderTiles()}\r\n    </SortableContext>\r\n  );\r\n}\r\n\r\nexport default SortableTiles;\r\n","import React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { DragOverlay } from \"@dnd-kit/core\";\r\nimport { animated, useSpring, config } from \"react-spring\";\r\nimport { Badge } from \"theme-ui\";\r\n\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport { useTileDragId } from \"../../contexts/TileDragContext\";\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { Group } from \"../../types/Group\";\r\n\r\ntype SortableTilesDragOverlayProps = {\r\n  renderTile: (group: Group) => React.ReactNode;\r\n  subgroup: boolean;\r\n};\r\n\r\nfunction SortableTilesDragOverlay({\r\n  renderTile,\r\n  subgroup,\r\n}: SortableTilesDragOverlayProps) {\r\n  const dragId = useTileDragId();\r\n  const {\r\n    groups,\r\n    selectedGroupIds: allSelectedIds,\r\n    filter,\r\n    openGroupId,\r\n    openGroupItems,\r\n    filteredGroupItems,\r\n  } = useGroup();\r\n\r\n  const activeGroups = subgroup\r\n    ? openGroupItems\r\n    : filter\r\n    ? filteredGroupItems\r\n    : groups;\r\n\r\n  // Only populate selected groups if needed\r\n  let selectedGroupIds: string[] = [];\r\n  if ((subgroup && openGroupId) || (!subgroup && !openGroupId)) {\r\n    selectedGroupIds = allSelectedIds;\r\n  }\r\n  const dragBounce = useSpring({\r\n    transform: !!dragId ? \"scale(0.9)\" : \"scale(1)\",\r\n    config: config.wobbly,\r\n  });\r\n\r\n  function renderDragOverlays() {\r\n    let selectedIndices = selectedGroupIds.map((groupId) =>\r\n      activeGroups.findIndex((group) => group.id === groupId)\r\n    );\r\n    const activeIndex = activeGroups.findIndex((group) => group.id === dragId);\r\n    // Sort so the draging tile is the first element\r\n    selectedIndices = selectedIndices.sort((a, b) =>\r\n      a === activeIndex ? -1 : b === activeIndex ? 1 : 0\r\n    );\r\n\r\n    selectedIndices = selectedIndices.slice(0, 5);\r\n\r\n    let coords = selectedIndices.map(\r\n      (_, index) => new Vector2(5 * index, 5 * index)\r\n    );\r\n\r\n    // Reverse so the first element is rendered on top\r\n    selectedIndices = selectedIndices.reverse();\r\n    coords = coords.reverse();\r\n\r\n    const selectedGroups = selectedIndices.map((index) => activeGroups[index]);\r\n\r\n    return selectedGroups.map((group, index) => (\r\n      <DragOverlay dropAnimation={null} key={group.id}>\r\n        <div\r\n          style={{\r\n            transform: `translate(${coords[index].x}%, ${coords[index].y}%)`,\r\n          }}\r\n        >\r\n          <animated.div style={{ ...dragBounce, position: \"relative\" }}>\r\n            {renderTile(group)}\r\n            {index === selectedIndices.length - 1 &&\r\n              selectedGroupIds.length > 1 && (\r\n                <Badge\r\n                  sx={{\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    right: 0,\r\n                    transform: \"translate(25%, -25%)\",\r\n                  }}\r\n                >\r\n                  {selectedGroupIds.length}\r\n                </Badge>\r\n              )}\r\n          </animated.div>\r\n        </div>\r\n      </DragOverlay>\r\n    ));\r\n  }\r\n\r\n  return createPortal(dragId && renderDragOverlays(), document.body);\r\n}\r\n\r\nexport default SortableTilesDragOverlay;\r\n","import MapTile from \"./MapTile\";\r\nimport MapTileGroup from \"./MapTileGroup\";\r\n\r\nimport SortableTiles from \"../tile/SortableTiles\";\r\nimport SortableTilesDragOverlay from \"../tile/SortableTilesDragOverlay\";\r\n\r\nimport { getGroupItems } from \"../../helpers/group\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\n\r\nimport { Map } from \"../../types/Map\";\r\nimport { Group } from \"../../types/Group\";\r\n\r\ntype MapTileProps = {\r\n  mapsById: Record<string, Map>;\r\n  onMapEdit: (mapId: string) => void;\r\n  onMapSelect: (groupId: string) => void;\r\n  subgroup: boolean;\r\n};\r\n\r\nfunction MapTiles({\r\n  mapsById,\r\n  onMapEdit,\r\n  onMapSelect,\r\n  subgroup,\r\n}: MapTileProps) {\r\n  const { selectedGroupIds, selectMode, onGroupOpen, onGroupSelect } =\r\n    useGroup();\r\n\r\n  function renderTile(group: Group) {\r\n    if (group.type === \"item\") {\r\n      const map = mapsById[group.id];\r\n      if (map) {\r\n        const isSelected = selectedGroupIds.includes(group.id);\r\n        const canEdit =\r\n          isSelected &&\r\n          selectMode === \"single\" &&\r\n          selectedGroupIds.length === 1;\r\n        return (\r\n          <MapTile\r\n            key={map.id}\r\n            map={map}\r\n            isSelected={isSelected}\r\n            onSelect={onGroupSelect}\r\n            onEdit={onMapEdit}\r\n            onDoubleClick={() => canEdit && onMapSelect(group.id)}\r\n            canEdit={canEdit}\r\n            badges={[`${map.grid.size.x}x${map.grid.size.y}`]}\r\n          />\r\n        );\r\n      }\r\n    } else {\r\n      const isSelected = selectedGroupIds.includes(group.id);\r\n      const items = getGroupItems(group);\r\n      const canOpen =\r\n        isSelected && selectMode === \"single\" && selectedGroupIds.length === 1;\r\n      return (\r\n        <MapTileGroup\r\n          key={group.id}\r\n          group={group}\r\n          maps={items.map((item) => mapsById[item.id])}\r\n          isSelected={isSelected}\r\n          onSelect={onGroupSelect}\r\n          onDoubleClick={() => canOpen && onGroupOpen(group.id)}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SortableTiles renderTile={renderTile} subgroup={subgroup} />\r\n      <SortableTilesDragOverlay renderTile={renderTile} subgroup={subgroup} />\r\n    </>\r\n  );\r\n}\r\n\r\nMapTiles.defaultProps = {\r\n  subgroup: false,\r\n};\r\n\r\nexport default MapTiles;\r\n","function RemoveMapIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default RemoveMapIcon;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Flex, Close, IconButton } from \"theme-ui\";\r\n\r\nimport { groupsFromIds, itemsFromGroups } from \"../../helpers/group\";\r\n\r\nimport ConfirmModal from \"../../modals/ConfirmModal\";\r\n\r\nimport ResetMapIcon from \"../../icons/ResetMapIcon\";\r\nimport RemoveMapIcon from \"../../icons/RemoveMapIcon\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { useMapData } from \"../../contexts/MapDataContext\";\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\nimport { Map } from \"../../types/Map\";\r\nimport {\r\n  MapChangeEventHandler,\r\n  MapResetEventHandler,\r\n} from \"../../types/Events\";\r\n\r\ntype MapEditBarProps = {\r\n  currentMap: Map | null;\r\n  disabled: boolean;\r\n  onMapChange: MapChangeEventHandler;\r\n  onMapReset: MapResetEventHandler;\r\n  onLoad: (loading: boolean) => void;\r\n};\r\n\r\nfunction MapEditBar({\r\n  currentMap,\r\n  disabled,\r\n  onMapChange,\r\n  onMapReset,\r\n  onLoad,\r\n}: MapEditBarProps) {\r\n  const [hasMapState, setHasMapState] = useState(false);\r\n\r\n  const { maps, mapStates, removeMaps, resetMap } = useMapData();\r\n\r\n  const { activeGroups, selectedGroupIds, onClearSelection } = useGroup();\r\n\r\n  useEffect(() => {\r\n    const selectedGroups = groupsFromIds(selectedGroupIds, activeGroups);\r\n    const selectedMapStates = itemsFromGroups(\r\n      selectedGroups,\r\n      mapStates,\r\n      \"mapId\"\r\n    );\r\n\r\n    let _hasMapState = false;\r\n    for (let state of selectedMapStates) {\r\n      if (\r\n        Object.values(state.tokens).length > 0 ||\r\n        Object.values(state.drawings).length > 0 ||\r\n        Object.values(state.fogs).length > 0 ||\r\n        Object.values(state.notes).length > 0\r\n      ) {\r\n        _hasMapState = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    setHasMapState(_hasMapState);\r\n  }, [selectedGroupIds, mapStates, activeGroups]);\r\n\r\n  function getSelectedMaps() {\r\n    const selectedGroups = groupsFromIds(selectedGroupIds, activeGroups);\r\n    return itemsFromGroups(selectedGroups, maps);\r\n  }\r\n\r\n  const [isMapsRemoveModalOpen, setIsMapsRemoveModalOpen] = useState(false);\r\n  async function handleMapsRemove() {\r\n    onLoad(true);\r\n    setIsMapsRemoveModalOpen(false);\r\n    const selectedMaps = getSelectedMaps();\r\n    const selectedMapIds = selectedMaps.map((map) => map.id);\r\n    onClearSelection();\r\n    await removeMaps(selectedMapIds);\r\n    // Removed the map from the map screen if needed\r\n    if (currentMap && selectedMapIds.includes(currentMap.id)) {\r\n      onMapChange(null, null);\r\n    }\r\n    onLoad(false);\r\n  }\r\n\r\n  const [isMapsResetModalOpen, setIsMapsResetModalOpen] = useState(false);\r\n  async function handleMapsReset() {\r\n    onLoad(true);\r\n    setIsMapsResetModalOpen(false);\r\n    const selectedMaps = getSelectedMaps();\r\n    const selectedMapIds = selectedMaps.map((map) => map.id);\r\n    for (let id of selectedMapIds) {\r\n      const newState = await resetMap(id);\r\n      // Reset the state of the current map if needed\r\n      if (currentMap && currentMap.id === id) {\r\n        onMapReset(newState);\r\n      }\r\n    }\r\n    onLoad(false);\r\n  }\r\n\r\n  /**\r\n   * Shortcuts\r\n   */\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    if (shortcuts.delete(event)) {\r\n      const selectedMaps = getSelectedMaps();\r\n      if (selectedMaps.length > 0) {\r\n        setIsMapsResetModalOpen(false);\r\n        setIsMapsRemoveModalOpen(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  if (selectedGroupIds.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        justifyContent: \"space-between\",\r\n      }}\r\n      bg=\"overlay\"\r\n    >\r\n      <Close\r\n        title=\"Clear Selection\"\r\n        aria-label=\"Clear Selection\"\r\n        onClick={() => onClearSelection()}\r\n      />\r\n      <Flex>\r\n        <IconButton\r\n          aria-label=\"Reset Selected Map(s)\"\r\n          title=\"Reset Selected Map(s)\"\r\n          onClick={() => setIsMapsResetModalOpen(true)}\r\n          disabled={!hasMapState}\r\n        >\r\n          <ResetMapIcon />\r\n        </IconButton>\r\n        <IconButton\r\n          aria-label=\"Remove Selected Map(s)\"\r\n          title=\"Remove Selected Map(s)\"\r\n          onClick={() => setIsMapsRemoveModalOpen(true)}\r\n        >\r\n          <RemoveMapIcon />\r\n        </IconButton>\r\n      </Flex>\r\n      <ConfirmModal\r\n        isOpen={isMapsResetModalOpen}\r\n        onRequestClose={() => setIsMapsResetModalOpen(false)}\r\n        onConfirm={handleMapsReset}\r\n        confirmText=\"Reset\"\r\n        label=\"Reset Selected Map(s)\"\r\n        description=\"This will remove all fog, drawings and tokens from the selected maps.\"\r\n      />\r\n      <ConfirmModal\r\n        isOpen={isMapsRemoveModalOpen}\r\n        onRequestClose={() => setIsMapsRemoveModalOpen(false)}\r\n        onConfirm={handleMapsRemove}\r\n        confirmText=\"Remove\"\r\n        label=\"Remove Selected Map(s)\"\r\n        description=\"This operation cannot be undone.\"\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default MapEditBar;\r\n","import { Button } from \"theme-ui\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\n\r\nimport { findGroup } from \"../../helpers/group\";\r\n\r\ntype SelectMapSelectButtonProps = {\r\n  onMapSelect: (mapId: string) => void;\r\n  disabled: boolean;\r\n};\r\n\r\nfunction SelectMapSelectButton({\r\n  onMapSelect,\r\n  disabled,\r\n}: SelectMapSelectButtonProps) {\r\n  const { activeGroups, selectedGroupIds } = useGroup();\r\n\r\n  function handleSelectClick() {\r\n    if (selectedGroupIds.length === 1) {\r\n      const group = findGroup(activeGroups, selectedGroupIds[0]);\r\n      if (group && group.type === \"item\") {\r\n        onMapSelect(group.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"primary\"\r\n      disabled={disabled || selectedGroupIds.length > 1}\r\n      onClick={handleSelectClick}\r\n      mt={2}\r\n    >\r\n      Select\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default SelectMapSelectButton;\r\n","function ChangeNicknameIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ChangeNicknameIcon;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Box, Input, Button, Label, Flex } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\nexport type GroupNameEventHandler = (name: string) => void;\r\n\r\ntype GroupNameModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  name: string;\r\n  onSubmit: GroupNameEventHandler;\r\n};\r\n\r\nfunction GroupNameModal({\r\n  isOpen,\r\n  name,\r\n  onSubmit,\r\n  onRequestClose,\r\n}: GroupNameModalProps) {\r\n  const [tmpName, setTempName] = useState(name);\r\n\r\n  useEffect(() => {\r\n    setTempName(name);\r\n  }, [name]);\r\n\r\n  function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setTempName(event.target.value);\r\n  }\r\n\r\n  function handleSubmit(event: React.FormEvent<HTMLDivElement>) {\r\n    event.preventDefault();\r\n    onSubmit(tmpName);\r\n  }\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  function focusInput() {\r\n    inputRef.current?.focus();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      onAfterOpen={focusInput}\r\n    >\r\n      <Box as=\"form\" onSubmit={handleSubmit}>\r\n        <Label py={2} htmlFor=\"name\">\r\n          Group Name\r\n        </Label>\r\n        <Input\r\n          id=\"name\"\r\n          value={tmpName}\r\n          onChange={handleChange}\r\n          ref={inputRef}\r\n        />\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }}>Save</Button>\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default GroupNameModal;\r\n","import React from \"react\";\r\nimport { useDroppable } from \"@dnd-kit/core\";\r\n\r\ntype DroppableProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  id: string;\r\n  disabled: boolean;\r\n};\r\n\r\nfunction Droppable({ id, children, disabled, ...props }: DroppableProps) {\r\n  const { setNodeRef } = useDroppable({ id, disabled });\r\n\r\n  return (\r\n    <div ref={setNodeRef} {...props}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nDroppable.defaultProps = {\r\n  disabled: false,\r\n};\r\n\r\nexport default Droppable;\r\n","import React, { useState, useRef } from \"react\";\r\nimport { Box, Close, Grid, useThemeUI, IconButton, Text, Flex } from \"theme-ui\";\r\nimport { useSpring, animated, config } from \"react-spring\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { UNGROUP_ID, ADD_TO_MAP_ID } from \"../../contexts/TileDragContext\";\r\n\r\nimport useResponsiveLayout from \"../../hooks/useResponsiveLayout\";\r\n\r\nimport ChangeNicknameIcon from \"../../icons/ChangeNicknameIcon\";\r\n\r\nimport GroupNameModal from \"../../modals/GroupNameModal\";\r\n\r\nimport { renameGroup } from \"../../helpers/group\";\r\n\r\nimport Droppable from \"../drag/Droppable\";\r\nimport { Group } from \"../../types/Group\";\r\n\r\ntype TilesOverlayProps = {\r\n  modalSize: { width: number; height: number };\r\n  children: React.ReactNode;\r\n};\r\n\r\nfunction TilesOverlay({ modalSize, children }: TilesOverlayProps) {\r\n  const {\r\n    groups,\r\n    openGroupId,\r\n    onGroupClose,\r\n    onClearSelection,\r\n    onGroupsChange,\r\n  } = useGroup();\r\n\r\n  const { theme } = useThemeUI();\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  const openAnimation = useSpring({\r\n    opacity: openGroupId ? 1 : 0,\r\n    transform: openGroupId ? \"scale(1)\" : \"scale(0.99)\",\r\n    config: config.gentle,\r\n  });\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [containerSize, setContinerSize] = useState({ width: 0, height: 0 });\r\n  function handleContainerResize(width?: number, height?: number) {\r\n    if (width && height) {\r\n      const size = Math.min(width, height) - 16;\r\n      setContinerSize({ width: size, height: size });\r\n    }\r\n  }\r\n\r\n  const [isGroupNameModalOpen, setIsGroupNameModalOpen] = useState(false);\r\n  function handleGroupNameChange(name: string) {\r\n    if (openGroupId) {\r\n      onGroupsChange(renameGroup(groups, openGroupId, name));\r\n      setIsGroupNameModalOpen(false);\r\n    }\r\n  }\r\n\r\n  const group = groups.find((group: Group) => group.id === openGroupId);\r\n\r\n  if (!openGroupId) {\r\n    return null;\r\n  }\r\n\r\n  const groupName = group && group.type === \"group\" && group.name;\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        sx={{\r\n          position: \"absolute\",\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          top: 0,\r\n        }}\r\n        bg=\"overlay\"\r\n        ref={containerRef}\r\n      />\r\n      <ReactResizeDetector\r\n        handleWidth\r\n        handleHeight\r\n        onResize={handleContainerResize}\r\n        targetRef={containerRef}\r\n      >\r\n        <animated.div\r\n          style={{\r\n            ...openAnimation,\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            top: 0,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            cursor: \"pointer\",\r\n            pointerEvents: openGroupId ? undefined : \"none\",\r\n          }}\r\n          onClick={() => openGroupId && onGroupClose()}\r\n        >\r\n          <Box\r\n            sx={{\r\n              width: containerSize.width,\r\n              height: containerSize.height,\r\n              borderRadius: \"8px\",\r\n              border: \"1px solid\",\r\n              borderColor: \"border\",\r\n              cursor: \"default\",\r\n              display: \"flex\",\r\n              justifyContent: \"flex-start\",\r\n              alignItems: \"center\",\r\n              position: \"relative\",\r\n              flexDirection: \"column\",\r\n            }}\r\n            bg=\"background\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <Flex my={1} sx={{ position: \"relative\" }}>\r\n              <Text as=\"p\" my=\"2px\">\r\n                {groupName}\r\n              </Text>\r\n              <IconButton\r\n                sx={{\r\n                  width: \"24px\",\r\n                  height: \"24px\",\r\n                  position: groupName ? \"absolute\" : \"relative\",\r\n                  left: groupName ? \"100%\" : 0,\r\n                }}\r\n                title=\"Edit Group\"\r\n                aria-label=\"Edit Group\"\r\n                onClick={() => setIsGroupNameModalOpen(true)}\r\n              >\r\n                <ChangeNicknameIcon />\r\n              </IconButton>\r\n            </Flex>\r\n            <SimpleBar\r\n              style={{\r\n                width: containerSize.width - 16,\r\n                height: containerSize.height - 48,\r\n                marginBottom: \"8px\",\r\n                backgroundColor: theme.colors?.muted as string,\r\n              }}\r\n              onClick={() => onClearSelection()}\r\n            >\r\n              <Grid\r\n                sx={{\r\n                  borderRadius: \"4px\",\r\n                  overflow: \"hidden\",\r\n                  position: \"relative\",\r\n                }}\r\n                gap={2}\r\n                columns={`repeat(${layout.groupGridColumns}, 1fr)`}\r\n                p={3}\r\n              >\r\n                <Droppable\r\n                  id={ADD_TO_MAP_ID}\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    width: modalSize.width,\r\n                    height: `calc(100% + ${\r\n                      modalSize.height - containerSize.height + 48\r\n                    }px)`,\r\n                    left: `-${\r\n                      (modalSize.width - containerSize.width) / 2 + 8\r\n                    }px`,\r\n                    top: `-${\r\n                      (modalSize.height - containerSize.height) / 2 + 48\r\n                    }px`,\r\n                    zIndex: -1,\r\n                  }}\r\n                />\r\n                <Droppable\r\n                  id={UNGROUP_ID}\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    bottom: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    zIndex: -1,\r\n                  }}\r\n                />\r\n                {children}\r\n              </Grid>\r\n            </SimpleBar>\r\n            <Close\r\n              onClick={() => onGroupClose()}\r\n              sx={{ position: \"absolute\", top: 0, right: 0 }}\r\n            />\r\n          </Box>\r\n        </animated.div>\r\n      </ReactResizeDetector>\r\n      <GroupNameModal\r\n        isOpen={isGroupNameModalOpen}\r\n        name={groupName || \"\"}\r\n        onSubmit={handleGroupNameChange}\r\n        onRequestClose={() => setIsGroupNameModalOpen(false)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TilesOverlay;\r\n","import React from \"react\";\r\nimport { Grid, useThemeUI } from \"theme-ui\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { ADD_TO_MAP_ID } from \"../../contexts/TileDragContext\";\r\n\r\nimport useResponsiveLayout from \"../../hooks/useResponsiveLayout\";\r\n\r\nimport Droppable from \"../drag/Droppable\";\r\n\r\nfunction TilesContainer({ children }: { children: React.ReactNode }) {\r\n  const { onClearSelection } = useGroup();\r\n\r\n  const { theme } = useThemeUI();\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  return (\r\n    <>\r\n      <SimpleBar\r\n        style={{\r\n          height: layout.tileContainerHeight,\r\n          backgroundColor: theme.colors?.muted as string,\r\n        }}\r\n        onClick={() => onClearSelection()}\r\n      >\r\n        <Grid\r\n          p={3}\r\n          pb={4}\r\n          sx={{\r\n            borderRadius: \"4px\",\r\n            overflow: \"hidden\",\r\n            position: \"relative\",\r\n          }}\r\n          gap={2}\r\n          columns={`repeat(${layout.tileGridColumns}, 1fr)`}\r\n        >\r\n          <Droppable\r\n            id={ADD_TO_MAP_ID}\r\n            style={{\r\n              position: \"absolute\",\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0,\r\n              right: 0,\r\n              zIndex: -1,\r\n            }}\r\n          />\r\n          {children}\r\n        </Grid>\r\n      </SimpleBar>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TilesContainer;\r\n","function AddIcon({ large }: { large: boolean }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height={large ? \"32\" : \"24\"}\r\n      viewBox=\"0 0 24 24\"\r\n      width={large ? \"32\" : \"24\"}\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4 11h-3v3c0 .55-.45 1-1 1s-1-.45-1-1v-3H8c-.55 0-1-.45-1-1s.45-1 1-1h3V8c0-.55.45-1 1-1s1 .45 1 1v3h3c.55 0 1 .45 1 1s-.45 1-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nAddIcon.defaultProps = { large: false };\r\n\r\nexport default AddIcon;\r\n","function SelectMultipleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM8 17h8c.55 0 1-.45 1-1V8c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1zm1-8h6v6H9V9z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectMultipleIcon;\r\n","function SelectSingleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-1 14H7c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectSingleIcon;\r\n","function SearchIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SearchIcon;\r\n","import { Box, Input, InputProps } from \"theme-ui\";\r\n\r\nimport SearchIcon from \"../icons/SearchIcon\";\r\n\r\nfunction Search(props: InputProps) {\r\n  return (\r\n    <Box sx={{ position: \"relative\", flexGrow: 1 }}>\r\n      <Input\r\n        sx={{\r\n          borderRadius: \"0\",\r\n          border: \"none\",\r\n          borderRight: \"1px solid\",\r\n          \":focus\": {\r\n            outline: \"none\",\r\n          },\r\n          paddingRight: \"36px\",\r\n        }}\r\n        placeholder=\"Search\"\r\n        {...props}\r\n      />\r\n      <Box\r\n        sx={{\r\n          position: \"absolute\",\r\n          right: \"8px\",\r\n          top: \"50%\",\r\n          transform: \"translateY(-50%)\",\r\n          height: \"24px\",\r\n          width: \"24px\",\r\n          pointerEvents: \"none\",\r\n        }}\r\n      >\r\n        <SearchIcon />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import { Flex, IconButton } from \"theme-ui\";\r\n\r\nimport AddIcon from \"../../icons/AddIcon\";\r\nimport SelectMultipleIcon from \"../../icons/SelectMultipleIcon\";\r\nimport SelectSingleIcon from \"../../icons/SelectSingleIcon\";\r\n\r\nimport Search from \"../Search\";\r\nimport RadioIconButton from \"../RadioIconButton\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\n\r\ntype TileActionBarProps = {\r\n  onAdd: () => void;\r\n  addTitle: string;\r\n};\r\n\r\nfunction TileActionBar({ onAdd, addTitle }: TileActionBarProps) {\r\n  const {\r\n    selectMode,\r\n    onSelectModeChange,\r\n    onClearSelection,\r\n    filter,\r\n    onFilterChange,\r\n  } = useGroup();\r\n\r\n  return (\r\n    <Flex\r\n      bg=\"muted\"\r\n      sx={{\r\n        border: \"1px solid\",\r\n        borderColor: \"text\",\r\n        borderRadius: \"4px\",\r\n        alignItems: \"center\",\r\n        \":focus-within\": {\r\n          outline: \"1px auto\",\r\n          outlineColor: \"primary\",\r\n          outlineOffset: \"0px\",\r\n        },\r\n      }}\r\n      onFocus={() => onClearSelection()}\r\n    >\r\n      <Search value={filter} onChange={(e) => onFilterChange(e.target.value)} />\r\n      <Flex\r\n        mr={1}\r\n        px={1}\r\n        sx={{\r\n          borderRight: \"1px solid\",\r\n          borderColor: \"text\",\r\n          height: \"36px\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <RadioIconButton\r\n          title=\"Select Single\"\r\n          onClick={() => onSelectModeChange(\"single\")}\r\n          isSelected={selectMode === \"single\"}\r\n        >\r\n          <SelectSingleIcon />\r\n        </RadioIconButton>\r\n        <RadioIconButton\r\n          title=\"Select Multiple\"\r\n          onClick={() => onSelectModeChange(\"multiple\")}\r\n          isSelected={selectMode === \"multiple\" || selectMode === \"range\"}\r\n        >\r\n          <SelectMultipleIcon />\r\n        </RadioIconButton>\r\n      </Flex>\r\n      <IconButton onClick={onAdd} aria-label={addTitle} title={addTitle} mr={1}>\r\n        <AddIcon />\r\n      </IconButton>\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default TileActionBar;\r\n","import { v4 as uuid } from \"uuid\";\r\nimport Case from \"case\";\r\n\r\nimport blobToBuffer from \"./blobToBuffer\";\r\nimport { resizeImage, createThumbnail } from \"./image\";\r\nimport {\r\n  getGridDefaultInset,\r\n  getGridSizeFromImage,\r\n  gridSizeVaild,\r\n} from \"./grid\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nimport { Map, FileMapResolutions, FileMap } from \"../types/Map\";\r\nimport { Asset } from \"../types/Asset\";\r\n\r\ntype Resolution = {\r\n  size: number;\r\n  quality: number;\r\n  id: \"low\" | \"medium\" | \"high\" | \"ultra\";\r\n};\r\n\r\nconst mapResolutions: Resolution[] = [\r\n  {\r\n    size: 30, // Pixels per grid\r\n    quality: 0.5, // JPEG compression quality\r\n    id: \"low\",\r\n  },\r\n  { size: 70, quality: 0.6, id: \"medium\" },\r\n  { size: 140, quality: 0.7, id: \"high\" },\r\n  { size: 300, quality: 0.8, id: \"ultra\" },\r\n];\r\n\r\n/**\r\n * Get the asset id of the preview file to send for a map\r\n */\r\nexport function getMapPreviewAsset(map: Map): string | undefined {\r\n  if (map.type === \"file\") {\r\n    const res = map.resolutions;\r\n    switch (map.quality) {\r\n      case \"low\":\r\n        return;\r\n      case \"medium\":\r\n        return res.low;\r\n      case \"high\":\r\n        return res.medium;\r\n      case \"ultra\":\r\n        return res.medium;\r\n      case \"original\":\r\n        if (res.medium) {\r\n          return res.medium;\r\n        } else if (res.low) {\r\n          return res.low;\r\n        }\r\n        return;\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n}\r\n\r\nexport async function createMapFromFile(\r\n  file: File,\r\n  userId: string\r\n): Promise<{ map: Map; assets: Asset[] }> {\r\n  let image = new Image();\r\n\r\n  const buffer = await blobToBuffer(file);\r\n  // Copy file to avoid permissions issues\r\n  const blob = new Blob([buffer]);\r\n  // Create and load the image temporarily to get its dimensions\r\n  const url = URL.createObjectURL(blob);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    image.onload = async function () {\r\n      // Find name and grid size\r\n      let gridSize;\r\n      let name = \"Unknown Map\";\r\n      if (file.name) {\r\n        if (file.name.matchAll) {\r\n          // Match against a regex to find the grid size in the file name\r\n          // e.g. Cave 22x23 will return [[\"22x22\", \"22\", \"x\", \"23\"]]\r\n          const gridMatches = [...file.name.matchAll(/(\\d+) ?(x|X) ?(\\d+)/g)];\r\n          for (let match of gridMatches) {\r\n            const matchX = parseInt(match[1]);\r\n            const matchY = parseInt(match[3]);\r\n            if (\r\n              !isNaN(matchX) &&\r\n              !isNaN(matchY) &&\r\n              gridSizeVaild(matchX, matchY)\r\n            ) {\r\n              gridSize = { x: matchX, y: matchY };\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!gridSize) {\r\n          gridSize = await getGridSizeFromImage(image);\r\n        }\r\n\r\n        // Remove file extension\r\n        name = file.name.replace(/\\.[^/.]+$/, \"\");\r\n        // Removed grid size expression\r\n        name = name.replace(/(\\[ ?|\\( ?)?\\d+ ?(x|X) ?\\d+( ?\\]| ?\\))?/, \"\");\r\n        // Clean string\r\n        name = name.replace(/ +/g, \" \");\r\n        name = name.trim();\r\n        // Capitalize and remove underscores\r\n        name = Case.capital(name);\r\n      }\r\n\r\n      if (!gridSize) {\r\n        gridSize = { x: 22, y: 22 };\r\n      }\r\n\r\n      let assets: Asset[] = [];\r\n\r\n      // Create resolutions\r\n      const resolutions: FileMapResolutions = {};\r\n      for (let resolution of mapResolutions) {\r\n        const resolutionPixelSize = Vector2.multiply(gridSize, resolution.size);\r\n        if (\r\n          image.width >= resolutionPixelSize.x &&\r\n          image.height >= resolutionPixelSize.y\r\n        ) {\r\n          const resized = await resizeImage(\r\n            image,\r\n            Vector2.componentMax(resolutionPixelSize),\r\n            file.type,\r\n            resolution.quality\r\n          );\r\n          if (resized) {\r\n            const assetId = uuid();\r\n            resolutions[resolution.id] = assetId;\r\n            const asset = {\r\n              ...resized,\r\n              id: assetId,\r\n              owner: userId,\r\n            };\r\n            assets.push(asset);\r\n          }\r\n        }\r\n      }\r\n      // Create thumbnail\r\n      const thumbnailImage = await createThumbnail(image, file.type);\r\n      const thumbnailId = uuid();\r\n      if (thumbnailImage) {\r\n        const thumbnail = { ...thumbnailImage, id: thumbnailId, owner: userId };\r\n        assets.push(thumbnail);\r\n      }\r\n\r\n      const fileAsset = {\r\n        id: uuid(),\r\n        file: buffer,\r\n        width: image.width,\r\n        height: image.height,\r\n        mime: file.type,\r\n        owner: userId,\r\n      };\r\n      assets.push(fileAsset);\r\n\r\n      const map: FileMap = {\r\n        name,\r\n        resolutions,\r\n        file: fileAsset.id,\r\n        thumbnail: thumbnailId,\r\n        type: \"file\",\r\n        grid: {\r\n          size: gridSize,\r\n          inset: getGridDefaultInset(\r\n            { size: gridSize, type: \"square\" },\r\n            image.width,\r\n            image.height\r\n          ),\r\n          type: \"square\",\r\n          measurement: {\r\n            type: \"chebyshev\",\r\n            scale: \"5ft\",\r\n          },\r\n        },\r\n        width: image.width,\r\n        height: image.height,\r\n        id: uuid(),\r\n        created: Date.now(),\r\n        lastModified: Date.now(),\r\n        owner: userId,\r\n        showGrid: false,\r\n        snapToGrid: true,\r\n        quality: \"original\",\r\n      };\r\n\r\n      URL.revokeObjectURL(url);\r\n      resolve({ map, assets });\r\n    };\r\n    image.onerror = reject;\r\n    image.src = url;\r\n  });\r\n}\r\n","import { useRef, useState, useEffect } from \"react\";\r\nimport { Flex, Label, Box } from \"theme-ui\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\n\r\nimport EditMapModal from \"./EditMapModal\";\r\nimport ConfirmModal from \"./ConfirmModal\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\nimport DatabaseDisabledMessage from \"../components/DatabaseDisabledMessage\";\r\n\r\nimport ImageDrop from \"../components/image/ImageDrop\";\r\n\r\nimport MapTiles from \"../components/map/MapTiles\";\r\nimport MapEditBar from \"../components/map/MapEditBar\";\r\nimport SelectMapSelectButton from \"../components/map/SelectMapSelectButton\";\r\n\r\nimport TilesOverlay from \"../components/tile/TilesOverlay\";\r\nimport TilesContainer from \"../components/tile/TilesContainer\";\r\nimport TileActionBar from \"../components/tile/TileActionBar\";\r\n\r\nimport { findGroup, getItemNames } from \"../helpers/group\";\r\nimport { createMapFromFile } from \"../helpers/map\";\r\n\r\nimport useResponsiveLayout from \"../hooks/useResponsiveLayout\";\r\n\r\nimport { useMapData } from \"../contexts/MapDataContext\";\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport { useAssets } from \"../contexts/AssetsContext\";\r\nimport { GroupProvider } from \"../contexts/GroupContext\";\r\nimport { TileDragProvider } from \"../contexts/TileDragContext\";\r\nimport { useDatabase } from \"../contexts/DatabaseContext\";\r\n\r\nimport { Map } from \"../types/Map\";\r\nimport {\r\n  MapChangeEventHandler,\r\n  MapResetEventHandler,\r\n  RequestCloseEventHandler,\r\n} from \"../types/Events\";\r\n\r\ntype SelectMapProps = {\r\n  isOpen: boolean;\r\n  onDone: RequestCloseEventHandler;\r\n  onMapChange: MapChangeEventHandler;\r\n  onMapReset: MapResetEventHandler;\r\n  currentMap: Map | null;\r\n};\r\n\r\nfunction SelectMapModal({\r\n  isOpen,\r\n  onDone,\r\n  onMapChange,\r\n  onMapReset,\r\n  // The map currently being view in the map screen\r\n  currentMap,\r\n}: SelectMapProps) {\r\n  const { addToast } = useToasts();\r\n\r\n  const { databaseStatus } = useDatabase();\r\n\r\n  const userId = useUserId();\r\n  const {\r\n    maps,\r\n    mapStates,\r\n    mapGroups,\r\n    addMap,\r\n    mapsLoading,\r\n    getMapState,\r\n    getMap,\r\n    updateMapGroups,\r\n    updateMap,\r\n    updateMapState,\r\n    mapsById,\r\n  } = useMapData();\r\n  const { addAssets } = useAssets();\r\n\r\n  // Get map names for group filtering\r\n  const [mapNames, setMapNames] = useState(getItemNames(maps));\r\n  useEffect(() => {\r\n    setMapNames(getItemNames(maps));\r\n  }, [maps]);\r\n\r\n  /**\r\n   * Image Upload\r\n   */\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [isLargeImageWarningModalOpen, setShowLargeImageWarning] =\r\n    useState(false);\r\n  const largeImageWarningFiles = useRef<File[]>();\r\n\r\n  async function handleImagesUpload(files: File[]) {\r\n    if (navigator.storage) {\r\n      // Attempt to enable persistant storage\r\n      await navigator.storage.persist();\r\n    }\r\n\r\n    let mapFiles = [];\r\n    for (let file of files) {\r\n      if (file.size > 5e7) {\r\n        addToast(`Unable to import map ${file.name} as it is over 50MB`);\r\n      } else {\r\n        mapFiles.push(file);\r\n      }\r\n    }\r\n\r\n    // Any file greater than 20MB\r\n    if (mapFiles.some((file) => file.size > 2e7)) {\r\n      largeImageWarningFiles.current = mapFiles;\r\n      setShowLargeImageWarning(true);\r\n      return;\r\n    }\r\n\r\n    for (let file of mapFiles) {\r\n      await handleImageUpload(file);\r\n    }\r\n\r\n    clearFileInput();\r\n  }\r\n\r\n  function clearFileInput() {\r\n    // Set file input to null to allow adding the same image 2 times in a row\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n  }\r\n\r\n  function openImageDialog() {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  }\r\n\r\n  function handleLargeImageWarningCancel() {\r\n    largeImageWarningFiles.current = undefined;\r\n    setShowLargeImageWarning(false);\r\n    clearFileInput();\r\n  }\r\n\r\n  async function handleLargeImageWarningConfirm() {\r\n    setShowLargeImageWarning(false);\r\n    const files = largeImageWarningFiles.current;\r\n    if (files) {\r\n      for (let file of files) {\r\n        await handleImageUpload(file);\r\n      }\r\n    }\r\n    largeImageWarningFiles.current = undefined;\r\n    clearFileInput();\r\n  }\r\n\r\n  async function handleImageUpload(file: File) {\r\n    if (userId) {\r\n      setIsLoading(true);\r\n      const { map, assets } = await createMapFromFile(file, userId);\r\n      await addMap(map);\r\n      await addAssets(assets);\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Modal Controls\r\n   */\r\n\r\n  async function handleClose() {\r\n    onDone();\r\n  }\r\n\r\n  /**\r\n   * Map Controls\r\n   */\r\n  async function handleMapSelect(mapId: string) {\r\n    if (isLoading) {\r\n      return;\r\n    }\r\n    if (mapId) {\r\n      setIsLoading(true);\r\n      const map = (await getMap(mapId)) || null;\r\n      const mapState = (await getMapState(mapId)) || null;\r\n      onMapChange(map, mapState);\r\n      setIsLoading(false);\r\n    } else {\r\n      onMapChange(null, null);\r\n    }\r\n    onDone();\r\n  }\r\n\r\n  const [editingMapId, setEditingMapId] = useState<string>();\r\n\r\n  const [isDraggingMap, setIsDraggingMap] = useState(false);\r\n\r\n  const [canAddDraggedMap, setCanAddDraggedMap] = useState(false);\r\n  function handleGroupsSelect(groupIds: string[]) {\r\n    if (groupIds.length === 1) {\r\n      // Only allow adding a map from dragging if there is a single group item selected\r\n      const group = findGroup(mapGroups, groupIds[0]);\r\n      setCanAddDraggedMap(group !== undefined && group.type === \"item\");\r\n    } else {\r\n      setCanAddDraggedMap(false);\r\n    }\r\n  }\r\n\r\n  function handleDragAdd(groupIds: string[]) {\r\n    if (groupIds.length === 1) {\r\n      handleMapSelect(groupIds[0]);\r\n    }\r\n  }\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  const [modalSize, setModalSize] = useState({ width: 0, height: 0 });\r\n  function handleModalResize(width?: number, height?: number) {\r\n    if (width && height) {\r\n      setModalSize({ width, height });\r\n    }\r\n  }\r\n\r\n  const editingMap =\r\n    editingMapId && maps.find((map) => map.id === editingMapId);\r\n  const editingMapState =\r\n    editingMapId && mapStates.find((state) => state.mapId === editingMapId);\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={handleClose}\r\n      style={{\r\n        content: { maxWidth: layout.modalSize, width: \"calc(100% - 16px)\" },\r\n      }}\r\n      shouldCloseOnEsc={!isDraggingMap}\r\n    >\r\n      <ImageDrop\r\n        onDrop={({ files }) => handleImagesUpload(files)}\r\n        dropText=\"Drop map to import\"\r\n      >\r\n        <input\r\n          onChange={(event) =>\r\n            event.target.files &&\r\n            handleImagesUpload(Array.from(event.target.files))\r\n          }\r\n          type=\"file\"\r\n          accept=\"image/jpeg, image/gif, image/png, image/webp\"\r\n          style={{ display: \"none\" }}\r\n          multiple\r\n          ref={fileInputRef}\r\n        />\r\n        <ReactResizeDetector\r\n          handleWidth\r\n          handleHeight\r\n          onResize={handleModalResize}\r\n          refreshMode=\"debounce\"\r\n        >\r\n          <GroupProvider\r\n            groups={mapGroups}\r\n            itemNames={mapNames}\r\n            onGroupsChange={updateMapGroups}\r\n            onGroupsSelect={handleGroupsSelect}\r\n            disabled={!isOpen}\r\n          >\r\n            <Flex\r\n              sx={{\r\n                flexDirection: \"column\",\r\n              }}\r\n            >\r\n              <Label pt={2} pb={1}>\r\n                Select or import a map\r\n              </Label>\r\n              <TileActionBar onAdd={openImageDialog} addTitle=\"Import Map(s)\" />\r\n              <Box sx={{ position: \"relative\" }}>\r\n                <TileDragProvider\r\n                  onDragAdd={(canAddDraggedMap && handleDragAdd) || undefined}\r\n                  onDragStart={() => setIsDraggingMap(true)}\r\n                  onDragEnd={() => setIsDraggingMap(false)}\r\n                  onDragCancel={() => setIsDraggingMap(false)}\r\n                >\r\n                  <TilesContainer>\r\n                    {databaseStatus === \"disabled\" && (\r\n                      <DatabaseDisabledMessage type=\"Map\" />\r\n                    )}\r\n                    <MapTiles\r\n                      mapsById={mapsById}\r\n                      onMapEdit={setEditingMapId}\r\n                      onMapSelect={handleMapSelect}\r\n                    />\r\n                  </TilesContainer>\r\n                </TileDragProvider>\r\n                <TileDragProvider\r\n                  onDragAdd={(canAddDraggedMap && handleDragAdd) || undefined}\r\n                  onDragStart={() => setIsDraggingMap(true)}\r\n                  onDragEnd={() => setIsDraggingMap(false)}\r\n                  onDragCancel={() => setIsDraggingMap(false)}\r\n                >\r\n                  <TilesOverlay modalSize={modalSize}>\r\n                    <MapTiles\r\n                      mapsById={mapsById}\r\n                      onMapEdit={setEditingMapId}\r\n                      onMapSelect={handleMapSelect}\r\n                      subgroup\r\n                    />\r\n                  </TilesOverlay>\r\n                </TileDragProvider>\r\n                <MapEditBar\r\n                  currentMap={currentMap}\r\n                  disabled={isLoading || !!editingMapId}\r\n                  onMapChange={onMapChange}\r\n                  onMapReset={onMapReset}\r\n                  onLoad={setIsLoading}\r\n                />\r\n              </Box>\r\n              <SelectMapSelectButton\r\n                onMapSelect={handleMapSelect}\r\n                disabled={isLoading}\r\n              />\r\n            </Flex>\r\n          </GroupProvider>\r\n        </ReactResizeDetector>\r\n      </ImageDrop>\r\n      <>{(isLoading || mapsLoading) && <LoadingOverlay bg=\"overlay\" />}</>\r\n      <>\r\n        {editingMap && editingMapState && (\r\n          <EditMapModal\r\n            isOpen={!!editingMapId}\r\n            onDone={() => setEditingMapId(undefined)}\r\n            map={editingMap}\r\n            mapState={editingMapState}\r\n            onUpdateMap={updateMap}\r\n            onUpdateMapState={updateMapState}\r\n          />\r\n        )}\r\n      </>\r\n      <ConfirmModal\r\n        isOpen={isLargeImageWarningModalOpen}\r\n        onRequestClose={handleLargeImageWarningCancel}\r\n        onConfirm={handleLargeImageWarningConfirm}\r\n        confirmText=\"Continue\"\r\n        label=\"Warning\"\r\n        description=\"An imported image is larger than 20MB, this may cause slowness. Continue?\"\r\n      />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default SelectMapModal;\r\n","function SelectMapIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-10.6-3.47l1.63 2.18 2.58-3.22c.2-.25.58-.25.78 0l2.96 3.7c.26.33.03.81-.39.81H9c-.41 0-.65-.47-.4-.8l2-2.67c.2-.26.6-.26.8 0zM2 7v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectMapIcon;\r\n","import { useState } from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport SelectMapModal from \"../../modals/SelectMapModal\";\r\nimport SelectMapIcon from \"../../icons/SelectMapIcon\";\r\n\r\nimport { useMapData } from \"../../contexts/MapDataContext\";\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\nimport {\r\n  MapChangeEventHandler,\r\n  MapResetEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { MapState } from \"../../types/MapState\";\r\n\r\ntype SelectMapButtonProps = {\r\n  onMapChange: MapChangeEventHandler;\r\n  onMapReset: MapResetEventHandler;\r\n  currentMap: Map | null;\r\n  currentMapState: MapState | null;\r\n  disabled: boolean;\r\n};\r\n\r\nfunction SelectMapButton({\r\n  onMapChange,\r\n  onMapReset,\r\n  currentMap,\r\n  currentMapState,\r\n  disabled,\r\n}: SelectMapButtonProps) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const { updateMapState } = useMapData();\r\n  const userId = useUserId();\r\n  function openModal() {\r\n    if (currentMapState && currentMap && currentMap.owner === userId) {\r\n      updateMapState(currentMapState.mapId, currentMapState);\r\n    }\r\n    setIsModalOpen(true);\r\n  }\r\n\r\n  function handleDone() {\r\n    setIsModalOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        aria-label=\"Select Map\"\r\n        title=\"Select Map\"\r\n        onClick={openModal}\r\n        disabled={disabled}\r\n      >\r\n        <SelectMapIcon />\r\n      </IconButton>\r\n      <SelectMapModal\r\n        isOpen={isModalOpen}\r\n        onDone={handleDone}\r\n        onMapChange={onMapChange}\r\n        onMapReset={onMapReset}\r\n        currentMap={currentMap}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectMapButton;\r\n","function FogMultilayerOnIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <rect fill=\"none\" height=\"24\" width=\"24\" y=\"0\" />\r\n      <path d=\"M11.99,18.47l-6.77-5.26c-0.36-0.28-0.86-0.28-1.22,0l0,0c-0.51,0.4-0.51,1.17,0,1.57l6.76,5.26 c0.72,0.56,1.73,0.56,2.46,0l6.76-5.26c0.51-0.4,0.51-1.17,0-1.57l-0.01-0.01c-0.36-0.28-0.86-0.28-1.22,0L11.99,18.47z M13.23,14.97l6.76-5.26c0.51-0.4,0.51-1.18,0-1.58l-6.76-5.26c-0.72-0.56-1.73-0.56-2.46,0L4.01,8.14c-0.51,0.4-0.51,1.18,0,1.58 l6.76,5.26C11.49,15.54,12.51,15.54,13.23,14.97z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogMultilayerOnIcon;\r\n","function FogMultilayerOffIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <rect fill=\"none\" height=\"24\" width=\"24\" y=\"0\" />\r\n      <path d=\"M19.97,13.2c-0.36-0.28-0.86-0.28-1.22,0l-1.23,0.96l1.43,1.43l1.03-0.8c0.51-0.4,0.51-1.17,0-1.57L19.97,13.2z\" />\r\n      <path d=\"M19.99,9.71c0.51-0.4,0.51-1.18,0-1.58l-6.76-5.26c-0.72-0.56-1.73-0.56-2.46,0L8.23,4.86l7.88,7.88L19.99,9.71z\" />\r\n      <path d=\"M20.48,19.94L3.51,2.97c-0.39-0.39-1.02-0.39-1.41,0c-0.39,0.39-0.39,1.02,0,1.41l2.95,2.95L4.01,8.14 c-0.51,0.4-0.51,1.18,0,1.58l6.76,5.26c0.61,0.48,1.43,0.52,2.11,0.18l1.47,1.47l-2.36,1.84l-6.77-5.26 c-0.36-0.28-0.86-0.28-1.22,0c-0.51,0.4-0.51,1.17,0,1.57l6.76,5.26c0.72,0.56,1.73,0.56,2.46,0l2.55-1.98l3.3,3.3 c0.39,0.39,1.02,0.39,1.41,0C20.88,20.97,20.88,20.33,20.48,19.94z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogMultilayerOffIcon;\r\n","import { IconButton } from \"theme-ui\";\r\n\r\nimport MultilayerOnIcon from \"../../../icons/FogMultilayerOnIcon\";\r\nimport MultilayerOffIcon from \"../../../icons/FogMultilayerOffIcon\";\r\n\r\ntype MultilayerToggleProps = {\r\n  multilayer: boolean;\r\n  onMultilayerChange: (multilayer: boolean) => void;\r\n  disabled?: boolean;\r\n};\r\n\r\nfunction MultilayerToggle({\r\n  multilayer,\r\n  onMultilayerChange,\r\n  disabled,\r\n}: MultilayerToggleProps) {\r\n  return (\r\n    <IconButton\r\n      aria-label={\r\n        multilayer ? \"Disable Multilayer (L)\" : \"Enable Multilayer (L)\"\r\n      }\r\n      title={multilayer ? \"Disable Multilayer (L)\" : \"Enable Multilayer (L)\"}\r\n      onClick={() => onMultilayerChange(!multilayer)}\r\n      disabled={disabled}\r\n    >\r\n      {multilayer ? <MultilayerOnIcon /> : <MultilayerOffIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default MultilayerToggle;\r\n","function FogPreviewOnIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M24 24H0V0h24z\" fill=\"none\" />\r\n      <path d=\"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogPreviewOnIcon;\r\n","function FogPreviewOffIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M24 24H0V0h24z\" fill=\"none\" />\r\n      <path d=\"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM2.71 3.16c-.39.39-.39 1.02 0 1.41l1.97 1.97C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogPreviewOffIcon;\r\n","import { IconButton } from \"theme-ui\";\r\n\r\nimport PreviewOnIcon from \"../../../icons/FogPreviewOnIcon\";\r\nimport PreviewOffIcon from \"../../../icons/FogPreviewOffIcon\";\r\n\r\ntype FogPreviewToggleProps = {\r\n  useFogPreview: boolean;\r\n  onFogPreviewChange: (useFogCut: boolean) => void;\r\n};\r\n\r\nfunction FogPreviewToggle({\r\n  useFogPreview,\r\n  onFogPreviewChange,\r\n}: FogPreviewToggleProps) {\r\n  return (\r\n    <IconButton\r\n      aria-label={\r\n        useFogPreview ? \"Disable Fog Preview (F)\" : \"Enable Fog Preview (F)\"\r\n      }\r\n      title={\r\n        useFogPreview ? \"Disable Fog Preview (F)\" : \"Enable Fog Preview (F)\"\r\n      }\r\n      onClick={() => onFogPreviewChange(!useFogPreview)}\r\n    >\r\n      {useFogPreview ? <PreviewOnIcon /> : <PreviewOffIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default FogPreviewToggle;\r\n","function FogCutOnIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M2.52 11.1a4 4 0 016.08.5l12.36-5.96c.72-.35 1.6-.05 1.94.67l.02.04.02.05c.33.74.01 1.6-.72 1.96l-7.93 3.83-1.66 3.44a4 4 0 11-6.17 2.14 4 4 0 01-3.94-6.67zm6.37 6.37a2 2 0 102.82 2.83 2 2 0 00-2.82-2.83zm2.82-5.66c-.2.2-.2.51 0 .7.2.2.51.2.71 0 .2-.19.2-.5 0-.7a.5.5 0 00-.7 0zM9.3 14.6a4 4 0 01-.08.35l-.03.09a4 4 0 01.44-.1l.32-.66-.65.32zm8.54-13.3l.04.01a1.45 1.45 0 01.72 1.97l-1.54 3.18-4.25 1.9L15.88 2a1.5 1.5 0 011.96-.71zM3.94 12.52a2 2 0 102.83 2.83 2 2 0 00-2.83-2.83z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogCutOnIcon;\r\n","function FogCutOffIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M5.28 3.68l15.56 15.56a1 1 0 01-1.42 1.41l-6.21-6.21-.58 1.2a4 4 0 11-6.17 2.14A4 4 0 118.6 11.6l1.2-.58L3.87 5.1a1 1 0 111.41-1.4zm3.6 13.79a2 2 0 102.83 2.83 2 2 0 00-2.82-2.83zm-4.94-4.95a2 2 0 102.83 2.83 2 2 0 00-2.83-2.83zm6.01 1.76l-.65.32a4 4 0 01-.08.35l-.03.09a4 4 0 01.44-.1l.32-.66zM22.9 6.31l.02.04.02.05c.33.74.01 1.6-.72 1.96l-6.68 3.22-2.24-2.24 7.66-3.7c.72-.35 1.6-.05 1.94.67zM17.84 1.3l.04.01a1.45 1.45 0 01.72 1.97l-1.54 3.18-4.25 1.9L15.88 2a1.5 1.5 0 011.96-.71z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogCutOffIcon;\r\n","import { IconButton } from \"theme-ui\";\r\n\r\nimport CutOnIcon from \"../../../icons/FogCutOnIcon\";\r\nimport CutOffIcon from \"../../../icons/FogCutOffIcon\";\r\n\r\ntype FogCutToggleProps = {\r\n  useFogCut: boolean;\r\n  onFogCutChange: (useFogCut: boolean) => void;\r\n  disabled?: boolean;\r\n};\r\n\r\nfunction FogCutToggle({\r\n  useFogCut,\r\n  onFogCutChange,\r\n  disabled,\r\n}: FogCutToggleProps) {\r\n  return (\r\n    <IconButton\r\n      aria-label={\r\n        useFogCut ? \"Disable Fog Cutting (C)\" : \"Enable Fog Cutting (C)\"\r\n      }\r\n      title={useFogCut ? \"Disable Fog Cutting (C)\" : \"Enable Fog Cutting (C)\"}\r\n      onClick={() => onFogCutChange(!useFogCut)}\r\n      disabled={disabled}\r\n    >\r\n      {useFogCut ? <CutOnIcon /> : <CutOffIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default FogCutToggle;\r\n","function FogBrushIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M18 4V3c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6h1v4h-9c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-9h7c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1h-2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogBrushIcon;\r\n","function FogPolygonIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M15.858 20a1 1 0 110 2h-8a1 1 0 010-2h8zm-5-17.998v9.516a2 2 0 102 0V2.12l5.725 10.312a1 1 0 01.049.87l-.058.117-3.093 5.333a1 1 0 01-.865.498H8.941a1 1 0 01-.875-.516L5.125 13.41a1 1 0 01-.002-.965l5.735-10.443z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogPolygonIcon;\r\n","function FogRemoveIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M3.212 12.303c-1 1-1.182 2.455-.404 3.233l5.656 5.656c.778.778 2.233.596 3.233-.404l9.091-9.091c1-1 1.182-2.455.404-3.233l-5.656-5.656c-.778-.778-2.233-.596-3.233.404l-9.091 9.091zm6.667-2.424l4.242 4.242c.39.39.485.93.212 1.202l-3.96 3.96c-.272.272-.813.177-1.201-.212l-4.243-4.243c-.389-.388-.484-.93-.212-1.202l3.96-3.96c.272-.272.813-.176 1.202.213z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogRemoveIcon;\r\n","function FogToggleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M12 4a7.49 7.49 0 017.35 6.04c2.6.18 4.65 2.32 4.65 4.96 0 2.76-2.24 5-5 5H6c-3.31 0-6-2.69-6-6 0-3.09 2.34-5.64 5.35-5.96A7.496 7.496 0 0112 4zm0 2a5.493 5.493 0 00-4.759 2.75l-.117.214-.496.951-1.067.114A3.994 3.994 0 002 14a4.005 4.005 0 003.8 3.995L6 18h6.042v-.103L12 6z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogToggleIcon;\r\n","function FogRectangleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogRectangleIcon;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Box, Flex } from \"theme-ui\";\r\n\r\nimport RadioIconButton from \"../../RadioIconButton\";\r\n\r\nexport type Tool = {\r\n  id: string;\r\n  title: string;\r\n  isSelected: boolean;\r\n  icon: React.ReactNode;\r\n  disabled?: boolean;\r\n};\r\n\r\ntype ToolSectionProps = {\r\n  collapse: boolean;\r\n  tools: Tool[];\r\n  onToolClick: (tool: Tool) => void;\r\n};\r\n\r\n// Section of map tools with the option to collapse into a vertical list\r\nfunction ToolSection({ collapse, tools, onToolClick }: ToolSectionProps) {\r\n  const [showMore, setShowMore] = useState(false);\r\n  const [collapsedTool, setCollapsedTool] = useState<Tool>();\r\n\r\n  useEffect(() => {\r\n    const selectedTool = tools.find((tool) => tool.isSelected);\r\n    if (selectedTool) {\r\n      setCollapsedTool(selectedTool);\r\n    } else {\r\n      // No selected tool, deselect if we have a tool or get the first tool if not\r\n      setCollapsedTool((prevTool) =>\r\n        prevTool ? { ...prevTool, isSelected: false } : tools[0]\r\n      );\r\n    }\r\n  }, [tools]);\r\n\r\n  function handleToolClick(tool: Tool) {\r\n    if (collapse && tool.isSelected) {\r\n      setShowMore(!showMore);\r\n    } else if (collapse && !tool.isSelected) {\r\n      setShowMore(false);\r\n    }\r\n    onToolClick(tool);\r\n  }\r\n\r\n  function renderTool(tool: Tool) {\r\n    return (\r\n      <RadioIconButton\r\n        title={tool.title}\r\n        onClick={() => handleToolClick(tool)}\r\n        key={tool.id}\r\n        isSelected={tool.isSelected}\r\n        disabled={tool.disabled}\r\n      >\r\n        {tool.icon}\r\n      </RadioIconButton>\r\n    );\r\n  }\r\n\r\n  if (collapse) {\r\n    if (!collapsedTool) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Box sx={{ position: \"relative\" }}>\r\n        {renderTool(collapsedTool)}\r\n        {/* Render chevron when more tools is available */}\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            width: 0,\r\n            height: 0,\r\n            borderTop: \"4px solid\",\r\n            borderTopColor: \"text\",\r\n            borderLeft: \"4px solid transparent\",\r\n            borderRight: \"4px solid transparent\",\r\n            transform: \"translate(0, -4px) rotate(-45deg)\",\r\n            bottom: 0,\r\n            right: 0,\r\n            pointerEvents: \"none\",\r\n          }}\r\n        />\r\n        {showMore && (\r\n          <Flex\r\n            sx={{\r\n              position: \"absolute\",\r\n              top: \"40px\",\r\n              left: \"50%\",\r\n              transform: \"translateX(-50%)\",\r\n              flexDirection: \"column\",\r\n              borderRadius: \"4px\",\r\n            }}\r\n            bg=\"overlay\"\r\n            p={2}\r\n          >\r\n            {tools.filter((tool) => !tool.isSelected).map(renderTool)}\r\n          </Flex>\r\n        )}\r\n      </Box>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        {tools.map((tool) => (\r\n          <RadioIconButton\r\n            title={tool.title}\r\n            onClick={() => handleToolClick(tool)}\r\n            key={tool.id}\r\n            isSelected={tool.isSelected}\r\n            disabled={tool.disabled}\r\n          >\r\n            {tool.icon}\r\n          </RadioIconButton>\r\n        ))}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nToolSection.defaultProps = {\r\n  collapse: false,\r\n};\r\n\r\nexport default ToolSection;\r\n","import { Flex } from \"theme-ui\";\r\nimport { useMedia } from \"react-media\";\r\n\r\nimport RadioIconButton from \"../RadioIconButton\";\r\n\r\nimport MultilayerToggle from \"./shared/MultilayerToggle\";\r\nimport FogPreviewToggle from \"./shared/FogPreviewToggle\";\r\nimport FogCutToggle from \"./shared/FogCutToggle\";\r\n\r\nimport FogBrushIcon from \"../../icons/FogBrushIcon\";\r\nimport FogPolygonIcon from \"../../icons/FogPolygonIcon\";\r\nimport FogRemoveIcon from \"../../icons/FogRemoveIcon\";\r\nimport FogToggleIcon from \"../../icons/FogToggleIcon\";\r\nimport FogRectangleIcon from \"../../icons/FogRectangleIcon\";\r\n\r\nimport ToolSection from \"./shared/ToolSection\";\r\n\r\nimport Divider from \"../Divider\";\r\n\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\n\r\nimport {\r\n  FogToolSettings as FogToolSettingsType,\r\n  FogToolType,\r\n} from \"../../types/Fog\";\r\n\r\ntype FogToolSettingsProps = {\r\n  settings: FogToolSettingsType;\r\n  onSettingChange: (change: Partial<FogToolSettingsType>) => void;\r\n};\r\n\r\nfunction FogToolSettings({ settings, onSettingChange }: FogToolSettingsProps) {\r\n  // Keyboard shortcuts\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.fogPolygon(event)) {\r\n      onSettingChange({ type: \"polygon\" });\r\n    } else if (shortcuts.fogBrush(event)) {\r\n      onSettingChange({ type: \"brush\" });\r\n    } else if (shortcuts.fogToggle(event)) {\r\n      onSettingChange({ type: \"toggle\" });\r\n    } else if (shortcuts.fogErase(event)) {\r\n      onSettingChange({ type: \"remove\" });\r\n    } else if (shortcuts.fogLayer(event)) {\r\n      onSettingChange({ multilayer: !settings.multilayer });\r\n    } else if (shortcuts.fogPreview(event)) {\r\n      onSettingChange({ preview: !settings.preview });\r\n    } else if (shortcuts.fogCut(event)) {\r\n      onSettingChange({ useFogCut: !settings.useFogCut });\r\n    } else if (shortcuts.fogRectangle(event)) {\r\n      onSettingChange({ type: \"rectangle\" });\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  const isSmallScreen = useMedia({ query: \"(max-width: 799px)\" });\r\n  const drawTools = [\r\n    {\r\n      id: \"polygon\",\r\n      title: \"Fog Polygon (P)\",\r\n      isSelected: settings.type === \"polygon\",\r\n      icon: <FogPolygonIcon />,\r\n      disabled: settings.preview,\r\n    },\r\n    {\r\n      id: \"rectangle\",\r\n      title: \"Fog Rectangle (R)\",\r\n      isSelected: settings.type === \"rectangle\",\r\n      icon: <FogRectangleIcon />,\r\n      disabled: settings.preview,\r\n    },\r\n    {\r\n      id: \"brush\",\r\n      title: \"Fog Brush (B)\",\r\n      isSelected: settings.type === \"brush\",\r\n      icon: <FogBrushIcon />,\r\n      disabled: settings.preview,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Flex sx={{ alignItems: \"center\" }}>\r\n      <ToolSection\r\n        tools={drawTools}\r\n        onToolClick={(tool) =>\r\n          onSettingChange({ type: tool.id as FogToolType })\r\n        }\r\n        collapse={isSmallScreen}\r\n      />\r\n      <Divider vertical />\r\n      <RadioIconButton\r\n        title=\"Toggle Fog (T)\"\r\n        onClick={() => onSettingChange({ type: \"toggle\" })}\r\n        isSelected={settings.type === \"toggle\"}\r\n        disabled={settings.preview}\r\n      >\r\n        <FogToggleIcon />\r\n      </RadioIconButton>\r\n      <RadioIconButton\r\n        title=\"Erase Fog (E)\"\r\n        onClick={() => onSettingChange({ type: \"remove\" })}\r\n        isSelected={settings.type === \"remove\"}\r\n        disabled={settings.preview}\r\n      >\r\n        <FogRemoveIcon />\r\n      </RadioIconButton>\r\n      <Divider vertical />\r\n      <FogCutToggle\r\n        useFogCut={settings.useFogCut}\r\n        onFogCutChange={(useFogCut) => onSettingChange({ useFogCut })}\r\n        disabled={settings.preview}\r\n      />\r\n      <MultilayerToggle\r\n        multilayer={settings.multilayer}\r\n        onMultilayerChange={(multilayer) => onSettingChange({ multilayer })}\r\n        disabled={settings.preview}\r\n      />\r\n      <FogPreviewToggle\r\n        useFogPreview={settings.preview}\r\n        onFogPreviewChange={(preview) => onSettingChange({ preview })}\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default FogToolSettings;\r\n","// Colors used for the game for theme general UI colors look at theme.js\r\nconst colors = {\r\n  blue: \"rgb(26, 106, 255)\",\r\n  orange: \"rgb(255, 116, 51)\",\r\n  red: \"rgb(255, 77, 77)\",\r\n  yellow: \"rgb(255, 212, 51)\",\r\n  purple: \"rgb(136, 77, 255)\",\r\n  green: \"rgb(133, 255, 102)\",\r\n  pink: \"rgb(235, 138, 255)\",\r\n  teal: \"rgb(68, 224, 241)\",\r\n  black: \"rgb(34, 34, 34)\",\r\n  darkGray: \"rgb(90, 90, 90)\",\r\n  lightGray: \"rgb(179, 179, 179)\",\r\n  white: \"rgb(255, 255, 255)\",\r\n  primary: \"hsl(260, 100%, 80%)\",\r\n};\r\n\r\nexport type Colors = typeof colors;\r\n\r\nexport type Color = keyof Colors;\r\n\r\nexport const colorOptions = Object.keys(colors) as Color[];\r\n\r\nexport default colors;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Modal from \"react-modal\";\r\nimport { useThemeUI } from \"theme-ui\";\r\nimport CSS from \"csstype\";\r\n\r\nimport { RequestCloseEventHandler } from \"../../types/Events\";\r\nimport { useInteractionEmitter } from \"../../contexts/MapInteractionContext\";\r\n\r\ntype MapMenuProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  onModalContent: (instance: HTMLDivElement) => void;\r\n  top: number | string;\r\n  left: number | string;\r\n  bottom: number | string;\r\n  right: number | string;\r\n  children: React.ReactNode;\r\n  style: React.CSSProperties;\r\n  excludeNode: Node | null;\r\n};\r\n\r\nfunction MapMenu({\r\n  isOpen,\r\n  onRequestClose,\r\n  onModalContent,\r\n  top,\r\n  left,\r\n  bottom,\r\n  right,\r\n  children,\r\n  style,\r\n  // A node to exclude from the pointer event for closing\r\n  excludeNode,\r\n}: MapMenuProps) {\r\n  // Save modal node in state to ensure that the pointer listeners\r\n  // are removed if the open state changed not from the onRequestClose\r\n  // callback\r\n  const [modalContentNode, setModalContentNode] = useState<Node | null>(null);\r\n\r\n  const interactionEmitter = useInteractionEmitter();\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      return;\r\n    }\r\n    function handleDragMove() {\r\n      onRequestClose();\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleDragMove);\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleDragMove);\r\n    };\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Close modal if interacting with any other element\r\n    function handleInteraction(event: Event) {\r\n      const path = event.composedPath();\r\n      if (\r\n        modalContentNode &&\r\n        !path.includes(modalContentNode) &&\r\n        !(excludeNode && path.includes(excludeNode)) &&\r\n        !(event.target instanceof HTMLTextAreaElement)\r\n      ) {\r\n        onRequestClose();\r\n        document.body.removeEventListener(\"pointerup\", handleInteraction);\r\n        document.body.removeEventListener(\"wheel\", handleInteraction);\r\n      }\r\n    }\r\n\r\n    if (modalContentNode) {\r\n      document.body.addEventListener(\"pointerup\", handleInteraction);\r\n      // Check for wheel event to close modal as well\r\n      document.body.addEventListener(\"wheel\", handleInteraction);\r\n    }\r\n\r\n    return () => {\r\n      if (modalContentNode) {\r\n        document.body.removeEventListener(\"pointerup\", handleInteraction);\r\n        document.body.removeEventListener(\"wheel\", handleInteraction);\r\n      }\r\n    };\r\n  }, [modalContentNode, excludeNode, onRequestClose]);\r\n\r\n  function handleModalContent(node: HTMLDivElement) {\r\n    setModalContentNode(node);\r\n    onModalContent(node);\r\n  }\r\n\r\n  const { theme } = useThemeUI();\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{\r\n        overlay: { top: \"0\", bottom: \"initial\" },\r\n        content: {\r\n          backgroundColor: theme.colors?.overlay as CSS.Property.Color,\r\n          top,\r\n          left,\r\n          right,\r\n          bottom,\r\n          padding: 0,\r\n          borderRadius: \"4px\",\r\n          border: \"none\",\r\n          ...style,\r\n        },\r\n      }}\r\n      contentRef={handleModalContent}\r\n    >\r\n      {children}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nMapMenu.defaultProps = {\r\n  onModalContent: () => {},\r\n  top: \"initial\",\r\n  left: \"initial\",\r\n  right: \"initial\",\r\n  bottom: \"initial\",\r\n  style: {},\r\n  excludeNode: null,\r\n};\r\n\r\nexport default MapMenu;\r\n","import React, { useState } from \"react\";\r\nimport { Box, SxProp } from \"theme-ui\";\r\n\r\nimport colors, { colorOptions, Color } from \"../../../helpers/colors\";\r\nimport MapMenu from \"../../map/MapMenu\";\r\n\r\ntype ColorCircleProps = {\r\n  color: Color;\r\n  selected: boolean;\r\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\r\n} & SxProp;\r\n\r\nfunction ColorCircle({ color, selected, onClick, sx }: ColorCircleProps) {\r\n  return (\r\n    <Box\r\n      key={color}\r\n      sx={{\r\n        borderRadius: \"50%\",\r\n        transform: \"scale(0.75)\",\r\n        backgroundColor: colors[color],\r\n        cursor: \"pointer\",\r\n        ...sx,\r\n      }}\r\n      onClick={onClick}\r\n      aria-label={`Brush Color ${color}`}\r\n    >\r\n      {selected && (\r\n        <Box\r\n          sx={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            border: \"2px solid white\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            borderRadius: \"50%\",\r\n          }}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\ntype ColorControlProps = {\r\n  color: Color;\r\n  onColorChange: (newColor: Color) => void;\r\n  exclude: Color[];\r\n};\r\n\r\nfunction ColorControl({ color, onColorChange, exclude }: ColorControlProps) {\r\n  const [showColorMenu, setShowColorMenu] = useState(false);\r\n  const [colorMenuOptions, setColorMenuOptions] = useState({});\r\n\r\n  function handleControlClick(event: React.MouseEvent<HTMLDivElement>) {\r\n    if (showColorMenu) {\r\n      setShowColorMenu(false);\r\n      setColorMenuOptions({});\r\n    } else {\r\n      setShowColorMenu(true);\r\n      const rect = event.currentTarget.getBoundingClientRect();\r\n      setColorMenuOptions({\r\n        // Align the right of the submenu to the left of the tool and center vertically\r\n        left: `${rect.left + rect.width / 2}px`,\r\n        top: `${rect.bottom + 16}px`,\r\n        style: { transform: \"translateX(-50%)\" },\r\n        // Exclude this node from the sub menus auto close\r\n        excludeNode: event.currentTarget,\r\n      });\r\n    }\r\n  }\r\n\r\n  const colorMenu = (\r\n    <MapMenu\r\n      isOpen={showColorMenu}\r\n      onRequestClose={() => {\r\n        setShowColorMenu(false);\r\n        setColorMenuOptions({});\r\n      }}\r\n      {...colorMenuOptions}\r\n    >\r\n      <Box\r\n        sx={{\r\n          width: \"104px\",\r\n          display: \"flex\",\r\n          flexWrap: \"wrap\",\r\n          justifyContent: \"space-between\",\r\n        }}\r\n        p={1}\r\n      >\r\n        {colorOptions\r\n          .filter((color) => !exclude.includes(color))\r\n          .map((c) => (\r\n            <ColorCircle\r\n              key={c}\r\n              color={c}\r\n              selected={c === color}\r\n              onClick={() => {\r\n                onColorChange(c);\r\n                setShowColorMenu(false);\r\n                setColorMenuOptions({});\r\n              }}\r\n              sx={{ width: \"25%\", paddingTop: \"25%\" }}\r\n            />\r\n          ))}\r\n      </Box>\r\n    </MapMenu>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ColorCircle\r\n        color={color}\r\n        selected\r\n        onClick={handleControlClick}\r\n        sx={{ width: \"24px\", height: \"24px\" }}\r\n      />\r\n      {colorMenu}\r\n    </>\r\n  );\r\n}\r\n\r\nColorControl.defaultProps = {\r\n  exclude: [],\r\n};\r\n\r\nexport default ColorControl;\r\n","function BlendOnIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M24 0H0v24h24V0z\" fill=\"none\" />\r\n      <path d=\"M6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19 0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41 0L6.34 7.93zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BlendOnIcon;\r\n","function BlendOffIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 5.1v4.05l7.4 7.4c1.15-2.88.59-6.28-1.75-8.61l-4.94-4.95c-.39-.39-1.02-.39-1.41 0L8.56 5.71l1.41 1.41L12 5.1zm-8.31-.02c-.39.39-.39 1.02 0 1.41l2.08 2.08c-2.54 3.14-2.35 7.75.57 10.68C7.9 20.8 9.95 21.58 12 21.58c1.78 0 3.56-.59 5.02-1.77l2 2c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.11 5.08c-.39-.39-1.03-.39-1.42 0zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59c0-1.32.43-2.56 1.21-3.59L12 14.79v4.8z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BlendOffIcon;\r\n","import { IconButton } from \"theme-ui\";\r\n\r\nimport BlendOnIcon from \"../../../icons/BlendOnIcon\";\r\nimport BlendOffIcon from \"../../../icons/BlendOffIcon\";\r\n\r\ntype AlphaBlendToggleProps = {\r\n  useBlending: boolean;\r\n  onBlendingChange: (useBlending: boolean) => void;\r\n};\r\n\r\nfunction AlphaBlendToggle({\r\n  useBlending,\r\n  onBlendingChange,\r\n}: AlphaBlendToggleProps) {\r\n  return (\r\n    <IconButton\r\n      aria-label={useBlending ? \"Disable Blending (O)\" : \"Enable Blending (O)\"}\r\n      title={useBlending ? \"Disable Blending (O)\" : \"Enable Blending (O)\"}\r\n      onClick={() => onBlendingChange(!useBlending)}\r\n    >\r\n      {useBlending ? <BlendOnIcon /> : <BlendOffIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default AlphaBlendToggle;\r\n","function ShapeFillOnIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M8.639 20.508c.324.324.76.492 1.185.492.424 0 .86-.168 1.184-.492l6.147-6.147c.66-.648.66-1.71 0-2.37l-9.21-9.209a1.113 1.113 0 00-1.575 0 1.113 1.113 0 000 1.576l1.878 1.878-5.756 5.756c-.66.66-.66 1.72 0 2.37l6.147 6.146zM9.824 7.823l5.353 5.353H4.47l5.354-5.353zM19.882 21a2.242 2.242 0 002.236-2.235c0-1.487-2.236-3.912-2.236-3.912s-2.235 2.425-2.235 3.912A2.242 2.242 0 0019.882 21z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ShapeFillOnIcon;\r\n","function ShapeFillOffIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M3.414 6.52L16.85 19.953a1 1 0 01-1.414 1.415l-2.644-2.644-1.783 1.783a1.688 1.688 0 01-1.025.484l-.16.008c-.371 0-.751-.128-1.058-.378l-.126-.114-6.147-6.147a1.664 1.664 0 01-.11-2.249l.11-.12 1.782-1.784L2 7.934a1 1 0 111.414-1.415zM7.85 2.695l.097.086 9.21 9.21c.62.62.656 1.597.109 2.25l-.11.12-1.769 1.768-2.954-2.954h2.745L9.824 7.823 8.45 9.195 6.87 7.613l1.379-1.377L6.37 4.358a1.113 1.113 0 010-1.576 1.113 1.113 0 011.479-.086zm-.607 10.48L5.856 11.79 4.47 13.176h2.772zM19.882 21a2.242 2.242 0 002.236-2.235c0-1.487-2.236-3.912-2.236-3.912s-2.235 2.425-2.235 3.912A2.242 2.242 0 0019.882 21z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ShapeFillOffIcon;\r\n","import { IconButton } from \"theme-ui\";\r\n\r\nimport ShapeFillOnIcon from \"../../../icons/ShapeFillOnIcon\";\r\nimport ShapeFillOffIcon from \"../../../icons/ShapeFillOffIcon\";\r\n\r\ntype ShapeFillToggleProps = {\r\n  useShapeFill: boolean;\r\n  onShapeFillChange: (useShapeFill: boolean) => void;\r\n};\r\n\r\nfunction ShapeFillToggle({\r\n  useShapeFill,\r\n  onShapeFillChange,\r\n}: ShapeFillToggleProps) {\r\n  return (\r\n    <IconButton\r\n      aria-label={\r\n        useShapeFill ? \"Disable Shape Fill (G)\" : \"Enable Shape Fill (G)\"\r\n      }\r\n      title={useShapeFill ? \"Disable Shape Fill (G)\" : \"Enable Shape Fill (G)\"}\r\n      onClick={() => onShapeFillChange(!useShapeFill)}\r\n    >\r\n      {useShapeFill ? <ShapeFillOnIcon /> : <ShapeFillOffIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default ShapeFillToggle;\r\n","function BrushToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BrushToolIcon;\r\n","function BrushPaintIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M18 4V3c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6h1v4h-9c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-9h7c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1h-2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BrushPaintIcon;\r\n","function BrushLineIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M4.222 16.95L16.95 4.222a2 2 0 112.828 2.828L7.05 19.778a2 2 0 11-2.828-2.828z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BrushLineIcon;\r\n","function BrushRectangleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BrushRectangleIcon;\r\n","function BrushCircleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BrushCircleIcon;\r\n","function BrushTriangleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M2.73 21h18.53c.77 0 1.25-.83.87-1.5l-9.27-16a.996.996 0 00-1.73 0l-9.27 16c-.38.67.1 1.5.87 1.5z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BrushTriangleIcon;\r\n","function EraseToolIcon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M3.212 12.303c-1 1-1.182 2.455-.404 3.233l5.656 5.656c.778.778 2.233.596 3.233-.404l9.091-9.091c1-1 1.182-2.455.404-3.233l-5.656-5.656c-.778-.778-2.233-.596-3.233.404l-9.091 9.091zm6.667-2.424l4.242 4.242c.39.39.485.93.212 1.202l-3.96 3.96c-.272.272-.813.177-1.201-.212l-4.243-4.243c-.389-.388-.484-.93-.212-1.202l3.96-3.96c.272-.272.813-.176 1.202.213z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default EraseToolIcon;\r\n","function EraseAllIcon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zm3.17-7.83c.39-.39 1.02-.39 1.41 0L12 12.59l1.42-1.42c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L13.41 14l1.42 1.42c.39.39.39 1.02 0 1.41-.39.39-1.02.39-1.41 0L12 15.41l-1.42 1.42c-.39.39-1.02.39-1.41 0-.39-.39-.39-1.02 0-1.41L10.59 14l-1.42-1.42c-.39-.38-.39-1.02 0-1.41zM15.5 4l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default EraseAllIcon;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Button, IconButton } from \"theme-ui\";\r\n\r\nimport EraseAllIcon from \"../../../icons/EraseAllIcon\";\r\nimport MapMenu from \"../../map/MapMenu\";\r\n\r\ntype EraseAllButtonProps = {\r\n  onToolAction: (action: string) => void;\r\n  disabled: boolean;\r\n};\r\n\r\nfunction EraseAllButton({ onToolAction, disabled }: EraseAllButtonProps) {\r\n  const [isEraseAllConfirmOpen, setIsEraseAllConfirmOpen] = useState(false);\r\n\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n  const [menuLeft, setMenuLeft] = useState(0);\r\n  const [menuTop, setMenuTop] = useState(0);\r\n  useEffect(() => {\r\n    const button = buttonRef.current;\r\n    if (isEraseAllConfirmOpen && button) {\r\n      const rect = button.getBoundingClientRect();\r\n      setMenuLeft(rect.left + rect.width / 2);\r\n      setMenuTop(rect.bottom + 8);\r\n    }\r\n  }, [isEraseAllConfirmOpen]);\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        aria-label=\"Erase All\"\r\n        title=\"Erase All\"\r\n        onClick={() => setIsEraseAllConfirmOpen(true)}\r\n        disabled={disabled}\r\n        ref={buttonRef}\r\n      >\r\n        <EraseAllIcon />\r\n      </IconButton>\r\n      <MapMenu\r\n        isOpen={isEraseAllConfirmOpen}\r\n        onRequestClose={() => setIsEraseAllConfirmOpen(false)}\r\n        left={menuLeft}\r\n        top={menuTop}\r\n        style={{ transform: \"translateX(-50%)\" }}\r\n      >\r\n        <Button\r\n          disabled={disabled}\r\n          onClick={() => {\r\n            setIsEraseAllConfirmOpen(false);\r\n            onToolAction(\"eraseAll\");\r\n          }}\r\n        >\r\n          Erase All\r\n        </Button>\r\n      </MapMenu>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EraseAllButton;\r\n","import { useEffect } from \"react\";\r\nimport { Flex } from \"theme-ui\";\r\nimport { useMedia } from \"react-media\";\r\n\r\nimport RadioIconButton from \"../RadioIconButton\";\r\n\r\nimport ColorControl from \"./shared/ColorControl\";\r\nimport AlphaBlendToggle from \"./shared/AlphaBlendToggle\";\r\nimport ToolSection from \"./shared/ToolSection\";\r\nimport ShapeFillToggle from \"./shared/ShapeFillToggle\";\r\n\r\nimport BrushIcon from \"../../icons/BrushToolIcon\";\r\nimport BrushPaintIcon from \"../../icons/BrushPaintIcon\";\r\nimport BrushLineIcon from \"../../icons/BrushLineIcon\";\r\nimport BrushRectangleIcon from \"../../icons/BrushRectangleIcon\";\r\nimport BrushCircleIcon from \"../../icons/BrushCircleIcon\";\r\nimport BrushTriangleIcon from \"../../icons/BrushTriangleIcon\";\r\nimport EraseIcon from \"../../icons/EraseToolIcon\";\r\n\r\nimport Divider from \"../Divider\";\r\n\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\n\r\nimport {\r\n  DrawingToolSettings as DrawingToolSettingsType,\r\n  DrawingToolType,\r\n} from \"../../types/Drawing\";\r\nimport EraseAllButton from \"./shared/EraseAllButton\";\r\n\r\ntype DrawingToolSettingsProps = {\r\n  settings: DrawingToolSettingsType;\r\n  onSettingChange: (change: Partial<DrawingToolSettingsType>) => void;\r\n  onToolAction: (action: string) => void;\r\n  disabledActions: string[];\r\n};\r\n\r\nfunction DrawingToolSettings({\r\n  settings,\r\n  onSettingChange,\r\n  onToolAction,\r\n  disabledActions,\r\n}: DrawingToolSettingsProps) {\r\n  // Keyboard shotcuts\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.drawBrush(event)) {\r\n      onSettingChange({ type: \"brush\" });\r\n    } else if (shortcuts.drawPaint(event)) {\r\n      onSettingChange({ type: \"paint\" });\r\n    } else if (shortcuts.drawLine(event)) {\r\n      onSettingChange({ type: \"line\" });\r\n    } else if (shortcuts.drawRect(event)) {\r\n      onSettingChange({ type: \"rectangle\" });\r\n    } else if (shortcuts.drawCircle(event)) {\r\n      onSettingChange({ type: \"circle\" });\r\n    } else if (shortcuts.drawTriangle(event)) {\r\n      onSettingChange({ type: \"triangle\" });\r\n    } else if (shortcuts.drawErase(event)) {\r\n      onSettingChange({ type: \"erase\" });\r\n    } else if (shortcuts.drawBlend(event)) {\r\n      onSettingChange({ useBlending: !settings.useBlending });\r\n    } else if (shortcuts.drawFill(event)) {\r\n      onSettingChange({ useShapeFill: !settings.useShapeFill });\r\n    }\r\n  }\r\n  useKeyboard(handleKeyDown);\r\n\r\n  // Change to brush if on erase and it gets disabled\r\n  useEffect(() => {\r\n    if (settings.type === \"erase\" && disabledActions.includes(\"erase\")) {\r\n      onSettingChange({ type: \"brush\" });\r\n    }\r\n  }, [disabledActions, settings, onSettingChange]);\r\n\r\n  const isSmallScreen = useMedia({ query: \"(max-width: 799px)\" });\r\n\r\n  const tools = [\r\n    {\r\n      id: \"brush\",\r\n      title: \"Brush (B)\",\r\n      isSelected: settings.type === \"brush\",\r\n      icon: <BrushIcon />,\r\n    },\r\n    {\r\n      id: \"paint\",\r\n      title: \"Paint (P)\",\r\n      isSelected: settings.type === \"paint\",\r\n      icon: <BrushPaintIcon />,\r\n    },\r\n    {\r\n      id: \"line\",\r\n      title: \"Line (L)\",\r\n      isSelected: settings.type === \"line\",\r\n      icon: <BrushLineIcon />,\r\n    },\r\n    {\r\n      id: \"rectangle\",\r\n      title: \"Rectangle (R)\",\r\n      isSelected: settings.type === \"rectangle\",\r\n      icon: <BrushRectangleIcon />,\r\n    },\r\n    {\r\n      id: \"circle\",\r\n      title: \"Circle (C)\",\r\n      isSelected: settings.type === \"circle\",\r\n      icon: <BrushCircleIcon />,\r\n    },\r\n    {\r\n      id: \"triangle\",\r\n      title: \"Triangle (T)\",\r\n      isSelected: settings.type === \"triangle\",\r\n      icon: <BrushTriangleIcon />,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Flex sx={{ alignItems: \"center\" }}>\r\n      <ColorControl\r\n        color={settings.color}\r\n        onColorChange={(color) => onSettingChange({ color })}\r\n        exclude={[\"primary\"]}\r\n      />\r\n      <Divider vertical />\r\n      <ToolSection\r\n        tools={tools}\r\n        onToolClick={(tool) =>\r\n          onSettingChange({ type: tool.id as DrawingToolType })\r\n        }\r\n        collapse={isSmallScreen}\r\n      />\r\n      <Divider vertical />\r\n      <RadioIconButton\r\n        title=\"Erase (E)\"\r\n        onClick={() => onSettingChange({ type: \"erase\" })}\r\n        isSelected={settings.type === \"erase\"}\r\n        disabled={disabledActions.includes(\"erase\")}\r\n      >\r\n        <EraseIcon />\r\n      </RadioIconButton>\r\n      <EraseAllButton\r\n        onToolAction={onToolAction}\r\n        disabled={disabledActions.includes(\"erase\")}\r\n      />\r\n      <Divider vertical />\r\n      <AlphaBlendToggle\r\n        useBlending={settings.useBlending}\r\n        onBlendingChange={(useBlending) => onSettingChange({ useBlending })}\r\n      />\r\n      <ShapeFillToggle\r\n        useShapeFill={settings.useShapeFill}\r\n        onShapeFillChange={(useShapeFill) => onSettingChange({ useShapeFill })}\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default DrawingToolSettings;\r\n","import { Flex } from \"theme-ui\";\r\n\r\nimport ColorControl from \"./shared/ColorControl\";\r\n\r\nimport { PointerToolSettings as PointerToolSettingsType } from \"../../types/Pointer\";\r\n\r\ntype PointerToolSettingsProps = {\r\n  settings: PointerToolSettingsType;\r\n  onSettingChange: (change: Partial<PointerToolSettingsType>) => void;\r\n};\r\n\r\nfunction PointerToolSettings({\r\n  settings,\r\n  onSettingChange,\r\n}: PointerToolSettingsProps) {\r\n  return (\r\n    <Flex sx={{ alignItems: \"center\" }}>\r\n      <ColorControl\r\n        color={settings.color}\r\n        onColorChange={(color) => onSettingChange({ color })}\r\n        exclude={[\"black\", \"darkGray\", \"lightGray\", \"white\", \"primary\"]}\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default PointerToolSettings;\r\n","function SelectRectangleIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <rect fill=\"none\" height=\"24\" width=\"24\" />\r\n      <path d=\"M18.75 3c1.186 0 2.165.93 2.245 2.097L21 5.25V11a1 1 0 01-2 0V6.167a1.17 1.17 0 00-1.04-1.16L17.833 5H6.167a1.17 1.17 0 00-1.16 1.04L5 6.167v11.666a1.17 1.17 0 001.04 1.16l.127.007H11a1 1 0 010 2H5.25a2.257 2.257 0 01-2.245-2.097L3 18.75V5.25c0-1.186.93-2.165 2.097-2.245L5.25 3h13.5z\" />\r\n      <path d=\"M14.33 10h-.03a1.34 1.34 0 00-1.3 1.34v10c.02.6.39 1.092.926 1.27l.153.05h.251l.14-.007a1.35 1.35 0 00.94-.533l2.304-3.45h3.956a1.323 1.323 0 001.26-.884 1.33 1.33 0 00-.434-1.494l-7.323-5.986A1.312 1.312 0 0014.33 10z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectRectangleIcon;\r\n","function SelectPathIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <rect fill=\"none\" height=\"24\" width=\"24\" />\r\n      <path d=\"M5 17a1 1 0 011 1 4 4 0 001.6 3.2 1 1 0 11-1.2 1.6A6 6 0 014 18a1 1 0 011-1zM6.087 16.521a1 1 0 011.322-.504c.898.402 1.815.683 2.744.836a1 1 0 01-.326 1.974 13.145 13.145 0 01-3.236-.984 1 1 0 01-.504-1.322zM12 1c6.031 0 11 3.974 11 9.022a8.19 8.19 0 01-.376 2.278 1 1 0 01-1.908-.6A6.162 6.162 0 0021 10c0-3.811-3.988-7-9-7-5.012 0-9 3.189-9 6.992a5.8 5.8 0 001.143 3.412 1 1 0 11-1.606 1.192A7.806 7.806 0 011 10c0-5.026 4.969-9 11-9z\" />\r\n      <path d=\"M5 13a3 3 0 100 6 3 3 0 000-6zm0 2a1 1 0 110 2 1 1 0 010-2zM14.488 10.35l-.187-.01A1.34 1.34 0 0013 11.68v10c.02.6.39 1.092.926 1.27a1 1 0 00.314.05h.09l.158-.01.153-.034c.343-.09.592-.26.769-.496l2.304-3.45h3.956a1.323 1.323 0 001.26-.884 1.33 1.33 0 00-.434-1.494l-7.323-5.986a1.313 1.313 0 00-.685-.297z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectPathIcon;\r\n","import { Flex } from \"theme-ui\";\r\n\r\nimport {\r\n  SelectToolSettings as SelectToolSettingsType,\r\n  SelectToolType,\r\n} from \"../../types/Select\";\r\n\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport ToolSection from \"./shared/ToolSection\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\n\r\nimport RectIcon from \"../../icons/SelectRectangleIcon\";\r\nimport PathIcon from \"../../icons/SelectPathIcon\";\r\n\r\ntype SelectToolSettingsProps = {\r\n  settings: SelectToolSettingsType;\r\n  onSettingChange: (change: Partial<SelectToolSettingsType>) => void;\r\n};\r\n\r\nfunction SelectToolSettings({\r\n  settings,\r\n  onSettingChange,\r\n}: SelectToolSettingsProps) {\r\n  // Keyboard shotcuts\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.selectPath(event)) {\r\n      onSettingChange({ type: \"path\" });\r\n    } else if (shortcuts.selectRect(event)) {\r\n      onSettingChange({ type: \"rectangle\" });\r\n    }\r\n  }\r\n  useKeyboard(handleKeyDown);\r\n\r\n  const tools = [\r\n    {\r\n      id: \"rectangle\",\r\n      title: \"Rectangle Selection (R)\",\r\n      isSelected: settings.type === \"rectangle\",\r\n      icon: <RectIcon />,\r\n    },\r\n    {\r\n      id: \"path\",\r\n      title: \"Lasso Selection (L)\",\r\n      isSelected: settings.type === \"path\",\r\n      icon: <PathIcon />,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Flex sx={{ alignItems: \"center\" }}>\r\n      <ToolSection\r\n        tools={tools}\r\n        onToolClick={(tool) =>\r\n          onSettingChange({ type: tool.id as SelectToolType })\r\n        }\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default SelectToolSettings;\r\n","function MoveToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M21.5 4c-.83 0-1.5.67-1.5 1.5v5c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-8c0-.83-.67-1.5-1.5-1.5S16 1.67 16 2.5v8c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-9c0-.83-.67-1.5-1.5-1.5S12 .67 12 1.5v8.99c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.5c0-.83-.67-1.5-1.5-1.5S8 3.67 8 4.5v11.41l-4.12-2.35c-.58-.33-1.3-.24-1.78.22-.6.58-.62 1.54-.03 2.13l6.78 6.89c.75.77 1.77 1.2 2.85 1.2H19c2.21 0 4-1.79 4-4V5.5c0-.83-.67-1.5-1.5-1.5z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default MoveToolIcon;\r\n","function FogToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FogToolIcon;\r\n","function MeasureToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n      transform=\"scale(-1 1)\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M17.66,17.66l-0.71,0.71c-0.2,0.2-0.51,0.2-0.71,0l0,0c-0.2-0.2-0.2-0.51,0-0.71l0.71-0.71l-1.94-1.94l-0.71,0.71 c-0.2,0.2-0.51,0.2-0.71,0l0,0c-0.2-0.2-0.2-0.51,0-0.71l0.71-0.71l-1.94-1.94l-0.71,0.71c-0.2,0.2-0.51,0.2-0.71,0l0,0 c-0.2-0.2-0.2-0.51,0-0.71l0.71-0.71L9.7,9.7l-0.71,0.71c-0.2,0.2-0.51,0.2-0.71,0l0,0c-0.2-0.2-0.2-0.51,0-0.71l0.71-0.71 L7.05,7.05L6.34,7.76c-0.2,0.2-0.51,0.2-0.71,0l0,0c-0.2-0.2-0.2-0.51,0-0.71l0.71-0.71L4.85,4.85C4.54,4.54,4,4.76,4,5.21V18 c0,1.1,0.9,2,2,2h12.79c0.45,0,0.67-0.54,0.35-0.85L17.66,17.66z M7,16v-4.76L12.76,17H8C7.45,17,7,16.55,7,16z\" />{\" \"}\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default MeasureToolIcon;\r\n","function ExpandMoreIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M24 24H0V0h24v24z\" fill=\"none\" opacity=\".87\" />\r\n      <path d=\"M15.88 9.29L12 13.17 8.12 9.29c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ExpandMoreIcon;\r\n","function PointerToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M6.387 17.964a4 4 0 005.657 0c1.042-1.041 3.564-5.45 7.569-13.225-7.776 4.004-12.184 6.527-13.226 7.568a4 4 0 000 5.657z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default PointerToolIcon;\r\n","function FullScreenIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M6 14c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1H7v-2c0-.55-.45-1-1-1zm0-4c.55 0 1-.45 1-1V7h2c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1zm11 7h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1s-1 .45-1 1v2zM14 6c0 .55.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FullScreenIcon;\r\n","function FullScreenIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M6 16h2v2c0 .55.45 1 1 1s1-.45 1-1v-3c0-.55-.45-1-1-1H6c-.55 0-1 .45-1 1s.45 1 1 1zm2-8H6c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1s-1 .45-1 1v2zm7 11c.55 0 1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1h-3c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1zm1-11V6c0-.55-.45-1-1-1s-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1h-2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default FullScreenIcon;\r\n","function NoteToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n      transform=\"scale(-1 1)\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M19,3H4.99C3.89,3,3,3.9,3,5l0.01,14c0,1.1,0.89,2,1.99,2h10l6-6V5C21,3.9,20.1,3,19,3z M8,8h8c0.55,0,1,0.45,1,1v0 c0,0.55-0.45,1-1,1H8c-0.55,0-1-0.45-1-1v0C7,8.45,7.45,8,8,8z M11,14H8c-0.55,0-1-0.45-1-1v0c0-0.55,0.45-1,1-1h3 c0.55,0,1,0.45,1,1v0C12,13.55,11.55,14,11,14z M14,19.5V15c0-0.55,0.45-1,1-1h4.5L14,19.5z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default NoteToolIcon;\r\n","function SelectToolIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <rect fill=\"none\" height=\"24\" width=\"24\" />\r\n      <path d=\"M5 17a1 1 0 011 1 4 4 0 001.6 3.2 1 1 0 11-1.2 1.6A6 6 0 014 18a1 1 0 011-1zM6.087 16.521a1 1 0 011.322-.504c.898.402 1.815.683 2.744.836a1 1 0 01-.326 1.974 13.145 13.145 0 01-3.236-.984 1 1 0 01-.504-1.322zM12 1c6.031 0 11 3.974 11 9.022a8.19 8.19 0 01-.376 2.278 1 1 0 01-1.908-.6A6.162 6.162 0 0021 10c0-3.811-3.988-7-9-7-5.012 0-9 3.189-9 6.992a5.8 5.8 0 001.143 3.412 1 1 0 11-1.606 1.192A7.806 7.806 0 011 10c0-5.026 4.969-9 11-9z\" />\r\n      <path d=\"M5 13a3 3 0 100 6 3 3 0 000-6zm0 2a1 1 0 110 2 1 1 0 010-2zM14.488 10.35l-.187-.01A1.34 1.34 0 0013 11.68v10c.02.6.39 1.092.926 1.27a1 1 0 00.314.05h.09l.158-.01.153-.034c.343-.09.592-.26.769-.496l2.304-3.45h3.956a1.323 1.323 0 001.26-.884 1.33 1.33 0 00-.434-1.494l-7.323-5.986a1.313 1.313 0 00-.685-.297z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectToolIcon;\r\n","function UndoIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L3.71 8.71C3.08 8.08 2 8.52 2 9.41V15c0 .55.45 1 1 1h5.59c.89 0 1.34-1.08.71-1.71l-1.91-1.91c1.39-1.16 3.16-1.88 5.12-1.88 3.16 0 5.89 1.84 7.19 4.5.27.56.91.84 1.5.64.71-.23 1.07-1.04.75-1.72C20.23 10.42 16.65 8 12.5 8z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default UndoIcon;\r\n","import React from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport UndoIcon from \"../../../icons/UndoIcon\";\r\n\r\nimport { isMacLike } from \"../../../helpers/shared\";\r\n\r\ntype UndoButtonProps = {\r\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\r\n  disabled?: boolean;\r\n};\r\n\r\nfunction UndoButton({ onClick, disabled }: UndoButtonProps) {\r\n  return (\r\n    <IconButton\r\n      title={`Undo (${isMacLike ? \"Cmd\" : \"Ctrl\"} + Z)`}\r\n      aria-label={`Undo (${isMacLike ? \"Cmd\" : \"Ctrl\"} + Z)`}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n    >\r\n      <UndoIcon />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default UndoButton;\r\n","function RedoIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.16 0-7.74 2.42-9.44 5.93-.32.67.04 1.47.75 1.71.59.2 1.23-.08 1.5-.64 1.3-2.66 4.03-4.5 7.19-4.5 1.95 0 3.73.72 5.12 1.88l-1.91 1.91c-.63.63-.19 1.71.7 1.71H21c.55 0 1-.45 1-1V9.41c0-.89-1.08-1.34-1.71-.71l-1.89 1.9z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default RedoIcon;\r\n","import React from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport RedoIcon from \"../../../icons/RedoIcon\";\r\n\r\nimport { isMacLike } from \"../../../helpers/shared\";\r\n\r\ntype RedoButtonProps = {\r\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\r\n  disabled?: boolean;\r\n};\r\n\r\nfunction RedoButton({ onClick, disabled }: RedoButtonProps) {\r\n  return (\r\n    <IconButton\r\n      title={`Redo (${isMacLike ? \"Cmd\" : \"Ctrl\"} + Shift + Z)`}\r\n      aria-label={`Redo (${isMacLike ? \"Cmd\" : \"Ctrl\"} + Shift + Z)`}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n    >\r\n      <RedoIcon />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nexport default RedoButton;\r\n","import { useState, Fragment, useEffect, useMemo } from \"react\";\r\nimport { IconButton, Flex, Box } from \"theme-ui\";\r\n\r\nimport RadioIconButton from \"../RadioIconButton\";\r\nimport Divider from \"../Divider\";\r\n\r\nimport SelectMapButton from \"./SelectMapButton\";\r\n\r\nimport FogToolSettings from \"../controls/FogToolSettings\";\r\nimport DrawingToolSettings from \"../controls/DrawingToolSettings\";\r\nimport PointerToolSettings from \"../controls/PointerToolSettings\";\r\nimport SelectToolSettings from \"../controls/SelectToolSettings\";\r\n\r\nimport MoveToolIcon from \"../../icons/MoveToolIcon\";\r\nimport FogToolIcon from \"../../icons/FogToolIcon\";\r\nimport BrushToolIcon from \"../../icons/BrushToolIcon\";\r\nimport MeasureToolIcon from \"../../icons/MeasureToolIcon\";\r\nimport ExpandMoreIcon from \"../../icons/ExpandMoreIcon\";\r\nimport PointerToolIcon from \"../../icons/PointerToolIcon\";\r\nimport FullScreenIcon from \"../../icons/FullScreenIcon\";\r\nimport FullScreenExitIcon from \"../../icons/FullScreenExitIcon\";\r\nimport NoteToolIcon from \"../../icons/NoteToolIcon\";\r\nimport SelectToolIcon from \"../../icons/SelectToolIcon\";\r\n\r\nimport UndoButton from \"../controls/shared/UndoButton\";\r\nimport RedoButton from \"../controls/shared/RedoButton\";\r\n\r\nimport useSetting from \"../../hooks/useSetting\";\r\n\r\nimport { Map, MapTool, MapToolId } from \"../../types/Map\";\r\nimport { MapState } from \"../../types/MapState\";\r\nimport {\r\n  MapChangeEventHandler,\r\n  MapResetEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Settings } from \"../../types/Settings\";\r\n\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\nimport { isEmpty } from \"../../helpers/shared\";\r\nimport { MapActions } from \"../../hooks/useMapActions\";\r\n\r\ntype MapControlsProps = {\r\n  onMapChange: MapChangeEventHandler;\r\n  onMapReset: MapResetEventHandler;\r\n  map: Map | null;\r\n  mapState: MapState | null;\r\n  mapActions: MapActions;\r\n  allowMapChange: boolean;\r\n  selectedToolId: MapToolId;\r\n  onSelectedToolChange: (toolId: MapToolId) => void;\r\n  toolSettings: Settings;\r\n  onToolSettingChange: (change: Partial<Settings>) => void;\r\n  onToolAction: (actionId: string) => void;\r\n  onUndo: () => void;\r\n  onRedo: () => void;\r\n};\r\n\r\nfunction MapContols({\r\n  onMapChange,\r\n  onMapReset,\r\n  map,\r\n  mapState,\r\n  mapActions,\r\n  allowMapChange,\r\n  selectedToolId,\r\n  onSelectedToolChange,\r\n  toolSettings,\r\n  onToolSettingChange,\r\n  onToolAction,\r\n  onUndo,\r\n  onRedo,\r\n}: MapControlsProps) {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const [fullScreen, setFullScreen] = useSetting(\"map.fullScreen\");\r\n\r\n  const userId = useUserId();\r\n\r\n  const disabledControls = useMemo(() => {\r\n    const isOwner = map && map.owner === userId;\r\n    const allowMapDrawing = isOwner || mapState?.editFlags.includes(\"drawing\");\r\n    const allowFogDrawing = isOwner || mapState?.editFlags.includes(\"fog\");\r\n    const allowNoteEditing = isOwner || mapState?.editFlags.includes(\"notes\");\r\n\r\n    const disabled: MapToolId[] = [];\r\n    if (!allowMapChange) {\r\n      disabled.push(\"map\");\r\n    }\r\n    if (!map) {\r\n      disabled.push(\"move\");\r\n      disabled.push(\"measure\");\r\n      disabled.push(\"pointer\");\r\n      disabled.push(\"select\");\r\n    }\r\n    if (!map || !allowMapDrawing) {\r\n      disabled.push(\"drawing\");\r\n    }\r\n    if (!map || !allowFogDrawing) {\r\n      disabled.push(\"fog\");\r\n    }\r\n    if (!map || !allowNoteEditing) {\r\n      disabled.push(\"note\");\r\n    }\r\n    if (!map || mapActions.actionIndex < 0) {\r\n      disabled.push(\"undo\");\r\n    }\r\n    if (!map || mapActions.actionIndex === mapActions.actions.length - 1) {\r\n      disabled.push(\"redo\");\r\n    }\r\n    return disabled;\r\n  }, [map, mapState, mapActions, allowMapChange, userId]);\r\n\r\n  // Change back to move tool if selected tool becomes disabled\r\n  useEffect(() => {\r\n    if (disabledControls.includes(selectedToolId)) {\r\n      onSelectedToolChange(\"move\");\r\n    }\r\n  }, [selectedToolId, disabledControls, onSelectedToolChange]);\r\n\r\n  const disabledSettings = useMemo(() => {\r\n    const disabled: Partial<Record<keyof Settings, string[]>> = {\r\n      drawing: [],\r\n    };\r\n    if (mapState && isEmpty(mapState.drawings)) {\r\n      disabled.drawing?.push(\"erase\");\r\n    }\r\n    return disabled;\r\n  }, [mapState]);\r\n\r\n  const toolsById: Record<string, MapTool> = {\r\n    move: {\r\n      id: \"move\",\r\n      icon: <MoveToolIcon />,\r\n      title: \"Move Tool (W)\",\r\n    },\r\n    select: {\r\n      id: \"select\",\r\n      icon: <SelectToolIcon />,\r\n      title: \"Select Tool (S)\",\r\n      SettingsComponent: SelectToolSettings,\r\n    },\r\n    fog: {\r\n      id: \"fog\",\r\n      icon: <FogToolIcon />,\r\n      title: \"Fog Tool (F)\",\r\n      SettingsComponent: FogToolSettings,\r\n    },\r\n    drawing: {\r\n      id: \"drawing\",\r\n      icon: <BrushToolIcon />,\r\n      title: \"Drawing Tool (D)\",\r\n      SettingsComponent: DrawingToolSettings,\r\n    },\r\n    measure: {\r\n      id: \"measure\",\r\n      icon: <MeasureToolIcon />,\r\n      title: \"Measure Tool (M)\",\r\n    },\r\n    pointer: {\r\n      id: \"pointer\",\r\n      icon: <PointerToolIcon />,\r\n      title: \"Pointer Tool (Q)\",\r\n      SettingsComponent: PointerToolSettings,\r\n    },\r\n    note: {\r\n      id: \"note\",\r\n      icon: <NoteToolIcon />,\r\n      title: \"Note Tool (N)\",\r\n    },\r\n  };\r\n  const tools: MapToolId[] = [\r\n    \"move\",\r\n    \"select\",\r\n    \"fog\",\r\n    \"drawing\",\r\n    \"measure\",\r\n    \"pointer\",\r\n    \"note\",\r\n  ];\r\n\r\n  const sections = [\r\n    {\r\n      id: \"map\",\r\n      component: (\r\n        <SelectMapButton\r\n          onMapChange={onMapChange}\r\n          onMapReset={onMapReset}\r\n          currentMap={map}\r\n          currentMapState={mapState}\r\n          disabled={disabledControls.includes(\"map\")}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      id: \"tools\",\r\n      component: tools.map((tool) => (\r\n        <RadioIconButton\r\n          key={tool}\r\n          title={toolsById[tool].title}\r\n          onClick={() => onSelectedToolChange(tool)}\r\n          isSelected={selectedToolId === tool}\r\n          disabled={disabledControls.includes(tool)}\r\n        >\r\n          {toolsById[tool].icon}\r\n        </RadioIconButton>\r\n      )),\r\n    },\r\n    {\r\n      id: \"history\",\r\n      component: (\r\n        <>\r\n          <UndoButton\r\n            onClick={onUndo}\r\n            disabled={disabledControls.includes(\"undo\")}\r\n          />\r\n          <RedoButton\r\n            onClick={onRedo}\r\n            disabled={disabledControls.includes(\"redo\")}\r\n          />\r\n        </>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  let controls = null;\r\n  if (sections.length === 1 && sections[0].id === \"map\") {\r\n    controls = (\r\n      <Box\r\n        sx={{\r\n          display: \"block\",\r\n          backgroundColor: \"overlay\",\r\n          borderRadius: \"4px\",\r\n        }}\r\n        m={2}\r\n      >\r\n        {sections[0].component}\r\n      </Box>\r\n    );\r\n  } else if (sections.length > 0) {\r\n    controls = (\r\n      <>\r\n        <IconButton\r\n          aria-label={isExpanded ? \"Hide Map Controls\" : \"Show Map Controls\"}\r\n          title={isExpanded ? \"Hide Map Controls\" : \"Show Map Controls\"}\r\n          onClick={() => setIsExpanded(!isExpanded)}\r\n          sx={{\r\n            transform: `rotate(${isExpanded ? \"0\" : \"180deg\"})`,\r\n            display: \"block\",\r\n            backgroundColor: \"overlay\",\r\n            borderRadius: \"50%\",\r\n          }}\r\n          m={2}\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n        <Box\r\n          sx={{\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            display: isExpanded ? \"flex\" : \"none\",\r\n            backgroundColor: \"overlay\",\r\n            borderRadius: \"4px\",\r\n          }}\r\n          p={2}\r\n        >\r\n          {sections.map((section, index) => (\r\n            <Fragment key={section.id}>\r\n              {section.component}\r\n              {index !== sections.length - 1 && <Divider />}\r\n            </Fragment>\r\n          ))}\r\n        </Box>\r\n      </>\r\n    );\r\n  }\r\n\r\n  function getToolSettings() {\r\n    const Settings = toolsById[selectedToolId].SettingsComponent;\r\n    if (\r\n      !Settings ||\r\n      (selectedToolId !== \"fog\" &&\r\n        selectedToolId !== \"drawing\" &&\r\n        selectedToolId !== \"pointer\" &&\r\n        selectedToolId !== \"select\")\r\n    ) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Box\r\n        sx={{\r\n          position: \"absolute\",\r\n          top: \"4px\",\r\n          left: \"50%\",\r\n          transform: \"translateX(-50%)\",\r\n          backgroundColor: \"overlay\",\r\n          borderRadius: \"4px\",\r\n        }}\r\n        p={1}\r\n      >\r\n        <Settings\r\n          settings={toolSettings[selectedToolId]}\r\n          onSettingChange={(\r\n            change: Partial<Settings[\"fog\" | \"drawing\" | \"pointer\" | \"select\"]>\r\n          ) =>\r\n            onToolSettingChange({\r\n              [selectedToolId]: {\r\n                ...toolSettings[selectedToolId],\r\n                ...change,\r\n              },\r\n            })\r\n          }\r\n          onToolAction={onToolAction}\r\n          disabledActions={disabledSettings[selectedToolId]}\r\n        />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.moveTool(event) && !disabledControls.includes(\"move\")) {\r\n      onSelectedToolChange(\"move\");\r\n    }\r\n    if (shortcuts.selectTool(event) && !disabledControls.includes(\"select\")) {\r\n      onSelectedToolChange(\"select\");\r\n    }\r\n    if (shortcuts.drawingTool(event) && !disabledControls.includes(\"drawing\")) {\r\n      onSelectedToolChange(\"drawing\");\r\n    }\r\n    if (shortcuts.fogTool(event) && !disabledControls.includes(\"fog\")) {\r\n      onSelectedToolChange(\"fog\");\r\n    }\r\n    if (shortcuts.measureTool(event) && !disabledControls.includes(\"measure\")) {\r\n      onSelectedToolChange(\"measure\");\r\n    }\r\n    if (shortcuts.pointerTool(event) && !disabledControls.includes(\"pointer\")) {\r\n      onSelectedToolChange(\"pointer\");\r\n    }\r\n    if (shortcuts.noteTool(event) && !disabledControls.includes(\"note\")) {\r\n      onSelectedToolChange(\"note\");\r\n    }\r\n    if (shortcuts.redo(event) && !disabledControls.includes(\"redo\")) {\r\n      onRedo();\r\n    }\r\n    if (shortcuts.undo(event) && !disabledControls.includes(\"undo\")) {\r\n      onUndo();\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  return (\r\n    <>\r\n      <Flex\r\n        sx={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          right: 0,\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n        }}\r\n        mx={1}\r\n      >\r\n        {controls}\r\n      </Flex>\r\n      {getToolSettings()}\r\n      <Box\r\n        sx={{\r\n          position: \"absolute\",\r\n          right: \"4px\",\r\n          bottom: 0,\r\n          backgroundColor: \"overlay\",\r\n          borderRadius: \"50%\",\r\n        }}\r\n        m={2}\r\n      >\r\n        <IconButton\r\n          onClick={() => setFullScreen(!fullScreen)}\r\n          aria-label={fullScreen ? \"Exit Full Screen\" : \"Enter Full Screen\"}\r\n          title={fullScreen ? \"Exit Full Screen\" : \"Enter Full Screen\"}\r\n        >\r\n          {fullScreen ? <FullScreenExitIcon /> : <FullScreenIcon />}\r\n        </IconButton>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MapContols;\r\n","import React, { useEffect } from \"react\";\r\n\r\nfunction usePreventContextMenu(elementRef: React.RefObject<HTMLElement>) {\r\n  useEffect(() => {\r\n    // Stop conext menu i.e. right click dialog\r\n    function preventContextMenu(event: MouseEvent) {\r\n      event.preventDefault();\r\n      return false;\r\n    }\r\n    const element = elementRef.current;\r\n    if (element) {\r\n      element.addEventListener(\"contextmenu\", preventContextMenu, {\r\n        passive: false,\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (element) {\r\n        element.removeEventListener(\"contextmenu\", preventContextMenu);\r\n      }\r\n    };\r\n  }, [elementRef]);\r\n}\r\n\r\nexport default usePreventContextMenu;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { Box } from \"theme-ui\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\nimport { Stage, Layer, Image, Group } from \"react-konva\";\r\nimport Konva from \"konva\";\r\n\r\nimport useMapImage from \"../../hooks/useMapImage\";\r\nimport usePreventOverscroll from \"../../hooks/usePreventOverscroll\";\r\nimport useStageInteraction from \"../../hooks/useStageInteraction\";\r\nimport useImageCenter from \"../../hooks/useImageCenter\";\r\nimport usePreventContextMenu from \"../../hooks/usePreventContextMenu\";\r\n\r\nimport { getGridMaxZoom } from \"../../helpers/grid\";\r\nimport KonvaBridge from \"../../helpers/KonvaBridge\";\r\n\r\nimport {\r\n  MapInteractionEmitter,\r\n  MapInteractionProvider,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport { GridProvider } from \"../../contexts/GridContext\";\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\nimport { Map, MapToolId } from \"../../types/Map\";\r\nimport { MapState } from \"../../types/MapState\";\r\n\r\ntype SelectedToolChangeEventHanlder = (tool: MapToolId) => void;\r\n\r\ntype MapInteractionProps = {\r\n  map: Map | null;\r\n  mapState: MapState | null;\r\n  children?: React.ReactNode;\r\n  controls: React.ReactNode;\r\n  selectedToolId: MapToolId;\r\n  onSelectedToolChange: SelectedToolChangeEventHanlder;\r\n};\r\n\r\nfunction MapInteraction({\r\n  map,\r\n  mapState,\r\n  children,\r\n  controls,\r\n  selectedToolId,\r\n  onSelectedToolChange,\r\n}: MapInteractionProps) {\r\n  const [mapImage, mapImageStatus] = useMapImage(map);\r\n\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  useEffect(() => {\r\n    if (!map || !mapState || mapState.mapId !== map.id) {\r\n      setMapLoaded(false);\r\n    } else if (mapImageStatus === \"loaded\") {\r\n      setMapLoaded(true);\r\n    }\r\n  }, [mapImageStatus, map, mapState]);\r\n\r\n  const [stageWidth, setStageWidth] = useState(1);\r\n  const [stageHeight, setStageHeight] = useState(1);\r\n  const [stageScale, setStageScale] = useState(1);\r\n  const [preventMapInteraction, setPreventMapInteraction] = useState(false);\r\n\r\n  // Avoid state udpates when panning the map by using a ref and updating the konva element directly\r\n  const stageTranslateRef = useRef({ x: 0, y: 0 });\r\n  const mapStageRef = useMapStage();\r\n  const mapLayerRef = useRef<Konva.Layer>(null);\r\n  const mapImageRef = useRef<Konva.Image>(null);\r\n\r\n  function handleResize(width?: number, height?: number) {\r\n    if (width && height && width > 0 && height > 0) {\r\n      setStageWidth(width);\r\n      setStageHeight(height);\r\n    }\r\n  }\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  usePreventOverscroll(containerRef);\r\n  usePreventContextMenu(containerRef);\r\n\r\n  const [mapWidth, mapHeight] = useImageCenter(\r\n    map,\r\n    mapStageRef,\r\n    stageWidth,\r\n    stageHeight,\r\n    stageTranslateRef,\r\n    setStageScale,\r\n    mapLayerRef,\r\n    containerRef\r\n  );\r\n\r\n  const previousSelectedToolRef = useRef(selectedToolId);\r\n  const [currentMouseButtons, setCurentMouseButtons] = useState(0);\r\n\r\n  const [interactionEmitter] = useState(new MapInteractionEmitter());\r\n\r\n  useStageInteraction(\r\n    mapStageRef,\r\n    stageScale,\r\n    setStageScale,\r\n    stageTranslateRef,\r\n    mapLayerRef,\r\n    getGridMaxZoom(map?.grid),\r\n    selectedToolId,\r\n    preventMapInteraction,\r\n    {\r\n      onPinchStart: () => {\r\n        // Change to move tool when pinching and zooming\r\n        previousSelectedToolRef.current = selectedToolId;\r\n        onSelectedToolChange(\"move\");\r\n      },\r\n      onPinchEnd: () => {\r\n        onSelectedToolChange(previousSelectedToolRef.current);\r\n      },\r\n      onDrag: (props) => {\r\n        const { first, last, buttons } = props;\r\n        if (buttons !== currentMouseButtons) {\r\n          setCurentMouseButtons(buttons);\r\n        }\r\n        if (first) {\r\n          interactionEmitter.emit(\"dragStart\", props);\r\n        } else if (last) {\r\n          interactionEmitter.emit(\"dragEnd\", props);\r\n        } else {\r\n          interactionEmitter.emit(\"drag\", props);\r\n        }\r\n      },\r\n    }\r\n  );\r\n\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    // Change to move tool when pressing space\r\n    if (shortcuts.move(event) && selectedToolId === \"move\") {\r\n      // Stop active state on move icon from being selected\r\n      event.preventDefault();\r\n    }\r\n    if (map && shortcuts.move(event) && selectedToolId !== \"move\") {\r\n      event.preventDefault();\r\n      previousSelectedToolRef.current = selectedToolId;\r\n      onSelectedToolChange(\"move\");\r\n    }\r\n    if (!event.repeat && shortcuts.move(event) && selectedToolId === \"move\") {\r\n      previousSelectedToolRef.current = \"move\";\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (shortcuts.move(event) && selectedToolId === \"move\") {\r\n      onSelectedToolChange(previousSelectedToolRef.current);\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n\r\n  function getCursorForTool(tool: MapToolId) {\r\n    if (currentMouseButtons === 2) {\r\n      return \"crosshair\";\r\n    } else if (currentMouseButtons > 2) {\r\n      return \"move\";\r\n    }\r\n    switch (tool) {\r\n      case \"move\":\r\n        return \"move\";\r\n      case \"fog\":\r\n      case \"drawing\":\r\n        return \"crosshair\";\r\n      case \"measure\":\r\n      case \"pointer\":\r\n      case \"note\":\r\n      case \"select\":\r\n        return \"crosshair\";\r\n      default:\r\n        return \"default\";\r\n    }\r\n  }\r\n\r\n  const mapInteraction = {\r\n    stageScale,\r\n    stageWidth,\r\n    stageHeight,\r\n    setPreventMapInteraction,\r\n    mapWidth,\r\n    mapHeight,\r\n    interactionEmitter,\r\n  };\r\n\r\n  return (\r\n    <MapInteractionProvider value={mapInteraction}>\r\n      <GridProvider\r\n        grid={map?.grid || null}\r\n        width={mapWidth}\r\n        height={mapHeight}\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"relative\",\r\n            cursor: getCursorForTool(selectedToolId),\r\n            touchAction: \"none\",\r\n            outline: \"none\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n          }}\r\n          ref={containerRef}\r\n          className=\"map\"\r\n        >\r\n          <ReactResizeDetector\r\n            handleWidth\r\n            handleHeight\r\n            onResize={handleResize}\r\n            targetRef={containerRef}\r\n          >\r\n            <KonvaBridge\r\n              stageRender={(children) => (\r\n                <Stage\r\n                  // @ts-ignore\r\n                  width={stageWidth}\r\n                  height={stageHeight}\r\n                  scale={{ x: stageScale, y: stageScale }}\r\n                  ref={mapStageRef}\r\n                >\r\n                  {children}\r\n                </Stage>\r\n              )}\r\n            >\r\n              <Layer ref={mapLayerRef}>\r\n                <Image\r\n                  image={(mapLoaded && mapImage) || undefined}\r\n                  width={mapWidth}\r\n                  height={mapHeight}\r\n                  id=\"mapImage\"\r\n                  ref={mapImageRef}\r\n                />\r\n                {mapLoaded && children}\r\n                <Group id=\"portal\" />\r\n              </Layer>\r\n            </KonvaBridge>\r\n          </ReactResizeDetector>\r\n          {controls}\r\n        </Box>\r\n      </GridProvider>\r\n    </MapInteractionProvider>\r\n  );\r\n}\r\n\r\nexport default MapInteraction;\r\n","import simplify from \"simplify-js\";\r\nimport polygonClipping, { Geom, Polygon, Ring } from \"polygon-clipping\";\r\n\r\nimport Vector2, { BoundingBox } from \"./Vector2\";\r\nimport Size from \"./Size\";\r\nimport { toDegrees } from \"./shared\";\r\nimport { getNearestCellCoordinates, getCellLocation } from \"./grid\";\r\n\r\nimport {\r\n  ShapeType,\r\n  ShapeData,\r\n  PointsData,\r\n  RectData,\r\n  CircleData,\r\n} from \"../types/Drawing\";\r\nimport { Fog } from \"../types/Fog\";\r\nimport { Grid } from \"../types/Grid\";\r\n\r\n/**\r\n *\r\n * @param {ShapeType} type\r\n * @param {Vector2} brushPosition\r\n * @returns {ShapeData}\r\n */\r\nexport function getDefaultShapeData(\r\n  type: ShapeType,\r\n  brushPosition: Vector2\r\n): ShapeData {\r\n  if (type === \"line\") {\r\n    return {\r\n      points: [\r\n        { x: brushPosition.x, y: brushPosition.y },\r\n        { x: brushPosition.x, y: brushPosition.y },\r\n      ],\r\n    };\r\n  } else if (type === \"circle\") {\r\n    return { x: brushPosition.x, y: brushPosition.y, radius: 0 };\r\n  } else if (type === \"rectangle\") {\r\n    return {\r\n      x: brushPosition.x,\r\n      y: brushPosition.y,\r\n      width: 0,\r\n      height: 0,\r\n    };\r\n  } else if (type === \"triangle\") {\r\n    return {\r\n      points: [\r\n        { x: brushPosition.x, y: brushPosition.y },\r\n        { x: brushPosition.x, y: brushPosition.y },\r\n        { x: brushPosition.x, y: brushPosition.y },\r\n      ],\r\n    };\r\n  } else {\r\n    throw new Error(\"Shape type not implemented\");\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Vector2} cellSize\r\n * @returns {Vector2}\r\n */\r\nexport function getGridCellRatio(cellSize: Vector2): Vector2 {\r\n  if (cellSize.x < cellSize.y) {\r\n    return { x: cellSize.y / cellSize.x, y: 1 };\r\n  } else if (cellSize.y < cellSize.x) {\r\n    return { x: 1, y: cellSize.x / cellSize.y };\r\n  } else {\r\n    return { x: 1, y: 1 };\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {ShapeType} type\r\n * @param {ShapeData} data\r\n * @param {Vector2} brushPosition\r\n * @param {Vector2} gridCellNormalizedSize\r\n * @returns {ShapeData}\r\n */\r\nexport function getUpdatedShapeData(\r\n  type: ShapeType,\r\n  data: ShapeData,\r\n  brushPosition: Vector2,\r\n  gridCellNormalizedSize: Vector2,\r\n  mapWidth: number,\r\n  mapHeight: number\r\n): ShapeData {\r\n  if (type === \"line\") {\r\n    data = data as PointsData;\r\n    return {\r\n      points: [data.points[0], { x: brushPosition.x, y: brushPosition.y }],\r\n    } as PointsData;\r\n  } else if (type === \"circle\") {\r\n    data = data as CircleData;\r\n    const gridRatio = getGridCellRatio(gridCellNormalizedSize);\r\n    const dif = Vector2.subtract(brushPosition, {\r\n      x: data.x,\r\n      y: data.y,\r\n    });\r\n    const scaled = Vector2.multiply(dif, gridRatio);\r\n    const distance = Vector2.magnitude(scaled);\r\n    return {\r\n      ...data,\r\n      radius: distance,\r\n    };\r\n  } else if (type === \"rectangle\") {\r\n    data = data as RectData;\r\n    const dif = Vector2.subtract(brushPosition, { x: data.x, y: data.y });\r\n    return {\r\n      ...data,\r\n      width: dif.x,\r\n      height: dif.y,\r\n    };\r\n  } else if (type === \"triangle\") {\r\n    data = data as PointsData;\r\n    // Convert to absolute coordinates\r\n    const mapSize = { x: mapWidth, y: mapHeight };\r\n    const brushPositionPixel = Vector2.multiply(brushPosition, mapSize);\r\n\r\n    const points = data.points;\r\n    const startPixel = Vector2.multiply(points[0], mapSize);\r\n    const dif = Vector2.subtract(brushPositionPixel, startPixel);\r\n    const length = Vector2.magnitude(dif);\r\n    const direction = Vector2.normalize(dif);\r\n    // Get the angle for a triangle who's width is the same as it's length\r\n    const angle = Math.atan(length / 2 / (length === 0 ? 1 : length));\r\n    const sideLength = length / Math.cos(angle);\r\n\r\n    const leftDir = Vector2.rotateDirection(direction, toDegrees(angle));\r\n    const rightDir = Vector2.rotateDirection(direction, -toDegrees(angle));\r\n\r\n    // Convert back to normalized coordinates\r\n    const leftDirNorm = Vector2.divide(leftDir, mapSize);\r\n    const rightDirNorm = Vector2.divide(rightDir, mapSize);\r\n\r\n    return {\r\n      points: [\r\n        points[0],\r\n        Vector2.add(Vector2.multiply(leftDirNorm, sideLength), points[0]),\r\n        Vector2.add(Vector2.multiply(rightDirNorm, sideLength), points[0]),\r\n      ],\r\n    };\r\n  } else {\r\n    throw new Error(\"Shape type not implemented\");\r\n  }\r\n}\r\n\r\n/**\r\n * Simplify points to a grid size\r\n * @param {Vector2[]} points\r\n * @param {number} tolerance\r\n */\r\nexport function simplifyPoints(\r\n  points: Vector2[],\r\n  tolerance: number\r\n): Vector2[] {\r\n  return simplify(points, tolerance);\r\n}\r\n\r\n/**\r\n * Merges overlapping fog shapes\r\n * @param {Fog[]} shapes\r\n * @param {boolean} ignoreHidden\r\n * @returns {Fog[]}\r\n */\r\nexport function mergeFogShapes(\r\n  shapes: Fog[],\r\n  ignoreHidden: boolean = true\r\n): Fog[] {\r\n  if (shapes.length === 0) {\r\n    return shapes;\r\n  }\r\n  let geometries: Geom[] = [];\r\n  for (let shape of shapes) {\r\n    if (ignoreHidden && !shape.visible) {\r\n      continue;\r\n    }\r\n    const shapePoints: Ring = shape.data.points.map(({ x, y }) => [x, y]);\r\n    const shapeHoles: Polygon = shape.data.holes.map((hole) =>\r\n      hole.map(({ x, y }: { x: number; y: number }) => [x, y])\r\n    );\r\n    let shapeGeom: Geom = [[shapePoints, ...shapeHoles]];\r\n    geometries.push(shapeGeom);\r\n  }\r\n  if (geometries.length === 0) {\r\n    return [];\r\n  }\r\n  try {\r\n    let union = polygonClipping.union(geometries[0], ...geometries.slice(1));\r\n    let merged: Fog[] = [];\r\n    for (let i = 0; i < union.length; i++) {\r\n      let holes: Vector2[][] = [];\r\n      if (union[i].length > 1) {\r\n        for (let j = 1; j < union[i].length; j++) {\r\n          holes.push(union[i][j].map(([x, y]) => ({ x, y })));\r\n        }\r\n      }\r\n      // find the first visible shape\r\n      let visibleShape = shapes.find((shape) => ignoreHidden || shape.visible);\r\n      if (!visibleShape) {\r\n        // TODO: handle if visible shape not found\r\n        throw Error;\r\n      }\r\n      merged.push({\r\n        // Use the data of the first visible shape as the merge\r\n        ...visibleShape,\r\n        id: `merged-${i}`,\r\n        data: {\r\n          points: union[i][0].map(([x, y]) => ({ x, y })),\r\n          holes,\r\n        },\r\n        type: \"fog\",\r\n      });\r\n    }\r\n    return merged;\r\n  } catch {\r\n    console.error(\"Unable to merge shapes\");\r\n    return shapes;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Fog[]} shapes\r\n * @param {boolean} maxPoints Max amount of points per shape to get bounds for\r\n * @returns {Vector2.BoundingBox[]}\r\n */\r\nexport function getFogShapesBoundingBoxes(\r\n  shapes: Fog[],\r\n  maxPoints = 0\r\n): BoundingBox[] {\r\n  let boxes = [];\r\n  for (let shape of shapes) {\r\n    if (maxPoints > 0 && shape.data.points.length > maxPoints) {\r\n      continue;\r\n    }\r\n    boxes.push(Vector2.getBoundingBox(shape.data.points));\r\n  }\r\n  return boxes;\r\n}\r\n\r\n/**\r\n * @typedef Guide\r\n * @property {Vector2} start\r\n * @property {Vector2} end\r\n * @property {(\"horizontal\"|\"vertical\")} orientation\r\n * @property {number} distance\r\n */\r\n\r\nexport type Guide = {\r\n  start: Vector2;\r\n  end: Vector2;\r\n  orientation: \"horizontal\" | \"vertical\";\r\n  distance: number;\r\n};\r\n\r\n/**\r\n * @param {Vector2} brushPosition Brush position in pixels\r\n * @param {Vector2} grid\r\n * @param {Vector2} gridCellSize Grid cell size in pixels\r\n * @param {Vector2} gridOffset\r\n * @param {Vector2} gridCellOffset\r\n * @param {number} snappingSensitivity\r\n * @param {Vector2} mapSize\r\n * @returns {Guide[]}\r\n */\r\nexport function getGuidesFromGridCell(\r\n  brushPosition: Vector2,\r\n  grid: Grid,\r\n  gridCellSize: Size,\r\n  gridOffset: Vector2,\r\n  gridCellOffset: Vector2,\r\n  snappingSensitivity: number,\r\n  mapSize: Vector2\r\n): Guide[] {\r\n  let boundingBoxes = [];\r\n  // Add map bounds\r\n  boundingBoxes.push(\r\n    Vector2.getBoundingBox([\r\n      { x: 0, y: 0 },\r\n      { x: 1, y: 1 },\r\n    ])\r\n  );\r\n  let offsetPosition = Vector2.subtract(\r\n    Vector2.subtract(brushPosition, gridOffset),\r\n    gridCellOffset\r\n  );\r\n  const cellCoords = getNearestCellCoordinates(\r\n    grid,\r\n    offsetPosition.x,\r\n    offsetPosition.y,\r\n    gridCellSize\r\n  );\r\n  let cellPosition = getCellLocation(\r\n    grid,\r\n    cellCoords.x,\r\n    cellCoords.y,\r\n    gridCellSize\r\n  );\r\n  cellPosition = Vector2.add(\r\n    Vector2.add(cellPosition, gridOffset),\r\n    gridCellOffset\r\n  );\r\n  // Normalize values so output is normalized\r\n  cellPosition = Vector2.divide(cellPosition, mapSize);\r\n  const gridCellNormalizedSize = Vector2.divide(gridCellSize, mapSize);\r\n  const brushPositionNorm = Vector2.divide(brushPosition, mapSize);\r\n  const boundingBox = Vector2.getBoundingBox([\r\n    {\r\n      x: cellPosition.x - gridCellNormalizedSize.x / 2,\r\n      y: cellPosition.y - gridCellNormalizedSize.y / 2,\r\n    },\r\n    {\r\n      x: cellPosition.x + gridCellNormalizedSize.x / 2,\r\n      y: cellPosition.y + gridCellNormalizedSize.y / 2,\r\n    },\r\n  ]);\r\n  boundingBoxes.push(boundingBox);\r\n  return getGuidesFromBoundingBoxes(\r\n    brushPositionNorm,\r\n    boundingBoxes,\r\n    gridCellNormalizedSize,\r\n    snappingSensitivity\r\n  );\r\n}\r\n\r\n/**\r\n * @param {Vector2} brushPosition\r\n * @param {Vector2.BoundingBox[]} boundingBoxes\r\n * @param {Vector2} gridCellSize\r\n * @param {number} snappingSensitivity\r\n * @returns {Guide[]}\r\n */\r\nexport function getGuidesFromBoundingBoxes(\r\n  brushPosition: Vector2,\r\n  boundingBoxes: BoundingBox[],\r\n  gridCellSize: Vector2, // TODO: check if this was meant to be of type Size\r\n  snappingSensitivity: number\r\n): Guide[] {\r\n  let horizontalEdges = [];\r\n  let verticalEdges = [];\r\n  for (let bounds of boundingBoxes) {\r\n    horizontalEdges.push({\r\n      start: { x: bounds.min.x, y: bounds.min.y },\r\n      end: { x: bounds.max.x, y: bounds.min.y },\r\n    });\r\n    horizontalEdges.push({\r\n      start: { x: bounds.min.x, y: bounds.center.y },\r\n      end: { x: bounds.max.x, y: bounds.center.y },\r\n    });\r\n    horizontalEdges.push({\r\n      start: { x: bounds.min.x, y: bounds.max.y },\r\n      end: { x: bounds.max.x, y: bounds.max.y },\r\n    });\r\n\r\n    verticalEdges.push({\r\n      start: { x: bounds.min.x, y: bounds.min.y },\r\n      end: { x: bounds.min.x, y: bounds.max.y },\r\n    });\r\n    verticalEdges.push({\r\n      start: { x: bounds.center.x, y: bounds.min.y },\r\n      end: { x: bounds.center.x, y: bounds.max.y },\r\n    });\r\n    verticalEdges.push({\r\n      start: { x: bounds.max.x, y: bounds.min.y },\r\n      end: { x: bounds.max.x, y: bounds.max.y },\r\n    });\r\n  }\r\n  let guides: Guide[] = [];\r\n  for (let edge of verticalEdges) {\r\n    const distance = Math.abs(brushPosition.x - edge.start.x);\r\n    if (distance / gridCellSize.x < snappingSensitivity) {\r\n      guides.push({ ...edge, distance, orientation: \"vertical\" });\r\n    }\r\n  }\r\n  for (let edge of horizontalEdges) {\r\n    const distance = Math.abs(brushPosition.y - edge.start.y);\r\n    if (distance / gridCellSize.y < snappingSensitivity) {\r\n      guides.push({ ...edge, distance, orientation: \"horizontal\" });\r\n    }\r\n  }\r\n  return guides;\r\n}\r\n\r\n/**\r\n * @param {Vector2} brushPosition\r\n * @param {Guide[]} guides\r\n * @returns {Guide[]}\r\n */\r\nexport function findBestGuides(\r\n  brushPosition: Vector2,\r\n  guides: Guide[]\r\n): Guide[] {\r\n  let bestGuides: Guide[] = [];\r\n  let verticalGuide = guides\r\n    .filter((guide) => guide.orientation === \"vertical\")\r\n    .sort((a, b) => a.distance - b.distance)[0];\r\n  let horizontalGuide = guides\r\n    .filter((guide) => guide.orientation === \"horizontal\")\r\n    .sort((a, b) => a.distance - b.distance)[0];\r\n\r\n  // Offset edges to match brush position\r\n  if (verticalGuide && !horizontalGuide) {\r\n    verticalGuide.start.y = Math.min(verticalGuide.start.y, brushPosition.y);\r\n    verticalGuide.end.y = Math.max(verticalGuide.end.y, brushPosition.y);\r\n    bestGuides.push(verticalGuide);\r\n  }\r\n  if (horizontalGuide && !verticalGuide) {\r\n    horizontalGuide.start.x = Math.min(\r\n      horizontalGuide.start.x,\r\n      brushPosition.x\r\n    );\r\n    horizontalGuide.end.x = Math.max(horizontalGuide.end.x, brushPosition.x);\r\n    bestGuides.push(horizontalGuide);\r\n  }\r\n  if (horizontalGuide && verticalGuide) {\r\n    verticalGuide.start.y = Math.min(\r\n      verticalGuide.start.y,\r\n      horizontalGuide.start.y\r\n    );\r\n    verticalGuide.end.y = Math.max(\r\n      verticalGuide.end.y,\r\n      horizontalGuide.start.y\r\n    );\r\n\r\n    horizontalGuide.start.x = Math.min(\r\n      horizontalGuide.start.x,\r\n      verticalGuide.start.x\r\n    );\r\n    horizontalGuide.end.x = Math.max(\r\n      horizontalGuide.end.x,\r\n      verticalGuide.start.x\r\n    );\r\n\r\n    bestGuides.push(horizontalGuide);\r\n    bestGuides.push(verticalGuide);\r\n  }\r\n  return bestGuides;\r\n}\r\n","import Konva from \"konva\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\n/**\r\n * @param {Konva.Node} node\r\n * @returns {Vector2}\r\n */\r\nexport function getRelativePointerPosition(\r\n  node: Konva.Node\r\n): Vector2 | undefined {\r\n  let transform = node.getAbsoluteTransform().copy();\r\n  transform.invert();\r\n  let position = node.getStage()?.getPointerPosition();\r\n  if (!position) {\r\n    return;\r\n  }\r\n  return transform.point(position);\r\n}\r\n\r\nexport function getRelativePointerPositionNormalized(\r\n  node: Konva.Node\r\n): Vector2 | undefined {\r\n  const relativePosition = getRelativePointerPosition(node);\r\n  if (!relativePosition) {\r\n    return;\r\n  }\r\n  return {\r\n    x: relativePosition.x / node.width(),\r\n    y: relativePosition.y / node.height(),\r\n  };\r\n}\r\n\r\n/**\r\n * Converts points from alternating array form to vector array form\r\n * @param {number[]} numbers points in an x, y alternating array\r\n * @returns {Vector2[]} a `Vector2` array\r\n */\r\nexport function convertNumbersToPoints(numbers: number[]): Vector2[] {\r\n  return numbers.reduce((acc: Vector2[], _, i, arr) => {\r\n    if (i % 2 === 0) {\r\n      acc.push({ x: arr[i], y: arr[i + 1] });\r\n    }\r\n    return acc;\r\n  }, []);\r\n}\r\n\r\n/**\r\n * Converts points from vector array form to alternating number array form\r\n * @param {Vector2[]} points\r\n * @returns {number[]}\r\n */\r\nexport function convertPointsToNumbers(points: Vector2[]): number[] {\r\n  return points.reduce(\r\n    (acc: number[], point: Vector2) => [...acc, point.x, point.y],\r\n    []\r\n  );\r\n}\r\n\r\nexport function scaleAndFlattenPoints(\r\n  points: Vector2[],\r\n  scale: Vector2\r\n): number[] {\r\n  return convertPointsToNumbers(points.map((p) => Vector2.multiply(p, scale)));\r\n}\r\n","import Vector2 from \"../helpers/Vector2\";\r\nimport {\r\n  getCellLocation,\r\n  getNearestCellCoordinates,\r\n  getCellCorners,\r\n} from \"../helpers/grid\";\r\n\r\nimport {\r\n  useGrid,\r\n  useGridOffset,\r\n  useGridCellPixelSize,\r\n  useGridCellPixelOffset,\r\n  useGridSnappingSensitivity,\r\n} from \"../contexts/GridContext\";\r\n\r\n/**\r\n * Returns a function that when called will snap a node to the current grid\r\n * @param {number=} snappingSensitivity 1 = Always snap, 0 = never snap if undefined the default user setting will be used\r\n * @param {boolean=} useCorners Snap to grid cell corners\r\n */\r\nfunction useGridSnapping(\r\n  snappingSensitivity: number | undefined = undefined,\r\n  useCorners: boolean = true\r\n) {\r\n  const defaultSnappingSensitivity = useGridSnappingSensitivity();\r\n  let gridSnappingSensitivity: number;\r\n  if (defaultSnappingSensitivity === -1) {\r\n    // Snapping disabled via shortcut\r\n    gridSnappingSensitivity = 0;\r\n  } else if (snappingSensitivity === undefined) {\r\n    gridSnappingSensitivity = defaultSnappingSensitivity;\r\n  } else {\r\n    gridSnappingSensitivity = snappingSensitivity;\r\n  }\r\n\r\n  const grid = useGrid();\r\n  const gridOffset = useGridOffset();\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n  const gridCellPixelOffset = useGridCellPixelOffset();\r\n\r\n  /**\r\n   * @param {Vector2} node The node to snap\r\n   */\r\n  function snapPositionToGrid(position: Vector2) {\r\n    // Account for grid offset\r\n    let offsetPosition = Vector2.subtract(\r\n      Vector2.subtract(position, gridOffset),\r\n      gridCellPixelOffset\r\n    );\r\n    const nearsetCell = getNearestCellCoordinates(\r\n      grid,\r\n      offsetPosition.x,\r\n      offsetPosition.y,\r\n      gridCellPixelSize\r\n    );\r\n    const cellPosition = getCellLocation(\r\n      grid,\r\n      nearsetCell.x,\r\n      nearsetCell.y,\r\n      gridCellPixelSize\r\n    );\r\n    const cellCorners = getCellCorners(\r\n      grid,\r\n      cellPosition.x,\r\n      cellPosition.y,\r\n      gridCellPixelSize\r\n    );\r\n\r\n    const snapPoints = [cellPosition];\r\n    if (useCorners) {\r\n      snapPoints.push(...cellCorners);\r\n    }\r\n\r\n    for (let snapPoint of snapPoints) {\r\n      const distanceToSnapPoint = Vector2.distance(offsetPosition, snapPoint);\r\n      if (\r\n        distanceToSnapPoint <\r\n        Vector2.componentMin(gridCellPixelSize) * gridSnappingSensitivity\r\n      ) {\r\n        // Reverse grid offset\r\n        let offsetSnapPoint = Vector2.add(\r\n          Vector2.add(snapPoint, gridOffset),\r\n          gridCellPixelOffset\r\n        );\r\n        return offsetSnapPoint;\r\n      }\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  return snapPositionToGrid;\r\n}\r\n\r\nexport default useGridSnapping;\r\n","import Konva from \"konva\";\r\nimport { Circle, Line, Rect } from \"react-konva\";\r\nimport {\r\n  useMapHeight,\r\n  useMapWidth,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport colors from \"../../helpers/colors\";\r\nimport { scaleAndFlattenPoints } from \"../../helpers/konva\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport { Drawing as DrawingType } from \"../../types/Drawing\";\r\n\r\ntype DrawingProps = {\r\n  drawing: DrawingType;\r\n} & Konva.ShapeConfig;\r\n\r\nfunction Drawing({ drawing, ...props }: DrawingProps) {\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const mapSize = new Vector2(mapWidth, mapHeight);\r\n\r\n  const defaultProps = {\r\n    fill: colors[drawing.color] || drawing.color,\r\n    stroke: colors[drawing.color] || drawing.color,\r\n    opacity: drawing.blend ? 0.5 : 1,\r\n    id: drawing.id,\r\n  };\r\n\r\n  if (drawing.type === \"path\") {\r\n    return (\r\n      <Line\r\n        points={scaleAndFlattenPoints(drawing.data.points, mapSize)}\r\n        tension={0.5}\r\n        closed={drawing.pathType === \"fill\"}\r\n        fillEnabled={drawing.pathType === \"fill\"}\r\n        lineCap=\"round\"\r\n        lineJoin=\"round\"\r\n        {...defaultProps}\r\n        {...props}\r\n      />\r\n    );\r\n  } else if (drawing.type === \"shape\") {\r\n    if (drawing.shapeType === \"rectangle\") {\r\n      return (\r\n        <Rect\r\n          x={drawing.data.x * mapWidth}\r\n          y={drawing.data.y * mapHeight}\r\n          width={drawing.data.width * mapWidth}\r\n          height={drawing.data.height * mapHeight}\r\n          fillEnabled={props.strokeWidth === 0}\r\n          {...defaultProps}\r\n          {...props}\r\n        />\r\n      );\r\n    } else if (drawing.shapeType === \"circle\") {\r\n      const minSide = mapWidth < mapHeight ? mapWidth : mapHeight;\r\n      return (\r\n        <Circle\r\n          x={drawing.data.x * mapWidth}\r\n          y={drawing.data.y * mapHeight}\r\n          radius={drawing.data.radius * minSide}\r\n          fillEnabled={props.strokeWidth === 0}\r\n          {...defaultProps}\r\n          {...props}\r\n        />\r\n      );\r\n    } else if (drawing.shapeType === \"triangle\") {\r\n      return (\r\n        <Line\r\n          points={scaleAndFlattenPoints(drawing.data.points, mapSize)}\r\n          closed={true}\r\n          fillEnabled={props.strokeWidth === 0}\r\n          {...defaultProps}\r\n          {...props}\r\n        />\r\n      );\r\n    } else if (drawing.shapeType === \"line\") {\r\n      return (\r\n        <Line\r\n          points={scaleAndFlattenPoints(drawing.data.points, mapSize)}\r\n          lineCap=\"round\"\r\n          {...defaultProps}\r\n          {...props}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default Drawing;\r\n","import { useState, useEffect } from \"react\";\r\nimport shortid from \"shortid\";\r\nimport { Group } from \"react-konva\";\r\n\r\nimport {\r\n  useDebouncedStageScale,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  useInteractionEmitter,\r\n  leftMouseButton,\r\n  MapDragEvent,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport {\r\n  useGridCellNormalizedSize,\r\n  useGridStrokeWidth,\r\n} from \"../../contexts/GridContext\";\r\n\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport {\r\n  getDefaultShapeData,\r\n  getUpdatedShapeData,\r\n  simplifyPoints,\r\n} from \"../../helpers/drawing\";\r\nimport { getRelativePointerPosition } from \"../../helpers/konva\";\r\n\r\nimport useGridSnapping from \"../../hooks/useGridSnapping\";\r\n\r\nimport DrawingShape from \"../konva/Drawing\";\r\n\r\nimport { Map } from \"../../types/Map\";\r\nimport {\r\n  Drawing,\r\n  DrawingToolSettings,\r\n  drawingToolIsShape,\r\n  Shape,\r\n} from \"../../types/Drawing\";\r\n\r\nexport type DrawingAddEventHanlder = (drawing: Drawing) => void;\r\nexport type DrawingsRemoveEventHandler = (drawingIds: string[]) => void;\r\n\r\ntype MapDrawingProps = {\r\n  map: Map | null;\r\n  drawings: Drawing[];\r\n  onDrawingAdd: DrawingAddEventHanlder;\r\n  onDrawingsRemove: DrawingsRemoveEventHandler;\r\n  active: boolean;\r\n  toolSettings: DrawingToolSettings;\r\n};\r\n\r\nfunction DrawingTool({\r\n  map,\r\n  drawings,\r\n  onDrawingAdd: onShapeAdd,\r\n  onDrawingsRemove: onShapesRemove,\r\n  active,\r\n  toolSettings,\r\n}: MapDrawingProps) {\r\n  const stageScale = useDebouncedStageScale();\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const interactionEmitter = useInteractionEmitter();\r\n\r\n  const gridCellNormalizedSize = useGridCellNormalizedSize();\r\n  const gridStrokeWidth = useGridStrokeWidth();\r\n\r\n  const mapStageRef = useMapStage();\r\n  const [drawing, setDrawing] = useState<Drawing | null>(null);\r\n  const [isBrushDown, setIsBrushDown] = useState(false);\r\n  const [erasingDrawings, setErasingDrawings] = useState<Drawing[]>([]);\r\n\r\n  const shouldHover = toolSettings.type === \"erase\" && active;\r\n\r\n  const isBrush =\r\n    toolSettings.type === \"brush\" || toolSettings.type === \"paint\";\r\n  const isShape =\r\n    toolSettings.type === \"line\" ||\r\n    toolSettings.type === \"rectangle\" ||\r\n    toolSettings.type === \"circle\" ||\r\n    toolSettings.type === \"triangle\";\r\n\r\n  const snapPositionToGrid = useGridSnapping();\r\n\r\n  useEffect(() => {\r\n    if (!active) {\r\n      return;\r\n    }\r\n    const mapStage = mapStageRef.current;\r\n\r\n    function getBrushPosition() {\r\n      if (!mapStage || !map) {\r\n        return;\r\n      }\r\n      const mapImage = mapStage.findOne(\"#mapImage\");\r\n      let position = getRelativePointerPosition(mapImage);\r\n      if (!position) {\r\n        return;\r\n      }\r\n      if (map.snapToGrid && isShape) {\r\n        position = snapPositionToGrid(position);\r\n      }\r\n      return Vector2.divide(position, {\r\n        x: mapImage.width(),\r\n        y: mapImage.height(),\r\n      });\r\n    }\r\n\r\n    function handleBrushDown(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (!brushPosition) {\r\n        return;\r\n      }\r\n      const commonShapeData = {\r\n        color: toolSettings.color,\r\n        blend: toolSettings.useBlending,\r\n        id: shortid.generate(),\r\n      };\r\n      const type = toolSettings.type;\r\n      if (isBrush) {\r\n        setDrawing({\r\n          type: \"path\",\r\n          pathType: type === \"brush\" ? \"stroke\" : \"fill\",\r\n          data: { points: [brushPosition] },\r\n          strokeWidth: type === \"brush\" ? 1 : 0,\r\n          ...commonShapeData,\r\n        });\r\n      } else if (isShape && drawingToolIsShape(type)) {\r\n        setDrawing({\r\n          type: \"shape\",\r\n          shapeType: type,\r\n          data: getDefaultShapeData(type, brushPosition),\r\n          strokeWidth:\r\n            toolSettings.type === \"line\" || !toolSettings.useShapeFill ? 1 : 0,\r\n          ...commonShapeData,\r\n        } as Shape);\r\n      }\r\n      setIsBrushDown(true);\r\n    }\r\n\r\n    function handleBrushMove(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (!brushPosition) {\r\n        return;\r\n      }\r\n      if (isBrushDown && drawing) {\r\n        if (isBrush) {\r\n          setDrawing((prevShape) => {\r\n            if (prevShape?.type !== \"path\") {\r\n              return prevShape;\r\n            }\r\n            const prevPoints = prevShape.data.points;\r\n            if (\r\n              Vector2.compare(\r\n                prevPoints[prevPoints.length - 1],\r\n                brushPosition,\r\n                0.001\r\n              )\r\n            ) {\r\n              return prevShape;\r\n            }\r\n            const simplified = simplifyPoints(\r\n              [...prevPoints, brushPosition],\r\n              1 / 1000 / stageScale\r\n            );\r\n            return {\r\n              ...prevShape,\r\n              data: { points: simplified },\r\n            };\r\n          });\r\n        } else if (isShape) {\r\n          setDrawing((prevShape) => {\r\n            if (prevShape?.type !== \"shape\") {\r\n              return prevShape;\r\n            }\r\n            return {\r\n              ...prevShape,\r\n              data: getUpdatedShapeData(\r\n                prevShape.shapeType,\r\n                prevShape.data,\r\n                brushPosition,\r\n                gridCellNormalizedSize,\r\n                mapWidth,\r\n                mapHeight\r\n              ),\r\n            } as Shape;\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleBrushUp(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (isBrush && drawing && drawing.type === \"path\") {\r\n        if (drawing.data.points.length > 1) {\r\n          onShapeAdd(drawing);\r\n        }\r\n      } else if (isShape && drawing) {\r\n        onShapeAdd(drawing);\r\n      }\r\n\r\n      eraseHoveredShapes();\r\n\r\n      setDrawing(null);\r\n      setIsBrushDown(false);\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleBrushDown);\r\n    interactionEmitter?.on(\"drag\", handleBrushMove);\r\n    interactionEmitter?.on(\"dragEnd\", handleBrushUp);\r\n\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleBrushDown);\r\n      interactionEmitter?.off(\"drag\", handleBrushMove);\r\n      interactionEmitter?.off(\"dragEnd\", handleBrushUp);\r\n    };\r\n  });\r\n\r\n  function handleShapeOver(shape: Drawing, isDown: boolean) {\r\n    if (shouldHover && isDown) {\r\n      if (erasingDrawings.findIndex((s) => s.id === shape.id) === -1) {\r\n        setErasingDrawings((prevShapes) => [...prevShapes, shape]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function eraseHoveredShapes() {\r\n    if (erasingDrawings.length > 0) {\r\n      onShapesRemove(erasingDrawings.map((shape) => shape.id));\r\n      setErasingDrawings([]);\r\n    }\r\n  }\r\n\r\n  function renderDrawing(shape: Drawing) {\r\n    return (\r\n      <DrawingShape\r\n        drawing={shape}\r\n        key={shape.id}\r\n        onMouseMove={() => handleShapeOver(shape, isBrushDown)}\r\n        onTouchOver={() => handleShapeOver(shape, isBrushDown)}\r\n        onMouseDown={() => handleShapeOver(shape, true)}\r\n        onTouchStart={() => handleShapeOver(shape, true)}\r\n        onMouseUp={eraseHoveredShapes}\r\n        onTouchEnd={eraseHoveredShapes}\r\n        strokeWidth={gridStrokeWidth * shape.strokeWidth}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderErasingDrawing(drawing: Drawing) {\r\n    const eraseShape: Drawing = {\r\n      ...drawing,\r\n      color: \"primary\",\r\n    };\r\n    return renderDrawing(eraseShape);\r\n  }\r\n\r\n  return (\r\n    <Group>\r\n      {drawings.map(renderDrawing)}\r\n      {drawing && renderDrawing(drawing)}\r\n      {erasingDrawings.length > 0 && erasingDrawings.map(renderErasingDrawing)}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default DrawingTool;\r\n","import Vector2 from \"../helpers/Vector2\";\r\nimport { Color } from \"../helpers/colors\";\r\n\r\nexport type DrawingToolType =\r\n  | \"brush\"\r\n  | \"paint\"\r\n  | \"line\"\r\n  | \"rectangle\"\r\n  | \"circle\"\r\n  | \"triangle\"\r\n  | \"erase\";\r\n\r\nexport type DrawingToolSettings = {\r\n  type: DrawingToolType;\r\n  color: Color;\r\n  useBlending: boolean;\r\n  useShapeFill: boolean;\r\n};\r\n\r\nexport type PointsData = {\r\n  points: Vector2[];\r\n};\r\n\r\nexport type RectData = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nexport type CircleData = {\r\n  x: number;\r\n  y: number;\r\n  radius: number;\r\n};\r\n\r\nexport type ShapeData = PointsData | RectData | CircleData;\r\n\r\nexport type BaseDrawing = {\r\n  blend: boolean;\r\n  color: Color;\r\n  id: string;\r\n  strokeWidth: number;\r\n};\r\n\r\nexport type BaseShape = BaseDrawing & {\r\n  type: \"shape\";\r\n};\r\n\r\nexport type Line = BaseShape & {\r\n  shapeType: \"line\";\r\n  data: PointsData;\r\n};\r\n\r\nexport type Rectangle = BaseShape & {\r\n  shapeType: \"rectangle\";\r\n  data: RectData;\r\n};\r\n\r\nexport type Circle = BaseShape & {\r\n  shapeType: \"circle\";\r\n  data: CircleData;\r\n};\r\n\r\nexport type Triangle = BaseShape & {\r\n  shapeType: \"triangle\";\r\n  data: PointsData;\r\n};\r\n\r\nexport type ShapeType =\r\n  | Line[\"shapeType\"]\r\n  | Rectangle[\"shapeType\"]\r\n  | Circle[\"shapeType\"]\r\n  | Triangle[\"shapeType\"];\r\n\r\nexport type Shape = Line | Rectangle | Circle | Triangle;\r\n\r\nexport type Path = BaseDrawing & {\r\n  type: \"path\";\r\n  pathType: \"fill\" | \"stroke\";\r\n  data: PointsData;\r\n};\r\n\r\nexport type Drawing = Shape | Path;\r\n\r\nexport function drawingToolIsShape(type: DrawingToolType): type is ShapeType {\r\n  return (\r\n    type === \"line\" ||\r\n    type === \"rectangle\" ||\r\n    type === \"circle\" ||\r\n    type === \"triangle\"\r\n  );\r\n}\r\n\r\nexport type DrawingState = Record<string, Drawing>;\r\n","import Konva from \"konva\";\r\nimport { Line } from \"react-konva\";\r\n\r\nimport { scaleAndFlattenPoints } from \"../../helpers/konva\";\r\n\r\nimport { Fog as FogType } from \"../../types/Fog\";\r\nimport {\r\n  useMapHeight,\r\n  useMapWidth,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\ntype FogProps = {\r\n  fog: FogType;\r\n} & Konva.LineConfig;\r\n\r\n// Holes should be wound in the opposite direction as the containing points array\r\nfunction Fog({ fog, opacity, ...props }: FogProps) {\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const mapSize = new Vector2(mapWidth, mapHeight);\r\n\r\n  const points = scaleAndFlattenPoints(fog.data.points, mapSize);\r\n  const holes = fog.data.holes.map((hole) =>\r\n    scaleAndFlattenPoints(hole, mapSize)\r\n  );\r\n\r\n  // Converted from https://github.com/rfestag/konva/blob/master/src/shapes/Line.ts\r\n  function drawLine(\r\n    points: number[],\r\n    context: Konva.Context,\r\n    shape: Konva.Line\r\n  ) {\r\n    const length = points.length;\r\n    const tension = shape.tension();\r\n    const closed = shape.closed();\r\n    const bezier = shape.bezier();\r\n\r\n    if (!length) {\r\n      return;\r\n    }\r\n\r\n    context.moveTo(points[0], points[1]);\r\n\r\n    if (tension !== 0 && length > 4) {\r\n      const tensionPoints = shape.getTensionPoints();\r\n      const tensionLength = tensionPoints.length;\r\n      let n = closed ? 0 : 4;\r\n\r\n      if (!closed) {\r\n        context.quadraticCurveTo(\r\n          tensionPoints[0],\r\n          tensionPoints[1],\r\n          tensionPoints[2],\r\n          tensionPoints[3]\r\n        );\r\n      }\r\n\r\n      while (n < tensionLength - 2) {\r\n        context.bezierCurveTo(\r\n          tensionPoints[n++],\r\n          tensionPoints[n++],\r\n          tensionPoints[n++],\r\n          tensionPoints[n++],\r\n          tensionPoints[n++],\r\n          tensionPoints[n++]\r\n        );\r\n      }\r\n\r\n      if (!closed) {\r\n        context.quadraticCurveTo(\r\n          tensionPoints[tensionLength - 2],\r\n          tensionPoints[tensionLength - 1],\r\n          points[length - 2],\r\n          points[length - 1]\r\n        );\r\n      }\r\n    } else if (bezier) {\r\n      // no tension but bezier\r\n      let n = 2;\r\n\r\n      while (n < length) {\r\n        context.bezierCurveTo(\r\n          points[n++],\r\n          points[n++],\r\n          points[n++],\r\n          points[n++],\r\n          points[n++],\r\n          points[n++]\r\n        );\r\n      }\r\n    } else {\r\n      // no tension\r\n      for (let n = 2; n < length; n += 2) {\r\n        context.lineTo(points[n], points[n + 1]);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Draw points and holes\r\n  function sceneFunc(context: Konva.Context, shape: Konva.Line) {\r\n    const points = shape.points();\r\n    const closed = shape.closed();\r\n\r\n    if (!points.length) {\r\n      return;\r\n    }\r\n\r\n    context.beginPath();\r\n    drawLine(points, context, shape);\r\n\r\n    context.beginPath();\r\n    drawLine(points, context, shape);\r\n\r\n    // closed e.g. polygons and blobs\r\n    if (closed) {\r\n      context.closePath();\r\n      if (holes && holes.length) {\r\n        for (let hole of holes) {\r\n          drawLine(hole, context, shape);\r\n          context.closePath();\r\n        }\r\n      }\r\n      context.fillStrokeShape(shape);\r\n    } else {\r\n      // open e.g. lines and splines\r\n      context.strokeShape(shape);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Line\r\n      points={points}\r\n      closed\r\n      lineCap=\"round\"\r\n      lineJoin=\"round\"\r\n      {...props}\r\n      sceneFunc={sceneFunc as any}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Fog;\r\n","import Konva from \"konva\";\r\nimport { useState } from \"react\";\r\nimport { Circle, Group, Path } from \"react-konva\";\r\n\r\ntype TickProps = {\r\n  x: number;\r\n  y: number;\r\n  scale: number;\r\n  onClick: (evt: Konva.KonvaEventObject<MouseEvent>) => void;\r\n  cross: boolean;\r\n};\r\n\r\nexport function Tick({ x, y, scale, onClick, cross }: TickProps) {\r\n  const [fill, setFill] = useState(\"white\");\r\n  function handleEnter() {\r\n    setFill(\"hsl(260, 100%, 80%)\");\r\n  }\r\n\r\n  function handleLeave() {\r\n    setFill(\"white\");\r\n  }\r\n  return (\r\n    <Group\r\n      x={x}\r\n      y={y}\r\n      scaleX={scale}\r\n      scaleY={scale}\r\n      onMouseEnter={handleEnter}\r\n      onMouseLeave={handleLeave}\r\n      onClick={onClick}\r\n      onTap={onClick}\r\n    >\r\n      <Circle radius={12} fill=\"hsla(230, 25%, 18%, 0.8)\" />\r\n      <Path\r\n        offsetX={12}\r\n        offsetY={12}\r\n        fill={fill}\r\n        data={\r\n          cross\r\n            ? \"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z\"\r\n            : \"M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z\"\r\n        }\r\n      />\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default Tick;\r\n","import { useState, useEffect, useCallback } from \"react\";\r\nimport shortid from \"shortid\";\r\nimport { Group, Line } from \"react-konva\";\r\nimport useImage from \"use-image\";\r\nimport Color from \"color\";\r\nimport Konva from \"konva\";\r\n\r\nimport diagonalPattern from \"../../images/DiagonalPattern.png\";\r\n\r\nimport {\r\n  useDebouncedStageScale,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  useInteractionEmitter,\r\n  MapDragEvent,\r\n  leftMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport {\r\n  useGrid,\r\n  useGridCellPixelSize,\r\n  useGridCellNormalizedSize,\r\n  useGridStrokeWidth,\r\n  useGridCellPixelOffset,\r\n  useGridOffset,\r\n  useGridSnappingSensitivity,\r\n} from \"../../contexts/GridContext\";\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport Vector2, { BoundingBox } from \"../../helpers/Vector2\";\r\nimport {\r\n  simplifyPoints,\r\n  mergeFogShapes,\r\n  getFogShapesBoundingBoxes,\r\n  getGuidesFromBoundingBoxes,\r\n  getGuidesFromGridCell,\r\n  findBestGuides,\r\n  Guide,\r\n} from \"../../helpers/drawing\";\r\nimport colors from \"../../helpers/colors\";\r\nimport { getRelativePointerPosition } from \"../../helpers/konva\";\r\nimport { keyBy } from \"../../helpers/shared\";\r\n\r\nimport SubtractFogAction from \"../../actions/SubtractFogAction\";\r\nimport CutFogAction from \"../../actions/CutFogAction\";\r\n\r\nimport useSetting from \"../../hooks/useSetting\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\n\r\nimport { Map } from \"../../types/Map\";\r\nimport { Fog, FogToolSettings } from \"../../types/Fog\";\r\n\r\nimport FogShape from \"../konva/Fog\";\r\nimport Tick from \"../konva/Tick\";\r\n\r\ntype FogAddEventHandler = (fog: Fog[]) => void;\r\ntype FogCutEventHandler = (fog: Fog[]) => void;\r\ntype FogRemoveEventHandler = (fogId: string[]) => void;\r\ntype FogEditEventHandler = (edit: Partial<Fog>[]) => void;\r\ntype FogErrorEventHandler = (message: string) => void;\r\n\r\ntype MapFogProps = {\r\n  map: Map | null;\r\n  shapes: Fog[];\r\n  onShapesAdd: FogAddEventHandler;\r\n  onShapesCut: FogCutEventHandler;\r\n  onShapesRemove: FogRemoveEventHandler;\r\n  onShapesEdit: FogEditEventHandler;\r\n  onShapeError: FogErrorEventHandler;\r\n  active: boolean;\r\n  toolSettings: FogToolSettings;\r\n  editable: boolean;\r\n};\r\n\r\nfunction FogTool({\r\n  map,\r\n  shapes,\r\n  onShapesAdd,\r\n  onShapesCut,\r\n  onShapesRemove,\r\n  onShapesEdit,\r\n  onShapeError,\r\n  active,\r\n  toolSettings,\r\n  editable,\r\n}: MapFogProps) {\r\n  const stageScale = useDebouncedStageScale();\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const interactionEmitter = useInteractionEmitter();\r\n\r\n  const grid = useGrid();\r\n  const gridCellNormalizedSize = useGridCellNormalizedSize();\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n  const gridStrokeWidth = useGridStrokeWidth();\r\n  const gridCellPixelOffset = useGridCellPixelOffset();\r\n  const gridOffset = useGridOffset();\r\n\r\n  const snappingSensitivity = useGridSnappingSensitivity();\r\n  // Clamp snapping to 0 to accound for -1 snapping override\r\n  const gridSnappingSensitivity = Math.max(snappingSensitivity, 0);\r\n\r\n  const [showFogGuides] = useSetting<boolean>(\"fog.showGuides\");\r\n  const [editOpacity] = useSetting<number>(\"fog.editOpacity\");\r\n  const mapStageRef = useMapStage();\r\n\r\n  const [drawingShape, setDrawingShape] = useState<Fog | null>(null);\r\n  const [isBrushDown, setIsBrushDown] = useState(false);\r\n  const [hoveredShapes, setHoveredShapes] = useState<Fog[]>([]);\r\n\r\n  // Shapes that have been merged for fog\r\n  const [fogShapes, setFogShapes] = useState(shapes);\r\n  // Bounding boxes for guides\r\n  const [fogShapeBoundingBoxes, setFogShapeBoundingBoxes] = useState<\r\n    BoundingBox[]\r\n  >([]);\r\n  const [guides, setGuides] = useState<Guide[]>([]);\r\n\r\n  const shouldHover =\r\n    active &&\r\n    editable &&\r\n    (toolSettings.type === \"toggle\" || toolSettings.type === \"remove\");\r\n\r\n  const shouldUseGuides =\r\n    active &&\r\n    editable &&\r\n    (toolSettings.type === \"rectangle\" || toolSettings.type === \"polygon\");\r\n\r\n  const shouldRenderGuides = shouldUseGuides && showFogGuides;\r\n\r\n  const [patternImage] = useImage(diagonalPattern);\r\n\r\n  useEffect(() => {\r\n    if (!active || !editable) {\r\n      return;\r\n    }\r\n\r\n    const mapStage = mapStageRef.current;\r\n\r\n    function getBrushPosition(snapping = true) {\r\n      if (!mapStage) {\r\n        return;\r\n      }\r\n      const mapImage = mapStage.findOne(\"#mapImage\");\r\n      let position = getRelativePointerPosition(mapImage);\r\n      if (!position) {\r\n        return;\r\n      }\r\n      if (shouldUseGuides && snapping) {\r\n        for (let guide of guides) {\r\n          if (guide.orientation === \"vertical\") {\r\n            position.x = guide.start.x * mapWidth;\r\n          }\r\n          if (guide.orientation === \"horizontal\") {\r\n            position.y = guide.start.y * mapHeight;\r\n          }\r\n        }\r\n      }\r\n      return Vector2.divide(position, {\r\n        x: mapImage.width(),\r\n        y: mapImage.height(),\r\n      });\r\n    }\r\n\r\n    function handleBrushDown(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (toolSettings.type === \"brush\") {\r\n        const brushPosition = getBrushPosition();\r\n        if (!brushPosition) {\r\n          return;\r\n        }\r\n        setDrawingShape({\r\n          type: \"fog\",\r\n          data: {\r\n            points: [brushPosition],\r\n            holes: [],\r\n          },\r\n          strokeWidth: 0.5,\r\n          color: toolSettings.useFogCut ? \"red\" : \"black\",\r\n          id: shortid.generate(),\r\n          visible: true,\r\n        });\r\n      }\r\n      if (toolSettings.type === \"rectangle\") {\r\n        const brushPosition = getBrushPosition();\r\n        if (!brushPosition) {\r\n          return;\r\n        }\r\n        setDrawingShape({\r\n          type: \"fog\",\r\n          data: {\r\n            points: [\r\n              brushPosition,\r\n              brushPosition,\r\n              brushPosition,\r\n              brushPosition,\r\n            ],\r\n            holes: [],\r\n          },\r\n          strokeWidth: 0.5,\r\n          color: toolSettings.useFogCut ? \"red\" : \"black\",\r\n          id: shortid.generate(),\r\n          visible: true,\r\n        });\r\n      }\r\n      setIsBrushDown(true);\r\n    }\r\n\r\n    function handleBrushMove(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (toolSettings.type === \"brush\" && isBrushDown && drawingShape) {\r\n        const brushPosition = getBrushPosition();\r\n        if (!brushPosition) {\r\n          return;\r\n        }\r\n        setDrawingShape((prevShape) => {\r\n          if (!prevShape) {\r\n            return prevShape;\r\n          }\r\n          const prevPoints = prevShape.data.points;\r\n          if (\r\n            Vector2.compare(\r\n              prevPoints[prevPoints.length - 1],\r\n              brushPosition,\r\n              0.001\r\n            )\r\n          ) {\r\n            return prevShape;\r\n          }\r\n          return {\r\n            ...prevShape,\r\n            data: {\r\n              ...prevShape.data,\r\n              points: [...prevPoints, brushPosition],\r\n            },\r\n          };\r\n        });\r\n      }\r\n      if (toolSettings.type === \"rectangle\" && isBrushDown && drawingShape) {\r\n        const prevPoints = drawingShape.data.points;\r\n        const brushPosition = getBrushPosition();\r\n        if (!brushPosition) {\r\n          return;\r\n        }\r\n        setDrawingShape((prevShape) => {\r\n          if (!prevShape) {\r\n            return prevShape;\r\n          }\r\n          return {\r\n            ...prevShape,\r\n            data: {\r\n              ...prevShape.data,\r\n              points: [\r\n                prevPoints[0],\r\n                { x: brushPosition.x, y: prevPoints[1].y },\r\n                brushPosition,\r\n                { x: prevPoints[3].x, y: brushPosition.y },\r\n              ],\r\n            },\r\n          };\r\n        });\r\n      }\r\n    }\r\n\r\n    function handleBrushUp(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (\r\n        (toolSettings.type === \"brush\" || toolSettings.type === \"rectangle\") &&\r\n        drawingShape\r\n      ) {\r\n        let simplifiedShape = { ...drawingShape };\r\n        if (toolSettings.type === \"brush\") {\r\n          simplifiedShape.data.points = simplifyPoints(\r\n            simplifiedShape.data.points,\r\n            1 / 1000 / stageScale\r\n          );\r\n        }\r\n        const cut = toolSettings.useFogCut;\r\n        let drawingShapes = [simplifiedShape];\r\n\r\n        // Filter out hidden or visible shapes if single layer enabled\r\n        if (!toolSettings.multilayer) {\r\n          const shapesToSubtract = shapes.filter((shape) =>\r\n            cut ? !shape.visible : shape.visible\r\n          );\r\n          const subtractAction = new SubtractFogAction(shapesToSubtract);\r\n          const state = subtractAction.execute({\r\n            [simplifiedShape.id]: simplifiedShape,\r\n          });\r\n          drawingShapes = Object.values(state)\r\n            .filter((shape) => shape.data.points.length > 2)\r\n            .map((shape) => ({ ...shape, id: shortid.generate() }));\r\n        }\r\n\r\n        if (drawingShapes.length > 0) {\r\n          if (cut) {\r\n            // Run a pre-emptive cut action to check whether we've cut anything\r\n            const cutAction = new CutFogAction(drawingShapes);\r\n            const state = cutAction.execute(keyBy(shapes, \"id\"));\r\n\r\n            if (Object.keys(state).length === shapes.length) {\r\n              onShapeError(\"No fog to cut\");\r\n            } else {\r\n              onShapesCut(drawingShapes);\r\n            }\r\n          } else {\r\n            onShapesAdd(\r\n              drawingShapes.map((shape) => ({ ...shape, color: \"black\" }))\r\n            );\r\n          }\r\n        } else {\r\n          if (cut) {\r\n            onShapeError(\"Fog already cut\");\r\n          } else {\r\n            onShapeError(\"Fog already placed\");\r\n          }\r\n        }\r\n        setDrawingShape(null);\r\n      }\r\n\r\n      eraseHoveredShapes(props);\r\n\r\n      setIsBrushDown(false);\r\n    }\r\n\r\n    function handlePointerClick(event: Konva.KonvaEventObject<MouseEvent>) {\r\n      if (!leftMouseButton(event)) {\r\n        return;\r\n      }\r\n      if (toolSettings.type === \"polygon\") {\r\n        const brushPosition = getBrushPosition();\r\n        if (brushPosition) {\r\n          setDrawingShape((prevDrawingShape) => {\r\n            if (prevDrawingShape) {\r\n              return {\r\n                ...prevDrawingShape,\r\n                data: {\r\n                  ...prevDrawingShape.data,\r\n                  points: [...prevDrawingShape.data.points, brushPosition],\r\n                },\r\n              };\r\n            } else {\r\n              return {\r\n                type: \"fog\",\r\n                data: {\r\n                  points: [brushPosition, brushPosition],\r\n                  holes: [],\r\n                },\r\n                strokeWidth: 0.5,\r\n                color: toolSettings.useFogCut ? \"red\" : \"black\",\r\n                id: shortid.generate(),\r\n                visible: true,\r\n              };\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    function handlePointerMove() {\r\n      if (shouldUseGuides) {\r\n        let guides: Guide[] = [];\r\n        const brushPosition = getBrushPosition(false);\r\n        if (brushPosition) {\r\n          const absoluteBrushPosition = Vector2.multiply(brushPosition, {\r\n            x: mapWidth,\r\n            y: mapHeight,\r\n          });\r\n          if (map?.snapToGrid) {\r\n            guides.push(\r\n              ...getGuidesFromGridCell(\r\n                absoluteBrushPosition,\r\n                grid,\r\n                gridCellPixelSize,\r\n                gridOffset,\r\n                gridCellPixelOffset,\r\n                gridSnappingSensitivity,\r\n                { x: mapWidth, y: mapHeight }\r\n              )\r\n            );\r\n          }\r\n\r\n          guides.push(\r\n            ...getGuidesFromBoundingBoxes(\r\n              brushPosition,\r\n              fogShapeBoundingBoxes,\r\n              gridCellNormalizedSize,\r\n              gridSnappingSensitivity\r\n            )\r\n          );\r\n\r\n          setGuides(findBestGuides(brushPosition, guides));\r\n        }\r\n      }\r\n      if (toolSettings.type === \"polygon\") {\r\n        const brushPosition = getBrushPosition();\r\n        if (toolSettings.type === \"polygon\" && drawingShape && brushPosition) {\r\n          setDrawingShape((prevShape) => {\r\n            if (!prevShape) {\r\n              return prevShape;\r\n            }\r\n            return {\r\n              ...prevShape,\r\n              data: {\r\n                ...prevShape.data,\r\n                points: [...prevShape.data.points.slice(0, -1), brushPosition],\r\n              },\r\n            };\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    function handelTouchEnd() {\r\n      setGuides([]);\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleBrushDown);\r\n    interactionEmitter?.on(\"drag\", handleBrushMove);\r\n    interactionEmitter?.on(\"dragEnd\", handleBrushUp);\r\n    // Use mouse events for polygon and erase to allow for single clicks\r\n    mapStage?.on(\"mousedown touchstart\", handlePointerMove);\r\n    mapStage?.on(\"mousemove touchmove\", handlePointerMove);\r\n    mapStage?.on(\"click tap\", handlePointerClick);\r\n    mapStage?.on(\"touchend\", handelTouchEnd);\r\n\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleBrushDown);\r\n      interactionEmitter?.off(\"drag\", handleBrushMove);\r\n      interactionEmitter?.off(\"dragEnd\", handleBrushUp);\r\n      mapStage?.off(\"mousedown touchstart\", handlePointerMove);\r\n      mapStage?.off(\"mousemove touchmove\", handlePointerMove);\r\n      mapStage?.off(\"click tap\", handlePointerClick);\r\n      mapStage?.off(\"touchend\", handelTouchEnd);\r\n    };\r\n  });\r\n\r\n  const finishDrawingPolygon = useCallback(() => {\r\n    const cut = toolSettings.useFogCut;\r\n    if (!drawingShape) {\r\n      return;\r\n    }\r\n    let polygonShape = {\r\n      ...drawingShape,\r\n      data: {\r\n        ...drawingShape.data,\r\n        // Remove the last point as it hasn't been placed yet\r\n        points: drawingShape.data.points.slice(0, -1),\r\n      },\r\n    };\r\n\r\n    let polygonShapes = [polygonShape];\r\n    // Filter out hidden or visible shapes if single layer enabled\r\n    if (!toolSettings.multilayer) {\r\n      const shapesToSubtract = shapes.filter((shape) =>\r\n        cut ? !shape.visible : shape.visible\r\n      );\r\n      const subtractAction = new SubtractFogAction(shapesToSubtract);\r\n      const state = subtractAction.execute({\r\n        [polygonShape.id]: polygonShape,\r\n      });\r\n      polygonShapes = Object.values(state)\r\n        .filter((shape) => shape.data.points.length > 2)\r\n        .map((shape) => ({ ...shape, id: shortid.generate() }));\r\n    }\r\n\r\n    if (polygonShapes.length > 0) {\r\n      if (cut) {\r\n        // Run a pre-emptive cut action to check whether we've cut anything\r\n        const cutAction = new CutFogAction(polygonShapes);\r\n        const state = cutAction.execute(keyBy(shapes, \"id\"));\r\n\r\n        if (Object.keys(state).length === shapes.length) {\r\n          onShapeError(\"No fog to cut\");\r\n        } else {\r\n          onShapesCut(polygonShapes);\r\n        }\r\n      } else {\r\n        onShapesAdd(\r\n          polygonShapes.map((shape) => ({\r\n            ...drawingShape,\r\n            data: shape.data,\r\n            id: shape.id,\r\n            color: \"black\",\r\n          }))\r\n        );\r\n      }\r\n    } else {\r\n      if (cut) {\r\n        onShapeError(\"Fog already cut\");\r\n      } else {\r\n        onShapeError(\"Fog already placed\");\r\n      }\r\n    }\r\n\r\n    setDrawingShape(null);\r\n  }, [\r\n    toolSettings,\r\n    drawingShape,\r\n    onShapesCut,\r\n    onShapesAdd,\r\n    onShapeError,\r\n    shapes,\r\n  ]);\r\n\r\n  // Add keyboard shortcuts\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (\r\n      shortcuts.fogFinishPolygon(event) &&\r\n      toolSettings.type === \"polygon\" &&\r\n      drawingShape\r\n    ) {\r\n      finishDrawingPolygon();\r\n    }\r\n    if (shortcuts.fogCancelPolygon(event) && drawingShape) {\r\n      setDrawingShape(null);\r\n    }\r\n    // Remove last point from polygon shape if delete pressed\r\n    if (\r\n      shortcuts.delete(event) &&\r\n      drawingShape &&\r\n      toolSettings.type === \"polygon\"\r\n    ) {\r\n      if (drawingShape.data.points.length > 2) {\r\n        setDrawingShape((prevShape) => {\r\n          if (!prevShape) {\r\n            return prevShape;\r\n          }\r\n          return {\r\n            ...prevShape,\r\n            data: {\r\n              ...prevShape.data,\r\n              points: [\r\n                // Shift last point to previous point\r\n                ...prevShape.data.points.slice(0, -2),\r\n                ...prevShape.data.points.slice(-1),\r\n              ],\r\n            },\r\n          };\r\n        });\r\n      } else {\r\n        setDrawingShape(null);\r\n      }\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  // Update shape color when useFogCut changes\r\n  useEffect(() => {\r\n    setDrawingShape((prevShape) => {\r\n      if (!prevShape) {\r\n        return prevShape;\r\n      }\r\n      return {\r\n        ...prevShape,\r\n        color: toolSettings.useFogCut ? \"red\" : \"black\",\r\n      };\r\n    });\r\n  }, [toolSettings.useFogCut]);\r\n\r\n  function eraseHoveredShapes(event: any) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    // Erase\r\n    if (hoveredShapes.length > 0) {\r\n      if (toolSettings.type === \"remove\") {\r\n        onShapesRemove(hoveredShapes.map((shape) => shape.id));\r\n      } else if (toolSettings.type === \"toggle\") {\r\n        onShapesEdit(\r\n          hoveredShapes.map((shape) => ({\r\n            id: shape.id,\r\n            visible: !shape.visible,\r\n          }))\r\n        );\r\n      }\r\n      setHoveredShapes([]);\r\n    }\r\n  }\r\n\r\n  function handleShapeOver(shape: Fog, isDown: boolean) {\r\n    if (shouldHover && isDown) {\r\n      if (hoveredShapes.findIndex((s) => s.id === shape.id) === -1) {\r\n        setHoveredShapes((prevShapes) => [...prevShapes, shape]);\r\n      }\r\n    }\r\n  }\r\n\r\n  function renderShape(shape: Fog) {\r\n    const opacity = editable ? editOpacity : 1;\r\n    const stroke =\r\n      editable && active\r\n        ? colors.lightGray\r\n        : colors[shape.color] || shape.color;\r\n    // Control opacity only on fill as using opacity with stroke leads to performance issues\r\n    const fill = new Color(colors[shape.color] || shape.color)\r\n      .alpha(opacity)\r\n      .string();\r\n    return (\r\n      <FogShape\r\n        key={shape.id}\r\n        fog={shape}\r\n        onMouseMove={(e: Konva.KonvaEventObject<MouseEvent>) =>\r\n          (!isBrushDown || leftMouseButton(e)) &&\r\n          handleShapeOver(shape, isBrushDown)\r\n        }\r\n        onTouchOver={() => handleShapeOver(shape, isBrushDown)}\r\n        onMouseDown={(e: Konva.KonvaEventObject<MouseEvent>) =>\r\n          leftMouseButton(e) && handleShapeOver(shape, true)\r\n        }\r\n        onTouchStart={() => handleShapeOver(shape, true)}\r\n        onMouseUp={eraseHoveredShapes}\r\n        onTouchEnd={eraseHoveredShapes}\r\n        stroke={stroke}\r\n        opacity={opacity}\r\n        strokeWidth={gridStrokeWidth * shape.strokeWidth}\r\n        fill={fill}\r\n        fillPatternImage={patternImage}\r\n        fillPriority={editable && !shape.visible ? \"pattern\" : \"color\"}\r\n        // Disable collision if the fog is transparent and we're not editing it\r\n        // This allows tokens to be moved under the fog\r\n        hitFunc={editable && !active ? () => {} : undefined}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderHoveredShape(shape: Fog) {\r\n    const editingShape: Fog = {\r\n      ...shape,\r\n      color: \"primary\",\r\n    };\r\n    return renderShape(editingShape);\r\n  }\r\n\r\n  function renderDrawingShape(shape: Fog) {\r\n    const opacity = editable ? editOpacity : 1;\r\n    const stroke =\r\n      editable && active\r\n        ? colors.lightGray\r\n        : colors[shape.color] || shape.color;\r\n    const fill = new Color(colors[shape.color] || shape.color)\r\n      .alpha(opacity)\r\n      .string();\r\n    return (\r\n      <FogShape\r\n        fog={shape}\r\n        fill={fill}\r\n        stroke={stroke}\r\n        opacity={opacity}\r\n        strokeWidth={gridStrokeWidth * shape.strokeWidth}\r\n        hitFunc={() => {}}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderPolygonAcceptTick(shape: Fog) {\r\n    if (shape.data.points.length === 0) {\r\n      return null;\r\n    }\r\n    const isCross = shape.data.points.length < 4;\r\n    return (\r\n      <Tick\r\n        x={shape.data.points[0].x * mapWidth}\r\n        y={shape.data.points[0].y * mapHeight}\r\n        scale={1 / stageScale}\r\n        cross={isCross}\r\n        onClick={(e) => {\r\n          e.cancelBubble = true;\r\n          if (isCross) {\r\n            setDrawingShape(null);\r\n          } else {\r\n            finishDrawingPolygon();\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderGuides() {\r\n    return guides.map((guide, index) => (\r\n      <Line\r\n        points={[\r\n          guide.start.x * mapWidth,\r\n          guide.start.y * mapHeight,\r\n          guide.end.x * mapWidth,\r\n          guide.end.y * mapHeight,\r\n        ]}\r\n        stroke=\"hsl(260, 100%, 80%)\"\r\n        key={index}\r\n        strokeWidth={gridStrokeWidth * 0.25}\r\n        lineCap=\"round\"\r\n        lineJoin=\"round\"\r\n      />\r\n    ));\r\n  }\r\n\r\n  useEffect(() => {\r\n    function shapeVisible(shape: Fog) {\r\n      return (active && !toolSettings.preview) || shape.visible;\r\n    }\r\n\r\n    if (editable) {\r\n      const visibleShapes = shapes.filter(shapeVisible);\r\n      // Only use bounding box guides when rendering them\r\n      if (shouldRenderGuides) {\r\n        setFogShapeBoundingBoxes(getFogShapesBoundingBoxes(visibleShapes, 5));\r\n      } else {\r\n        setFogShapeBoundingBoxes([]);\r\n      }\r\n      setFogShapes(visibleShapes);\r\n    } else {\r\n      setFogShapes(mergeFogShapes(shapes));\r\n    }\r\n  }, [shapes, editable, active, toolSettings, shouldRenderGuides]);\r\n\r\n  return (\r\n    <Group>\r\n      <Group>{fogShapes.map(renderShape)}</Group>\r\n      {shouldRenderGuides && renderGuides()}\r\n      {drawingShape && renderDrawingShape(drawingShape)}\r\n      {drawingShape &&\r\n        toolSettings &&\r\n        toolSettings.type === \"polygon\" &&\r\n        renderPolygonAcceptTick(drawingShape)}\r\n      {hoveredShapes.length > 0 && hoveredShapes.map(renderHoveredShape)}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default FogTool;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAXVBMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsMPPGAAAAH3RSTlMAFj9AJAk5MwQCLjwOHRM+KAEHNzUGKz0QGSELOzADvkfxowAAAlVJREFUeAFEyMUBw1AUA7DPXOYG9t8ybD8dpTba2INT5AMyJmYuyNoUnSycJFtFlsxMERm8Ioc0WvJ8wV5vzPsD+Xwxb2/k56voZ+Ev2fXIYZSd258PQkUAAIphhceG23v6l/mFtHEQ6b9///79/yP//0P+H/L/kP+H/D/k/yH/D/l/yP9D/v+L/P/H+u/fv3///v379++P/P8b+X/I/0P+H/L/kP+H/D/k/yH/D/l/yP+/kP779+/fv3///v37I///RP7/gfw/5P8h/w/5f8j/Q/4f8v+Q/4f8/x35/1P//v379+/fv39/6f8b8v9X5P8h/w/5f8j/Q/4f8v+Q/4f8P+T/L8j/n/v379+/f//+/ftL/5+Q/z8i/w/5f8j/Q/4f8v+Q/4f8P+T/If9/QP5/T//+/fv379+/f3/pH/n/gPx/RP4f8v+Q/4f8P+T/If8P+X/I/0P+P9G/f//+/fv379+/v/J/Rv6/IP8P+X/I/0P+H/L/kP+H/D/k/yH/X5H/b/379+/fv3///v2l/zvy/wP5f8j/Q/4f8v+Q/4f8P+T/If8P+f+J/P+if//+/fv379+/v/SP/P8O+X/I/0P+H/L/kP+H/D/k/yH/D/l/yP/v6N+/f//+/fv37y/9I/+/kP+fyP9D/h/y/5D/h/w/5P8h/w/5f8j/D+T/e//+/fv379+/f3/p/4b8f0X+H/L/kP+H/D/k/yH/D/l/yP9D/r8g/5/79+/fv3///v37W//I/yfk/yH/D/l/yP9D/h/y/5D/h/w/5P8j8v+B/v379zf/3wBJ/wgZkliiZwAAAABJRU5ErkJggg==\"","import { Group, Label, Line, Tag, Text } from \"react-konva\";\r\n\r\nimport { useGridStrokeWidth } from \"../../contexts/GridContext\";\r\nimport {\r\n  useDebouncedStageScale,\r\n  useMapHeight,\r\n  useMapWidth,\r\n} from \"../../contexts/MapInteractionContext\";\r\n\r\nimport { scaleAndFlattenPoints } from \"../../helpers/konva\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport { GridScale } from \"../../types/Grid\";\r\n\r\ntype RulerProps = {\r\n  points: Vector2[];\r\n  scale: GridScale;\r\n  length: number;\r\n};\r\n\r\nfunction Ruler({ points, scale, length }: RulerProps) {\r\n  const stageScale = useDebouncedStageScale();\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const mapSize = new Vector2(mapWidth, mapHeight);\r\n\r\n  const gridStrokeWidth = useGridStrokeWidth();\r\n\r\n  const linePoints = scaleAndFlattenPoints(points, mapSize);\r\n\r\n  const lineCenter = Vector2.multiply(Vector2.centroid(points), mapSize);\r\n\r\n  return (\r\n    <Group>\r\n      <Line\r\n        points={linePoints}\r\n        strokeWidth={1.5 * gridStrokeWidth}\r\n        stroke=\"hsla(230, 25%, 18%, 0.8)\"\r\n        lineCap=\"round\"\r\n      />\r\n      <Line\r\n        points={linePoints}\r\n        strokeWidth={0.25 * gridStrokeWidth}\r\n        stroke=\"white\"\r\n        lineCap=\"round\"\r\n      />\r\n      <Label\r\n        x={lineCenter.x}\r\n        y={lineCenter.y}\r\n        offsetX={26}\r\n        offsetY={26}\r\n        scaleX={1 / stageScale}\r\n        scaleY={1 / stageScale}\r\n      >\r\n        <Tag fill=\"hsla(230, 25%, 18%, 0.8)\" cornerRadius={4} />\r\n        <Text\r\n          text={`${(length * scale.multiplier).toFixed(scale.digits)}${\r\n            scale.unit\r\n          }`}\r\n          fill=\"white\"\r\n          fontSize={24}\r\n          padding={4}\r\n        />\r\n      </Label>\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default Ruler;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Group } from \"react-konva\";\r\n\r\nimport {\r\n  useInteractionEmitter,\r\n  MapDragEvent,\r\n  leftMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport {\r\n  useGrid,\r\n  useGridCellPixelSize,\r\n  useGridCellNormalizedSize,\r\n  useGridOffset,\r\n} from \"../../contexts/GridContext\";\r\n\r\nimport {\r\n  getDefaultShapeData,\r\n  getUpdatedShapeData,\r\n} from \"../../helpers/drawing\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport { getRelativePointerPosition } from \"../../helpers/konva\";\r\nimport { parseGridScale, gridDistance } from \"../../helpers/grid\";\r\n\r\nimport Ruler from \"../konva/Ruler\";\r\n\r\nimport useGridSnapping from \"../../hooks/useGridSnapping\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { PointsData } from \"../../types/Drawing\";\r\n\r\ntype MapMeasureProps = {\r\n  map: Map | null;\r\n  active: boolean;\r\n};\r\n\r\ntype MeasureData = { length: number; points: Vector2[] };\r\n\r\nfunction MeasureTool({ map, active }: MapMeasureProps) {\r\n  const interactionEmitter = useInteractionEmitter();\r\n\r\n  const grid = useGrid();\r\n  const gridCellNormalizedSize = useGridCellNormalizedSize();\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n  const gridOffset = useGridOffset();\r\n\r\n  const mapStageRef = useMapStage();\r\n  const [drawingShapeData, setDrawingShapeData] = useState<MeasureData | null>(\r\n    null\r\n  );\r\n  const [isBrushDown, setIsBrushDown] = useState(false);\r\n\r\n  const gridScale = parseGridScale(active ? grid.measurement.scale : null);\r\n\r\n  const snapPositionToGrid = useGridSnapping(\r\n    grid.measurement.type === \"euclidean\" ? 0 : 1,\r\n    false\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!active) {\r\n      return;\r\n    }\r\n    const mapStage = mapStageRef.current;\r\n    const mapImage = mapStage?.findOne(\"#mapImage\");\r\n\r\n    function getBrushPosition() {\r\n      if (!mapImage) {\r\n        return;\r\n      }\r\n      let position = getRelativePointerPosition(mapImage);\r\n      if (!position) {\r\n        return;\r\n      }\r\n      if (map?.snapToGrid) {\r\n        position = snapPositionToGrid(position);\r\n      }\r\n      return Vector2.divide(position, {\r\n        x: mapImage.width(),\r\n        y: mapImage.height(),\r\n      });\r\n    }\r\n\r\n    function handleBrushDown(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (!brushPosition) {\r\n        return;\r\n      }\r\n      const { points } = getDefaultShapeData(\r\n        \"line\",\r\n        brushPosition\r\n      ) as PointsData;\r\n      const length = 0;\r\n      setDrawingShapeData({ length, points });\r\n      setIsBrushDown(true);\r\n    }\r\n\r\n    function handleBrushMove(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (isBrushDown && drawingShapeData && brushPosition && mapImage) {\r\n        const { points } = getUpdatedShapeData(\r\n          \"line\",\r\n          drawingShapeData,\r\n          brushPosition,\r\n          gridCellNormalizedSize,\r\n          1,\r\n          1\r\n        ) as PointsData;\r\n        // Convert back to pixel values\r\n        const a = Vector2.subtract(\r\n          Vector2.multiply(points[0], {\r\n            x: mapImage.width(),\r\n            y: mapImage.height(),\r\n          }),\r\n          gridOffset\r\n        );\r\n        const b = Vector2.subtract(\r\n          Vector2.multiply(points[1], {\r\n            x: mapImage.width(),\r\n            y: mapImage.height(),\r\n          }),\r\n          gridOffset\r\n        );\r\n        const length = gridDistance(grid, a, b, gridCellPixelSize);\r\n        setDrawingShapeData({\r\n          length,\r\n          points,\r\n        });\r\n      }\r\n    }\r\n\r\n    function handleBrushUp(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      setDrawingShapeData(null);\r\n      setIsBrushDown(false);\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleBrushDown);\r\n    interactionEmitter?.on(\"drag\", handleBrushMove);\r\n    interactionEmitter?.on(\"dragEnd\", handleBrushUp);\r\n\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleBrushDown);\r\n      interactionEmitter?.off(\"drag\", handleBrushMove);\r\n      interactionEmitter?.off(\"dragEnd\", handleBrushUp);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Group>\r\n      {drawingShapeData && (\r\n        <Ruler\r\n          points={drawingShapeData.points}\r\n          scale={gridScale}\r\n          length={drawingShapeData.length}\r\n        />\r\n      )}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default MeasureTool;\r\n","import Color from \"color\";\r\nimport Konva from \"konva\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Circle, Group, Line } from \"react-konva\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\ninterface PointerPoint extends Vector2 {\r\n  lifetime: number;\r\n}\r\n\r\ntype PointerProps = {\r\n  position: Vector2;\r\n  size: number;\r\n  duration: number;\r\n  segments: number;\r\n  color: string;\r\n};\r\n\r\nfunction Pointer({ position, size, duration, segments, color }: PointerProps) {\r\n  const trailRef = useRef<Konva.Line>(null);\r\n  const pointsRef = useRef<PointerPoint[]>([]);\r\n  const prevPositionRef = useRef(position);\r\n  const positionRef = useRef(position);\r\n  const circleRef = useRef<Konva.Circle>(null);\r\n  // Color of the end of the trail\r\n  const transparentColorRef = useRef(\r\n    Color(color).lighten(0.5).alpha(0).string()\r\n  );\r\n\r\n  useEffect(() => {\r\n    // Lighten color to give it a `glow` effect\r\n    transparentColorRef.current = Color(color).lighten(0.5).alpha(0).string();\r\n  }, [color]);\r\n\r\n  // Keep track of position so we can use it in the trail animation\r\n  useEffect(() => {\r\n    positionRef.current = position;\r\n  }, [position]);\r\n\r\n  // Add a new point every time position is changed\r\n  useEffect(() => {\r\n    if (Vector2.compare(position, prevPositionRef.current, 0.0001)) {\r\n      return;\r\n    }\r\n    pointsRef.current.push({ ...position, lifetime: duration });\r\n    prevPositionRef.current = position;\r\n  }, [position, duration]);\r\n\r\n  // Advance lifetime of trail\r\n  useEffect(() => {\r\n    let prevTime = performance.now();\r\n    let request = requestAnimationFrame(animate);\r\n    function animate(time: number) {\r\n      request = requestAnimationFrame(animate);\r\n      const deltaTime = time - prevTime;\r\n      prevTime = time;\r\n\r\n      if (pointsRef.current.length === 0) {\r\n        return;\r\n      }\r\n\r\n      let expired = 0;\r\n      for (let point of pointsRef.current) {\r\n        point.lifetime -= deltaTime;\r\n        if (point.lifetime < 0) {\r\n          expired++;\r\n        }\r\n      }\r\n      if (expired > 0) {\r\n        pointsRef.current = pointsRef.current.slice(expired);\r\n      }\r\n\r\n      // Update the circle position to keep it in sync with the trail\r\n      if (circleRef && circleRef.current) {\r\n        circleRef.current.x(positionRef.current.x);\r\n        circleRef.current.y(positionRef.current.y);\r\n      }\r\n\r\n      if (trailRef && trailRef.current) {\r\n        trailRef.current.getLayer()?.draw();\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      cancelAnimationFrame(request);\r\n    };\r\n  }, []);\r\n\r\n  // Custom scene function for drawing a trail from a line\r\n  function sceneFunc(context: Konva.Context) {\r\n    // Resample points to ensure a smooth trail\r\n    const resampledPoints = Vector2.resample(pointsRef.current, segments);\r\n    if (resampledPoints.length === 0) {\r\n      return;\r\n    }\r\n    // Draws a line offset in the direction perpendicular to its travel direction\r\n    const drawOffsetLine = (from: Vector2, to: Vector2, alpha: number) => {\r\n      const forward = Vector2.normalize(Vector2.subtract(from, to));\r\n      // Rotate the forward vector 90 degrees based off of the direction\r\n      const side = Vector2.rotate90(forward);\r\n\r\n      // Offset the `to` position by the size of the point and in the side direction\r\n      const toSize = (alpha * size) / 2;\r\n      const toOffset = Vector2.add(to, Vector2.multiply(side, toSize));\r\n\r\n      context.lineTo(toOffset.x, toOffset.y);\r\n    };\r\n    context.beginPath();\r\n    // Sample the points starting from the tail then traverse counter clockwise drawing each point\r\n    // offset to make a taper, stops at the base of the trail\r\n    context.moveTo(resampledPoints[0].x, resampledPoints[0].y);\r\n    for (let i = 1; i < resampledPoints.length; i++) {\r\n      const from = resampledPoints[i - 1];\r\n      const to = resampledPoints[i];\r\n      drawOffsetLine(from, to, i / resampledPoints.length);\r\n    }\r\n    // Start from the base of the trail and continue drawing down back to the end of the tail\r\n    for (let i = resampledPoints.length - 2; i >= 0; i--) {\r\n      const from = resampledPoints[i + 1];\r\n      const to = resampledPoints[i];\r\n      drawOffsetLine(from, to, i / resampledPoints.length);\r\n    }\r\n    context.lineTo(resampledPoints[0].x, resampledPoints[0].y);\r\n    context.closePath();\r\n\r\n    // Create a radial gradient from the center of the trail to the tail\r\n    const gradientCenter = resampledPoints[resampledPoints.length - 1];\r\n    const gradientEnd = resampledPoints[0];\r\n    const gradientRadius = Vector2.magnitude(\r\n      Vector2.subtract(gradientCenter, gradientEnd)\r\n    );\r\n    let gradient = context.createRadialGradient(\r\n      gradientCenter.x,\r\n      gradientCenter.y,\r\n      0,\r\n      gradientCenter.x,\r\n      gradientCenter.y,\r\n      gradientRadius\r\n    );\r\n    gradient.addColorStop(0, color);\r\n    gradient.addColorStop(1, transparentColorRef.current);\r\n    // @ts-ignore\r\n    context.fillStyle = gradient;\r\n    context.fill();\r\n  }\r\n\r\n  return (\r\n    <Group>\r\n      <Line sceneFunc={sceneFunc} ref={trailRef} />\r\n      <Circle\r\n        x={position.x}\r\n        y={position.y}\r\n        fill={color}\r\n        width={size}\r\n        height={size}\r\n        ref={circleRef}\r\n      />\r\n    </Group>\r\n  );\r\n}\r\n\r\nPointer.defaultProps = {\r\n  // Duration of each point in milliseconds\r\n  duration: 200,\r\n  // Number of segments in the trail, resampled from the points\r\n  segments: 20,\r\n};\r\n\r\nexport default Pointer;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { Group } from \"react-konva\";\r\n\r\nimport {\r\n  useMapWidth,\r\n  useMapHeight,\r\n  useInteractionEmitter,\r\n  MapDragEvent,\r\n  leftMouseButton,\r\n  rightMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport { useGridStrokeWidth } from \"../../contexts/GridContext\";\r\n\r\nimport { getRelativePointerPositionNormalized } from \"../../helpers/konva\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport Pointer from \"../konva/Pointer\";\r\n\r\nimport colors, { Color } from \"../../helpers/colors\";\r\n\r\ntype MapPointerProps = {\r\n  active: boolean;\r\n  position: Vector2;\r\n  onPointerDown?: (position: Vector2) => void;\r\n  onPointerMove?: (position: Vector2) => void;\r\n  onPointerUp?: (position: Vector2) => void;\r\n  visible: boolean;\r\n  color: Color;\r\n};\r\n\r\nfunction PointerTool({\r\n  active,\r\n  position,\r\n  onPointerDown,\r\n  onPointerMove,\r\n  onPointerUp,\r\n  visible,\r\n  color,\r\n}: MapPointerProps) {\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const interactionEmitter = useInteractionEmitter();\r\n  const gridStrokeWidth = useGridStrokeWidth();\r\n  const mapStageRef = useMapStage();\r\n\r\n  const brushDownRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const mapStage = mapStageRef.current;\r\n\r\n    function getBrushPosition() {\r\n      if (!mapStage) {\r\n        return;\r\n      }\r\n      const mapImage = mapStage.findOne(\"#mapImage\");\r\n      return getRelativePointerPositionNormalized(mapImage);\r\n    }\r\n\r\n    function handleBrushDown(props: MapDragEvent) {\r\n      if ((leftMouseButton(props) && active) || rightMouseButton(props)) {\r\n        const brushPosition = getBrushPosition();\r\n        brushPosition && onPointerDown?.(brushPosition);\r\n        brushDownRef.current = true;\r\n      }\r\n    }\r\n\r\n    function handleBrushMove() {\r\n      if (brushDownRef.current) {\r\n        const brushPosition = getBrushPosition();\r\n        brushPosition && visible && onPointerMove?.(brushPosition);\r\n      }\r\n    }\r\n\r\n    function handleBrushUp() {\r\n      if (brushDownRef.current) {\r\n        const brushPosition = getBrushPosition();\r\n        brushPosition && onPointerUp?.(brushPosition);\r\n        brushDownRef.current = false;\r\n      }\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleBrushDown);\r\n    interactionEmitter?.on(\"drag\", handleBrushMove);\r\n    interactionEmitter?.on(\"dragEnd\", handleBrushUp);\r\n\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleBrushDown);\r\n      interactionEmitter?.off(\"drag\", handleBrushMove);\r\n      interactionEmitter?.off(\"dragEnd\", handleBrushUp);\r\n    };\r\n  });\r\n\r\n  const size = 2 * gridStrokeWidth;\r\n\r\n  return (\r\n    <Group>\r\n      {visible && (\r\n        <Pointer\r\n          position={Vector2.multiply(position, { x: mapWidth, y: mapHeight })}\r\n          color={colors[color]}\r\n          size={size}\r\n          duration={200}\r\n        />\r\n      )}\r\n    </Group>\r\n  );\r\n}\r\n\r\nPointerTool.defaultProps = {\r\n  color: \"red\",\r\n};\r\n\r\nexport default PointerTool;\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { Group } from \"react-konva\";\r\n\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\n\r\nimport PointerTool from \"../components/tools/PointerTool\";\r\nimport { isEmpty } from \"../helpers/shared\";\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\nimport useSetting from \"../hooks/useSetting\";\r\nimport Session from \"./Session\";\r\nimport { Color } from \"../helpers/colors\";\r\nimport { PointerState } from \"../types/Pointer\";\r\n\r\n// Send pointer updates every 50ms (20fps)\r\nconst sendTickRate = 50;\r\n\r\ntype InterpolatedPointerState = PointerState & { time: number };\r\n\r\ntype PointerInterpolation = {\r\n  id: string;\r\n  from: InterpolatedPointerState | null;\r\n  to: InterpolatedPointerState;\r\n};\r\n\r\ntype NetworkedMapPointerProps = {\r\n  session: Session;\r\n  active: boolean;\r\n};\r\n\r\nfunction NetworkedMapPointer({ session, active }: NetworkedMapPointerProps) {\r\n  const userId = useUserId();\r\n  const [localPointerState, setLocalPointerState] = useState<\r\n    Record<string, PointerState>\r\n  >({});\r\n  const [pointerColor] = useSetting<Color>(\"pointer.color\");\r\n\r\n  const sessionRef = useRef(session);\r\n  useEffect(() => {\r\n    sessionRef.current = session;\r\n  }, [session]);\r\n\r\n  useEffect(() => {\r\n    if (userId && !(userId in localPointerState)) {\r\n      setLocalPointerState({\r\n        [userId]: {\r\n          position: { x: 0, y: 0 },\r\n          visible: false,\r\n          id: userId,\r\n          color: pointerColor,\r\n        },\r\n      });\r\n    }\r\n  }, [userId, localPointerState, pointerColor]);\r\n\r\n  // Send pointer updates every sendTickRate to peers to save on bandwidth\r\n  // We use requestAnimationFrame as setInterval was being blocked during\r\n  // re-renders on Chrome with Windows\r\n  const ownPointerUpdateRef = useRef<PointerState | null>(null);\r\n  useEffect(() => {\r\n    let prevTime = performance.now();\r\n    let request = requestAnimationFrame(update);\r\n    let counter = 0;\r\n    function update(time: number) {\r\n      request = requestAnimationFrame(update);\r\n      const deltaTime = time - prevTime;\r\n      counter += deltaTime;\r\n      prevTime = time;\r\n\r\n      if (counter > sendTickRate) {\r\n        counter -= sendTickRate;\r\n        if (\r\n          ownPointerUpdateRef.current &&\r\n          sessionRef.current &&\r\n          sessionRef.current.socket\r\n        ) {\r\n          sessionRef.current.socket.volatile.emit(\r\n            \"player_pointer\",\r\n            ownPointerUpdateRef.current\r\n          );\r\n          ownPointerUpdateRef.current = null;\r\n        }\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      cancelAnimationFrame(request);\r\n    };\r\n  }, []);\r\n\r\n  function updateOwnPointerState(position: Vector2, visible: boolean) {\r\n    if (!userId) {\r\n      return;\r\n    }\r\n    setLocalPointerState((prev) => ({\r\n      ...prev,\r\n      [userId]: { position, visible, id: userId, color: pointerColor },\r\n    }));\r\n    ownPointerUpdateRef.current = {\r\n      position,\r\n      visible,\r\n      id: userId,\r\n      color: pointerColor,\r\n    };\r\n  }\r\n\r\n  function handleOwnPointerDown(position: Vector2) {\r\n    updateOwnPointerState(position, true);\r\n  }\r\n\r\n  function handleOwnPointerMove(position: Vector2) {\r\n    updateOwnPointerState(position, true);\r\n  }\r\n\r\n  function handleOwnPointerUp(position: Vector2) {\r\n    updateOwnPointerState(position, false);\r\n  }\r\n\r\n  // Handle pointer data receive\r\n  const interpolationsRef = useRef<Record<string, PointerInterpolation>>({});\r\n  useEffect(() => {\r\n    // TODO: Handle player disconnect while pointer visible\r\n    function handleSocketPlayerPointer(pointer: InterpolatedPointerState) {\r\n      const interpolations = interpolationsRef.current;\r\n      const id = pointer.id;\r\n      if (!(id in interpolations)) {\r\n        interpolations[id] = {\r\n          id,\r\n          from: null,\r\n          to: { ...pointer, time: performance.now() + sendTickRate },\r\n        };\r\n      } else if (\r\n        !Vector2.compare(\r\n          interpolations[id].to.position,\r\n          pointer.position,\r\n          0.0001\r\n        ) ||\r\n        interpolations[id].to.visible !== pointer.visible\r\n      ) {\r\n        const from = interpolations[id].to;\r\n        interpolations[id] = {\r\n          id,\r\n          from: {\r\n            ...from,\r\n            time: performance.now(),\r\n          },\r\n          to: {\r\n            ...pointer,\r\n            time: performance.now() + sendTickRate,\r\n          },\r\n        };\r\n      }\r\n    }\r\n\r\n    session.socket?.on(\"player_pointer\", handleSocketPlayerPointer);\r\n\r\n    return () => {\r\n      session.socket?.off(\"player_pointer\", handleSocketPlayerPointer);\r\n    };\r\n  }, [session]);\r\n\r\n  // Animate to the peer pointer positions\r\n  useEffect(() => {\r\n    let request = requestAnimationFrame(animate);\r\n\r\n    function animate() {\r\n      request = requestAnimationFrame(animate);\r\n      const time = performance.now();\r\n      let interpolatedPointerState: Record<string, PointerState> = {};\r\n      for (let interp of Object.values(interpolationsRef.current)) {\r\n        if (!interp.from || !interp.to) {\r\n          continue;\r\n        }\r\n        const totalInterpTime = interp.to.time - interp.from.time;\r\n        const currentInterpTime = time - interp.from.time;\r\n        const alpha = currentInterpTime / totalInterpTime;\r\n\r\n        if (alpha >= 0 && alpha <= 1) {\r\n          interpolatedPointerState[interp.id] = {\r\n            id: interp.id,\r\n            visible: interp.from.visible,\r\n            position: Vector2.lerp(\r\n              interp.from.position,\r\n              interp.to.position,\r\n              alpha\r\n            ),\r\n            color: interp.from.color,\r\n          };\r\n        }\r\n        if (alpha > 1 && !interp.to.visible) {\r\n          interpolatedPointerState[interp.id] = {\r\n            id: interp.id,\r\n            visible: interp.to.visible,\r\n            position: interp.to.position,\r\n            color: interp.to.color,\r\n          };\r\n          delete interpolationsRef.current[interp.id];\r\n        }\r\n      }\r\n      if (!isEmpty(interpolatedPointerState)) {\r\n        setLocalPointerState((prev) => ({\r\n          ...prev,\r\n          ...interpolatedPointerState,\r\n        }));\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      cancelAnimationFrame(request);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Group>\r\n      {Object.values(localPointerState).map((pointer) => (\r\n        <PointerTool\r\n          key={pointer.id}\r\n          active={pointer.id === userId ? active : false}\r\n          position={pointer.position}\r\n          visible={pointer.visible}\r\n          onPointerDown={\r\n            pointer.id === userId ? handleOwnPointerDown : undefined\r\n          }\r\n          onPointerMove={\r\n            pointer.id === userId ? handleOwnPointerMove : undefined\r\n          }\r\n          onPointerUp={pointer.id === userId ? handleOwnPointerUp : undefined}\r\n          color={pointer.color}\r\n        />\r\n      ))}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default NetworkedMapPointer;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nfunction usePrevious<T>(value: T): T {\r\n  const ref = useRef<T>(value);\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]);\r\n  return ref.current;\r\n}\r\n\r\nexport default usePrevious;\r\n","import { Circle, Group } from \"react-konva\";\r\n\r\nimport colors from \"../../helpers/colors\";\r\nimport { TokenState } from \"../../types/TokenState\";\r\n\r\ntype TokenStatusProps = {\r\n  tokenState: TokenState;\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nfunction TokenStatus({ tokenState, width, height }: TokenStatusProps) {\r\n  // Ensure statuses is an array and filter empty values\r\n  const statuses = [...new Set((tokenState?.statuses || []).filter((s) => s))];\r\n  return (\r\n    <Group x={width} y={height} offsetX={width / 2} offsetY={height / 2}>\r\n      {statuses.map((status, index) => (\r\n        <Circle\r\n          key={status}\r\n          width={width}\r\n          height={height}\r\n          stroke={colors[status]}\r\n          strokeWidth={width / 20 / tokenState.size}\r\n          scaleX={1 - index / 10 / tokenState.size}\r\n          scaleY={1 - index / 10 / tokenState.size}\r\n          opacity={0.8}\r\n          fillEnabled={false}\r\n        />\r\n      ))}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default TokenStatus;\r\n","import Konva from \"konva\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\nimport { Rect, Text, Group } from \"react-konva\";\r\n\r\nimport useSetting from \"../../hooks/useSetting\";\r\nimport { TokenState } from \"../../types/TokenState\";\r\n\r\nconst maxTokenSize = 3;\r\nconst defaultFontSize = 144;\r\nconst minFontSize = 16;\r\n\r\ntype TokenLabelProps = {\r\n  tokenState: TokenState;\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nfunction TokenLabel({ tokenState, width, height }: TokenLabelProps) {\r\n  const [labelSize] = useSetting<number>(\"map.labelSize\");\r\n\r\n  const paddingY =\r\n    (height / 12 / tokenState.size) * Math.min(tokenState.size, maxTokenSize);\r\n  const paddingX =\r\n    (height / 8 / tokenState.size) * Math.min(tokenState.size, maxTokenSize);\r\n\r\n  const [fontScale, setFontScale] = useState(0);\r\n  useEffect(() => {\r\n    const text = textSizerRef.current;\r\n\r\n    if (!text) {\r\n      return;\r\n    }\r\n\r\n    let fontSizes: number[] = [];\r\n    for (let size = minFontSize * labelSize; size >= 6; size--) {\r\n      const verticalSize = height / size / tokenState.size;\r\n      const tokenSize = Math.min(tokenState.size, maxTokenSize);\r\n      const fontSize = verticalSize * tokenSize * labelSize;\r\n      fontSizes.push(fontSize);\r\n    }\r\n\r\n    const findFontScale = () => {\r\n      const size = fontSizes.reduce((prev, curr) => {\r\n        text.fontSize(curr);\r\n        const textWidth = text.getTextWidth() + paddingX * 2;\r\n        if (textWidth < width) {\r\n          return curr;\r\n        } else {\r\n          return prev;\r\n        }\r\n      }, 1);\r\n\r\n      setFontScale(size / defaultFontSize);\r\n    };\r\n\r\n    findFontScale();\r\n  }, [\r\n    tokenState.label,\r\n    tokenState.visible,\r\n    width,\r\n    height,\r\n    tokenState,\r\n    labelSize,\r\n    paddingX,\r\n  ]);\r\n\r\n  const [rectWidth, setRectWidth] = useState(0);\r\n  const [textWidth, setTextWidth] = useState(0);\r\n  useEffect(() => {\r\n    const text = textRef.current;\r\n    if (text && tokenState.label) {\r\n      setRectWidth(text.getTextWidth() * fontScale + paddingX * 2);\r\n      setTextWidth(text.getTextWidth() * fontScale);\r\n    } else {\r\n      setRectWidth(0);\r\n      setTextWidth(0);\r\n    }\r\n  }, [tokenState.label, paddingX, width, fontScale]);\r\n\r\n  const textRef = useRef<Konva.Text>(null);\r\n  const textSizerRef = useRef<Konva.Text>(null);\r\n\r\n  return (\r\n    <Group y={height - (defaultFontSize * fontScale + paddingY) / 2}>\r\n      <Rect\r\n        y={-paddingY / 2}\r\n        width={rectWidth}\r\n        offsetX={width / 2}\r\n        x={width - rectWidth / 2}\r\n        height={defaultFontSize * fontScale + paddingY}\r\n        fill=\"hsla(230, 25%, 18%, 0.8)\"\r\n        cornerRadius={(defaultFontSize * fontScale + paddingY) / 2}\r\n      />\r\n      <Group offsetX={(textWidth - width) / 2}>\r\n        <Text\r\n          ref={textRef}\r\n          text={tokenState.label}\r\n          fontSize={defaultFontSize}\r\n          lineHeight={1}\r\n          // Scale font instead of changing font size to avoid kerning issues with Firefox\r\n          scaleX={fontScale}\r\n          scaleY={fontScale}\r\n          fill=\"white\"\r\n          wrap=\"none\"\r\n          ellipsis={false}\r\n          hitFunc={() => {}}\r\n        />\r\n      </Group>\r\n      {/* Use an invisible text block to work out text sizing */}\r\n      <Text\r\n        visible={false}\r\n        ref={textSizerRef}\r\n        text={tokenState.label}\r\n        wrap=\"none\"\r\n      />\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default TokenLabel;\r\n","import Konva from \"konva\";\r\nimport { Rect, Circle, Line } from \"react-konva\";\r\n\r\nimport colors from \"../../helpers/colors\";\r\nimport { Outline } from \"../../types/Outline\";\r\n\r\ntype TokenOutlineProps = {\r\n  outline: Outline;\r\n  hidden: boolean;\r\n} & Konva.ShapeConfig;\r\n\r\nfunction TokenOutline({ outline, hidden, ...props }: TokenOutlineProps) {\r\n  const sharedProps = {\r\n    fill: colors.black,\r\n    opacity: hidden ? 0 : 0.8,\r\n  };\r\n  if (outline.type === \"rect\") {\r\n    return (\r\n      <Rect\r\n        width={outline.width}\r\n        height={outline.height}\r\n        x={outline.x}\r\n        y={outline.y}\r\n        {...sharedProps}\r\n        {...props}\r\n      />\r\n    );\r\n  } else if (outline.type === \"circle\") {\r\n    return (\r\n      <Circle\r\n        radius={outline.radius}\r\n        x={outline.x}\r\n        y={outline.y}\r\n        {...sharedProps}\r\n        {...props}\r\n      />\r\n    );\r\n  } else {\r\n    return (\r\n      <Line\r\n        points={outline.points}\r\n        closed\r\n        tension={outline.points.length < 200 ? 0 : 0.33}\r\n        {...sharedProps}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default TokenOutline;\r\n","import { v4 as uuid } from \"uuid\";\r\nimport Case from \"case\";\r\nimport Konva from \"konva\";\r\n\r\nimport blobToBuffer from \"./blobToBuffer\";\r\nimport { createThumbnail, getImageOutline } from \"./image\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nimport { Token, FileToken, TokenCategory } from \"../types/Token\";\r\nimport { TokenState, BaseTokenState } from \"../types/TokenState\";\r\nimport { Asset } from \"../types/Asset\";\r\nimport { Outline } from \"../types/Outline\";\r\n\r\nexport function createTokenState(\r\n  token: Token,\r\n  position: Vector2,\r\n  userId: string\r\n): TokenState {\r\n  let tokenState: BaseTokenState = {\r\n    id: uuid(),\r\n    tokenId: token.id,\r\n    owner: userId,\r\n    size: token.defaultSize,\r\n    category: token.defaultCategory,\r\n    label: token.defaultLabel,\r\n    statuses: [],\r\n    x: position.x,\r\n    y: position.y,\r\n    lastModifiedBy: userId,\r\n    lastModified: Date.now(),\r\n    rotation: 0,\r\n    locked: false,\r\n    visible: true,\r\n    outline: token.outline,\r\n    width: token.width,\r\n    height: token.height,\r\n  };\r\n  if (token.type === \"file\") {\r\n    return {\r\n      ...tokenState,\r\n      type: \"file\",\r\n      file: token.file,\r\n    };\r\n  } else {\r\n    return {\r\n      ...tokenState,\r\n      type: \"default\",\r\n      key: token.key,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function createTokenFromFile(\r\n  file: File,\r\n  userId: string\r\n): Promise<{ token: Token; assets: Asset[] }> {\r\n  if (!file) {\r\n    return Promise.reject();\r\n  }\r\n  let name = \"Unknown Token\";\r\n  let category: TokenCategory = \"character\";\r\n  let defaultSize = 1;\r\n  if (file.name) {\r\n    name = file.name.toLowerCase();\r\n    // @ts-ignore Check match all exists\r\n    if (name.matchAll) {\r\n      // Match against a regex to find the grid size in the file name\r\n      // e.g. Cave 22x23 will return [[\"22x22\", \"22\", \"x\", \"23\"]]\r\n      const sizeMatches = [...name.matchAll(/(\\d+) ?(x|X) ?(\\d+)/g)];\r\n      for (let match of sizeMatches) {\r\n        const matchX = parseInt(match[1]);\r\n        const matchY = parseInt(match[3]);\r\n        if (\r\n          !isNaN(matchX) &&\r\n          !isNaN(matchY) &&\r\n          matchX < 256 // Add check to test match isn't resolution\r\n        ) {\r\n          defaultSize = matchX;\r\n        }\r\n      }\r\n    }\r\n    // Match only the category e.g mount and not mountain\r\n    if (/(\\b|_)prop(\\b|_)/.test(name)) {\r\n      category = \"prop\";\r\n      name = name.replace(/(\\b|_)prop(\\b|_)/, \"\");\r\n    } else if (/(\\b|_)mount(\\b|_)/.test(name)) {\r\n      category = \"vehicle\";\r\n      name = name.replace(/(\\b|_)mount(\\b|_)/, \"\");\r\n    } else if (/(\\b|_)attachment(\\b|_)/.test(name)) {\r\n      category = \"attachment\";\r\n      name = name.replace(/(\\b|_)attachment(\\b|_)/, \"\");\r\n    }\r\n    // Remove file extension\r\n    name = name.replace(/\\.[^/.]+$/, \"\");\r\n    // Removed grid size expression\r\n    name = name.replace(/(\\[ ?|\\( ?)?\\d+ ?(x|X) ?\\d+( ?\\]| ?\\))?/, \"\");\r\n    // Clean string\r\n    name = name.replace(/ +/g, \" \");\r\n    name = name.trim();\r\n    // Capitalize and remove underscores\r\n    name = Case.capital(name);\r\n  }\r\n  let image = new Image();\r\n  const buffer = await blobToBuffer(file);\r\n\r\n  // Copy file to avoid permissions issues\r\n  const blob = new Blob([buffer]);\r\n  // Create and load the image temporarily to get its dimensions\r\n  const url = URL.createObjectURL(blob);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    image.onload = async function () {\r\n      let assets: Asset[] = [];\r\n      const thumbnailImage = await createThumbnail(image, file.type);\r\n      const thumbnailId = uuid();\r\n      if (thumbnailImage) {\r\n        const thumbnail = { ...thumbnailImage, id: thumbnailId, owner: userId };\r\n        assets.push(thumbnail);\r\n      }\r\n\r\n      const fileAsset = {\r\n        id: uuid(),\r\n        file: buffer,\r\n        width: image.width,\r\n        height: image.height,\r\n        mime: file.type,\r\n        owner: userId,\r\n      };\r\n      assets.push(fileAsset);\r\n\r\n      const outline = getImageOutline(image);\r\n\r\n      const token: FileToken = {\r\n        name,\r\n        defaultSize,\r\n        thumbnail: thumbnailId,\r\n        file: fileAsset.id,\r\n        id: uuid(),\r\n        type: \"file\",\r\n        created: Date.now(),\r\n        lastModified: Date.now(),\r\n        owner: userId,\r\n        defaultCategory: category,\r\n        defaultLabel: \"\",\r\n        hideInSidebar: false,\r\n        width: image.width,\r\n        height: image.height,\r\n        outline,\r\n      };\r\n\r\n      URL.revokeObjectURL(url);\r\n      resolve({ token, assets });\r\n    };\r\n    image.onerror = reject;\r\n    image.src = url;\r\n  });\r\n}\r\n\r\nexport function clientPositionToMapPosition(\r\n  mapStage: Konva.Stage,\r\n  clientPosition: Vector2,\r\n  checkMapBounds = true\r\n): Vector2 | undefined {\r\n  const mapImage = mapStage.findOne(\"#mapImage\");\r\n  const map = document.querySelector(\".map\");\r\n  if (!map) {\r\n    return;\r\n  }\r\n  const mapRect = map.getBoundingClientRect();\r\n\r\n  // Check map bounds\r\n  if (\r\n    checkMapBounds &&\r\n    (clientPosition.x < mapRect.left ||\r\n      clientPosition.x > mapRect.right ||\r\n      clientPosition.y < mapRect.top ||\r\n      clientPosition.y > mapRect.bottom)\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // Convert relative to map rect\r\n  const mapPosition = {\r\n    x: clientPosition.x - mapRect.left,\r\n    y: clientPosition.y - mapRect.top,\r\n  };\r\n\r\n  // Convert relative to map image\r\n  const transform = mapImage.getAbsoluteTransform().copy().invert();\r\n  const relativePosition = transform.point(mapPosition);\r\n  const normalizedPosition = {\r\n    x: relativePosition.x / mapImage.width(),\r\n    y: relativePosition.y / mapImage.height(),\r\n  };\r\n\r\n  return normalizedPosition;\r\n}\r\n\r\nexport function getScaledOutline(\r\n  tokenState: TokenState,\r\n  tokenWidth: number,\r\n  tokenHeight: number\r\n): Outline {\r\n  let outline = tokenState.outline;\r\n  if (outline.type === \"rect\") {\r\n    return {\r\n      ...outline,\r\n      x: (outline.x / tokenState.width) * tokenWidth,\r\n      y: (outline.y / tokenState.height) * tokenHeight,\r\n      width: (outline.width / tokenState.width) * tokenWidth,\r\n      height: (outline.height / tokenState.height) * tokenHeight,\r\n    };\r\n  } else if (outline.type === \"circle\") {\r\n    return {\r\n      ...outline,\r\n      x: (outline.x / tokenState.width) * tokenWidth,\r\n      y: (outline.y / tokenState.height) * tokenHeight,\r\n      radius: (outline.radius / tokenState.width) * tokenWidth,\r\n    };\r\n  } else {\r\n    let points = [...outline.points]; // Copy array so we can edit it imutably\r\n    for (let i = 0; i < points.length; i += 2) {\r\n      // Scale outline to the token\r\n      points[i] = (points[i] / tokenState.width) * tokenWidth;\r\n      points[i + 1] = (points[i + 1] / tokenState.height) * tokenHeight;\r\n    }\r\n    return { ...outline, points };\r\n  }\r\n}\r\n\r\nexport class Intersection {\r\n  outline;\r\n  position;\r\n  center;\r\n  rotation;\r\n  points: Vector2[] | undefined;\r\n  /**\r\n   * @param {Outline} outline\r\n   * @param {Vector2} position - Top left position of the token\r\n   * @param {Vector2} center - Center position of the token\r\n   * @param {number} rotation - Rotation of the token in degrees\r\n   */\r\n  constructor(\r\n    outline: Outline,\r\n    position: Vector2,\r\n    center: Vector2,\r\n    rotation: number\r\n  ) {\r\n    this.outline = outline;\r\n    this.position = position;\r\n    this.center = center;\r\n    this.rotation = rotation;\r\n    // Save points for intersection\r\n    if (outline.type === \"rect\") {\r\n      this.points = [\r\n        Vector2.rotate(\r\n          Vector2.add(new Vector2(outline.x, outline.y), position),\r\n          center,\r\n          rotation\r\n        ),\r\n        Vector2.rotate(\r\n          Vector2.add(\r\n            new Vector2(outline.x + outline.width, outline.y),\r\n            position\r\n          ),\r\n          center,\r\n          rotation\r\n        ),\r\n        Vector2.rotate(\r\n          Vector2.add(\r\n            new Vector2(outline.x + outline.width, outline.y + outline.height),\r\n            position\r\n          ),\r\n          center,\r\n          rotation\r\n        ),\r\n        Vector2.rotate(\r\n          Vector2.add(\r\n            new Vector2(outline.x, outline.y + outline.height),\r\n            position\r\n          ),\r\n          center,\r\n          rotation\r\n        ),\r\n      ];\r\n    } else if (outline.type === \"path\") {\r\n      this.points = [];\r\n      for (let i = 0; i < outline.points.length; i += 2) {\r\n        this.points.push(\r\n          Vector2.rotate(\r\n            Vector2.add(\r\n              new Vector2(outline.points[i], outline.points[i + 1]),\r\n              position\r\n            ),\r\n            center,\r\n            rotation\r\n          )\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Vector2} point\r\n   * @returns {boolean}\r\n   */\r\n  intersects(point: Vector2) {\r\n    if (\r\n      this.points &&\r\n      (this.outline.type === \"rect\" || this.outline.type === \"path\")\r\n    ) {\r\n      return Vector2.pointInPolygon(point, this.points);\r\n    } else if (this.outline.type === \"circle\") {\r\n      return Vector2.distance(this.center, point) < this.outline.radius;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import Konva from \"konva\";\r\nimport { Transform } from \"konva/lib/Util\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport {\r\n  useGridCellPixelSize,\r\n  useGridSnappingSensitivity,\r\n} from \"../../contexts/GridContext\";\r\nimport { useSetPreventMapInteraction } from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\n\r\nimport { roundTo } from \"../../helpers/shared\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport { parseGridScale } from \"../../helpers/grid\";\r\n\r\nimport scaleDark from \"../../images/ScaleDark.png\";\r\nimport rotateDark from \"../../images/RotateDark.png\";\r\n\r\nimport { CustomTransformEventHandler } from \"../../types/Events\";\r\n\r\ntype TransformerProps = {\r\n  active: boolean;\r\n  nodes: Konva.Node[];\r\n  attachments: Konva.Node[];\r\n  onTransformStart?: CustomTransformEventHandler;\r\n  onTransform?: CustomTransformEventHandler;\r\n  onTransformEnd?: CustomTransformEventHandler;\r\n  gridScale: string;\r\n  portalSelector: string;\r\n};\r\n\r\nexport class CustomTransformer extends Konva.Transformer {\r\n  attachments: Konva.Node[] = [];\r\n\r\n  // Override fitNodesInto applying transform to attachments as well\r\n  _fitNodesInto(newAttrs: any, evt?: any) {\r\n    var oldAttrs = this._getNodeRect();\r\n\r\n    const minSize = 1;\r\n\r\n    if (\r\n      Konva.Util._inRange(\r\n        newAttrs.width,\r\n        -this.padding() * 2 - minSize,\r\n        minSize\r\n      )\r\n    ) {\r\n      this.update();\r\n      return;\r\n    }\r\n    if (\r\n      Konva.Util._inRange(\r\n        newAttrs.height,\r\n        -this.padding() * 2 - minSize,\r\n        minSize\r\n      )\r\n    ) {\r\n      this.update();\r\n      return;\r\n    }\r\n\r\n    const allowNegativeScale = this.flipEnabled();\r\n    var t = new Transform();\r\n    t.rotate(this.rotation());\r\n    if (\r\n      this._movingAnchorName &&\r\n      newAttrs.width < 0 &&\r\n      this._movingAnchorName.indexOf(\"left\") >= 0\r\n    ) {\r\n      const offset = t.point({\r\n        x: -this.padding() * 2,\r\n        y: 0,\r\n      });\r\n      newAttrs.x += offset.x;\r\n      newAttrs.y += offset.y;\r\n      newAttrs.width += this.padding() * 2;\r\n      this._movingAnchorName = this._movingAnchorName.replace(\"left\", \"right\");\r\n      this._anchorDragOffset.x -= offset.x;\r\n      this._anchorDragOffset.y -= offset.y;\r\n      if (!allowNegativeScale) {\r\n        this.update();\r\n        return;\r\n      }\r\n    } else if (\r\n      this._movingAnchorName &&\r\n      newAttrs.width < 0 &&\r\n      this._movingAnchorName.indexOf(\"right\") >= 0\r\n    ) {\r\n      const offset = t.point({\r\n        x: this.padding() * 2,\r\n        y: 0,\r\n      });\r\n      this._movingAnchorName = this._movingAnchorName.replace(\"right\", \"left\");\r\n      this._anchorDragOffset.x -= offset.x;\r\n      this._anchorDragOffset.y -= offset.y;\r\n      newAttrs.width += this.padding() * 2;\r\n      if (!allowNegativeScale) {\r\n        this.update();\r\n        return;\r\n      }\r\n    }\r\n    if (\r\n      this._movingAnchorName &&\r\n      newAttrs.height < 0 &&\r\n      this._movingAnchorName.indexOf(\"top\") >= 0\r\n    ) {\r\n      const offset = t.point({\r\n        x: 0,\r\n        y: -this.padding() * 2,\r\n      });\r\n      newAttrs.x += offset.x;\r\n      newAttrs.y += offset.y;\r\n      this._movingAnchorName = this._movingAnchorName.replace(\"top\", \"bottom\");\r\n      this._anchorDragOffset.x -= offset.x;\r\n      this._anchorDragOffset.y -= offset.y;\r\n      newAttrs.height += this.padding() * 2;\r\n      if (!allowNegativeScale) {\r\n        this.update();\r\n        return;\r\n      }\r\n    } else if (\r\n      this._movingAnchorName &&\r\n      newAttrs.height < 0 &&\r\n      this._movingAnchorName.indexOf(\"bottom\") >= 0\r\n    ) {\r\n      const offset = t.point({\r\n        x: 0,\r\n        y: this.padding() * 2,\r\n      });\r\n      this._movingAnchorName = this._movingAnchorName.replace(\"bottom\", \"top\");\r\n      this._anchorDragOffset.x -= offset.x;\r\n      this._anchorDragOffset.y -= offset.y;\r\n      newAttrs.height += this.padding() * 2;\r\n      if (!allowNegativeScale) {\r\n        this.update();\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (this.boundBoxFunc()) {\r\n      const bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\r\n      if (bounded) {\r\n        newAttrs = bounded;\r\n      } else {\r\n        Konva.Util.warn(\r\n          \"boundBoxFunc returned falsy. You should return new bound rect from it!\"\r\n        );\r\n      }\r\n    }\r\n\r\n    // base size value doesn't really matter\r\n    // we just need to think about bounding boxes as transforms\r\n    // but how?\r\n    // the idea is that we have a transformed rectangle with the size of \"baseSize\"\r\n    const baseSize = 10000000;\r\n    const oldTr = new Transform();\r\n    oldTr.translate(oldAttrs.x, oldAttrs.y);\r\n    oldTr.rotate(oldAttrs.rotation);\r\n    oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\r\n\r\n    const newTr = new Transform();\r\n    newTr.translate(newAttrs.x, newAttrs.y);\r\n    newTr.rotate(newAttrs.rotation);\r\n    newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\r\n\r\n    // now lets think we had [old transform] and n ow we have [new transform]\r\n    // Now, the questions is: how can we transform \"parent\" to go from [old transform] into [new transform]\r\n    // in equation it will be:\r\n    // [delta transform] * [old transform] = [new transform]\r\n    // that means that\r\n    // [delta transform] = [new transform] * [old transform inverted]\r\n    const delta = newTr.multiply(oldTr.invert());\r\n\r\n    [...this._nodes, ...this.attachments].forEach((node) => {\r\n      // for each node we have the same [delta transform]\r\n      // the equations is\r\n      // [delta transform] * [parent transform] * [old local transform] = [parent transform] * [new local transform]\r\n      // and we need to find [new local transform]\r\n      // [new local] = [parent inverted] * [delta] * [parent] * [old local]\r\n      const parentTransform = node.getParent().getAbsoluteTransform();\r\n      const localTransform = node.getTransform().copy();\r\n      // skip offset:\r\n      localTransform.translate(node.offsetX(), node.offsetY());\r\n\r\n      const newLocalTransform = new Transform();\r\n      newLocalTransform\r\n        .multiply(parentTransform.copy().invert())\r\n        .multiply(delta)\r\n        .multiply(parentTransform)\r\n        .multiply(localTransform);\r\n\r\n      const attrs = newLocalTransform.decompose();\r\n      node.setAttrs(attrs);\r\n      this._fire(\"transform\", { evt: evt, target: node });\r\n      node._fire(\"transform\", { evt: evt, target: node });\r\n      node.getLayer()?.batchDraw();\r\n    });\r\n    this.rotation(Konva.Util._getRotation(newAttrs.rotation));\r\n    this._resetTransformCache();\r\n    this.update();\r\n    this.getLayer()?.batchDraw();\r\n  }\r\n}\r\n\r\nfunction Transformer({\r\n  active,\r\n  nodes,\r\n  attachments,\r\n  onTransformStart,\r\n  onTransform,\r\n  onTransformEnd,\r\n  gridScale,\r\n  portalSelector,\r\n}: TransformerProps) {\r\n  const setPreventMapInteraction = useSetPreventMapInteraction();\r\n\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n  const gridCellAbsoluteSizeRef = useRef({\r\n    x: 0,\r\n    y: 0,\r\n  });\r\n  const scale = parseGridScale(gridScale);\r\n\r\n  const snappingSensitivity = useGridSnappingSensitivity();\r\n  // Clamp snapping to 0 to accound for -1 snapping override\r\n  const gridSnappingSensitivity = useMemo(\r\n    () => Math.max(snappingSensitivity, 0),\r\n    [snappingSensitivity]\r\n  );\r\n\r\n  const mapStageRef = useMapStage();\r\n  const transformerRef = useRef<CustomTransformer | null>(null);\r\n\r\n  useEffect(() => {\r\n    let transformer = transformerRef.current;\r\n    const stage = mapStageRef.current;\r\n    if (active && stage && !transformer) {\r\n      transformer = new CustomTransformer({\r\n        centeredScaling: true,\r\n        rotateAnchorOffset: 16,\r\n        enabledAnchors: [\"middle-left\", \"middle-right\"],\r\n        flipEnabled: false,\r\n        ignoreStroke: true,\r\n        borderStroke: \"invisible\",\r\n        anchorStroke: \"invisible\",\r\n        anchorCornerRadius: 24,\r\n        borderStrokeWidth: 0,\r\n        anchorSize: 48,\r\n      });\r\n      const portal = stage.findOne<Konva.Group>(portalSelector);\r\n      if (portal) {\r\n        portal.add(transformer);\r\n        transformerRef.current = transformer;\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (stage && transformer) {\r\n        transformer.destroy();\r\n        transformerRef.current = null;\r\n      }\r\n    };\r\n  }, [mapStageRef, portalSelector, active]);\r\n\r\n  useEffect(() => {\r\n    transformerRef.current?.boundBoxFunc((oldBox, newBox) => {\r\n      let snapBox = { ...newBox };\r\n      const movingAnchor = movingAnchorRef.current;\r\n      if (movingAnchor === \"middle-left\" || movingAnchor === \"middle-right\") {\r\n        // Account for grid snapping\r\n        const nearestCellWidth = roundTo(\r\n          snapBox.width,\r\n          gridCellAbsoluteSizeRef.current.x\r\n        );\r\n        const distanceToSnap = Math.abs(snapBox.width - nearestCellWidth);\r\n        let snapping = false;\r\n        if (\r\n          distanceToSnap <\r\n          gridCellAbsoluteSizeRef.current.x * gridSnappingSensitivity\r\n        ) {\r\n          snapBox.width = nearestCellWidth;\r\n          snapping = true;\r\n        }\r\n\r\n        const deltaWidth = snapBox.width - oldBox.width;\r\n        // Account for node ratio\r\n        const inverseRatio =\r\n          Math.round(oldBox.height) / Math.round(oldBox.width);\r\n        const deltaHeight = inverseRatio * deltaWidth;\r\n\r\n        // Account for node rotation\r\n        // Create a transform to unrotate the x,y position of the Box\r\n        const rotator = new Transform();\r\n        rotator.rotate(-snapBox.rotation);\r\n\r\n        // Unrotate and add the resize amount\r\n        let rotatedMin = rotator.point({ x: snapBox.x, y: snapBox.y });\r\n        rotatedMin.y = rotatedMin.y - deltaHeight / 2;\r\n        // Snap x position if needed\r\n        if (snapping) {\r\n          const snapDelta = newBox.width - nearestCellWidth;\r\n          rotatedMin.x = rotatedMin.x + snapDelta / 2;\r\n        }\r\n\r\n        // Rotated back\r\n        rotator.invert();\r\n        rotatedMin = rotator.point(rotatedMin);\r\n\r\n        snapBox = {\r\n          ...snapBox,\r\n          height: snapBox.height + deltaHeight,\r\n          x: rotatedMin.x,\r\n          y: rotatedMin.y,\r\n        };\r\n      }\r\n\r\n      if (snapBox.width < 5 || snapBox.height < 5) {\r\n        return oldBox;\r\n      }\r\n      return snapBox;\r\n    });\r\n  });\r\n\r\n  useEffect(() => {\r\n    transformerRef.current?.rotationSnaps(\r\n      snappingSensitivity === -1\r\n        ? [] // Disabled rotation snapping if grid snapping disabled with shortcut\r\n        : [...Array(24).keys()].map((n) => n * 15)\r\n    );\r\n  });\r\n\r\n  const movingAnchorRef = useRef<string>();\r\n  const transformTextRef = useRef<Konva.Group>();\r\n\r\n  useEffect(() => {\r\n    function updateGridCellAbsoluteSize() {\r\n      if (active) {\r\n        const transformer = transformerRef.current;\r\n        const stage = transformer?.getStage();\r\n        const mapImage = stage?.findOne(\"#mapImage\");\r\n        if (!mapImage) {\r\n          return;\r\n        }\r\n\r\n        // Use min side for hex grids\r\n        const minSize = Vector2.componentMin(gridCellPixelSize);\r\n        const size = new Vector2(minSize, minSize);\r\n\r\n        // Get grid cell size in screen coordinates\r\n        const mapTransform = mapImage.getAbsoluteTransform();\r\n        const absoluteSize = Vector2.subtract(\r\n          mapTransform.point(size),\r\n          mapTransform.point({ x: 0, y: 0 })\r\n        );\r\n\r\n        gridCellAbsoluteSizeRef.current = absoluteSize;\r\n      }\r\n    }\r\n\r\n    function handleTransformStart(e: Konva.KonvaEventObject<Event>) {\r\n      const transformer = transformerRef.current;\r\n      if (transformer) {\r\n        movingAnchorRef.current = transformer._movingAnchorName;\r\n        setPreventMapInteraction(true);\r\n\r\n        const transformText = new Konva.Label();\r\n        const stageScale = transformer.getStage()?.scale() || { x: 1, y: 1 };\r\n        transformText.scale(Vector2.divide({ x: 1, y: 1 }, stageScale));\r\n\r\n        const tag = new Konva.Tag();\r\n        tag.fill(\"hsla(230, 25%, 15%, 0.8)\");\r\n        tag.cornerRadius(4);\r\n        // @ts-ignore\r\n        tag.pointerDirection(\"down\");\r\n        tag.pointerHeight(4);\r\n        tag.pointerWidth(4);\r\n\r\n        const text = new Konva.Text();\r\n        text.fontSize(16);\r\n        text.padding(4);\r\n        text.fill(\"white\");\r\n\r\n        transformText.add(tag);\r\n        transformText.add(text);\r\n\r\n        transformer.getLayer()?.add(transformText);\r\n        transformTextRef.current = transformText;\r\n\r\n        updateGridCellAbsoluteSize();\r\n        updateTransformText();\r\n\r\n        onTransformStart && onTransformStart(e, attachments);\r\n      }\r\n    }\r\n\r\n    function updateTransformText() {\r\n      const movingAnchor = movingAnchorRef.current;\r\n      const transformText = transformTextRef.current;\r\n      const transformer = transformerRef.current;\r\n      const node = transformer?.nodes()[0];\r\n      if (node && transformText && transformer) {\r\n        const text = transformText.getChildren()[1] as Konva.Text;\r\n        if (movingAnchor === \"rotater\") {\r\n          text.text(`${node.rotation().toFixed(0)}`);\r\n        } else {\r\n          const nodeRect = node.getClientRect({ skipShadow: true });\r\n          const nodeScale = Vector2.divide(\r\n            { x: nodeRect.width, y: nodeRect.height },\r\n            gridCellAbsoluteSizeRef.current\r\n          );\r\n          text.text(\r\n            `${(nodeScale.x * scale.multiplier).toFixed(scale.digits)}${\r\n              scale.unit\r\n            }`\r\n          );\r\n        }\r\n\r\n        const nodePosition = node.getStage()?.getPointerPosition();\r\n        if (nodePosition) {\r\n          transformText.absolutePosition({\r\n            x: nodePosition.x,\r\n            y: nodePosition.y,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleTransform(e: Konva.KonvaEventObject<Event>) {\r\n      updateTransformText();\r\n      onTransform?.(e, attachments);\r\n    }\r\n\r\n    function handleTransformEnd(e: Konva.KonvaEventObject<Event>) {\r\n      setPreventMapInteraction(false);\r\n      transformTextRef.current?.destroy();\r\n      transformTextRef.current = undefined;\r\n      onTransformEnd && onTransformEnd(e, attachments);\r\n    }\r\n\r\n    transformerRef.current?.on(\"transformstart\", handleTransformStart);\r\n    transformerRef.current?.on(\"transform\", handleTransform);\r\n    transformerRef.current?.on(\"transformend\", handleTransformEnd);\r\n\r\n    return () => {\r\n      transformerRef.current?.off(\"transformstart\", handleTransformStart);\r\n      transformerRef.current?.off(\"transform\", handleTransform);\r\n      transformerRef.current?.off(\"transformend\", handleTransformEnd);\r\n    };\r\n  });\r\n\r\n  const [anchorScale, anchorScaleStatus] = useAnchorImage(96, scaleDark);\r\n  const [anchorRotate, anchorRotateStatus] = useAnchorImage(96, rotateDark);\r\n\r\n  // Add nodes to transformer and setup\r\n  useEffect(() => {\r\n    const transformer = transformerRef.current;\r\n    if (\r\n      active &&\r\n      transformer &&\r\n      anchorScaleStatus === \"loaded\" &&\r\n      anchorRotateStatus === \"loaded\"\r\n    ) {\r\n      transformer.setNodes(nodes);\r\n      transformer.attachments = attachments;\r\n\r\n      const middleLeft = transformer.findOne<Konva.Rect>(\".middle-left\");\r\n      const middleRight = transformer.findOne<Konva.Rect>(\".middle-right\");\r\n      const rotater = transformer.findOne<Konva.Rect>(\".rotater\");\r\n\r\n      middleLeft.fillPriority(\"pattern\");\r\n      middleLeft.fillPatternImage(anchorScale);\r\n      middleLeft.strokeEnabled(false);\r\n      middleLeft.fillPatternScaleX(-0.5);\r\n      middleLeft.fillPatternScaleY(0.5);\r\n\r\n      middleRight.fillPriority(\"pattern\");\r\n      middleRight.fillPatternImage(anchorScale);\r\n      middleRight.strokeEnabled(false);\r\n      middleRight.fillPatternScaleX(0.5);\r\n      middleRight.fillPatternScaleY(0.5);\r\n\r\n      rotater.fillPriority(\"pattern\");\r\n      rotater.fillPatternImage(anchorRotate);\r\n      rotater.strokeEnabled(false);\r\n      rotater.fillPatternScaleX(0.5);\r\n      rotater.fillPatternScaleY(0.5);\r\n\r\n      transformer.getLayer()?.batchDraw();\r\n    }\r\n  }, [\r\n    active,\r\n    nodes,\r\n    attachments,\r\n    anchorScale,\r\n    anchorRotate,\r\n    anchorScaleStatus,\r\n    anchorRotateStatus,\r\n  ]);\r\n\r\n  return null;\r\n}\r\n\r\nTransformer.defaultProps = {\r\n  portalSelector: \"#portal\",\r\n  attachments: [],\r\n};\r\n\r\ntype AnchorImageStatus = \"loading\" | \"loaded\" | \"failed\";\r\n\r\nfunction useAnchorImage(\r\n  size: number,\r\n  source: string\r\n): [HTMLCanvasElement, AnchorImageStatus] {\r\n  const [canvas] = useState(document.createElement(\"canvas\"));\r\n  const [status, setStatus] = useState<AnchorImageStatus>(\"loading\");\r\n\r\n  useEffect(() => {\r\n    canvas.width = size;\r\n    canvas.height = size;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const image = new Image();\r\n    image.src = source;\r\n    image.onload = () => {\r\n      const imageRatio = image.width / image.height;\r\n      const imageWidth = canvas.height * imageRatio;\r\n      ctx?.drawImage(\r\n        image,\r\n        canvas.width / 2 - imageWidth / 2,\r\n        0,\r\n        imageWidth,\r\n        canvas.height\r\n      );\r\n      setStatus(\"loaded\");\r\n    };\r\n    image.onerror = () => {\r\n      setStatus(\"failed\");\r\n    };\r\n  }, [canvas, size, source]);\r\n\r\n  return [canvas, status];\r\n}\r\n\r\nexport default Transformer;\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { Circle, Group, Rect } from \"react-konva\";\r\n\r\ntype TokenAttachmentProps = {\r\n  tokenHeight: number;\r\n  dragging: boolean;\r\n  highlight: boolean;\r\n  radius: number;\r\n};\r\n\r\nfunction TokenAttachment({\r\n  tokenHeight,\r\n  dragging,\r\n  highlight,\r\n  radius,\r\n}: TokenAttachmentProps) {\r\n  const width = radius / 3;\r\n  const height = radius / 8;\r\n  return (\r\n    <Group>\r\n      {/* Make a bigger hidden rect for hit registration */}\r\n      <Rect\r\n        width={width * 2}\r\n        height={height * 2}\r\n        x={-width}\r\n        y={tokenHeight / 2 - height}\r\n        cornerRadius={2.5}\r\n        fill=\"transparent\"\r\n      />\r\n      <Rect\r\n        width={width}\r\n        height={height}\r\n        x={-width / 2}\r\n        y={tokenHeight / 2 - height / 2}\r\n        cornerRadius={2.5}\r\n        fill=\"rgba(36, 39, 51, 0.8)\"\r\n        shadowColor=\"rgba(0,0,0,0.5)\"\r\n        shadowOffsetY={radius / 40}\r\n        shadowBlur={radius / 15}\r\n        hitFunc={() => {}}\r\n      />\r\n      {dragging ? (\r\n        <Circle\r\n          radius={radius}\r\n          stroke={\r\n            highlight ? \"hsl(260, 100%, 80%)\" : \"rgba(255, 255, 255, 0.85)\"\r\n          }\r\n          strokeWidth={0.5}\r\n        />\r\n      ) : null}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default TokenAttachment;\r\n","import { useState, useRef, useCallback, useMemo } from \"react\";\r\nimport { Image as KonvaImage, Group } from \"react-konva\";\r\nimport { useSpring, animated } from \"@react-spring/konva\";\r\nimport Konva from \"konva\";\r\nimport useImage from \"use-image\";\r\n\r\nimport usePrevious from \"../../hooks/usePrevious\";\r\nimport useGridSnapping from \"../../hooks/useGridSnapping\";\r\n\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\nimport {\r\n  useSetPreventMapInteraction,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  leftMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useGridCellPixelSize } from \"../../contexts/GridContext\";\r\nimport { useDataURL } from \"../../contexts/AssetsContext\";\r\n\r\nimport TokenStatus from \"./TokenStatus\";\r\nimport TokenLabel from \"./TokenLabel\";\r\nimport TokenOutline from \"./TokenOutline\";\r\n\r\nimport { Intersection, getScaledOutline } from \"../../helpers/token\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport { tokenSources } from \"../../tokens\";\r\nimport { TokenState } from \"../../types/TokenState\";\r\nimport { Map } from \"../../types/Map\";\r\nimport {\r\n  TokenDragEventHandler,\r\n  TokenMenuCloseChangeEventHandler,\r\n  TokenMenuOpenChangeEventHandler,\r\n  TokenStateChangeEventHandler,\r\n  CustomTransformEventHandler,\r\n} from \"../../types/Events\";\r\nimport Transformer from \"./Transformer\";\r\nimport TokenAttachment from \"./TokenAttachment\";\r\nimport { MapState } from \"../../types/MapState\";\r\n\r\ntype MapTokenProps = {\r\n  tokenState: TokenState;\r\n  onTokenStateChange: TokenStateChangeEventHandler;\r\n  onTokenMenuOpen: TokenMenuOpenChangeEventHandler;\r\n  onTokenMenuClose: TokenMenuCloseChangeEventHandler;\r\n  onTokenDragStart: TokenDragEventHandler;\r\n  onTokenDragEnd: TokenDragEventHandler;\r\n  onTokenTransformStart: CustomTransformEventHandler;\r\n  onTokenTransformEnd: CustomTransformEventHandler;\r\n  transforming: boolean;\r\n  draggable: boolean;\r\n  selectable: boolean;\r\n  fadeOnHover: boolean;\r\n  map: Map;\r\n  mapState: MapState;\r\n  selected: boolean;\r\n};\r\n\r\nfunction Token({\r\n  tokenState,\r\n  onTokenStateChange,\r\n  onTokenMenuOpen,\r\n  onTokenMenuClose,\r\n  onTokenDragStart,\r\n  onTokenDragEnd,\r\n  onTokenTransformStart,\r\n  onTokenTransformEnd,\r\n  transforming,\r\n  draggable,\r\n  selectable,\r\n  fadeOnHover,\r\n  map,\r\n  mapState,\r\n  selected,\r\n}: MapTokenProps) {\r\n  const userId = useUserId();\r\n\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const setPreventMapInteraction = useSetPreventMapInteraction();\r\n\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n\r\n  const tokenURL = useDataURL(tokenState, tokenSources);\r\n  const [tokenImage] = useImage(tokenURL || \"\");\r\n\r\n  const tokenAspectRatio = tokenState.width / tokenState.height;\r\n\r\n  const snapPositionToGrid = useGridSnapping();\r\n\r\n  const [dragging, setDragging] = useState(false);\r\n  const previousDragPositionRef = useRef({ x: 0, y: 0 });\r\n\r\n  // Tokens that are attached to this token and should move when it moves\r\n  const attachedTokensRef = useRef<Konva.Node[]>([]);\r\n  // If this an attachment is it over a character\r\n  const [attachmentOverCharacter, setAttachmentOverCharacter] = useState(false);\r\n  // The characters that we're present when an attachment is dragged, used to highlight the attachment\r\n  const attachmentCharactersRef = useRef<Konva.Node[]>([]);\r\n  const attachmentThreshold = useMemo(\r\n    () => Vector2.componentMin(gridCellPixelSize) / 4,\r\n    [gridCellPixelSize]\r\n  );\r\n\r\n  function handleDragStart(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const tokenGroup = event.target as Konva.Shape;\r\n    previousDragPositionRef.current = tokenGroup.position();\r\n\r\n    attachedTokensRef.current = getAttachedTokens();\r\n\r\n    if (tokenState.category === \"attachment\") {\r\n      // If we're dragging an attachment add all characters to the attachment characters\r\n      // So we can check for highlights\r\n      const characters = tokenGroup.getLayer()?.find(\".character\") || [];\r\n      attachmentCharactersRef.current = characters;\r\n    }\r\n\r\n    setDragging(true);\r\n    onTokenDragStart(\r\n      event,\r\n      tokenState.id,\r\n      attachedTokensRef.current.map((token) => token.id())\r\n    );\r\n  }\r\n\r\n  function handleDragMove(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const tokenGroup = event.target;\r\n    // Snap to corners of grid\r\n    if (map.snapToGrid) {\r\n      tokenGroup.position(snapPositionToGrid(tokenGroup.position()));\r\n    }\r\n    if (attachedTokensRef.current.length > 0) {\r\n      const deltaPosition = Vector2.subtract(\r\n        tokenGroup.position(),\r\n        previousDragPositionRef.current\r\n      );\r\n      for (let other of attachedTokensRef.current) {\r\n        other.position(Vector2.add(other.position(), deltaPosition));\r\n      }\r\n      previousDragPositionRef.current = tokenGroup.position();\r\n    }\r\n    // Check whether an attachment is over a character\r\n    if (tokenState.category === \"attachment\") {\r\n      const characters = attachmentCharactersRef.current;\r\n      let overCharacter = false;\r\n      for (let character of characters) {\r\n        const distance = Vector2.distance(\r\n          tokenGroup.position(),\r\n          character.position()\r\n        );\r\n        if (distance < attachmentThreshold) {\r\n          overCharacter = true;\r\n          break;\r\n        }\r\n      }\r\n      if (attachmentOverCharacter !== overCharacter) {\r\n        setAttachmentOverCharacter(overCharacter);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleDragEnd(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const tokenGroup = event.target;\r\n\r\n    const attachedTokenChanges: Record<string, Partial<TokenState>> = {};\r\n    if (attachedTokensRef.current.length > 0) {\r\n      for (let other of attachedTokensRef.current) {\r\n        attachedTokenChanges[other.id()] = {\r\n          x: other.x() / mapWidth,\r\n          y: other.y() / mapHeight,\r\n          lastModifiedBy: userId,\r\n          lastModified: Date.now(),\r\n        };\r\n      }\r\n    }\r\n\r\n    setPreventMapInteraction(false);\r\n    onTokenStateChange({\r\n      ...attachedTokenChanges,\r\n      [tokenState.id]: {\r\n        x: tokenGroup.x() / mapWidth,\r\n        y: tokenGroup.y() / mapHeight,\r\n        lastModifiedBy: userId,\r\n        lastModified: Date.now(),\r\n      },\r\n    });\r\n\r\n    setDragging(false);\r\n\r\n    onTokenDragEnd(\r\n      event,\r\n      tokenState.id,\r\n      attachedTokensRef.current.map((token) => token.id())\r\n    );\r\n\r\n    attachmentCharactersRef.current = [];\r\n    attachedTokensRef.current = [];\r\n    setAttachmentOverCharacter(false);\r\n  }\r\n\r\n  function handleClick(event: Konva.KonvaEventObject<MouseEvent>) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    if (selectable && draggable && transformRootRef.current) {\r\n      onTokenMenuOpen(tokenState.id, transformRootRef.current, true);\r\n    }\r\n  }\r\n\r\n  const [tokenOpacity, setTokenOpacity] = useState(1);\r\n  // Store token pointer down time to check for a click when token is locked\r\n  const tokenPointerDownTimeRef = useRef<number>(0);\r\n  function handlePointerDown(event: Konva.KonvaEventObject<PointerEvent>) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    if (draggable) {\r\n      setPreventMapInteraction(true);\r\n    }\r\n    if (tokenState.locked && selectable) {\r\n      tokenPointerDownTimeRef.current = event.evt.timeStamp;\r\n    }\r\n  }\r\n\r\n  function handlePointerUp(event: Konva.KonvaEventObject<PointerEvent>) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    if (draggable) {\r\n      setPreventMapInteraction(false);\r\n    }\r\n    // Check token click when locked and selectable\r\n    // We can't use onClick because that doesn't check pointer distance\r\n    if (tokenState.locked && selectable && transformRootRef.current) {\r\n      // If down and up time is small trigger a click\r\n      const delta = event.evt.timeStamp - tokenPointerDownTimeRef.current;\r\n      if (delta < 300) {\r\n        onTokenMenuOpen(tokenState.id, transformRootRef.current, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handlePointerEnter() {\r\n    if (fadeOnHover) {\r\n      setTokenOpacity(0.5);\r\n    }\r\n  }\r\n\r\n  function handlePointerLeave() {\r\n    if (tokenOpacity !== 1.0) {\r\n      setTokenOpacity(1.0);\r\n    }\r\n  }\r\n\r\n  const transformRootRef = useRef<Konva.Group>(null);\r\n\r\n  const minCellSize = Math.min(\r\n    gridCellPixelSize.width,\r\n    gridCellPixelSize.height\r\n  );\r\n  const tokenWidth = minCellSize * tokenState.size;\r\n  const tokenHeight = (minCellSize / tokenAspectRatio) * tokenState.size;\r\n\r\n  // Animate to new token positions if edited by others\r\n  const tokenX = tokenState.x * mapWidth;\r\n  const tokenY = tokenState.y * mapHeight;\r\n  const previousWidth = usePrevious(mapWidth);\r\n  const previousHeight = usePrevious(mapHeight);\r\n  const resized = mapWidth !== previousWidth || mapHeight !== previousHeight;\r\n  const skipAnimation = tokenState.lastModifiedBy === userId || resized;\r\n  const props = useSpring({\r\n    x: tokenX,\r\n    y: tokenY,\r\n    immediate: skipAnimation,\r\n  });\r\n\r\n  const getAttachedTokens = useCallback(() => {\r\n    const transformRoot = transformRootRef.current;\r\n    const tokenGroup = transformRoot?.parent;\r\n    const layer = transformRoot?.getLayer();\r\n    let attachedTokens: Konva.Node[] = [];\r\n    if (tokenGroup && layer) {\r\n      if (tokenState.category === \"vehicle\") {\r\n        const tokenIntersection = new Intersection(\r\n          getScaledOutline(tokenState, tokenWidth, tokenHeight),\r\n          { x: tokenX - tokenWidth / 2, y: tokenY - tokenHeight / 2 },\r\n          { x: tokenX, y: tokenY },\r\n          tokenState.rotation\r\n        );\r\n\r\n        // Find all other characters on the map and check whether they're\r\n        // intersecting the vehicle\r\n        const characters = layer.find(\".character\");\r\n        const attachments = layer.find(\".attachment\");\r\n        const tokens = [...characters, ...attachments];\r\n        for (let other of tokens) {\r\n          const id = other.id();\r\n          if (id in mapState.tokens) {\r\n            const position = {\r\n              x: mapState.tokens[id].x * mapWidth,\r\n              y: mapState.tokens[id].y * mapHeight,\r\n            };\r\n            if (tokenIntersection.intersects(position)) {\r\n              attachedTokens.push(other);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (tokenState.category === \"character\") {\r\n        // Find all attachments and check whether they are close to the center of this token\r\n        const attachments = layer.find(\".attachment\");\r\n        for (let attachment of attachments) {\r\n          const id = attachment.id();\r\n          if (id in mapState.tokens) {\r\n            const position = {\r\n              x: mapState.tokens[id].x * mapWidth,\r\n              y: mapState.tokens[id].y * mapHeight,\r\n            };\r\n            const distance = Vector2.distance(tokenGroup.position(), position);\r\n            if (distance < attachmentThreshold) {\r\n              attachedTokens.push(attachment);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return attachedTokens;\r\n  }, [\r\n    attachmentThreshold,\r\n    tokenHeight,\r\n    tokenWidth,\r\n    tokenState,\r\n    tokenX,\r\n    tokenY,\r\n    mapState,\r\n    mapWidth,\r\n    mapHeight,\r\n  ]);\r\n\r\n  // Override transform active to always show this transformer when using it\r\n  const [overrideTransformActive, setOverrideTransformActive] = useState(false);\r\n\r\n  function handleTransformStart(\r\n    event: Konva.KonvaEventObject<Event>,\r\n    attachments: Konva.Node[]\r\n  ) {\r\n    setOverrideTransformActive(true);\r\n    onTokenTransformStart(event, attachments);\r\n    onTokenMenuClose();\r\n  }\r\n\r\n  function handleTransformEnd(\r\n    event: Konva.KonvaEventObject<Event>,\r\n    attachments: Konva.Node[]\r\n  ) {\r\n    const transformer = event.currentTarget as Konva.Transformer;\r\n    const nodes = [...transformer.nodes(), ...attachments];\r\n    const tokenChanges: Record<string, Partial<TokenState>> = {};\r\n    for (let node of nodes) {\r\n      const id = node.id();\r\n      if (id in mapState.tokens) {\r\n        const sizeChange = node.scaleX();\r\n        const rotation = node.rotation();\r\n        const xChange = node.x() / mapWidth;\r\n        const yChange = node.y() / mapHeight;\r\n        tokenChanges[id] = {\r\n          size: mapState.tokens[id].size * sizeChange,\r\n          rotation: rotation,\r\n          x: mapState.tokens[id].x + xChange,\r\n          y: mapState.tokens[id].y + yChange,\r\n        };\r\n      }\r\n      node.scaleX(1);\r\n      node.scaleY(1);\r\n      node.x(0);\r\n      node.y(0);\r\n    }\r\n\r\n    onTokenStateChange(tokenChanges);\r\n    if (transformRootRef.current) {\r\n      onTokenMenuOpen(tokenState.id, transformRootRef.current, false);\r\n    }\r\n    setOverrideTransformActive(false);\r\n    onTokenTransformEnd(event, attachments);\r\n  }\r\n\r\n  const transformerActive = useMemo(\r\n    () => (!tokenState.locked && selected) || overrideTransformActive,\r\n    [tokenState, selected, overrideTransformActive]\r\n  );\r\n\r\n  const transformerAttachments = useMemo(() => {\r\n    if (transformerActive) {\r\n      // Find attached transform roots\r\n      return getAttachedTokens().map((node) =>\r\n        (node as Konva.Group).findOne(\".transform-root\")\r\n      );\r\n    } else {\r\n      return [];\r\n    }\r\n  }, [getAttachedTokens, transformerActive]);\r\n\r\n  // When a token is hidden if you aren't the map owner hide it completely\r\n  if (map && !tokenState.visible && map.owner !== userId) {\r\n    return null;\r\n  }\r\n\r\n  // Token name is used by on click to find whether a token is a vehicle or prop\r\n  let tokenName = \"\";\r\n  if (tokenState) {\r\n    tokenName = tokenState.category;\r\n  }\r\n  if (tokenState && tokenState.locked) {\r\n    tokenName = tokenName + \"-locked\";\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <animated.Group\r\n        {...props}\r\n        width={tokenWidth}\r\n        height={tokenHeight}\r\n        draggable={draggable}\r\n        onMouseDown={handlePointerDown}\r\n        onMouseUp={handlePointerUp}\r\n        onMouseEnter={handlePointerEnter}\r\n        onMouseLeave={handlePointerLeave}\r\n        onTouchStart={handlePointerDown}\r\n        onTouchEnd={handlePointerUp}\r\n        onClick={handleClick}\r\n        onTap={handleClick}\r\n        onDragEnd={handleDragEnd}\r\n        onDragStart={handleDragStart}\r\n        onDragMove={handleDragMove}\r\n        opacity={tokenState.visible ? tokenOpacity : 0.5}\r\n        name={tokenName}\r\n        id={tokenState.id}\r\n      >\r\n        <Group\r\n          ref={transformRootRef}\r\n          id={tokenState.id}\r\n          name=\"transform-root\"\r\n          rotation={tokenState.rotation}\r\n          offsetX={tokenWidth / 2}\r\n          offsetY={tokenHeight / 2}\r\n        >\r\n          <Group width={tokenWidth} height={tokenHeight} x={0} y={0}>\r\n            <TokenOutline\r\n              outline={getScaledOutline(tokenState, tokenWidth, tokenHeight)}\r\n              hidden={!!tokenImage}\r\n              // Disable hit detection for attachments\r\n              hitFunc={\r\n                tokenState.category === \"attachment\" ? () => {} : undefined\r\n              }\r\n            />\r\n          </Group>\r\n          <KonvaImage\r\n            width={tokenWidth}\r\n            height={tokenHeight}\r\n            x={0}\r\n            y={0}\r\n            image={tokenImage}\r\n            hitFunc={() => {}}\r\n          />\r\n        </Group>\r\n        {!transforming ? (\r\n          <Group offsetX={tokenWidth / 2} offsetY={tokenHeight / 2}>\r\n            {tokenState.statuses?.length > 0 ? (\r\n              <TokenStatus\r\n                tokenState={tokenState}\r\n                width={tokenWidth}\r\n                height={tokenHeight}\r\n              />\r\n            ) : null}\r\n            {tokenState.category === \"attachment\" ? (\r\n              <Group offsetX={-tokenWidth / 2} offsetY={-tokenHeight / 2}>\r\n                <Group rotation={tokenState.rotation}>\r\n                  <TokenAttachment\r\n                    tokenHeight={tokenHeight}\r\n                    dragging={dragging}\r\n                    highlight={attachmentOverCharacter}\r\n                    radius={attachmentThreshold * 2}\r\n                  />\r\n                </Group>\r\n              </Group>\r\n            ) : null}\r\n            {tokenState.label ? (\r\n              <TokenLabel\r\n                tokenState={tokenState}\r\n                width={tokenWidth}\r\n                height={tokenHeight}\r\n              />\r\n            ) : null}\r\n          </Group>\r\n        ) : null}\r\n      </animated.Group>\r\n      <Transformer\r\n        active={transformerActive}\r\n        nodes={\r\n          transformRootRef.current\r\n            ? [transformRootRef.current as Konva.Node]\r\n            : []\r\n        }\r\n        attachments={transformerAttachments}\r\n        onTransformEnd={handleTransformEnd}\r\n        onTransformStart={handleTransformStart}\r\n        gridScale={map.grid.measurement.scale}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Token;\r\n","function TokenLockIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenLockIcon;\r\n","function TokenUnlockIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6-5h-1V6c0-2.76-2.24-5-5-5-2.28 0-4.27 1.54-4.84 3.75-.14.54.18 1.08.72 1.22.53.14 1.08-.18 1.22-.72C9.44 3.93 10.63 3 12 3c1.65 0 3 1.35 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 11c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v8z\" />{\" \"}\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenUnlockIcon;\r\n","function TokenShowIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenShowIcon;\r\n","function TokenHideIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM2.71 3.16c-.39.39-.39 1.02 0 1.41l1.97 1.97C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenHideIcon;\r\n","function TokenCharacterIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M20.75 6.99c-.14-.55-.69-.87-1.24-.75-2.38.53-5.03.76-7.51.76s-5.13-.23-7.51-.76c-.55-.12-1.1.2-1.24.75-.14.56.2 1.13.75 1.26 1.61.36 3.35.61 5 .75v12c0 .55.45 1 1 1s1-.45 1-1v-5h2v5c0 .55.45 1 1 1s1-.45 1-1V9c1.65-.14 3.39-.39 4.99-.75.56-.13.9-.7.76-1.26zM12 6c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenCharacterIcon;\r\n","function TokenPropIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M16.96,12h0.08c0.81,0,1.28-0.91,0.82-1.57l-5.08-7.25c-0.4-0.57-1.24-0.57-1.64,0L6.1,10.43C5.64,11.09,6.12,12,6.93,12 h0.04l-2.9,4.46C3.63,17.12,4.11,18,4.91,18h5.08v2.02c0,1.09,0.89,1.98,1.98,1.98h0c1.09,0,1.98-0.89,1.98-1.98V18h5.15 c0.8,0,1.28-0.89,0.83-1.55L16.96,12z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenPropIcon;\r\n","function TokenMountIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M22.006 6v2.71c0 .472-.302.89-.75 1.04a1.005 1.005 0 01-1.17-.42l-1.12-1.79c-.13-.21-.46-.12-.46.13v3.58c0 .98-.39 1.86-1 2.53v5.97a1.25 1.25 0 01-2.5 0V15h-.25c-.21 0-.42-.03-.62-.06l-4.44-.74-1.12 2.01.712 3.55A1.037 1.037 0 018.27 21a1.559 1.559 0 01-1.525-1.238l-.74-3.512c-.03-.3 0-.6.16-.86l1.02-1.81a3.272 3.272 0 01-1.68-2.77c-.04.15-.06.37-.03.69.03.44.14 1.09.07 1.81-.04.72-.37 1.46-.79 1.95-.43.49-.9.83-1.4 1.09-.5.26-.89-.23-.7-.7.19-.47.38-.89.42-1.28.06-.37-.01-.67-.12-.94l-.53-1.13c-.21-.51-.47-1.25-.42-2.12.03-.85.5-1.96 1.39-2.57.9-.61 1.87-.69 2.66-.53.5.1 1.01.34 1.45.68.37-.17.8-.26 1.25-.26h5.75V7c0-2.21 1.79-4 4-4h3.5l-.89 1.34c.54.36.89.97.89 1.66z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenMountIcon;\r\n","function TokenAttachmentIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12,2C6.49,2,2,6.49,2,12s4.49,10,10,10s10-4.49,10-10S17.51,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8 S16.41,20,12,20z M15,12c0,1.66-1.34,3-3,3s-3-1.34-3-3s1.34-3,3-3S15,10.34,15,12z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default TokenAttachmentIcon;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Box, Input, Flex, Text, IconButton } from \"theme-ui\";\r\nimport Konva from \"konva\";\r\n\r\nimport MapMenu from \"../map/MapMenu\";\r\n\r\nimport colors, { Color, colorOptions } from \"../../helpers/colors\";\r\n\r\nimport usePrevious from \"../../hooks/usePrevious\";\r\n\r\nimport LockIcon from \"../../icons/TokenLockIcon\";\r\nimport UnlockIcon from \"../../icons/TokenUnlockIcon\";\r\nimport ShowIcon from \"../../icons/TokenShowIcon\";\r\nimport HideIcon from \"../../icons/TokenHideIcon\";\r\nimport TokenCharacterIcon from \"../../icons/TokenCharacterIcon\";\r\nimport TokenPropIcon from \"../../icons/TokenPropIcon\";\r\nimport TokenMountIcon from \"../../icons/TokenMountIcon\";\r\nimport TokenAttachmentIcon from \"../../icons/TokenAttachmentIcon\";\r\n\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\n\r\nimport {\r\n  RequestCloseEventHandler,\r\n  TokenStateChangeEventHandler,\r\n} from \"../../types/Events\";\r\nimport { TokenState } from \"../../types/TokenState\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { TokenCategory } from \"../../types/Token\";\r\n\r\nconst tokenCategories: Record<\r\n  TokenCategory,\r\n  { title: string; icon: React.ReactNode; next: TokenCategory }\r\n> = {\r\n  character: {\r\n    title: \"Character\",\r\n    icon: <TokenCharacterIcon />,\r\n    next: \"prop\",\r\n  },\r\n  prop: {\r\n    title: \"Prop\",\r\n    icon: <TokenPropIcon />,\r\n    next: \"vehicle\",\r\n  },\r\n  vehicle: {\r\n    title: \"Mount\",\r\n    icon: <TokenMountIcon />,\r\n    next: \"attachment\",\r\n  },\r\n  attachment: {\r\n    title: \"Attachment\",\r\n    icon: <TokenAttachmentIcon />,\r\n    next: \"character\",\r\n  },\r\n};\r\n\r\ntype TokenMenuProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  tokenState?: TokenState;\r\n  tokenImage?: Konva.Node;\r\n  focus: boolean;\r\n  onTokenStateChange: TokenStateChangeEventHandler;\r\n  map: Map | null;\r\n};\r\n\r\nfunction TokenMenu({\r\n  isOpen,\r\n  onRequestClose,\r\n  tokenState,\r\n  tokenImage,\r\n  focus,\r\n  onTokenStateChange,\r\n  map,\r\n}: TokenMenuProps) {\r\n  const userId = useUserId();\r\n\r\n  const wasOpen = usePrevious(isOpen);\r\n\r\n  const [menuLeft, setMenuLeft] = useState(0);\r\n  const [menuTop, setMenuTop] = useState(0);\r\n  useEffect(() => {\r\n    if (isOpen && !wasOpen && tokenState) {\r\n      // Update menu position\r\n      if (tokenImage) {\r\n        const imageRect = tokenImage.getClientRect();\r\n        const mapElement = document.querySelector(\".map\");\r\n        if (mapElement) {\r\n          const mapRect = mapElement.getBoundingClientRect();\r\n          // Center X for the menu which is 156px wide\r\n          setMenuLeft(\r\n            mapRect.left + imageRect.x + imageRect.width / 2 - 156 / 2\r\n          );\r\n          // Y 20px from the bottom\r\n          setMenuTop(mapRect.top + imageRect.y + imageRect.height + 20);\r\n        }\r\n      }\r\n    }\r\n  }, [isOpen, tokenState, wasOpen, tokenImage]);\r\n\r\n  function handleLabelChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n    const label = event.target.value.substring(0, 48);\r\n    tokenState && onTokenStateChange({ [tokenState.id]: { label: label } });\r\n  }\r\n\r\n  function handleStatusChange(status: Color) {\r\n    if (!tokenState) {\r\n      return;\r\n    }\r\n    const statuses = new Set(tokenState.statuses.filter((s) => s));\r\n    if (statuses.has(status)) {\r\n      statuses.delete(status);\r\n    } else {\r\n      statuses.add(status);\r\n    }\r\n    onTokenStateChange({\r\n      [tokenState.id]: { statuses: [...statuses] },\r\n    });\r\n  }\r\n\r\n  function handleVisibleChange() {\r\n    tokenState &&\r\n      onTokenStateChange({\r\n        [tokenState.id]: { visible: !tokenState.visible },\r\n      });\r\n  }\r\n\r\n  function handleLockChange() {\r\n    tokenState &&\r\n      onTokenStateChange({\r\n        [tokenState.id]: { locked: !tokenState.locked },\r\n      });\r\n  }\r\n\r\n  function handleCategoryChange() {\r\n    tokenState &&\r\n      onTokenStateChange({\r\n        [tokenState.id]: {\r\n          category: tokenCategories[tokenState.category].next,\r\n        },\r\n      });\r\n  }\r\n\r\n  function handleModalContent(node: HTMLElement) {\r\n    if (node) {\r\n      // Focus input\r\n      const tokenLabelInput =\r\n        node.querySelector<HTMLInputElement>(\"#changeTokenLabel\");\r\n      if (tokenLabelInput && focus) {\r\n        tokenLabelInput.focus();\r\n        tokenLabelInput.select();\r\n      }\r\n\r\n      // Ensure menu is in bounds\r\n      const nodeRect = node.getBoundingClientRect();\r\n      const mapElement = document.querySelector(\".map\");\r\n      if (mapElement) {\r\n        const mapRect = mapElement.getBoundingClientRect();\r\n        setMenuLeft((prevLeft) =>\r\n          Math.min(\r\n            mapRect.right - nodeRect.width,\r\n            Math.max(mapRect.left, prevLeft)\r\n          )\r\n        );\r\n        setMenuTop((prevTop) =>\r\n          Math.min(mapRect.bottom - nodeRect.height, prevTop)\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MapMenu\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      top={`${menuTop}px`}\r\n      left={`${menuLeft}px`}\r\n      onModalContent={handleModalContent}\r\n    >\r\n      <Box sx={{ width: \"156px\", overflow: \"hidden\" }} p={1}>\r\n        <Flex\r\n          as=\"form\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            onRequestClose();\r\n          }}\r\n          sx={{ alignItems: \"center\" }}\r\n        >\r\n          <Text\r\n            as=\"label\"\r\n            variant=\"body2\"\r\n            sx={{ width: \"45%\", fontSize: \"16px\" }}\r\n            p={1}\r\n          >\r\n            Label:\r\n          </Text>\r\n          <Input\r\n            id=\"changeTokenLabel\"\r\n            onChange={handleLabelChange}\r\n            value={(tokenState && tokenState.label) || \"\"}\r\n            sx={{\r\n              padding: \"4px\",\r\n              border: \"none\",\r\n              \":focus\": {\r\n                outline: \"none\",\r\n              },\r\n            }}\r\n            autoComplete=\"off\"\r\n          />\r\n        </Flex>\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            flexWrap: \"wrap\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          {colorOptions\r\n            .filter((color) => color !== \"primary\")\r\n            .map((color) => (\r\n              <Box\r\n                key={color}\r\n                sx={{\r\n                  width: \"16.66%\",\r\n                  paddingTop: \"16.66%\",\r\n                  borderRadius: \"50%\",\r\n                  transform: \"scale(0.75)\",\r\n                  backgroundColor: colors[color],\r\n                  cursor: \"pointer\",\r\n                }}\r\n                onClick={() => handleStatusChange(color)}\r\n                aria-label={`Token label Color ${color}`}\r\n              >\r\n                {tokenState &&\r\n                  tokenState.statuses &&\r\n                  tokenState.statuses.includes(color) && (\r\n                    <Box\r\n                      sx={{\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        border: \"2px solid white\",\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        borderRadius: \"50%\",\r\n                      }}\r\n                    />\r\n                  )}\r\n              </Box>\r\n            ))}\r\n        </Box>\r\n        {/* Only show hide and lock token actions to map owners */}\r\n        {map && map.owner === userId && tokenState && (\r\n          <Flex sx={{ alignItems: \"center\", justifyContent: \"space-around\" }}>\r\n            <IconButton\r\n              onClick={handleVisibleChange}\r\n              title={tokenState.visible ? \"Hide Token\" : \"Show Token\"}\r\n              aria-label={tokenState.visible ? \"Hide Token\" : \"Show Token\"}\r\n            >\r\n              {tokenState.visible ? <ShowIcon /> : <HideIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={handleLockChange}\r\n              title={tokenState.locked ? \"Unlock Token\" : \"Lock Token\"}\r\n              aria-label={tokenState.locked ? \"Unlock Token\" : \"Lock Token\"}\r\n            >\r\n              {tokenState.locked ? <LockIcon /> : <UnlockIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={handleCategoryChange}\r\n              title={tokenCategories[tokenState.category].title}\r\n              aria-label={tokenCategories[tokenState.category].title}\r\n            >\r\n              {tokenCategories[tokenState.category].icon}\r\n            </IconButton>\r\n          </Flex>\r\n        )}\r\n      </Box>\r\n    </MapMenu>\r\n  );\r\n}\r\n\r\nTokenMenu.defaultProps = {\r\n  focus: false,\r\n};\r\n\r\nexport default TokenMenu;\r\n","function RemoveTokenIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default RemoveTokenIcon;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Box, IconButton } from \"theme-ui\";\r\n\r\nimport RemoveTokenIcon from \"../../icons/RemoveTokenIcon\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\n\r\ntype DragOverlayProps = {\r\n  dragging: boolean;\r\n  onRemove: () => void;\r\n};\r\n\r\nfunction DragOverlay({ dragging, onRemove }: DragOverlayProps) {\r\n  const [isRemoveHovered, setIsRemoveHovered] = useState(false);\r\n  const removeTokenRef = useRef<HTMLDivElement>(null);\r\n\r\n  const mapStageRef = useMapStage();\r\n\r\n  // Detect token hover on remove icon manually to support touch devices\r\n  useEffect(() => {\r\n    function detectRemoveHover() {\r\n      const mapStage = mapStageRef.current;\r\n      if (!mapStage || !dragging || !removeTokenRef.current) {\r\n        return;\r\n      }\r\n      const map = document.querySelector(\".map\");\r\n      if (!map) {\r\n        return;\r\n      }\r\n      const mapRect = map.getBoundingClientRect();\r\n      const pointerPosition = mapStage.getPointerPosition();\r\n      if (!pointerPosition) {\r\n        return;\r\n      }\r\n      const screenSpacePointerPosition = {\r\n        x: pointerPosition.x + mapRect.left,\r\n        y: pointerPosition.y + mapRect.top,\r\n      };\r\n      const removeIconPosition = removeTokenRef.current.getBoundingClientRect();\r\n\r\n      if (\r\n        screenSpacePointerPosition.x > removeIconPosition.left &&\r\n        screenSpacePointerPosition.y > removeIconPosition.top &&\r\n        screenSpacePointerPosition.x < removeIconPosition.right &&\r\n        screenSpacePointerPosition.y < removeIconPosition.bottom\r\n      ) {\r\n        if (!isRemoveHovered) {\r\n          setIsRemoveHovered(true);\r\n        }\r\n      } else if (isRemoveHovered) {\r\n        setIsRemoveHovered(false);\r\n      }\r\n    }\r\n\r\n    let handler: NodeJS.Timeout;\r\n    if (dragging) {\r\n      handler = setInterval(detectRemoveHover, 100);\r\n    }\r\n\r\n    return () => {\r\n      if (handler) {\r\n        clearInterval(handler);\r\n      }\r\n    };\r\n  }, [isRemoveHovered, dragging, mapStageRef]);\r\n\r\n  // Detect drag end of token image and remove it if it is over the remove icon\r\n  useEffect(() => {\r\n    if (!dragging && isRemoveHovered) {\r\n      onRemove();\r\n    }\r\n  });\r\n\r\n  if (!dragging) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        position: \"absolute\",\r\n        bottom: \"32px\",\r\n        left: \"50%\",\r\n        borderRadius: \"50%\",\r\n        transform: isRemoveHovered\r\n          ? \"translateX(-50%) scale(2.0)\"\r\n          : \"translateX(-50%) scale(1.5)\",\r\n        transition: \"transform 250ms ease\",\r\n        color: isRemoveHovered ? \"primary\" : \"text\",\r\n        pointerEvents: \"none\",\r\n      }}\r\n      bg=\"overlay\"\r\n      ref={removeTokenRef}\r\n    >\r\n      <IconButton>\r\n        <RemoveTokenIcon />\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default DragOverlay;\r\n","import DragOverlay from \"../map/DragOverlay\";\r\nimport { TokenStateRemoveHandler } from \"../../types/Events\";\r\nimport { TokenDraggingOptions } from \"../../types/Token\";\r\n\r\ntype TokenDragOverlayProps = {\r\n  onTokenStateRemove: TokenStateRemoveHandler;\r\n  draggingOptions: TokenDraggingOptions;\r\n};\r\n\r\nfunction TokenDragOverlay({\r\n  onTokenStateRemove,\r\n  draggingOptions,\r\n}: TokenDragOverlayProps) {\r\n  function handleTokenRemove() {\r\n    onTokenStateRemove([\r\n      draggingOptions.tokenStateId,\r\n      ...draggingOptions.attachedTokenStateIds,\r\n    ]);\r\n  }\r\n\r\n  return (\r\n    <DragOverlay\r\n      dragging={draggingOptions.dragging}\r\n      onRemove={handleTokenRemove}\r\n    />\r\n  );\r\n}\r\n\r\nexport default TokenDragOverlay;\r\n","import { Group } from \"react-konva\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nimport { Map, MapToolId } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport {\r\n  TokenCategory,\r\n  TokenDraggingOptions,\r\n  TokenMenuOptions,\r\n} from \"../types/Token\";\r\nimport { TokenState } from \"../types/TokenState\";\r\nimport {\r\n  TokenStateRemoveHandler,\r\n  TokenStateChangeEventHandler,\r\n  TokensStateCreateHandler,\r\n} from \"../types/Events\";\r\nimport { useState } from \"react\";\r\nimport Konva from \"konva\";\r\nimport Token from \"../components/konva/Token\";\r\nimport { KonvaEventObject } from \"konva/lib/Node\";\r\nimport TokenMenu from \"../components/token/TokenMenu\";\r\nimport TokenDragOverlay from \"../components/token/TokenDragOverlay\";\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport { useBlur, useKeyboard } from \"../contexts/KeyboardContext\";\r\nimport shortcuts from \"../shortcuts\";\r\n\r\nfunction useMapTokens(\r\n  map: Map | null,\r\n  mapState: MapState | null,\r\n  onTokenStateChange: TokenStateChangeEventHandler,\r\n  onTokenStateRemove: TokenStateRemoveHandler,\r\n  onTokensStateCreate: TokensStateCreateHandler,\r\n  selectedToolId: MapToolId\r\n) {\r\n  const userId = useUserId();\r\n  const disabledTokens: Record<string, boolean> = {};\r\n  if (mapState && map) {\r\n    if (!mapState.editFlags.includes(\"tokens\") && map.owner !== userId) {\r\n      for (let token of Object.values(mapState.tokens)) {\r\n        if (token.owner !== userId) {\r\n          disabledTokens[token.id] = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const [isTokenMenuOpen, setIsTokenMenuOpen] = useState<boolean>(false);\r\n  const [tokenMenuOptions, setTokenMenuOptions] = useState<TokenMenuOptions>();\r\n  const [tokenDraggingOptions, setTokenDraggingOptions] =\r\n    useState<TokenDraggingOptions>();\r\n\r\n  function handleTokenMenuOpen(\r\n    tokenStateId: string,\r\n    tokenImage: Konva.Node,\r\n    focus: boolean\r\n  ) {\r\n    setTokenMenuOptions({ tokenStateId, tokenImage, focus });\r\n    setIsTokenMenuOpen(true);\r\n  }\r\n\r\n  function handleTokenMenuClose() {\r\n    setIsTokenMenuOpen(false);\r\n  }\r\n\r\n  function handleTokenDragStart(\r\n    _: KonvaEventObject<DragEvent>,\r\n    tokenStateId: string,\r\n    attachedTokenStateIds: string[]\r\n  ) {\r\n    if (duplicateToken) {\r\n      let newStates: TokenState[] = [];\r\n      for (let id of [tokenStateId, ...attachedTokenStateIds]) {\r\n        const state = mapState?.tokens[id];\r\n        if (state) {\r\n          newStates.push({ ...state, id: uuid() });\r\n        }\r\n      }\r\n      onTokensStateCreate(newStates);\r\n    }\r\n    setTokenDraggingOptions({\r\n      dragging: true,\r\n      tokenStateId,\r\n      attachedTokenStateIds,\r\n    });\r\n  }\r\n\r\n  function handleTokenDragEnd() {\r\n    tokenDraggingOptions &&\r\n      setTokenDraggingOptions({\r\n        ...tokenDraggingOptions,\r\n        dragging: false,\r\n      });\r\n  }\r\n\r\n  function handleTokenStateRemove(tokenStateIds: string[]) {\r\n    onTokenStateRemove(tokenStateIds);\r\n    setTokenDraggingOptions(undefined);\r\n  }\r\n\r\n  const [duplicateToken, setDuplicateToken] = useState(false);\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.duplicate(event)) {\r\n      setDuplicateToken(true);\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (shortcuts.duplicate(event)) {\r\n      setDuplicateToken(false);\r\n    }\r\n  }\r\n\r\n  function handleBlur() {\r\n    setDuplicateToken(false);\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n  useBlur(handleBlur);\r\n\r\n  const [transformingTokensIds, setTransformingTokenIds] = useState<string[]>(\r\n    []\r\n  );\r\n  function handleTokenTransformStart(\r\n    event: Konva.KonvaEventObject<Event>,\r\n    attachments: Konva.Node[]\r\n  ) {\r\n    const transformer = event.currentTarget as Konva.Transformer;\r\n    const nodes = transformer.nodes();\r\n    setTransformingTokenIds(\r\n      [...nodes, ...attachments].map((node) => node.id())\r\n    );\r\n  }\r\n\r\n  function handleTokenTransformEnd() {\r\n    setTransformingTokenIds([]);\r\n  }\r\n\r\n  function tokenFromTokenState(tokenState: TokenState) {\r\n    return (\r\n      map &&\r\n      mapState && (\r\n        <Token\r\n          key={tokenState.id}\r\n          tokenState={tokenState}\r\n          onTokenStateChange={onTokenStateChange}\r\n          onTokenMenuOpen={handleTokenMenuOpen}\r\n          onTokenMenuClose={handleTokenMenuClose}\r\n          onTokenDragStart={handleTokenDragStart}\r\n          onTokenDragEnd={handleTokenDragEnd}\r\n          onTokenTransformStart={handleTokenTransformStart}\r\n          onTokenTransformEnd={handleTokenTransformEnd}\r\n          transforming={transformingTokensIds.includes(tokenState.id)}\r\n          draggable={\r\n            selectedToolId === \"move\" &&\r\n            !(tokenState.id in disabledTokens) &&\r\n            !tokenState.locked\r\n          }\r\n          selectable={\r\n            selectedToolId === \"move\" &&\r\n            ((!(tokenState.id in disabledTokens) && !tokenState.locked) ||\r\n              map.owner === userId)\r\n          }\r\n          fadeOnHover={\r\n            tokenState.category !== \"prop\" && selectedToolId === \"drawing\"\r\n          }\r\n          map={map}\r\n          mapState={mapState}\r\n          selected={\r\n            !!tokenMenuOptions &&\r\n            isTokenMenuOpen &&\r\n            tokenMenuOptions.tokenStateId === tokenState.id\r\n          }\r\n        />\r\n      )\r\n    );\r\n  }\r\n\r\n  const tokens = map && mapState && (\r\n    <Group id=\"tokens\">\r\n      {Object.values(mapState.tokens)\r\n        .filter((tokenState) => tokenState.category !== \"prop\")\r\n        .sort((a, b) => sortMapTokenStates(a, b, tokenDraggingOptions))\r\n        .map(tokenFromTokenState)}\r\n    </Group>\r\n  );\r\n\r\n  const propTokens = map && mapState && (\r\n    <Group id=\"tokens\">\r\n      {Object.values(mapState.tokens)\r\n        .filter((tokenState) => tokenState.category === \"prop\")\r\n        .sort((a, b) => sortMapTokenStates(a, b, tokenDraggingOptions))\r\n        .map(tokenFromTokenState)}\r\n    </Group>\r\n  );\r\n\r\n  const tokenMenu = (\r\n    <TokenMenu\r\n      isOpen={isTokenMenuOpen}\r\n      onRequestClose={handleTokenMenuClose}\r\n      onTokenStateChange={onTokenStateChange}\r\n      tokenState={\r\n        tokenMenuOptions && mapState?.tokens[tokenMenuOptions.tokenStateId]\r\n      }\r\n      focus={tokenMenuOptions?.focus}\r\n      tokenImage={tokenMenuOptions?.tokenImage}\r\n      map={map}\r\n    />\r\n  );\r\n\r\n  const tokenDragOverlay = tokenDraggingOptions && (\r\n    <TokenDragOverlay\r\n      onTokenStateRemove={handleTokenStateRemove}\r\n      draggingOptions={tokenDraggingOptions}\r\n    />\r\n  );\r\n\r\n  return { tokens, propTokens, tokenMenu, tokenDragOverlay };\r\n}\r\n\r\nexport default useMapTokens;\r\n\r\nfunction getMapTokenCategoryWeight(category: TokenCategory) {\r\n  switch (category) {\r\n    case \"attachment\":\r\n      return 0;\r\n    case \"character\":\r\n      return 1;\r\n    case \"vehicle\":\r\n      return 2;\r\n    case \"prop\":\r\n      return 3;\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\n// Sort so vehicles render below other tokens\r\nfunction sortMapTokenStates(\r\n  a: TokenState,\r\n  b: TokenState,\r\n  tokenDraggingOptions?: TokenDraggingOptions\r\n) {\r\n  // If categories are different sort in order \"prop\", \"vehicle\", \"character\", \"attachment\"\r\n  if (b.category !== a.category) {\r\n    const aWeight = getMapTokenCategoryWeight(a.category);\r\n    const bWeight = getMapTokenCategoryWeight(b.category);\r\n    return bWeight - aWeight;\r\n  } else if (\r\n    tokenDraggingOptions &&\r\n    tokenDraggingOptions.dragging &&\r\n    tokenDraggingOptions.tokenStateId === a.id\r\n  ) {\r\n    // If dragging token a move above\r\n    return 1;\r\n  } else if (\r\n    tokenDraggingOptions &&\r\n    tokenDraggingOptions.dragging &&\r\n    tokenDraggingOptions.tokenStateId === b.id\r\n  ) {\r\n    // If dragging token b move above\r\n    return -1;\r\n  } else {\r\n    // Else sort so last modified is on top\r\n    return a.lastModified - b.lastModified;\r\n  }\r\n}\r\n","import { useEffect, useState, useRef } from \"react\";\r\nimport { Rect, Text } from \"react-konva\";\r\nimport Konva from \"konva\";\r\nimport { useSpring, animated } from \"@react-spring/konva\";\r\n\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\nimport {\r\n  useSetPreventMapInteraction,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  leftMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useGridCellPixelSize } from \"../../contexts/GridContext\";\r\n\r\nimport colors from \"../../helpers/colors\";\r\n\r\nimport usePrevious from \"../../hooks/usePrevious\";\r\nimport useGridSnapping from \"../../hooks/useGridSnapping\";\r\n\r\nimport { Note as NoteType } from \"../../types/Note\";\r\nimport {\r\n  NoteChangeEventHandler,\r\n  NoteDragEventHandler,\r\n  NoteMenuCloseEventHandler,\r\n  NoteMenuOpenEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Map } from \"../../types/Map\";\r\n\r\nimport Transformer from \"./Transformer\";\r\n\r\nconst defaultFontSize = 144;\r\nconst minFontSize = 16;\r\n\r\ntype NoteProps = {\r\n  note: NoteType;\r\n  map: Map | null;\r\n  onNoteChange?: NoteChangeEventHandler;\r\n  onNoteMenuOpen?: NoteMenuOpenEventHandler;\r\n  onNoteMenuClose?: NoteMenuCloseEventHandler;\r\n  draggable: boolean;\r\n  onNoteDragStart?: NoteDragEventHandler;\r\n  onNoteDragEnd?: NoteDragEventHandler;\r\n  fadeOnHover: boolean;\r\n  selected: boolean;\r\n};\r\n\r\nfunction Note({\r\n  note,\r\n  map,\r\n  onNoteChange,\r\n  onNoteMenuOpen,\r\n  onNoteMenuClose,\r\n  draggable,\r\n  onNoteDragStart,\r\n  onNoteDragEnd,\r\n  fadeOnHover,\r\n  selected,\r\n}: NoteProps) {\r\n  const userId = useUserId();\r\n\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const setPreventMapInteraction = useSetPreventMapInteraction();\r\n\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n\r\n  const minCellSize = Math.min(\r\n    gridCellPixelSize.width,\r\n    gridCellPixelSize.height\r\n  );\r\n  const noteWidth = minCellSize * note.size;\r\n  const noteHeight = noteWidth;\r\n  const notePadding = noteWidth / 10;\r\n\r\n  const snapPositionToGrid = useGridSnapping();\r\n\r\n  function handleDragStart(event: Konva.KonvaEventObject<DragEvent>) {\r\n    onNoteDragStart?.(event, note.id);\r\n  }\r\n\r\n  function handleDragMove(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const noteGroup = event.target;\r\n    // Snap to corners of grid\r\n    if (map?.snapToGrid) {\r\n      noteGroup.position(snapPositionToGrid(noteGroup.position()));\r\n    }\r\n  }\r\n\r\n  function handleDragEnd(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const noteGroup = event.target;\r\n    if (userId) {\r\n      onNoteChange?.({\r\n        [note.id]: {\r\n          x: noteGroup.x() / mapWidth,\r\n          y: noteGroup.y() / mapHeight,\r\n          lastModifiedBy: userId,\r\n          lastModified: Date.now(),\r\n        },\r\n      });\r\n    }\r\n    onNoteDragEnd?.(event, note.id);\r\n    setPreventMapInteraction(false);\r\n  }\r\n\r\n  function handleClick(event: Konva.KonvaEventObject<MouseEvent>) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    if (draggable) {\r\n      const noteNode = event.target;\r\n      onNoteMenuOpen && onNoteMenuOpen(note.id, noteNode, true);\r\n    }\r\n  }\r\n\r\n  // Store note pointer down time to check for a click when note is locked\r\n  const notePointerDownTimeRef = useRef<number>(0);\r\n  function handlePointerDown(event: Konva.KonvaEventObject<PointerEvent>) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    if (draggable) {\r\n      setPreventMapInteraction(true);\r\n    }\r\n    if (note.locked && map?.owner === userId) {\r\n      notePointerDownTimeRef.current = event.evt.timeStamp;\r\n    }\r\n  }\r\n\r\n  function handlePointerUp(event: Konva.KonvaEventObject<PointerEvent>) {\r\n    if (!leftMouseButton(event)) {\r\n      return;\r\n    }\r\n    if (draggable) {\r\n      setPreventMapInteraction(false);\r\n    }\r\n    // Check note click when locked and we are the map owner\r\n    // We can't use onClick because that doesn't check pointer distance\r\n    if (note.locked && map?.owner === userId) {\r\n      // If down and up time is small trigger a click\r\n      const delta = event.evt.timeStamp - notePointerDownTimeRef.current;\r\n      if (delta < 300) {\r\n        const noteNode = event.target;\r\n        onNoteMenuOpen?.(note.id, noteNode, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  const [noteOpacity, setNoteOpacity] = useState(1);\r\n  function handlePointerEnter() {\r\n    if (fadeOnHover) {\r\n      setNoteOpacity(0.5);\r\n    }\r\n  }\r\n\r\n  function handlePointerLeave() {\r\n    if (noteOpacity !== 1.0) {\r\n      setNoteOpacity(1.0);\r\n    }\r\n  }\r\n\r\n  const [fontScale, setFontScale] = useState(1);\r\n  useEffect(() => {\r\n    const text = textRef.current;\r\n    function findFontSize() {\r\n      if (!text) {\r\n        return;\r\n      }\r\n      // Create an array from 1 / minFontSize of the note height to the full note height\r\n      let sizes = Array.from(\r\n        { length: Math.ceil(noteHeight - notePadding * 2) },\r\n        (_, i) => i + Math.ceil(noteHeight / minFontSize)\r\n      );\r\n\r\n      if (sizes.length > 0) {\r\n        const size = sizes.reduce((prev, curr) => {\r\n          text.fontSize(curr);\r\n          const width = text.getTextWidth() + notePadding * 2;\r\n          const height = text.height() + notePadding * 2;\r\n          if (width < noteWidth && height < noteHeight) {\r\n            return curr;\r\n          } else {\r\n            return prev;\r\n          }\r\n        });\r\n        setFontScale(size / defaultFontSize);\r\n      }\r\n    }\r\n\r\n    findFontSize();\r\n  }, [note, note.text, note.visible, noteWidth, noteHeight, notePadding]);\r\n\r\n  const textRef = useRef<Konva.Text>(null);\r\n\r\n  const noteRef = useRef<Konva.Group>(null);\r\n  const [isTransforming, setIsTransforming] = useState(false);\r\n  function handleTransformStart() {\r\n    setIsTransforming(true);\r\n    onNoteMenuClose?.();\r\n  }\r\n\r\n  function handleTransformEnd(event: Konva.KonvaEventObject<Event>) {\r\n    if (noteRef.current) {\r\n      const sizeChange = event.target.scaleX();\r\n      const rotation = event.target.rotation();\r\n      onNoteChange?.({\r\n        [note.id]: {\r\n          size: note.size * sizeChange,\r\n          rotation: rotation,\r\n        },\r\n      });\r\n      onNoteMenuOpen?.(note.id, noteRef.current, false);\r\n      noteRef.current.scaleX(1);\r\n      noteRef.current.scaleY(1);\r\n    }\r\n    setIsTransforming(false);\r\n  }\r\n\r\n  // Animate to new note positions if edited by others\r\n  const noteX = note.x * mapWidth;\r\n  const noteY = note.y * mapHeight;\r\n  const previousWidth = usePrevious(mapWidth);\r\n  const previousHeight = usePrevious(mapHeight);\r\n  const resized = mapWidth !== previousWidth || mapHeight !== previousHeight;\r\n  const skipAnimation = note.lastModifiedBy === userId || resized;\r\n  const props = useSpring({\r\n    x: noteX,\r\n    y: noteY,\r\n    immediate: skipAnimation,\r\n  });\r\n\r\n  // When a note is hidden if you aren't the map owner hide it completely\r\n  if (map && !note.visible && map.owner !== userId) {\r\n    return null;\r\n  }\r\n\r\n  const noteName = `note${note.locked ? \"-locked\" : \"\"}`;\r\n\r\n  return (\r\n    <>\r\n      <animated.Group\r\n        {...props}\r\n        id={note.id}\r\n        onClick={handleClick}\r\n        onTap={handleClick}\r\n        width={noteWidth}\r\n        height={note.textOnly ? undefined : noteHeight}\r\n        rotation={note.rotation}\r\n        offsetX={noteWidth / 2}\r\n        offsetY={noteHeight / 2}\r\n        draggable={draggable}\r\n        onDragStart={handleDragStart}\r\n        onDragEnd={handleDragEnd}\r\n        onDragMove={handleDragMove}\r\n        onMouseDown={handlePointerDown}\r\n        onMouseUp={handlePointerUp}\r\n        onTouchStart={handlePointerDown}\r\n        onTouchEnd={handlePointerUp}\r\n        onMouseEnter={handlePointerEnter}\r\n        onMouseLeave={handlePointerLeave}\r\n        opacity={note.visible ? noteOpacity : 0.5}\r\n        name={noteName}\r\n        ref={noteRef}\r\n      >\r\n        {!note.textOnly && (\r\n          <Rect\r\n            width={noteWidth}\r\n            height={noteHeight}\r\n            shadowColor=\"rgba(0, 0, 0, 0.16)\"\r\n            shadowOffset={{ x: 0, y: 3 }}\r\n            shadowBlur={6}\r\n            cornerRadius={0.25}\r\n            fill={colors[note.color]}\r\n          />\r\n        )}\r\n        <Text\r\n          text={note.text}\r\n          fill={\r\n            note.textOnly\r\n              ? colors[note.color]\r\n              : note.color === \"black\" || note.color === \"darkGray\"\r\n              ? \"white\"\r\n              : \"black\"\r\n          }\r\n          align=\"left\"\r\n          verticalAlign=\"middle\"\r\n          padding={notePadding / fontScale}\r\n          fontSize={defaultFontSize}\r\n          // Scale font instead of changing font size to avoid kerning issues with Firefox\r\n          scaleX={fontScale}\r\n          scaleY={fontScale}\r\n          width={noteWidth / fontScale}\r\n          height={note.textOnly ? undefined : noteHeight / fontScale}\r\n          wrap=\"word\"\r\n        />\r\n        {/* Use an invisible text block to work out text sizing */}\r\n        <Text visible={false} ref={textRef} text={note.text} wrap=\"none\" />\r\n      </animated.Group>\r\n      <Transformer\r\n        active={(!note.locked && selected) || isTransforming}\r\n        nodes={noteRef.current ? [noteRef.current] : []}\r\n        onTransformEnd={handleTransformEnd}\r\n        onTransformStart={handleTransformStart}\r\n        gridScale={map?.grid.measurement.scale || \"\"}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nNote.defaultProps = {\r\n  fadeOnHover: false,\r\n  draggable: false,\r\n};\r\n\r\nexport default Note;\r\n","import { NoteRemoveEventHander } from \"../../types/Events\";\r\nimport { NoteDraggingOptions } from \"../../types/Note\";\r\n\r\nimport DragOverlay from \"../map/DragOverlay\";\r\n\r\ntype NoteDragOverlayProps = {\r\n  onNoteRemove: NoteRemoveEventHander;\r\n  draggingOptions: NoteDraggingOptions;\r\n};\r\n\r\nfunction NoteDragOverlay({\r\n  onNoteRemove,\r\n  draggingOptions,\r\n}: NoteDragOverlayProps) {\r\n  function handleNoteRemove() {\r\n    onNoteRemove([draggingOptions.noteId]);\r\n  }\r\n\r\n  return (\r\n    <DragOverlay\r\n      dragging={draggingOptions.dragging}\r\n      onRemove={handleNoteRemove}\r\n    />\r\n  );\r\n}\r\n\r\nexport default NoteDragOverlay;\r\n","import TextareaAutosize, {\r\n  TextareaAutosizeProps,\r\n} from \"react-textarea-autosize\";\r\nimport \"./TextareaAutoSize.css\";\r\n\r\nfunction StyledTextareaAutoSize(props: TextareaAutosizeProps) {\r\n  return <TextareaAutosize className=\"textarea-auto-size\" {...props} />;\r\n}\r\n\r\nexport default StyledTextareaAutoSize;\r\n","function NoteTextIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M2 20h20c1.1 0 2 .9 2 2s-.9 2-2 2H2c-1.1 0-2-.9-2-2s.9-2 2-2z\" />\r\n      <path d=\"M10.63 3.93L6.06 15.58c-.27.68.23 1.42.97 1.42.43 0 .82-.27.98-.68L8.87 14h6.25l.87 2.32c.15.41.54.68.98.68.73 0 1.24-.74.97-1.42L13.37 3.93C13.14 3.37 12.6 3 12 3c-.6 0-1.15.37-1.37.93zM9.62 12L12 5.67 14.38 12H9.62z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default NoteTextIcon;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Box, Flex, IconButton } from \"theme-ui\";\r\nimport Konva from \"konva\";\r\n\r\nimport TextareaAutosize from \"../TextareaAutoSize\";\r\n\r\nimport MapMenu from \"../map/MapMenu\";\r\n\r\nimport colors, { Color, colorOptions } from \"../../helpers/colors\";\r\n\r\nimport usePrevious from \"../../hooks/usePrevious\";\r\n\r\nimport LockIcon from \"../../icons/TokenLockIcon\";\r\nimport UnlockIcon from \"../../icons/TokenUnlockIcon\";\r\nimport ShowIcon from \"../../icons/TokenShowIcon\";\r\nimport HideIcon from \"../../icons/TokenHideIcon\";\r\nimport NoteIcon from \"../../icons/NoteToolIcon\";\r\nimport TextIcon from \"../../icons/NoteTextIcon\";\r\n\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\n\r\nimport {\r\n  NoteChangeEventHandler,\r\n  RequestCloseEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Note } from \"../../types/Note\";\r\nimport { Map } from \"../../types/Map\";\r\n\r\ntype NoteMenuProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  note?: Note;\r\n  noteNode?: Konva.Node;\r\n  focus: boolean;\r\n  onNoteChange: NoteChangeEventHandler;\r\n  map: Map | null;\r\n};\r\n\r\nfunction NoteMenu({\r\n  isOpen,\r\n  onRequestClose,\r\n  note,\r\n  noteNode,\r\n  focus,\r\n  onNoteChange,\r\n  map,\r\n}: NoteMenuProps) {\r\n  const userId = useUserId();\r\n\r\n  const wasOpen = usePrevious(isOpen);\r\n\r\n  const [menuLeft, setMenuLeft] = useState(0);\r\n  const [menuTop, setMenuTop] = useState(0);\r\n  useEffect(() => {\r\n    if (isOpen && !wasOpen && note) {\r\n      // Update menu position\r\n      if (noteNode) {\r\n        const nodeRect = noteNode.getClientRect();\r\n        const mapElement = document.querySelector(\".map\");\r\n        if (mapElement) {\r\n          const mapRect = mapElement.getBoundingClientRect();\r\n          // Center X for the menu which is 156px wide\r\n          setMenuLeft(mapRect.left + nodeRect.x + nodeRect.width / 2 - 156 / 2);\r\n          // Y 20px from the bottom\r\n          setMenuTop(mapRect.top + nodeRect.y + nodeRect.height + 20);\r\n        }\r\n      }\r\n    }\r\n  }, [isOpen, note, wasOpen, noteNode]);\r\n\r\n  function handleTextChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\r\n    const text = event.target.value.substring(0, 1024);\r\n    note && onNoteChange({ [note.id]: { text: text } });\r\n  }\r\n\r\n  function handleColorChange(color: Color) {\r\n    if (!note) {\r\n      return;\r\n    }\r\n    onNoteChange({ [note.id]: { color: color } });\r\n  }\r\n\r\n  function handleVisibleChange() {\r\n    note && onNoteChange({ [note.id]: { visible: !note.visible } });\r\n  }\r\n\r\n  function handleLockChange() {\r\n    note && onNoteChange({ [note.id]: { locked: !note.locked } });\r\n  }\r\n\r\n  function handleModeChange() {\r\n    note && onNoteChange({ [note.id]: { textOnly: !note.textOnly } });\r\n  }\r\n\r\n  function handleModalContent(node: HTMLElement) {\r\n    if (node) {\r\n      // Focus input\r\n      const tokenLabelInput =\r\n        node.querySelector<HTMLInputElement>(\"#changeNoteText\");\r\n      if (tokenLabelInput && focus) {\r\n        tokenLabelInput.focus();\r\n        tokenLabelInput.select();\r\n      }\r\n\r\n      // Ensure menu is in bounds\r\n      const nodeRect = node.getBoundingClientRect();\r\n      const mapElement = document.querySelector(\".map\");\r\n      if (mapElement) {\r\n        const mapRect = mapElement.getBoundingClientRect();\r\n        setMenuLeft((prevLeft) =>\r\n          Math.min(\r\n            mapRect.right - nodeRect.width,\r\n            Math.max(mapRect.left, prevLeft)\r\n          )\r\n        );\r\n        setMenuTop((prevTop) =>\r\n          Math.min(mapRect.bottom - nodeRect.height, prevTop)\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleTextKeyPress(e: React.KeyboardEvent<HTMLTextAreaElement>) {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      onRequestClose();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MapMenu\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      top={`${menuTop}px`}\r\n      left={`${menuLeft}px`}\r\n      onModalContent={handleModalContent}\r\n    >\r\n      <Box sx={{ width: \"156px\", overflow: \"hidden\" }} p={1}>\r\n        <Flex\r\n          as=\"form\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            onRequestClose();\r\n          }}\r\n          sx={{ alignItems: \"center\" }}\r\n        >\r\n          <TextareaAutosize\r\n            id=\"changeNoteText\"\r\n            onChange={handleTextChange}\r\n            value={(note && note.text) || \"\"}\r\n            onKeyPress={handleTextKeyPress}\r\n            maxRows={4}\r\n          />\r\n        </Flex>\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            flexWrap: \"wrap\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          {colorOptions\r\n            .filter((color) => color !== \"primary\")\r\n            .map((color) => (\r\n              <Box\r\n                key={color}\r\n                sx={{\r\n                  width: \"16.66%\",\r\n                  paddingTop: \"16.66%\",\r\n                  borderRadius: \"50%\",\r\n                  transform: \"scale(0.75)\",\r\n                  backgroundColor: colors[color],\r\n                  cursor: \"pointer\",\r\n                }}\r\n                onClick={() => handleColorChange(color)}\r\n                aria-label={`Note label Color ${color}`}\r\n              >\r\n                {note && note.color === color && (\r\n                  <Box\r\n                    sx={{\r\n                      width: \"100%\",\r\n                      height: \"100%\",\r\n                      border: \"2px solid white\",\r\n                      position: \"absolute\",\r\n                      top: 0,\r\n                      borderRadius: \"50%\",\r\n                    }}\r\n                  />\r\n                )}\r\n              </Box>\r\n            ))}\r\n        </Box>\r\n        {/* Only show hide and lock token actions to map owners */}\r\n        {map && map.owner === userId && (\r\n          <Flex sx={{ alignItems: \"center\", justifyContent: \"space-around\" }}>\r\n            <IconButton\r\n              onClick={handleVisibleChange}\r\n              title={note && note.visible ? \"Hide Note\" : \"Show Note\"}\r\n              aria-label={note && note.visible ? \"Hide Note\" : \"Show Note\"}\r\n            >\r\n              {note && note.visible ? <ShowIcon /> : <HideIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={handleLockChange}\r\n              title={note && note.locked ? \"Unlock Note\" : \"Lock Note\"}\r\n              aria-label={note && note.locked ? \"Unlock Note\" : \"Lock Note\"}\r\n            >\r\n              {note && note.locked ? <LockIcon /> : <UnlockIcon />}\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={handleModeChange}\r\n              title={note && note.textOnly ? \"Note Mode\" : \"Text Mode\"}\r\n              aria-label={note && note.textOnly ? \"Note Mode\" : \"Text Mode\"}\r\n            >\r\n              {note && note.textOnly ? <TextIcon /> : <NoteIcon />}\r\n            </IconButton>\r\n          </Flex>\r\n        )}\r\n      </Box>\r\n    </MapMenu>\r\n  );\r\n}\r\n\r\nNoteMenu.defaultProps = {\r\n  focus: false,\r\n};\r\n\r\nexport default NoteMenu;\r\n","import { Rect } from \"react-konva\";\r\n\r\nimport {\r\n  useMapWidth,\r\n  useMapHeight,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useGridCellPixelSize } from \"../../contexts/GridContext\";\r\n\r\nimport colors from \"../../helpers/colors\";\r\n\r\nimport { Note as NoteType } from \"../../types/Note\";\r\n\r\ntype NoteProps = {\r\n  note: NoteType;\r\n};\r\n\r\nfunction BlankNote({ note }: NoteProps) {\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n\r\n  const gridCellPixelSize = useGridCellPixelSize();\r\n\r\n  const minCellSize = Math.min(\r\n    gridCellPixelSize.width,\r\n    gridCellPixelSize.height\r\n  );\r\n  const noteWidth = minCellSize * note.size;\r\n  const noteHeight = noteWidth;\r\n\r\n  return (\r\n    <Rect\r\n      x={note.x * mapWidth}\r\n      y={note.y * mapHeight}\r\n      width={noteWidth}\r\n      height={noteHeight}\r\n      offsetX={noteWidth / 2}\r\n      offsetY={noteHeight / 2}\r\n      shadowColor=\"rgba(0, 0, 0, 0.16)\"\r\n      shadowOffset={{ x: 3, y: 6 }}\r\n      shadowBlur={6}\r\n      cornerRadius={0.25}\r\n      fill={colors[note.color]}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BlankNote;\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport shortid from \"shortid\";\r\nimport { Group } from \"react-konva\";\r\nimport Konva from \"konva\";\r\n\r\nimport {\r\n  useInteractionEmitter,\r\n  MapDragEvent,\r\n  leftMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\n\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport { getRelativePointerPosition } from \"../../helpers/konva\";\r\n\r\nimport useGridSnapping from \"../../hooks/useGridSnapping\";\r\n\r\nimport BlankNote from \"../konva/BlankNote\";\r\n\r\nimport { Map } from \"../../types/Map\";\r\nimport { Note as NoteType } from \"../../types/Note\";\r\nimport {\r\n  NoteCreateEventHander,\r\n  NoteMenuOpenEventHandler,\r\n} from \"../../types/Events\";\r\n\r\nconst defaultNoteSize = 2;\r\n\r\ntype MapNoteProps = {\r\n  map: Map | null;\r\n  active: boolean;\r\n  onNoteCreate: NoteCreateEventHander;\r\n  onNoteMenuOpen: NoteMenuOpenEventHandler;\r\n};\r\n\r\nfunction NoteTool({ map, active, onNoteCreate, onNoteMenuOpen }: MapNoteProps) {\r\n  const interactionEmitter = useInteractionEmitter();\r\n  const userId = useUserId();\r\n  const mapStageRef = useMapStage();\r\n  const [noteData, setNoteData] = useState<NoteType | null>(null);\r\n\r\n  const creatingNoteRef = useRef<Konva.Group>(null);\r\n\r\n  const snapPositionToGrid = useGridSnapping();\r\n\r\n  useEffect(() => {\r\n    if (!active) {\r\n      return;\r\n    }\r\n    const mapStage = mapStageRef.current;\r\n\r\n    function getBrushPosition() {\r\n      if (!mapStage) {\r\n        return;\r\n      }\r\n      const mapImage = mapStage.findOne(\"#mapImage\");\r\n      let position = getRelativePointerPosition(mapImage);\r\n      if (!position) {\r\n        return;\r\n      }\r\n      if (map?.snapToGrid) {\r\n        position = snapPositionToGrid(position);\r\n      }\r\n      return Vector2.divide(position, {\r\n        x: mapImage.width(),\r\n        y: mapImage.height(),\r\n      });\r\n    }\r\n\r\n    function handleBrushDown(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (!brushPosition || !userId) {\r\n        return;\r\n      }\r\n      setNoteData({\r\n        x: brushPosition.x,\r\n        y: brushPosition.y,\r\n        size: defaultNoteSize,\r\n        text: \"\",\r\n        id: shortid.generate(),\r\n        lastModified: Date.now(),\r\n        lastModifiedBy: userId,\r\n        visible: true,\r\n        locked: false,\r\n        color: \"yellow\",\r\n        textOnly: false,\r\n        rotation: 0,\r\n      });\r\n      if (creatingNoteRef.current) {\r\n        creatingNoteRef.current.visible(true);\r\n      }\r\n    }\r\n\r\n    function handleBrushMove(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (noteData) {\r\n        const brushPosition = getBrushPosition();\r\n        if (!brushPosition) {\r\n          return;\r\n        }\r\n        setNoteData((prev) => {\r\n          if (!prev) {\r\n            return prev;\r\n          }\r\n          return {\r\n            ...prev,\r\n            x: brushPosition.x,\r\n            y: brushPosition.y,\r\n          };\r\n        });\r\n      }\r\n    }\r\n\r\n    function handleBrushUp(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (noteData && creatingNoteRef.current) {\r\n        onNoteCreate([noteData]);\r\n        onNoteMenuOpen(noteData.id, creatingNoteRef.current, true);\r\n        // Hide creating note tool here as settings noteData to null\r\n        // was causing performance issues in FireFox\r\n        creatingNoteRef.current.visible(false);\r\n      }\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleBrushDown);\r\n    interactionEmitter?.on(\"drag\", handleBrushMove);\r\n    interactionEmitter?.on(\"dragEnd\", handleBrushUp);\r\n\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleBrushDown);\r\n      interactionEmitter?.off(\"drag\", handleBrushMove);\r\n      interactionEmitter?.off(\"dragEnd\", handleBrushUp);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Group ref={creatingNoteRef}>\r\n      {noteData && <BlankNote note={noteData} />}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default NoteTool;\r\n","import Konva from \"konva\";\r\nimport { Group } from \"react-konva\";\r\nimport { KonvaEventObject } from \"konva/lib/Node\";\r\nimport { useState } from \"react\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nimport Note from \"../components/konva/Note\";\r\nimport NoteDragOverlay from \"../components/note/NoteDragOverlay\";\r\nimport NoteMenu from \"../components/note/NoteMenu\";\r\nimport NoteTool from \"../components/tools/NoteTool\";\r\nimport { useBlur, useKeyboard } from \"../contexts/KeyboardContext\";\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport shortcuts from \"../shortcuts\";\r\nimport {\r\n  NoteChangeEventHandler,\r\n  NoteCreateEventHander,\r\n  NoteRemoveEventHander,\r\n} from \"../types/Events\";\r\nimport { Map, MapToolId } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport {\r\n  Note as NoteType,\r\n  NoteDraggingOptions,\r\n  NoteMenuOptions,\r\n} from \"../types/Note\";\r\n\r\nfunction useMapNotes(\r\n  map: Map | null,\r\n  mapState: MapState | null,\r\n  onNoteCreate: NoteCreateEventHander,\r\n  onNoteChange: NoteChangeEventHandler,\r\n  onNoteRemove: NoteRemoveEventHander,\r\n  selectedToolId: MapToolId\r\n) {\r\n  const userId = useUserId();\r\n  const allowNoteEditing = !!(\r\n    map?.owner === userId || mapState?.editFlags.includes(\"notes\")\r\n  );\r\n\r\n  const [isNoteMenuOpen, setIsNoteMenuOpen] = useState<boolean>(false);\r\n  const [noteMenuOptions, setNoteMenuOptions] = useState<NoteMenuOptions>();\r\n  const [noteDraggingOptions, setNoteDraggingOptions] =\r\n    useState<NoteDraggingOptions>();\r\n\r\n  function handleNoteMenuOpen(\r\n    noteId: string,\r\n    noteNode: Konva.Node,\r\n    focus: boolean\r\n  ) {\r\n    setNoteMenuOptions({ noteId, noteNode, focus });\r\n    setIsNoteMenuOpen(true);\r\n  }\r\n\r\n  function handleNoteMenuClose() {\r\n    setIsNoteMenuOpen(false);\r\n  }\r\n\r\n  function handleNoteDragStart(_: KonvaEventObject<DragEvent>, noteId: string) {\r\n    if (duplicateNote) {\r\n      const note = mapState?.notes[noteId];\r\n      if (note) {\r\n        onNoteCreate([{ ...note, id: uuid() }]);\r\n      }\r\n    }\r\n    setNoteDraggingOptions({ dragging: true, noteId });\r\n  }\r\n\r\n  function handleNoteDragEnd() {\r\n    noteDraggingOptions &&\r\n      setNoteDraggingOptions({ ...noteDraggingOptions, dragging: false });\r\n  }\r\n\r\n  function handleNoteRemove(noteIds: string[]) {\r\n    onNoteRemove(noteIds);\r\n    setNoteDraggingOptions(undefined);\r\n  }\r\n\r\n  const [duplicateNote, setDuplicateNote] = useState(false);\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.duplicate(event)) {\r\n      setDuplicateNote(true);\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (shortcuts.duplicate(event)) {\r\n      setDuplicateNote(false);\r\n    }\r\n  }\r\n\r\n  function handleBlur() {\r\n    setDuplicateNote(false);\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n  useBlur(handleBlur);\r\n\r\n  const notes = (\r\n    <Group id=\"notes\">\r\n      {(mapState\r\n        ? Object.values(mapState.notes).sort((a, b) =>\r\n            sortNotes(a, b, noteDraggingOptions)\r\n          )\r\n        : []\r\n      ).map((note) => (\r\n        <Note\r\n          note={note}\r\n          map={map}\r\n          key={note.id}\r\n          onNoteMenuOpen={handleNoteMenuOpen}\r\n          onNoteMenuClose={handleNoteMenuClose}\r\n          draggable={\r\n            allowNoteEditing &&\r\n            (selectedToolId === \"note\" || selectedToolId === \"move\") &&\r\n            !note.locked\r\n          }\r\n          onNoteChange={onNoteChange}\r\n          onNoteDragStart={handleNoteDragStart}\r\n          onNoteDragEnd={handleNoteDragEnd}\r\n          fadeOnHover={selectedToolId === \"drawing\"}\r\n          selected={\r\n            !!noteMenuOptions &&\r\n            isNoteMenuOpen &&\r\n            noteMenuOptions.noteId === note.id\r\n          }\r\n        />\r\n      ))}\r\n      <NoteTool\r\n        map={map}\r\n        active={selectedToolId === \"note\"}\r\n        onNoteCreate={onNoteCreate}\r\n        onNoteMenuOpen={handleNoteMenuOpen}\r\n      />\r\n    </Group>\r\n  );\r\n\r\n  const noteMenu = (\r\n    <NoteMenu\r\n      isOpen={isNoteMenuOpen}\r\n      onRequestClose={handleNoteMenuClose}\r\n      onNoteChange={onNoteChange}\r\n      note={noteMenuOptions && mapState?.notes[noteMenuOptions.noteId]}\r\n      noteNode={noteMenuOptions?.noteNode}\r\n      focus={noteMenuOptions?.focus}\r\n      map={map}\r\n    />\r\n  );\r\n\r\n  const noteDragOverlay = noteDraggingOptions ? (\r\n    <NoteDragOverlay\r\n      draggingOptions={noteDraggingOptions}\r\n      onNoteRemove={handleNoteRemove}\r\n    />\r\n  ) : null;\r\n\r\n  return { notes, noteMenu, noteDragOverlay };\r\n}\r\n\r\nexport default useMapNotes;\r\n\r\nfunction sortNotes(\r\n  a: NoteType,\r\n  b: NoteType,\r\n  noteDraggingOptions?: NoteDraggingOptions\r\n) {\r\n  if (\r\n    noteDraggingOptions &&\r\n    noteDraggingOptions.dragging &&\r\n    noteDraggingOptions.noteId === a.id\r\n  ) {\r\n    // If dragging token `a` move above\r\n    return 1;\r\n  } else if (\r\n    noteDraggingOptions &&\r\n    noteDraggingOptions.dragging &&\r\n    noteDraggingOptions.noteId === b.id\r\n  ) {\r\n    // If dragging token `b` move above\r\n    return -1;\r\n  } else {\r\n    // Else sort so last modified is on top\r\n    return a.lastModified - b.lastModified;\r\n  }\r\n}\r\n","import { SelectionItemsRemoveEventHandler } from \"../../types/Events\";\r\nimport { Selection } from \"../../types/Select\";\r\n\r\nimport DragOverlay from \"../map/DragOverlay\";\r\n\r\ntype NoteDragOverlayProps = {\r\n  onSelectionItemsRemove: SelectionItemsRemoveEventHandler;\r\n  selection: Selection;\r\n  dragging: boolean;\r\n};\r\n\r\nfunction NoteDragOverlay({\r\n  onSelectionItemsRemove,\r\n  selection,\r\n  dragging,\r\n}: NoteDragOverlayProps) {\r\n  function handleNoteRemove() {\r\n    const tokenIds: string[] = [];\r\n    const noteIds: string[] = [];\r\n    for (let item of selection.items) {\r\n      if (item.type === \"token\") {\r\n        tokenIds.push(item.id);\r\n      } else {\r\n        noteIds.push(item.id);\r\n      }\r\n    }\r\n    onSelectionItemsRemove(tokenIds, noteIds);\r\n  }\r\n\r\n  return <DragOverlay dragging={dragging} onRemove={handleNoteRemove} />;\r\n}\r\n\r\nexport default NoteDragOverlay;\r\n","function CopyIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M15,20H5V7c0-0.55-0.45-1-1-1h0C3.45,6,3,6.45,3,7v13c0,1.1,0.9,2,2,2h10c0.55,0,1-0.45,1-1v0C16,20.45,15.55,20,15,20z M20,16V4c0-1.1-0.9-2-2-2H9C7.9,2,7,2.9,7,4v12c0,1.1,0.9,2,2,2h9C19.1,18,20,17.1,20,16z M18,16H9V4h9V16z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default CopyIcon;\r\n","function PasteIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M19 2h-4.18C14.4.84 13.3 0 12 0S9.6.84 9.18 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm6 18H6c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1h1v1c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V4h1c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default PasteIcon;\r\n","import { Selection } from \"../types/Select\";\r\nimport Vector2 from \"./Vector2\";\r\n\r\nexport function getSelectionPoints(selection: Selection): Vector2[] {\r\n  let points: Vector2[] = [];\r\n  if (selection.type === \"path\") {\r\n    points = selection.data.points;\r\n  } else {\r\n    points.push({ x: selection.data.x, y: selection.data.y });\r\n    points.push({\r\n      x: selection.data.x + selection.data.width,\r\n      y: selection.data.y,\r\n    });\r\n    points.push({\r\n      x: selection.data.x + selection.data.width,\r\n      y: selection.data.y + selection.data.height,\r\n    });\r\n    points.push({\r\n      x: selection.data.x,\r\n      y: selection.data.y + selection.data.height,\r\n    });\r\n  }\r\n  return points;\r\n}\r\n","import Ajv, { JSONSchemaType } from \"ajv\";\r\nimport { Color } from \"../helpers/colors\";\r\n\r\nconst ajv = new Ajv();\r\n\r\nexport const ColorSchema: JSONSchemaType<Color> = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/color.json\",\r\n  enum: [\r\n    \"black\",\r\n    \"blue\",\r\n    \"darkGray\",\r\n    \"green\",\r\n    \"lightGray\",\r\n    \"orange\",\r\n    \"pink\",\r\n    \"primary\",\r\n    \"purple\",\r\n    \"red\",\r\n    \"teal\",\r\n    \"white\",\r\n    \"yellow\",\r\n  ],\r\n  type: \"string\",\r\n};\r\n\r\nexport const isColor = ajv.compile<Color>(ColorSchema);\r\n","import Ajv, { JSONSchemaType } from \"ajv\";\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\nconst ajv = new Ajv();\r\n\r\nexport const Vector2Schema: JSONSchemaType<Vector2> = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/vector2.json\",\r\n  properties: {\r\n    x: {\r\n      type: \"number\",\r\n    },\r\n    y: {\r\n      type: \"number\",\r\n    },\r\n  },\r\n  required: [\"x\", \"y\"],\r\n  type: \"object\",\r\n};\r\n\r\nexport const isVector2 = ajv.compile<Vector2>(Vector2Schema);\r\n","import Ajv from \"ajv\";\r\nimport { Drawing } from \"../types/Drawing\";\r\n\r\nimport { ColorSchema } from \"./Color\";\r\nimport { Vector2Schema } from \"./Vector2\";\r\n\r\nexport const DrawingSchema = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/drawing.json\",\r\n  anyOf: [\r\n    {\r\n      $ref: \"#/definitions/Shape\",\r\n    },\r\n    {\r\n      $ref: \"#/definitions/Path\",\r\n    },\r\n  ],\r\n  definitions: {\r\n    PointsData: {\r\n      properties: {\r\n        points: {\r\n          items: {\r\n            $ref: \"vector2.json\",\r\n          },\r\n          type: \"array\",\r\n        },\r\n      },\r\n      required: [\"points\"],\r\n      type: \"object\",\r\n    },\r\n    RectData: {\r\n      properties: {\r\n        height: {\r\n          type: \"number\",\r\n        },\r\n        width: {\r\n          type: \"number\",\r\n        },\r\n        x: {\r\n          type: \"number\",\r\n        },\r\n        y: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\"height\", \"width\", \"x\", \"y\"],\r\n      type: \"object\",\r\n    },\r\n    CircleData: {\r\n      properties: {\r\n        radius: {\r\n          type: \"number\",\r\n        },\r\n        x: {\r\n          type: \"number\",\r\n        },\r\n        y: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\"radius\", \"x\", \"y\"],\r\n      type: \"object\",\r\n    },\r\n    BaseDrawing: {\r\n      properties: {\r\n        blend: {\r\n          type: \"boolean\",\r\n        },\r\n        color: {\r\n          $ref: \"color.json\",\r\n        },\r\n        id: {\r\n          type: \"string\",\r\n        },\r\n        strokeWidth: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\"blend\", \"color\", \"id\", \"strokeWidth\"],\r\n      type: \"object\",\r\n    },\r\n    BaseShape: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseDrawing\",\r\n        },\r\n        {\r\n          properties: {\r\n            type: {\r\n              enum: [\"shape\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"type\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    Line: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseShape\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"#/definitions/PointsData\",\r\n            },\r\n            shapeType: {\r\n              enum: [\"line\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"shapeType\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    Rectangle: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseShape\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"#/definitions/RectData\",\r\n            },\r\n            shapeType: {\r\n              enum: [\"rectangle\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"shapeType\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    Circle: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseShape\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"#/definitions/CircleData\",\r\n            },\r\n            shapeType: {\r\n              enum: [\"circle\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"shapeType\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    Triangle: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseShape\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"#/definitions/PointsData\",\r\n            },\r\n            shapeType: {\r\n              enum: [\"triangle\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"shapeType\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    Shape: {\r\n      anyOf: [\r\n        {\r\n          $ref: \"#/definitions/Line\",\r\n        },\r\n        {\r\n          $ref: \"#/definitions/Rectangle\",\r\n        },\r\n        {\r\n          $ref: \"#/definitions/Circle\",\r\n        },\r\n        {\r\n          $ref: \"#/definitions/Triangle\",\r\n        },\r\n      ],\r\n    },\r\n    Path: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseDrawing\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"#/definitions/PointsData\",\r\n            },\r\n            pathType: {\r\n              enum: [\"fill\", \"stroke\"],\r\n              type: \"string\",\r\n            },\r\n            type: {\r\n              enum: [\"path\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"pathType\", \"type\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n  },\r\n};\r\n\r\nexport const ajv = new Ajv({\r\n  schemas: [DrawingSchema, ColorSchema, Vector2Schema],\r\n});\r\n\r\nexport const isDrawing = ajv.compile<Drawing>(DrawingSchema);\r\n","import Ajv from \"ajv\";\r\nimport { Fog } from \"../types/Fog\";\r\n\r\nimport { Vector2Schema } from \"./Vector2\";\r\nimport { ColorSchema } from \"./Color\";\r\n\r\nexport const FogSchema = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/fog.json\",\r\n  properties: {\r\n    color: {\r\n      $ref: \"color.json\",\r\n    },\r\n    data: {\r\n      $ref: \"#/definitions/FogData\",\r\n    },\r\n    id: {\r\n      type: \"string\",\r\n    },\r\n    strokeWidth: {\r\n      type: \"number\",\r\n    },\r\n    type: {\r\n      enum: [\"fog\"],\r\n      type: \"string\",\r\n    },\r\n    visible: {\r\n      type: \"boolean\",\r\n    },\r\n  },\r\n  required: [\"color\", \"data\", \"id\", \"strokeWidth\", \"type\", \"visible\"],\r\n  type: \"object\",\r\n  definitions: {\r\n    FogData: {\r\n      properties: {\r\n        holes: {\r\n          items: {\r\n            items: {\r\n              $ref: \"vector2.json\",\r\n            },\r\n            type: \"array\",\r\n          },\r\n          type: \"array\",\r\n        },\r\n        points: {\r\n          items: {\r\n            $ref: \"vector2.json\",\r\n          },\r\n          type: \"array\",\r\n        },\r\n      },\r\n      required: [\"holes\", \"points\"],\r\n      type: \"object\",\r\n    },\r\n  },\r\n};\r\n\r\nconst ajv = new Ajv({ schemas: [FogSchema, ColorSchema, Vector2Schema] });\r\n\r\nexport const isFog = ajv.compile<Fog>(FogSchema);\r\n","import Ajv, { JSONSchemaType } from \"ajv\";\r\nimport { Note } from \"../types/Note\";\r\n\r\nimport { Vector2Schema } from \"./Vector2\";\r\nimport { ColorSchema } from \"./Color\";\r\n\r\nexport const NoteSchema: JSONSchemaType<Note> = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/note.json\",\r\n  properties: {\r\n    color: {\r\n      $ref: \"color.json\",\r\n    },\r\n    id: {\r\n      type: \"string\",\r\n    },\r\n    lastModified: {\r\n      type: \"number\",\r\n    },\r\n    lastModifiedBy: {\r\n      type: \"string\",\r\n    },\r\n    locked: {\r\n      type: \"boolean\",\r\n    },\r\n    size: {\r\n      type: \"number\",\r\n    },\r\n    text: {\r\n      type: \"string\",\r\n    },\r\n    textOnly: {\r\n      type: \"boolean\",\r\n    },\r\n    visible: {\r\n      type: \"boolean\",\r\n    },\r\n    x: {\r\n      type: \"number\",\r\n    },\r\n    y: {\r\n      type: \"number\",\r\n    },\r\n    rotation: {\r\n      type: \"number\",\r\n    },\r\n  },\r\n  required: [\r\n    \"color\",\r\n    \"id\",\r\n    \"lastModified\",\r\n    \"lastModifiedBy\",\r\n    \"locked\",\r\n    \"size\",\r\n    \"text\",\r\n    \"textOnly\",\r\n    \"visible\",\r\n    \"x\",\r\n    \"y\",\r\n    \"rotation\",\r\n  ],\r\n  type: \"object\",\r\n};\r\n\r\nconst ajv = new Ajv({ schemas: [NoteSchema, ColorSchema, Vector2Schema] });\r\n\r\nexport const isNote = ajv.compile<Note>(NoteSchema);\r\n","import Ajv from \"ajv\";\r\nimport { Outline } from \"../types/Outline\";\r\n\r\nconst ajv = new Ajv();\r\n\r\nexport const OutlineSchema = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/outline.json\",\r\n  anyOf: [\r\n    {\r\n      $ref: \"#/definitions/CircleOutline\",\r\n    },\r\n    {\r\n      $ref: \"#/definitions/RectOutline\",\r\n    },\r\n    {\r\n      $ref: \"#/definitions/PathOutline\",\r\n    },\r\n  ],\r\n  definitions: {\r\n    CircleOutline: {\r\n      properties: {\r\n        radius: {\r\n          type: \"number\",\r\n        },\r\n        type: {\r\n          enum: [\"circle\"],\r\n          type: \"string\",\r\n        },\r\n        x: {\r\n          type: \"number\",\r\n        },\r\n        y: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\"radius\", \"type\", \"x\", \"y\"],\r\n      type: \"object\",\r\n    },\r\n    RectOutline: {\r\n      properties: {\r\n        height: {\r\n          type: \"number\",\r\n        },\r\n        type: {\r\n          enum: [\"rect\"],\r\n          type: \"string\",\r\n        },\r\n        width: {\r\n          type: \"number\",\r\n        },\r\n        x: {\r\n          type: \"number\",\r\n        },\r\n        y: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\"height\", \"type\", \"width\", \"x\", \"y\"],\r\n      type: \"object\",\r\n    },\r\n    PathOutline: {\r\n      properties: {\r\n        points: {\r\n          items: {\r\n            type: \"number\",\r\n          },\r\n          type: \"array\",\r\n        },\r\n        type: {\r\n          enum: [\"path\"],\r\n          type: \"string\",\r\n        },\r\n      },\r\n      required: [\"points\", \"type\"],\r\n      type: \"object\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const isOutline = ajv.compile<Outline>(OutlineSchema);\r\n","import Ajv from \"ajv\";\r\nimport { TokenState } from \"../types/TokenState\";\r\n\r\nimport { ColorSchema } from \"./Color\";\r\nimport { OutlineSchema } from \"./Outline\";\r\n\r\nexport const TokenStateSchema = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/token-state.json\",\r\n  anyOf: [\r\n    {\r\n      $ref: \"#/definitions/DefaultTokenState\",\r\n    },\r\n    {\r\n      $ref: \"#/definitions/FileTokenState\",\r\n    },\r\n  ],\r\n  definitions: {\r\n    TokenCategory: {\r\n      enum: [\"character\", \"prop\", \"vehicle\", \"attachment\"],\r\n      type: \"string\",\r\n    },\r\n    BaseTokenState: {\r\n      properties: {\r\n        category: {\r\n          $ref: \"#/definitions/TokenCategory\",\r\n        },\r\n        height: {\r\n          type: \"number\",\r\n        },\r\n        id: {\r\n          type: \"string\",\r\n        },\r\n        label: {\r\n          type: \"string\",\r\n        },\r\n        lastModified: {\r\n          type: \"number\",\r\n        },\r\n        lastModifiedBy: {\r\n          type: \"string\",\r\n        },\r\n        locked: {\r\n          type: \"boolean\",\r\n        },\r\n        outline: {\r\n          $ref: \"outline.json\",\r\n        },\r\n        owner: {\r\n          type: \"string\",\r\n        },\r\n        rotation: {\r\n          type: \"number\",\r\n        },\r\n        size: {\r\n          type: \"number\",\r\n        },\r\n        statuses: {\r\n          items: {\r\n            $ref: \"color.json\",\r\n          },\r\n          type: \"array\",\r\n        },\r\n        tokenId: {\r\n          type: \"string\",\r\n        },\r\n        visible: {\r\n          type: \"boolean\",\r\n        },\r\n        width: {\r\n          type: \"number\",\r\n        },\r\n        x: {\r\n          type: \"number\",\r\n        },\r\n        y: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\r\n        \"category\",\r\n        \"height\",\r\n        \"id\",\r\n        \"label\",\r\n        \"lastModified\",\r\n        \"lastModifiedBy\",\r\n        \"locked\",\r\n        \"outline\",\r\n        \"owner\",\r\n        \"rotation\",\r\n        \"size\",\r\n        \"statuses\",\r\n        \"tokenId\",\r\n        \"visible\",\r\n        \"width\",\r\n        \"x\",\r\n        \"y\",\r\n      ],\r\n      type: \"object\",\r\n    },\r\n    DefaultTokenState: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseTokenState\",\r\n        },\r\n        {\r\n          properties: {\r\n            key: {\r\n              type: \"string\",\r\n            },\r\n            type: {\r\n              enum: [\"default\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"key\", \"type\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    FileTokenState: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseTokenState\",\r\n        },\r\n        {\r\n          properties: {\r\n            file: {\r\n              type: \"string\",\r\n            },\r\n            type: {\r\n              enum: [\"file\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"file\", \"type\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n  },\r\n};\r\n\r\nexport const ajv = new Ajv({\r\n  schemas: [TokenStateSchema, ColorSchema, OutlineSchema],\r\n});\r\n\r\nexport const isTokenState = ajv.compile<TokenState>(TokenStateSchema);\r\n","import Ajv from \"ajv\";\r\nimport { MapState } from \"../types/MapState\";\r\n\r\nimport { DrawingSchema } from \"./Drawing\";\r\nimport { FogSchema } from \"./Fog\";\r\nimport { NoteSchema } from \"./Note\";\r\nimport { TokenStateSchema } from \"./TokenState\";\r\nimport { Vector2Schema } from \"./Vector2\";\r\nimport { ColorSchema } from \"./Color\";\r\nimport { OutlineSchema } from \"./Outline\";\r\n\r\nexport const MapStateSchema: any = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/map-state.json\",\r\n  properties: {\r\n    tokens: {\r\n      $ref: \"#/definitions/TokenStates\",\r\n    },\r\n    drawings: {\r\n      $ref: \"#/definitions/DrawingState\",\r\n    },\r\n    fogs: {\r\n      $ref: \"#/definitions/FogState\",\r\n    },\r\n    editFlags: {\r\n      items: {\r\n        enum: [\"drawing\", \"fog\", \"notes\", \"tokens\"],\r\n        type: \"string\",\r\n      },\r\n      type: \"array\",\r\n    },\r\n    notes: {\r\n      $ref: \"#/definitions/Notes\",\r\n    },\r\n    mapId: {\r\n      type: \"string\",\r\n    },\r\n  },\r\n  required: [\"drawings\", \"editFlags\", \"fogs\", \"mapId\", \"notes\", \"tokens\"],\r\n  type: \"object\",\r\n  definitions: {\r\n    TokenStates: {\r\n      propertyNames: {\r\n        type: \"string\",\r\n      },\r\n      additionalProperties: {\r\n        $ref: \"token-state.json\",\r\n      },\r\n      required: [],\r\n      type: \"object\",\r\n    },\r\n    DrawingState: {\r\n      propertyNames: {\r\n        type: \"string\",\r\n      },\r\n      additionalProperties: {\r\n        $ref: \"drawing.json\",\r\n      },\r\n      required: [],\r\n      type: \"object\",\r\n    },\r\n    FogState: {\r\n      propertyNames: {\r\n        type: \"string\",\r\n      },\r\n      additionalProperties: {\r\n        $ref: \"fog.json\",\r\n      },\r\n      required: [],\r\n      type: \"object\",\r\n    },\r\n    Notes: {\r\n      propertyNames: {\r\n        type: \"string\",\r\n      },\r\n      additionalProperties: {\r\n        $ref: \"note.json\",\r\n      },\r\n      required: [],\r\n      type: \"object\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const ajv = new Ajv({\r\n  schemas: [\r\n    MapStateSchema,\r\n    DrawingSchema,\r\n    FogSchema,\r\n    NoteSchema,\r\n    TokenStateSchema,\r\n    Vector2Schema,\r\n    ColorSchema,\r\n    OutlineSchema,\r\n  ],\r\n});\r\n\r\nexport const isMapState = ajv.compile<MapState>(MapStateSchema);\r\n","import Ajv from \"ajv\";\r\nimport { Selection } from \"../types/Select\";\r\n\r\nimport { DrawingSchema } from \"./Drawing\";\r\nimport { Vector2Schema } from \"./Vector2\";\r\nimport { ColorSchema } from \"./Color\";\r\n\r\nexport const SelectionSchema = {\r\n  $id: \"https://www.owlbear.rodeo/schemas/selection.json\",\r\n  anyOf: [\r\n    {\r\n      $ref: \"#/definitions/RectSelection\",\r\n    },\r\n    {\r\n      $ref: \"#/definitions/PathSelection\",\r\n    },\r\n  ],\r\n  definitions: {\r\n    SelectionItemType: {\r\n      enum: [\"token\", \"note\"],\r\n      type: \"string\",\r\n    },\r\n    SelectionItem: {\r\n      properties: {\r\n        type: {\r\n          $ref: \"#/definitions/SelectionItemType\",\r\n        },\r\n        id: {\r\n          type: \"string\",\r\n        },\r\n      },\r\n      required: [\"type\", \"id\"],\r\n      type: \"object\",\r\n    },\r\n    BaseSelection: {\r\n      properties: {\r\n        items: {\r\n          items: {\r\n            $ref: \"#/definitions/SelectionItem\",\r\n          },\r\n          type: \"array\",\r\n        },\r\n        x: {\r\n          type: \"number\",\r\n        },\r\n        y: {\r\n          type: \"number\",\r\n        },\r\n      },\r\n      required: [\"items\", \"x\", \"y\"],\r\n      type: \"object\",\r\n    },\r\n    RectSelection: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseSelection\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"drawing.json#/definitions/RectData\",\r\n            },\r\n            type: {\r\n              enum: [\"rectangle\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"type\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n    PathSelection: {\r\n      allOf: [\r\n        {\r\n          $ref: \"#/definitions/BaseSelection\",\r\n        },\r\n        {\r\n          properties: {\r\n            data: {\r\n              $ref: \"drawing.json#/definitions/PointsData\",\r\n            },\r\n            type: {\r\n              enum: [\"path\"],\r\n              type: \"string\",\r\n            },\r\n          },\r\n          required: [\"data\", \"type\"],\r\n          type: \"object\",\r\n        },\r\n      ],\r\n    },\r\n  },\r\n};\r\n\r\nconst ajv = new Ajv({\r\n  schemas: [SelectionSchema, DrawingSchema, Vector2Schema, ColorSchema],\r\n});\r\n\r\nexport const isSelection = ajv.compile<Selection>(SelectionSchema);\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Box, Flex, IconButton } from \"theme-ui\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nimport MapMenu from \"../map/MapMenu\";\r\n\r\nimport usePrevious from \"../../hooks/usePrevious\";\r\n\r\nimport LockIcon from \"../../icons/TokenLockIcon\";\r\nimport UnlockIcon from \"../../icons/TokenUnlockIcon\";\r\nimport ShowIcon from \"../../icons/TokenShowIcon\";\r\nimport HideIcon from \"../../icons/TokenHideIcon\";\r\nimport CopyIcon from \"../../icons/CopyIcon\";\r\nimport PasteIcon from \"../../icons/PasteIcon\";\r\n\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\n\r\nimport {\r\n  SelectionItemsChangeEventHandler,\r\n  RequestCloseEventHandler,\r\n  SelectionItemsCreateEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { Selection, SelectionItem } from \"../../types/Select\";\r\nimport { TokenState, TokenStates } from \"../../types/TokenState\";\r\nimport { Note, Notes } from \"../../types/Note\";\r\nimport { getSelectionPoints } from \"../../helpers/selection\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport { MapState } from \"../../types/MapState\";\r\nimport { isMapState } from \"../../validators/MapState\";\r\nimport { isSelection } from \"../../validators/Selection\";\r\nimport { getRelativePointerPosition } from \"../../helpers/konva\";\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\nimport shortcuts from \"../../shortcuts\";\r\nimport { clipboardSupported } from \"../../helpers/shared\";\r\n\r\ntype SelectionMenuProps = {\r\n  isOpen: boolean;\r\n  active: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  onRequestOpen: () => void;\r\n  selection: Selection | null;\r\n  onSelectionChange: React.Dispatch<React.SetStateAction<Selection | null>>;\r\n  onSelectionItemsChange: SelectionItemsChangeEventHandler;\r\n  onSelectionItemsCreate: SelectionItemsCreateEventHandler;\r\n  map: Map | null;\r\n  mapState: MapState | null;\r\n};\r\n\r\nfunction SelectionMenu({\r\n  isOpen,\r\n  active,\r\n  onRequestClose,\r\n  onRequestOpen,\r\n  selection,\r\n  onSelectionChange,\r\n  onSelectionItemsChange,\r\n  onSelectionItemsCreate,\r\n  map,\r\n  mapState,\r\n}: SelectionMenuProps) {\r\n  const { addToast } = useToasts();\r\n\r\n  const userId = useUserId();\r\n\r\n  const wasOpen = usePrevious(isOpen);\r\n\r\n  const mapStageRef = useMapStage();\r\n\r\n  const [menuLeft, setMenuLeft] = useState(0);\r\n  const [menuTop, setMenuTop] = useState(0);\r\n\r\n  const selectionMenuWidth = selection === null ? 48 : 156;\r\n\r\n  useEffect(() => {\r\n    const mapStage = mapStageRef.current;\r\n    if (isOpen && !wasOpen && mapStage) {\r\n      const mapImage = mapStage.findOne(\"#mapImage\");\r\n      if (!mapImage) {\r\n        return;\r\n      }\r\n      let menuPosition = { x: 0, y: 0 };\r\n      if (selection) {\r\n        const points = getSelectionPoints(selection);\r\n        const bounds = Vector2.getBoundingBox(points);\r\n\r\n        menuPosition = new Vector2(\r\n          bounds.center.x + selection.x,\r\n          bounds.max.y + selection.y\r\n        );\r\n        menuPosition = Vector2.multiply(menuPosition, {\r\n          x: mapImage.width(),\r\n          y: mapImage.height(),\r\n        });\r\n      } else {\r\n        const position = getRelativePointerPosition(mapImage);\r\n        if (position) {\r\n          menuPosition = position;\r\n        }\r\n      }\r\n\r\n      const transform = mapImage.getAbsoluteTransform().copy();\r\n      const absolutePosition = transform.point(menuPosition);\r\n      const mapElement = document.querySelector(\".map\");\r\n      if (mapElement) {\r\n        const mapRect = mapElement.getBoundingClientRect();\r\n        setMenuLeft(mapRect.left + absolutePosition.x - selectionMenuWidth / 2);\r\n        setMenuTop(mapRect.top + absolutePosition.y + 12);\r\n      }\r\n    }\r\n  }, [isOpen, selection, wasOpen, mapStageRef, selectionMenuWidth]);\r\n\r\n  // Open paste menu if clicking without a selection\r\n  // Ensure that paste menu is closed when clicking and that the click hasn't moved far\r\n  const openOnDownRef = useRef(false);\r\n  const downPositionRef = useRef({ x: 0, y: 0 });\r\n  useEffect(() => {\r\n    if (!active) {\r\n      return;\r\n    }\r\n    function handlePointerDown(event: PointerEvent) {\r\n      openOnDownRef.current = isOpen || !!selection;\r\n      downPositionRef.current = { x: event.clientX, y: event.clientY };\r\n    }\r\n    function handlePointerUp(event: MouseEvent | TouchEvent) {\r\n      let position;\r\n      if (event instanceof MouseEvent) {\r\n        position = { x: event.clientX, y: event.clientY };\r\n      } else {\r\n        position = {\r\n          x: event.changedTouches[0].clientX,\r\n          y: event.changedTouches[0].clientY,\r\n        };\r\n      }\r\n      const deltaPosition = Vector2.distance(position, downPositionRef.current);\r\n      if (\r\n        !openOnDownRef.current &&\r\n        !selection &&\r\n        deltaPosition < 10 &&\r\n        event.target instanceof HTMLCanvasElement\r\n      ) {\r\n        onRequestOpen();\r\n      }\r\n    }\r\n    const mapElement = document.querySelector<HTMLElement>(\".map\");\r\n    mapElement?.addEventListener(\"pointerdown\", handlePointerDown);\r\n    mapElement?.addEventListener(\"mouseup\", handlePointerUp);\r\n    mapElement?.addEventListener(\"touchend\", handlePointerUp);\r\n\r\n    return () => {\r\n      mapElement?.removeEventListener(\"pointerdown\", handlePointerDown);\r\n      mapElement?.removeEventListener(\"mouseup\", handlePointerUp);\r\n      mapElement?.removeEventListener(\"touchend\", handlePointerUp);\r\n    };\r\n  }, [isOpen, active, selection, onRequestOpen]);\r\n\r\n  function handleModalContent(node: HTMLElement) {\r\n    if (node) {\r\n      // Ensure menu is in bounds\r\n      const nodeRect = node.getBoundingClientRect();\r\n      const mapElement = document.querySelector(\".map\");\r\n      if (mapElement) {\r\n        const mapRect = mapElement.getBoundingClientRect();\r\n        setMenuLeft((prevLeft) =>\r\n          Math.min(\r\n            mapRect.right - nodeRect.width,\r\n            Math.max(mapRect.left, prevLeft)\r\n          )\r\n        );\r\n        setMenuTop((prevTop) =>\r\n          Math.min(mapRect.bottom - nodeRect.height, prevTop)\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateSelectedItems(change: Partial<TokenState> | Partial<Note>) {\r\n    if (selection) {\r\n      const tokenChanges: Record<string, Partial<TokenState>> = {};\r\n      const noteChanges: Record<string, Partial<Note>> = {};\r\n      for (let item of selection.items) {\r\n        if (item.type === \"token\") {\r\n          tokenChanges[item.id] = change;\r\n        } else {\r\n          noteChanges[item.id] = change;\r\n        }\r\n      }\r\n      onSelectionItemsChange(tokenChanges, noteChanges);\r\n    }\r\n  }\r\n\r\n  const [itemsVisible, setItemsVisible] = useState(false);\r\n  function handleVisibleChange() {\r\n    updateSelectedItems({ visible: !itemsVisible });\r\n    setItemsVisible(!itemsVisible);\r\n  }\r\n\r\n  const [itemsLocked, setItemsLocked] = useState(false);\r\n  function handleLockChange() {\r\n    updateSelectedItems({ locked: !itemsLocked });\r\n    setItemsLocked(!itemsLocked);\r\n  }\r\n\r\n  // Update lock and visible state depending on selected items\r\n  useEffect(() => {\r\n    if (isOpen && selection && mapState) {\r\n      let allVisible = true;\r\n      let allLocked = true;\r\n      for (let item of selection.items) {\r\n        if (item.type === \"token\") {\r\n          const tokenState = mapState.tokens[item.id];\r\n          if (!tokenState.visible) {\r\n            allVisible = false;\r\n          }\r\n          if (!tokenState.locked) {\r\n            allLocked = false;\r\n          }\r\n        } else {\r\n          const note = mapState.notes[item.id];\r\n          if (!note.visible) {\r\n            allVisible = false;\r\n          }\r\n          if (!note.locked) {\r\n            allLocked = false;\r\n          }\r\n        }\r\n      }\r\n      setItemsVisible(allVisible);\r\n      setItemsLocked(allLocked);\r\n    }\r\n  }, [mapState, selection, isOpen]);\r\n\r\n  function addSuccessToast(\r\n    message: string,\r\n    tokens?: TokenStates,\r\n    notes?: Notes\r\n  ) {\r\n    const numTokens = tokens ? Object.keys(tokens).length : 0;\r\n    const numNotes = notes ? Object.keys(notes).length : 0;\r\n    const tokenText = `${numTokens} token${numTokens > 1 ? \"s\" : \"\"}`;\r\n    const noteText = `${numNotes} note${numNotes > 1 ? \"s\" : \"\"}`;\r\n    if (numTokens > 0 && numNotes > 0) {\r\n      addToast(`${message} ${tokenText} and ${noteText}`);\r\n    } else if (numTokens > 0) {\r\n      addToast(`${message} ${tokenText}`);\r\n    } else if (numNotes > 0) {\r\n      addToast(`${message} ${noteText}`);\r\n    }\r\n  }\r\n\r\n  // Keep a local copy of the clipboard if the device doesn't support the clipboard api i.e. iOS\r\n  const localClipboardDataRef = useRef<string>(\"\");\r\n  async function handleCopy() {\r\n    let version = process.env.REACT_APP_VERSION;\r\n    if (!version || !selection || !mapState) {\r\n      return;\r\n    }\r\n    let clipboard: { version: string; data: MapState; selection: Selection } = {\r\n      version,\r\n      selection,\r\n      data: {\r\n        tokens: {},\r\n        notes: {},\r\n        drawings: {},\r\n        editFlags: [],\r\n        fogs: {},\r\n        mapId: mapState.mapId,\r\n      },\r\n    };\r\n    for (let item of selection.items) {\r\n      if (item.type === \"token\" && clipboard.data.tokens) {\r\n        clipboard.data.tokens[item.id] = mapState.tokens[item.id];\r\n      } else if (item.type === \"note\" && clipboard.data.notes) {\r\n        clipboard.data.notes[item.id] = mapState.notes[item.id];\r\n      }\r\n    }\r\n    if (await clipboardSupported()) {\r\n      await navigator.clipboard.writeText(JSON.stringify(clipboard));\r\n    } else {\r\n      localClipboardDataRef.current = JSON.stringify(clipboard);\r\n    }\r\n    addSuccessToast(\"Copied\", clipboard.data.tokens, clipboard.data.notes);\r\n  }\r\n\r\n  async function handlePaste() {\r\n    let version = process.env.REACT_APP_VERSION;\r\n\r\n    if (!version || !mapState) {\r\n      return;\r\n    }\r\n    try {\r\n      let clipboardText;\r\n      if (await clipboardSupported()) {\r\n        clipboardText = await navigator.clipboard.readText();\r\n      } else {\r\n        clipboardText = localClipboardDataRef.current;\r\n      }\r\n      const clipboard = JSON.parse(clipboardText);\r\n      if (\r\n        clipboard.version === version &&\r\n        isMapState(clipboard.data) &&\r\n        isSelection(clipboard.selection)\r\n      ) {\r\n        // Find new selection position\r\n        const mapStage = mapStageRef.current;\r\n        const mapImage = mapStage?.findOne(\"#mapImage\");\r\n        if (!mapImage) {\r\n          return;\r\n        }\r\n        const position = getRelativePointerPosition(mapImage);\r\n        if (!position) {\r\n          return;\r\n        }\r\n        const normalizedPosition = Vector2.divide(position, {\r\n          x: mapImage.width(),\r\n          y: mapImage.height(),\r\n        });\r\n\r\n        const clipboardSelection = clipboard.selection as Selection;\r\n        const points = getSelectionPoints(clipboardSelection);\r\n        const center = Vector2.centroid(points);\r\n\r\n        let selectionDelta = Vector2.subtract(normalizedPosition, center);\r\n\r\n        const clipboardState = clipboard.data as MapState;\r\n        let tokenStates: TokenState[] = [];\r\n        let notes: Note[] = [];\r\n        let selectionItems: SelectionItem[] = [];\r\n        for (let token of Object.values(clipboardState.tokens)) {\r\n          const newId = uuid();\r\n          tokenStates.push({\r\n            ...token,\r\n            x: token.x + selectionDelta.x,\r\n            y: token.y + selectionDelta.y,\r\n            id: newId,\r\n          });\r\n          selectionItems.push({ id: newId, type: \"token\" });\r\n        }\r\n        for (let note of Object.values(clipboardState.notes)) {\r\n          const newId = uuid();\r\n          notes.push({\r\n            ...note,\r\n            x: note.x + selectionDelta.x,\r\n            y: note.y + selectionDelta.y,\r\n            id: newId,\r\n          });\r\n          selectionItems.push({ id: newId, type: \"note\" });\r\n        }\r\n        onSelectionItemsCreate(tokenStates, notes);\r\n\r\n        onSelectionChange({\r\n          ...clipboardSelection,\r\n          items: selectionItems,\r\n          x: clipboardSelection.x + selectionDelta.x,\r\n          y: clipboardSelection.y + selectionDelta.y,\r\n        });\r\n\r\n        onRequestClose();\r\n      } else {\r\n        addToast(\"Invalid data\");\r\n      }\r\n    } catch {\r\n      addToast(\"Unable to paste\");\r\n    }\r\n  }\r\n\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (active) {\r\n      if (selection && shortcuts.copy(event)) {\r\n        handleCopy();\r\n      }\r\n      if (shortcuts.paste(event)) {\r\n        handlePaste();\r\n      }\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  return (\r\n    <MapMenu\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      top={`${menuTop}px`}\r\n      left={`${menuLeft}px`}\r\n      onModalContent={handleModalContent}\r\n    >\r\n      <Box sx={{ width: `${selectionMenuWidth}px`, overflow: \"hidden\" }} p={1}>\r\n        <Flex sx={{ alignItems: \"center\", justifyContent: \"space-around\" }}>\r\n          {selection ? (\r\n            <>\r\n              {/* Only show hide and lock token actions to map owners */}\r\n              {map && map.owner === userId && (\r\n                <>\r\n                  <IconButton\r\n                    onClick={handleVisibleChange}\r\n                    title={itemsVisible ? \"Hide Items\" : \"Show Items\"}\r\n                    aria-label={itemsVisible ? \"Hide Items\" : \"Show Items\"}\r\n                  >\r\n                    {itemsVisible ? <ShowIcon /> : <HideIcon />}\r\n                  </IconButton>\r\n                  <IconButton\r\n                    onClick={handleLockChange}\r\n                    title={itemsLocked ? \"Unlock Items\" : \"Lock Items\"}\r\n                    aria-label={itemsLocked ? \"Unlock Items\" : \"Lock Items\"}\r\n                  >\r\n                    {itemsLocked ? <LockIcon /> : <UnlockIcon />}\r\n                  </IconButton>\r\n                </>\r\n              )}\r\n              <IconButton\r\n                title=\"Copy Items\"\r\n                aria-label=\"Copy Items\"\r\n                onClick={handleCopy}\r\n              >\r\n                <CopyIcon />\r\n              </IconButton>\r\n            </>\r\n          ) : (\r\n            <IconButton\r\n              title=\"Paste Items\"\r\n              aria-label=\"Paste Items\"\r\n              onClick={handlePaste}\r\n            >\r\n              <PasteIcon />\r\n            </IconButton>\r\n          )}\r\n        </Flex>\r\n      </Box>\r\n    </MapMenu>\r\n  );\r\n}\r\n\r\nexport default SelectionMenu;\r\n","import Konva from \"konva\";\r\nimport { Line, Rect } from \"react-konva\";\r\n\r\nimport colors from \"../../helpers/colors\";\r\nimport { scaleAndFlattenPoints } from \"../../helpers/konva\";\r\n\r\nimport { useGridStrokeWidth } from \"../../contexts/GridContext\";\r\nimport {\r\n  useMapHeight,\r\n  useMapWidth,\r\n  useStageScale,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\n\r\nimport {\r\n  Selection as SelectionType,\r\n  SelectionItemType,\r\n} from \"../../types/Select\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport { SelectionItemsChangeEventHandler } from \"../../types/Events\";\r\nimport { TokenState } from \"../../types/TokenState\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { Note } from \"../../types/Note\";\r\nimport useGridSnapping from \"../../hooks/useGridSnapping\";\r\n\r\nconst dashAnimationSpeed = -0.01;\r\n\r\ntype SelectionProps = {\r\n  selection: SelectionType;\r\n  onSelectionChange: (selection: SelectionType | null) => void;\r\n  onSelectionItemsChange: SelectionItemsChangeEventHandler;\r\n  onPreventSelectionChange: (preventSelection: boolean) => void;\r\n  onSelectionDragStart: () => void;\r\n  onSelectionDragEnd: () => void;\r\n  map: Map;\r\n} & Konva.ShapeConfig;\r\n\r\nfunction Selection({\r\n  selection,\r\n  onSelectionChange,\r\n  onSelectionItemsChange,\r\n  onPreventSelectionChange,\r\n  onSelectionDragStart,\r\n  onSelectionDragEnd,\r\n  map,\r\n  ...props\r\n}: SelectionProps) {\r\n  const userId = useUserId();\r\n\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const stageScale = useStageScale();\r\n  const gridStrokeWidth = useGridStrokeWidth();\r\n\r\n  const snapPositionToGrid = useGridSnapping();\r\n\r\n  const intersectingNodesRef = useRef<\r\n    {\r\n      type: SelectionItemType;\r\n      node: Konva.Node;\r\n      id: string;\r\n      initialX: number;\r\n      initialY: number;\r\n    }[]\r\n  >([]);\r\n  const initialDragPositionRef = useRef({ x: 0, y: 0 });\r\n\r\n  function handleDragStart(event: Konva.KonvaEventObject<DragEvent>) {\r\n    initialDragPositionRef.current = event.target.position();\r\n    const stage = event.target.getStage();\r\n    if (stage) {\r\n      for (let item of selection.items) {\r\n        const node = stage.findOne(`#${item.id}`);\r\n        // Don't drag locked nodes\r\n        if (node && !node.name().endsWith(\"-locked\")) {\r\n          intersectingNodesRef.current.push({\r\n            ...item,\r\n            node,\r\n            initialX: node.x(),\r\n            initialY: node.y(),\r\n          });\r\n        }\r\n      }\r\n    }\r\n    onSelectionDragStart();\r\n  }\r\n\r\n  function handleDragMove(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const deltaPosition = Vector2.subtract(\r\n      event.target.position(),\r\n      initialDragPositionRef.current\r\n    );\r\n    for (let item of intersectingNodesRef.current) {\r\n      let itemPosition = Vector2.add(\r\n        { x: item.initialX, y: item.initialY },\r\n        deltaPosition\r\n      );\r\n      if (map.snapToGrid) {\r\n        itemPosition = snapPositionToGrid(itemPosition);\r\n      }\r\n      item.node.position(itemPosition);\r\n    }\r\n  }\r\n\r\n  function handleDragEnd(event: Konva.KonvaEventObject<DragEvent>) {\r\n    const tokenChanges: Record<string, Partial<TokenState>> = {};\r\n    const noteChanges: Record<string, Partial<Note>> = {};\r\n    for (let item of intersectingNodesRef.current) {\r\n      if (item.type === \"token\") {\r\n        tokenChanges[item.id] = {\r\n          x: item.node.x() / mapWidth,\r\n          y: item.node.y() / mapHeight,\r\n          lastModifiedBy: userId,\r\n          lastModified: Date.now(),\r\n        };\r\n      } else {\r\n        noteChanges[item.id] = {\r\n          x: item.node.x() / mapWidth,\r\n          y: item.node.y() / mapHeight,\r\n          lastModifiedBy: userId,\r\n          lastModified: Date.now(),\r\n        };\r\n      }\r\n    }\r\n    onSelectionItemsChange(tokenChanges, noteChanges);\r\n    onSelectionChange({\r\n      ...selection,\r\n      x: event.target.x() / mapWidth,\r\n      y: event.target.y() / mapHeight,\r\n    });\r\n    intersectingNodesRef.current = [];\r\n    onPreventSelectionChange(false);\r\n    onSelectionDragEnd();\r\n  }\r\n\r\n  function handlePointerDown() {\r\n    onPreventSelectionChange(true);\r\n  }\r\n\r\n  function handlePointerUp() {\r\n    onPreventSelectionChange(false);\r\n  }\r\n\r\n  const hasItems = selection.items.length > 0;\r\n\r\n  // Update cursor when mouse enter and out of selection\r\n  function handleMouseEnter(event: Konva.KonvaEventObject<MouseEvent>) {\r\n    let stage = event.target.getStage();\r\n    if (stage && hasItems) {\r\n      stage.content.style.cursor = \"move\";\r\n    }\r\n  }\r\n\r\n  function handleMouseOut(event: Konva.KonvaEventObject<MouseEvent>) {\r\n    let stage = event.target.getStage();\r\n    if (stage) {\r\n      stage.content.style.cursor = \"\";\r\n    }\r\n  }\r\n\r\n  // Update cursor to move when selection is made or removed\r\n  useEffect(() => {\r\n    var node: Konva.Node | null = null;\r\n    if (lineRef.current) {\r\n      node = lineRef.current;\r\n    } else if (rectRef.current) {\r\n      node = rectRef.current;\r\n    }\r\n    let stage = node?.getStage();\r\n    if (stage && hasItems) {\r\n      stage.content.style.cursor = \"move\";\r\n    }\r\n    return () => {\r\n      if (stage) {\r\n        stage.content.style.cursor = \"\";\r\n      }\r\n    };\r\n  }, [hasItems]);\r\n\r\n  const requestRef = useRef<number>();\r\n  const lineRef = useRef<Konva.Line>(null);\r\n  const rectRef = useRef<Konva.Rect>(null);\r\n  useEffect(() => {\r\n    let prevTime = performance.now();\r\n    function animate(time: number) {\r\n      const delta = time - prevTime;\r\n      prevTime = time;\r\n      if (!hasItems) {\r\n        return;\r\n      }\r\n      requestRef.current = requestAnimationFrame(animate);\r\n      if (lineRef.current) {\r\n        lineRef.current.dashOffset(\r\n          lineRef.current.dashOffset() + delta * dashAnimationSpeed\r\n        );\r\n      }\r\n      if (rectRef.current) {\r\n        rectRef.current.dashOffset(\r\n          rectRef.current.dashOffset() + delta * dashAnimationSpeed\r\n        );\r\n      }\r\n    }\r\n\r\n    requestRef.current = requestAnimationFrame(animate);\r\n\r\n    return () => {\r\n      if (requestRef.current !== undefined) {\r\n        cancelAnimationFrame(requestRef.current);\r\n      }\r\n    };\r\n  }, [hasItems]);\r\n\r\n  const strokeWidth = (gridStrokeWidth * 0.75) / stageScale;\r\n  const defaultProps = {\r\n    stroke: colors.primary,\r\n    strokeWidth: strokeWidth,\r\n    dash: hasItems ? [strokeWidth / 2, strokeWidth * 2] : [],\r\n    onDragStart: handleDragStart,\r\n    onDragMove: handleDragMove,\r\n    onDragEnd: handleDragEnd,\r\n    draggable: true,\r\n    onMouseDown: handlePointerDown,\r\n    onMouseUp: handlePointerUp,\r\n    onTouchStart: handlePointerDown,\r\n    onTouchEnd: handlePointerUp,\r\n    onMouseEnter: handleMouseEnter,\r\n    onMouseOut: handleMouseOut,\r\n    // Increase stroke width when drawing a selection to\r\n    // prevent deselection click event from firing\r\n    hitStrokeWidth: hasItems ? undefined : 100,\r\n    id: \"selection\",\r\n  };\r\n  const x = selection.x * mapWidth;\r\n  const y = selection.y * mapHeight;\r\n\r\n  if (selection.type === \"path\") {\r\n    return (\r\n      <Line\r\n        points={scaleAndFlattenPoints(selection.data.points, {\r\n          x: mapWidth,\r\n          y: mapHeight,\r\n        })}\r\n        tension={0.5}\r\n        closed={hasItems}\r\n        lineCap=\"round\"\r\n        lineJoin=\"round\"\r\n        x={x}\r\n        y={y}\r\n        {...defaultProps}\r\n        {...props}\r\n        ref={lineRef}\r\n      />\r\n    );\r\n  } else {\r\n    return (\r\n      <Rect\r\n        x={x}\r\n        y={y}\r\n        offsetX={-selection.data.x * mapWidth}\r\n        offsetY={-selection.data.y * mapHeight}\r\n        width={selection.data.width * mapWidth}\r\n        height={selection.data.height * mapHeight}\r\n        lineCap=\"round\"\r\n        lineJoin=\"round\"\r\n        {...defaultProps}\r\n        {...props}\r\n        ref={rectRef}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Selection;\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { Group } from \"react-konva\";\r\nimport Konva from \"konva\";\r\n\r\nimport {\r\n  useDebouncedStageScale,\r\n  useMapWidth,\r\n  useMapHeight,\r\n  useInteractionEmitter,\r\n  MapDragEvent,\r\n  leftMouseButton,\r\n} from \"../../contexts/MapInteractionContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\n\r\nimport {\r\n  getDefaultShapeData,\r\n  getUpdatedShapeData,\r\n  simplifyPoints,\r\n} from \"../../helpers/drawing\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport {\r\n  getRelativePointerPosition,\r\n  scaleAndFlattenPoints,\r\n} from \"../../helpers/konva\";\r\nimport { Intersection } from \"../../helpers/token\";\r\n\r\nimport {\r\n  Selection as SelectionType,\r\n  SelectionItem,\r\n  SelectToolSettings,\r\n} from \"../../types/Select\";\r\nimport { RectData } from \"../../types/Drawing\";\r\nimport { Map } from \"../../types/Map\";\r\nimport { useGridCellNormalizedSize } from \"../../contexts/GridContext\";\r\nimport Selection from \"../konva/Selection\";\r\nimport { SelectionItemsChangeEventHandler } from \"../../types/Events\";\r\nimport { getSelectionPoints } from \"../../helpers/selection\";\r\n\r\ntype MapSelectProps = {\r\n  active: boolean;\r\n  toolSettings: SelectToolSettings;\r\n  onSelectionItemsChange: SelectionItemsChangeEventHandler;\r\n  selection: SelectionType | null;\r\n  onSelectionChange: React.Dispatch<React.SetStateAction<SelectionType | null>>;\r\n  onSelectionMenuOpen: (open: boolean) => void;\r\n  onSelectionDragStart: () => void;\r\n  onSelectionDragEnd: () => void;\r\n  disabledTokens: Record<string, boolean>;\r\n  disabledNotes: Record<string, boolean>;\r\n  map: Map;\r\n};\r\n\r\nfunction SelectTool({\r\n  active,\r\n  toolSettings,\r\n  onSelectionItemsChange,\r\n  selection,\r\n  onSelectionChange,\r\n  onSelectionMenuOpen,\r\n  onSelectionDragStart,\r\n  onSelectionDragEnd,\r\n  disabledTokens,\r\n  disabledNotes,\r\n  map,\r\n}: MapSelectProps) {\r\n  const stageScale = useDebouncedStageScale();\r\n  const mapWidth = useMapWidth();\r\n  const mapHeight = useMapHeight();\r\n  const interactionEmitter = useInteractionEmitter();\r\n\r\n  const gridCellNormalizedSize = useGridCellNormalizedSize();\r\n\r\n  const mapStageRef = useMapStage();\r\n  const [isBrushDown, setIsBrushDown] = useState(false);\r\n\r\n  // Use a ref here to prevent case where brush down event\r\n  // would fire before React state was refreshed\r\n  const preventSelectionRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!active) {\r\n      return;\r\n    }\r\n    const mapStage = mapStageRef.current;\r\n    const mapImage = mapStage?.findOne(\"#mapImage\");\r\n\r\n    function getBrushPosition() {\r\n      if (!mapImage) {\r\n        return;\r\n      }\r\n      let position = getRelativePointerPosition(mapImage);\r\n      if (!position) {\r\n        return;\r\n      }\r\n      return Vector2.divide(position, {\r\n        x: mapImage.width(),\r\n        y: mapImage.height(),\r\n      });\r\n    }\r\n\r\n    function handleBrushDown(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (!brushPosition || preventSelectionRef.current) {\r\n        return;\r\n      }\r\n      if (toolSettings.type === \"path\") {\r\n        onSelectionChange({\r\n          type: \"path\",\r\n          items: [],\r\n          data: { points: [brushPosition] },\r\n          x: 0,\r\n          y: 0,\r\n        });\r\n      } else {\r\n        onSelectionChange({\r\n          type: \"rectangle\",\r\n          items: [],\r\n          data: getDefaultShapeData(\"rectangle\", brushPosition) as RectData,\r\n          x: 0,\r\n          y: 0,\r\n        });\r\n      }\r\n      setIsBrushDown(true);\r\n    }\r\n\r\n    function handleBrushMove(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      const brushPosition = getBrushPosition();\r\n      if (!brushPosition || preventSelectionRef.current) {\r\n        return;\r\n      }\r\n      if (isBrushDown && selection && mapImage) {\r\n        if (selection.type === \"path\") {\r\n          onSelectionChange((prevSelection) => {\r\n            if (prevSelection?.type !== \"path\") {\r\n              return prevSelection;\r\n            }\r\n            const prevPoints = prevSelection.data.points;\r\n            if (\r\n              Vector2.compare(\r\n                prevPoints[prevPoints.length - 1],\r\n                brushPosition,\r\n                0.001\r\n              )\r\n            ) {\r\n              return prevSelection;\r\n            }\r\n            const simplified = simplifyPoints(\r\n              [...prevPoints, brushPosition],\r\n              1 / 1000 / stageScale\r\n            );\r\n            return {\r\n              ...prevSelection,\r\n              data: { points: simplified },\r\n            };\r\n          });\r\n        } else {\r\n          onSelectionChange((prevSelection) => {\r\n            if (prevSelection?.type !== \"rectangle\") {\r\n              return prevSelection;\r\n            }\r\n            return {\r\n              ...prevSelection,\r\n              data: getUpdatedShapeData(\r\n                \"rectangle\",\r\n                prevSelection.data,\r\n                brushPosition,\r\n                gridCellNormalizedSize,\r\n                mapWidth,\r\n                mapHeight\r\n              ) as RectData,\r\n            };\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    function handleBrushUp(props: MapDragEvent) {\r\n      if (!leftMouseButton(props)) {\r\n        return;\r\n      }\r\n      if (preventSelectionRef.current) {\r\n        return;\r\n      }\r\n      if (selection && mapStage) {\r\n        const tokensGroups = mapStage.find<Konva.Group>(\"#tokens\");\r\n        const notesGroups = mapStage.find<Konva.Group>(\"#notes\");\r\n        const points = getSelectionPoints(selection);\r\n        const intersection = new Intersection(\r\n          {\r\n            type: \"path\",\r\n            points: scaleAndFlattenPoints(points, {\r\n              x: mapWidth,\r\n              y: mapHeight,\r\n            }),\r\n          },\r\n          { x: selection.x, y: selection.y },\r\n          { x: 0, y: 0 },\r\n          0\r\n        );\r\n\r\n        let intersectingItems: SelectionItem[] = [];\r\n\r\n        for (let tokensGroup of tokensGroups) {\r\n          const tokens = tokensGroup.children;\r\n          if (tokens) {\r\n            for (let token of tokens) {\r\n              if (\r\n                token.id() &&\r\n                !(token.id() in disabledTokens) &&\r\n                intersection.intersects(token.position())\r\n              ) {\r\n                intersectingItems.push({ type: \"token\", id: token.id() });\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        for (let notesGroup of notesGroups) {\r\n          const notes = notesGroup.children;\r\n          if (notes) {\r\n            for (let note of notes) {\r\n              if (\r\n                note.id() &&\r\n                !(note.id() in disabledNotes) &&\r\n                intersection.intersects(note.position())\r\n              ) {\r\n                intersectingItems.push({ type: \"note\", id: note.id() });\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if (intersectingItems.length > 0) {\r\n          onSelectionChange((prevSelection) => {\r\n            if (!prevSelection) {\r\n              return prevSelection;\r\n            }\r\n            return { ...prevSelection, items: intersectingItems };\r\n          });\r\n          onSelectionMenuOpen(true);\r\n        } else {\r\n          onSelectionChange(null);\r\n        }\r\n      } else {\r\n        onSelectionChange(null);\r\n      }\r\n\r\n      setIsBrushDown(false);\r\n    }\r\n\r\n    function handlePointerClick(event: Konva.KonvaEventObject<MouseEvent>) {\r\n      if (event.target.id() === \"selection\") {\r\n        onSelectionMenuOpen(true);\r\n      } else {\r\n        onSelectionChange(null);\r\n        onSelectionMenuOpen(false);\r\n      }\r\n    }\r\n\r\n    interactionEmitter?.on(\"dragStart\", handleBrushDown);\r\n    interactionEmitter?.on(\"drag\", handleBrushMove);\r\n    interactionEmitter?.on(\"dragEnd\", handleBrushUp);\r\n    mapStage?.on(\"click tap\", handlePointerClick);\r\n\r\n    return () => {\r\n      interactionEmitter?.off(\"dragStart\", handleBrushDown);\r\n      interactionEmitter?.off(\"drag\", handleBrushMove);\r\n      interactionEmitter?.off(\"dragEnd\", handleBrushUp);\r\n      mapStage?.off(\"click tap\", handlePointerClick);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <Group>\r\n      {selection && (\r\n        <Selection\r\n          selection={selection}\r\n          onSelectionChange={onSelectionChange}\r\n          onSelectionItemsChange={onSelectionItemsChange}\r\n          onPreventSelectionChange={(prevent: boolean) =>\r\n            (preventSelectionRef.current = prevent)\r\n          }\r\n          onSelectionDragStart={onSelectionDragStart}\r\n          onSelectionDragEnd={onSelectionDragEnd}\r\n          map={map}\r\n        />\r\n      )}\r\n    </Group>\r\n  );\r\n}\r\n\r\nexport default SelectTool;\r\n","import { useEffect, useState } from \"react\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nimport SelectionDragOverlay from \"../components/selection/SelectionDragOverlay\";\r\nimport SelectionMenu from \"../components/selection/SelectionMenu\";\r\nimport SelectTool from \"../components/tools/SelectTool\";\r\nimport { useBlur, useKeyboard } from \"../contexts/KeyboardContext\";\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport shortcuts from \"../shortcuts\";\r\nimport {\r\n  SelectionItemsChangeEventHandler,\r\n  SelectionItemsCreateEventHandler,\r\n  SelectionItemsRemoveEventHandler,\r\n} from \"../types/Events\";\r\nimport { Map, MapToolId } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport { Note } from \"../types/Note\";\r\nimport { Selection } from \"../types/Select\";\r\nimport { SelectToolSettings } from \"../types/Select\";\r\nimport { TokenState } from \"../types/TokenState\";\r\n\r\nfunction useMapSelection(\r\n  map: Map | null,\r\n  mapState: MapState | null,\r\n  onSelectionItemsChange: SelectionItemsChangeEventHandler,\r\n  onSelectionItemsRemove: SelectionItemsRemoveEventHandler,\r\n  onSelectionItemsCreate: SelectionItemsCreateEventHandler,\r\n  selectedToolId: MapToolId,\r\n  settings: SelectToolSettings\r\n) {\r\n  const userId = useUserId();\r\n  const disabledTokens: Record<string, boolean> = {};\r\n  const disabledNotes: Record<string, boolean> = {};\r\n  if (mapState && map && map.owner !== userId) {\r\n    if (!mapState.editFlags.includes(\"tokens\")) {\r\n      for (let token of Object.values(mapState.tokens)) {\r\n        if (token.owner !== userId) {\r\n          disabledTokens[token.id] = true;\r\n        }\r\n      }\r\n    }\r\n    if (!mapState.editFlags.includes(\"notes\")) {\r\n      for (let note of Object.values(mapState.notes)) {\r\n        disabledNotes[note.id] = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  const [isSelectionMenuOpen, setIsSelectionMenuOpen] =\r\n    useState<boolean>(false);\r\n  const [isSelectionDragging, setIsSelectionDragging] = useState(false);\r\n  const [selection, setSelection] = useState<Selection | null>(null);\r\n\r\n  function handleSelectionMenuOpen(open: boolean) {\r\n    setIsSelectionMenuOpen(open);\r\n  }\r\n\r\n  const active = selectedToolId === \"select\";\r\n\r\n  // Remove selection when changing tools\r\n  useEffect(() => {\r\n    if (!active) {\r\n      setSelection(null);\r\n      setIsSelectionMenuOpen(false);\r\n    }\r\n  }, [active]);\r\n\r\n  // Remove selection when changing maps\r\n  useEffect(() => {\r\n    setSelection(null);\r\n    setIsSelectionMenuOpen(false);\r\n  }, [map]);\r\n\r\n  function handleSelectionDragStart() {\r\n    if (duplicateSelection && selection) {\r\n      const tokenStates: TokenState[] = [];\r\n      const notes: Note[] = [];\r\n      for (let item of selection.items) {\r\n        if (item.type === \"token\") {\r\n          const token = mapState?.tokens[item.id];\r\n          if (token && !token.locked) {\r\n            tokenStates.push({ ...token, id: uuid() });\r\n          }\r\n        } else {\r\n          const note = mapState?.notes[item.id];\r\n          if (note && !note.locked) {\r\n            notes.push({ ...note, id: uuid() });\r\n          }\r\n        }\r\n      }\r\n      onSelectionItemsCreate(tokenStates, notes);\r\n    }\r\n    setIsSelectionDragging(true);\r\n  }\r\n\r\n  function handleSelectionDragEnd() {\r\n    setIsSelectionDragging(false);\r\n  }\r\n\r\n  function handleSelectionItemsRemove(\r\n    tokenStateIds: string[],\r\n    noteIds: string[]\r\n  ) {\r\n    setSelection(null);\r\n    onSelectionItemsRemove(tokenStateIds, noteIds);\r\n  }\r\n\r\n  const [duplicateSelection, setDuplicateSelection] = useState(false);\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (shortcuts.duplicate(event)) {\r\n      setDuplicateSelection(true);\r\n    }\r\n    if (shortcuts.delete(event) && selection && active) {\r\n      const tokenIds: string[] = [];\r\n      const noteIds: string[] = [];\r\n      for (let item of selection.items) {\r\n        if (item.type === \"token\") {\r\n          tokenIds.push(item.id);\r\n        } else {\r\n          noteIds.push(item.id);\r\n        }\r\n      }\r\n      handleSelectionItemsRemove(tokenIds, noteIds);\r\n      setIsSelectionMenuOpen(false);\r\n    }\r\n  }\r\n\r\n  function handleKeyUp(event: KeyboardEvent) {\r\n    if (shortcuts.duplicate(event)) {\r\n      setDuplicateSelection(false);\r\n    }\r\n  }\r\n\r\n  function handleBlur() {\r\n    setDuplicateSelection(false);\r\n  }\r\n\r\n  useKeyboard(handleKeyDown, handleKeyUp);\r\n  useBlur(handleBlur);\r\n\r\n  const selectionTool = map ? (\r\n    <SelectTool\r\n      active={active}\r\n      toolSettings={settings}\r\n      onSelectionItemsChange={onSelectionItemsChange}\r\n      selection={selection}\r\n      onSelectionChange={setSelection}\r\n      onSelectionMenuOpen={handleSelectionMenuOpen}\r\n      onSelectionDragStart={handleSelectionDragStart}\r\n      onSelectionDragEnd={handleSelectionDragEnd}\r\n      disabledTokens={disabledTokens}\r\n      disabledNotes={disabledNotes}\r\n      map={map}\r\n    />\r\n  ) : null;\r\n\r\n  const selectionMenu = (\r\n    <SelectionMenu\r\n      isOpen={isSelectionMenuOpen}\r\n      active={active}\r\n      onRequestClose={() => setIsSelectionMenuOpen(false)}\r\n      onRequestOpen={() => setIsSelectionMenuOpen(true)}\r\n      selection={selection}\r\n      onSelectionChange={setSelection}\r\n      onSelectionItemsChange={onSelectionItemsChange}\r\n      onSelectionItemsCreate={onSelectionItemsCreate}\r\n      map={map}\r\n      mapState={mapState}\r\n    />\r\n  );\r\n\r\n  const selectionDragOverlay = selection ? (\r\n    <SelectionDragOverlay\r\n      dragging={isSelectionDragging}\r\n      selection={selection}\r\n      onSelectionItemsRemove={handleSelectionItemsRemove}\r\n    />\r\n  ) : null;\r\n\r\n  return { selectionTool, selectionMenu, selectionDragOverlay };\r\n}\r\n\r\nexport default useMapSelection;\r\n","import { useState } from \"react\";\r\nimport { Box } from \"theme-ui\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport MapControls from \"./MapControls\";\r\nimport MapInteraction from \"./MapInteraction\";\r\nimport MapGrid from \"./MapGrid\";\r\n\r\nimport DrawingTool from \"../tools/DrawingTool\";\r\nimport FogTool from \"../tools/FogTool\";\r\nimport MeasureTool from \"../tools/MeasureTool\";\r\nimport NetworkedMapPointer from \"../../network/NetworkedMapPointer\";\r\n\r\nimport { useSettings } from \"../../contexts/SettingsContext\";\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\n\r\nimport Action from \"../../actions/Action\";\r\nimport {\r\n  AddStatesAction,\r\n  CutFogAction,\r\n  EditStatesAction,\r\n  RemoveStatesAction,\r\n} from \"../../actions\";\r\n\r\nimport Session from \"../../network/Session\";\r\n\r\nimport { Drawing, DrawingState } from \"../../types/Drawing\";\r\nimport { Fog, FogState } from \"../../types/Fog\";\r\nimport { Map as MapType, MapToolId } from \"../../types/Map\";\r\nimport { MapState } from \"../../types/MapState\";\r\nimport { Settings } from \"../../types/Settings\";\r\nimport {\r\n  MapChangeEventHandler,\r\n  MapResetEventHandler,\r\n  TokenStateRemoveHandler,\r\n  NoteChangeEventHandler,\r\n  NoteRemoveEventHander,\r\n  TokenStateChangeEventHandler,\r\n  NoteCreateEventHander,\r\n  SelectionItemsChangeEventHandler,\r\n  SelectionItemsRemoveEventHandler,\r\n  SelectionItemsCreateEventHandler,\r\n  TokensStateCreateHandler,\r\n} from \"../../types/Events\";\r\n\r\nimport useMapTokens from \"../../hooks/useMapTokens\";\r\nimport useMapNotes from \"../../hooks/useMapNotes\";\r\nimport { MapActions } from \"../../hooks/useMapActions\";\r\nimport useMapSelection from \"../../hooks/useMapSelection\";\r\n\r\ntype MapProps = {\r\n  map: MapType | null;\r\n  mapState: MapState | null;\r\n  mapActions: MapActions;\r\n  onMapTokenStateChange: TokenStateChangeEventHandler;\r\n  onMapTokenStateRemove: TokenStateRemoveHandler;\r\n  onMapTokensStateCreate: TokensStateCreateHandler;\r\n  onSelectionItemsChange: SelectionItemsChangeEventHandler;\r\n  onSelectionItemsRemove: SelectionItemsRemoveEventHandler;\r\n  onSelectionItemsCreate: SelectionItemsCreateEventHandler;\r\n  onMapChange: MapChangeEventHandler;\r\n  onMapReset: MapResetEventHandler;\r\n  onMapDraw: (action: Action<DrawingState>) => void;\r\n  onFogDraw: (action: Action<FogState>) => void;\r\n  onMapNoteCreate: NoteCreateEventHander;\r\n  onMapNoteChange: NoteChangeEventHandler;\r\n  onMapNoteRemove: NoteRemoveEventHander;\r\n  allowMapChange: boolean;\r\n  session: Session;\r\n  onUndo: () => void;\r\n  onRedo: () => void;\r\n};\r\n\r\nfunction Map({\r\n  map,\r\n  mapState,\r\n  mapActions,\r\n  onMapTokenStateChange,\r\n  onMapTokenStateRemove,\r\n  onMapTokensStateCreate,\r\n  onSelectionItemsChange,\r\n  onSelectionItemsRemove,\r\n  onSelectionItemsCreate,\r\n  onMapChange,\r\n  onMapReset,\r\n  onMapDraw,\r\n  onFogDraw,\r\n  onMapNoteCreate,\r\n  onMapNoteChange,\r\n  onMapNoteRemove,\r\n  allowMapChange,\r\n  session,\r\n  onUndo,\r\n  onRedo,\r\n}: MapProps) {\r\n  const { addToast } = useToasts();\r\n\r\n  const userId = useUserId();\r\n\r\n  const [selectedToolId, setSelectedToolId] = useState<MapToolId>(\"move\");\r\n  const { settings, setSettings } = useSettings();\r\n\r\n  function handleToolSettingChange(change: Partial<Settings>) {\r\n    setSettings((prevSettings) => ({\r\n      ...prevSettings,\r\n      ...change,\r\n    }));\r\n  }\r\n\r\n  const drawShapes = Object.values(mapState?.drawings || {});\r\n  const fogShapes = Object.values(mapState?.fogs || {});\r\n\r\n  function handleToolAction(action: string) {\r\n    if (action === \"eraseAll\") {\r\n      onMapDraw(new RemoveStatesAction(drawShapes.map((s) => s.id)));\r\n    }\r\n  }\r\n\r\n  function handleMapShapeAdd(shape: Drawing) {\r\n    onMapDraw(new AddStatesAction([shape]));\r\n  }\r\n\r\n  function handleMapShapesRemove(shapeIds: string[]) {\r\n    onMapDraw(new RemoveStatesAction(shapeIds));\r\n  }\r\n\r\n  function handleFogShapesAdd(shapes: Fog[]) {\r\n    onFogDraw(new AddStatesAction(shapes));\r\n  }\r\n\r\n  function handleFogShapesCut(shapes: Fog[]) {\r\n    onFogDraw(new CutFogAction(shapes));\r\n  }\r\n\r\n  function handleFogShapesRemove(shapeIds: string[]) {\r\n    onFogDraw(new RemoveStatesAction(shapeIds));\r\n  }\r\n\r\n  function handleFogShapesEdit(shapes: Partial<Fog>[]) {\r\n    onFogDraw(new EditStatesAction(shapes));\r\n  }\r\n\r\n  const { tokens, propTokens, tokenMenu, tokenDragOverlay } = useMapTokens(\r\n    map,\r\n    mapState,\r\n    onMapTokenStateChange,\r\n    onMapTokenStateRemove,\r\n    onMapTokensStateCreate,\r\n    selectedToolId\r\n  );\r\n\r\n  const { notes, noteMenu, noteDragOverlay } = useMapNotes(\r\n    map,\r\n    mapState,\r\n    onMapNoteCreate,\r\n    onMapNoteChange,\r\n    onMapNoteRemove,\r\n    selectedToolId\r\n  );\r\n\r\n  const { selectionTool, selectionMenu, selectionDragOverlay } =\r\n    useMapSelection(\r\n      map,\r\n      mapState,\r\n      onSelectionItemsChange,\r\n      onSelectionItemsRemove,\r\n      onSelectionItemsCreate,\r\n      selectedToolId,\r\n      settings.select\r\n    );\r\n\r\n  return (\r\n    <Box sx={{ flexGrow: 1 }}>\r\n      <MapInteraction\r\n        map={map}\r\n        mapState={mapState}\r\n        controls={\r\n          <>\r\n            <MapControls\r\n              onMapChange={onMapChange}\r\n              onMapReset={onMapReset}\r\n              map={map}\r\n              mapState={mapState}\r\n              mapActions={mapActions}\r\n              allowMapChange={allowMapChange}\r\n              onSelectedToolChange={setSelectedToolId}\r\n              selectedToolId={selectedToolId}\r\n              toolSettings={settings}\r\n              onToolSettingChange={handleToolSettingChange}\r\n              onToolAction={handleToolAction}\r\n              onUndo={onUndo}\r\n              onRedo={onRedo}\r\n            />\r\n            {tokenMenu}\r\n            {noteMenu}\r\n            {selectionMenu}\r\n            {tokenDragOverlay}\r\n            {noteDragOverlay}\r\n            {selectionDragOverlay}\r\n          </>\r\n        }\r\n        selectedToolId={selectedToolId}\r\n        onSelectedToolChange={setSelectedToolId}\r\n      >\r\n        {map && map.showGrid && <MapGrid map={map} />}\r\n        {propTokens}\r\n        <DrawingTool\r\n          map={map}\r\n          drawings={drawShapes}\r\n          onDrawingAdd={handleMapShapeAdd}\r\n          onDrawingsRemove={handleMapShapesRemove}\r\n          active={selectedToolId === \"drawing\"}\r\n          toolSettings={settings.drawing}\r\n        />\r\n        {notes}\r\n        {tokens}\r\n        <FogTool\r\n          map={map}\r\n          shapes={fogShapes}\r\n          onShapesAdd={handleFogShapesAdd}\r\n          onShapesCut={handleFogShapesCut}\r\n          onShapesRemove={handleFogShapesRemove}\r\n          onShapesEdit={handleFogShapesEdit}\r\n          onShapeError={addToast}\r\n          active={selectedToolId === \"fog\"}\r\n          toolSettings={settings.fog}\r\n          editable={\r\n            !!(map?.owner === userId || mapState?.editFlags.includes(\"fog\")) &&\r\n            !settings.fog.preview\r\n          }\r\n        />\r\n        <NetworkedMapPointer\r\n          active={selectedToolId === \"pointer\"}\r\n          session={session}\r\n        />\r\n        <MeasureTool map={map} active={selectedToolId === \"measure\"} />\r\n        {selectionTool}\r\n      </MapInteraction>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n","import { Outline } from \"../../types/Outline\";\r\n\r\ntype TokenOutlineSVGProps = {\r\n  outline: Outline;\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nexport function TokenOutlineSVG({\r\n  outline,\r\n  width,\r\n  height,\r\n}: TokenOutlineSVGProps) {\r\n  if (outline.type === \"rect\") {\r\n    return (\r\n      <svg\r\n        width=\"100%\"\r\n        height=\"100%\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"rgba(0, 0, 0, 0.3)\"\r\n        viewBox={`0, 0, ${width} ${height}`}\r\n        preserveAspectRatio=\"xMidYMid slice\"\r\n      >\r\n        <rect\r\n          x={outline.x}\r\n          y={outline.y}\r\n          width={outline.width}\r\n          height={outline.height}\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (outline.type === \"circle\") {\r\n    return (\r\n      <svg\r\n        width=\"100%\"\r\n        height=\"100%\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"rgba(0, 0, 0, 0.3)\"\r\n        viewBox={`0, 0, ${width} ${height}`}\r\n        preserveAspectRatio=\"xMidYMid slice\"\r\n      >\r\n        <circle r={outline.radius} cx={outline.x} cy={outline.y} />\r\n      </svg>\r\n    );\r\n  } else {\r\n    let points = [];\r\n    for (let i = 0; i < outline.points.length; i += 2) {\r\n      points.push(`${outline.points[i]}, ${outline.points[i + 1]}`);\r\n    }\r\n    return (\r\n      <svg\r\n        width=\"100%\"\r\n        height=\"100%\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"rgba(0, 0, 0, 0.3)\"\r\n        viewBox={`0, 0, ${width} ${height}`}\r\n        preserveAspectRatio=\"xMidYMid slice\"\r\n      >\r\n        <polygon points={points.join(\" \")} />\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TokenOutlineSVG;\r\n","import { useState } from \"react\";\r\nimport { Image, Box, ImageProps } from \"theme-ui\";\r\n\r\nimport { useDataURL } from \"../../contexts/AssetsContext\";\r\n\r\nimport { tokenSources as defaultTokenSources } from \"../../tokens\";\r\nimport { Token } from \"../../types/Token\";\r\n\r\nimport TokenOutlineSVG from \"./TokenOutline\";\r\n\r\ntype TokenImageProps = {\r\n  token: Token;\r\n} & ImageProps;\r\n\r\nfunction TokenImage({ token, ...props }: TokenImageProps) {\r\n  const tokenURL = useDataURL(\r\n    token,\r\n    defaultTokenSources,\r\n    undefined,\r\n    token.type === \"file\"\r\n  );\r\n\r\n  const [showOutline, setShowOutline] = useState(true);\r\n\r\n  return (\r\n    <>\r\n      {showOutline && (\r\n        <Box\r\n          title={props.alt}\r\n          aria-label={props.alt}\r\n          sx={{ width: \"100%\", height: \"100%\", minHeight: 0 }}\r\n        >\r\n          <TokenOutlineSVG\r\n            outline={token.outline}\r\n            width={token.width}\r\n            height={token.height}\r\n          />\r\n        </Box>\r\n      )}\r\n      <Image\r\n        onLoad={() => setShowOutline(false)}\r\n        src={tokenURL}\r\n        style={showOutline ? { display: \"none\" } : props.style}\r\n        {...props}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TokenImage;\r\n","import { Box } from \"theme-ui\";\r\nimport { useInView } from \"react-intersection-observer\";\r\n\r\nimport TokenImage from \"./TokenImage\";\r\n\r\nimport { Token } from \"../../types/Token\";\r\n\r\ntype TokenBarTokenProps = {\r\n  token: Token;\r\n};\r\n\r\nfunction TokenBarToken({ token }: TokenBarTokenProps) {\r\n  const [ref, inView] = useInView({ triggerOnce: true });\r\n\r\n  return (\r\n    <Box ref={ref} sx={{ width: \"48px\", height: \"48px\" }} title={token.name}>\r\n      {inView && (\r\n        <TokenImage\r\n          token={token}\r\n          sx={{\r\n            userSelect: \"none\",\r\n            touchAction: \"none\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            objectFit: \"cover\",\r\n            pointerEvents: \"none\",\r\n          }}\r\n          alt={token.name}\r\n          title={token.name}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default TokenBarToken;\r\n","import React from \"react\";\r\nimport { useDraggable } from \"@dnd-kit/core\";\r\nimport { Data } from \"@dnd-kit/core/dist/store/types\";\r\n\r\ntype DraggableProps = {\r\n  id: string;\r\n  children: React.ReactNode;\r\n  data?: Data;\r\n};\r\n\r\nfunction Draggable({ id, children, data }: DraggableProps) {\r\n  const { attributes, listeners, setNodeRef, isDragging } = useDraggable({\r\n    id,\r\n    data,\r\n  });\r\n\r\n  const style = {\r\n    cursor: isDragging ? \"grabbing\" : \"grab\",\r\n    touchAction: \"none\",\r\n    opacity: isDragging ? 0.5 : undefined,\r\n  };\r\n\r\n  return (\r\n    <div ref={setNodeRef} style={style} {...listeners} {...attributes}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Draggable;\r\n","function GroupIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M20 6h-8l-1.41-1.41C10.21 4.21 9.7 4 9.17 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-1 12H5c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v8c0 .55-.45 1-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default GroupIcon;\r\n","import { useState, useRef } from \"react\";\r\nimport { Grid, Flex, Box } from \"theme-ui\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport { useDraggable } from \"@dnd-kit/core\";\r\n\r\nimport TokenImage from \"./TokenImage\";\r\nimport TokenBarToken from \"./TokenBarToken\";\r\n\r\nimport Draggable from \"../drag/Draggable\";\r\n\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport GroupIcon from \"../../icons/GroupIcon\";\r\nimport { GroupContainer } from \"../../types/Group\";\r\nimport { Token } from \"../../types/Token\";\r\n\r\ntype TokenBarTokenGroupProps = {\r\n  group: GroupContainer;\r\n  tokens: Token[];\r\n  draggable: boolean;\r\n};\r\n\r\nfunction TokenBarTokenGroup({\r\n  group,\r\n  tokens,\r\n  draggable,\r\n}: TokenBarTokenGroupProps) {\r\n  const { attributes, listeners, setNodeRef, isDragging } = useDraggable({\r\n    id: draggable ? group.id : \"\",\r\n    disabled: !draggable,\r\n  });\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const { height } = useSpring({\r\n    height: isOpen ? (tokens.length + 1) * 56 : 56,\r\n  });\r\n\r\n  function renderToken(token: Token) {\r\n    if (draggable) {\r\n      return (\r\n        <Draggable id={token.id} key={token.id}>\r\n          <TokenBarToken token={token} />\r\n        </Draggable>\r\n      );\r\n    } else {\r\n      return <TokenBarToken token={token} key={token.id} />;\r\n    }\r\n  }\r\n\r\n  function renderTokens() {\r\n    if (isOpen) {\r\n      return (\r\n        <Grid\r\n          columns=\"1fr\"\r\n          bg=\"muted\"\r\n          sx={{ borderRadius: \"8px\" }}\r\n          p={0}\r\n          gap={2}\r\n        >\r\n          <Flex\r\n            sx={{\r\n              width: \"48px\",\r\n              height: \"48px\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              cursor: isDragging ? \"grabbing\" : \"pointer\",\r\n              color: \"primary\",\r\n            }}\r\n            onClick={(e) => handleOpenClick(e, false)}\r\n            key=\"group\"\r\n            title={group.name}\r\n            {...listeners}\r\n            {...attributes}\r\n          >\r\n            <GroupIcon />\r\n          </Flex>\r\n          {tokens.map(renderToken)}\r\n        </Grid>\r\n      );\r\n    } else {\r\n      return (\r\n        <Grid\r\n          columns=\"1fr 1fr\"\r\n          bg=\"muted\"\r\n          sx={{\r\n            borderRadius: \"8px\",\r\n            gridGap: \"4px\",\r\n            height: \"48px\",\r\n            gridTemplateRows: \"1fr 1fr\",\r\n          }}\r\n          p=\"2px\"\r\n          title={group.name}\r\n          {...listeners}\r\n          {...attributes}\r\n        >\r\n          {tokens.slice(0, 4).map((token) => (\r\n            <TokenImage\r\n              token={token}\r\n              key={token.id}\r\n              sx={{\r\n                userSelect: \"none\",\r\n                touchAction: \"none\",\r\n                pointerEvents: \"none\",\r\n              }}\r\n            />\r\n          ))}\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n\r\n  // Reject the opening of a group if the pointer has moved\r\n  const clickDownPositionRef = useRef(new Vector2(0, 0));\r\n  function handleOpenDown(event: React.PointerEvent<HTMLDivElement>) {\r\n    clickDownPositionRef.current = new Vector2(event.clientX, event.clientY);\r\n  }\r\n  function handleOpenClick(\r\n    event: React.MouseEvent<HTMLDivElement>,\r\n    newOpen: boolean\r\n  ) {\r\n    const clickPosition = new Vector2(event.clientX, event.clientY);\r\n    const distance = Vector2.distance(\r\n      clickPosition,\r\n      clickDownPositionRef.current\r\n    );\r\n    if (distance < 5) {\r\n      setIsOpen(newOpen);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box ref={setNodeRef}>\r\n      <animated.div\r\n        style={{\r\n          padding: \"4px 0\",\r\n          width: \"48px\",\r\n          height,\r\n          cursor: isOpen ? \"default\" : isDragging ? \"grabbing\" : \"pointer\",\r\n        }}\r\n        onPointerDown={handleOpenDown}\r\n        onClick={(e) => !isOpen && handleOpenClick(e, true)}\r\n      >\r\n        {renderTokens()}\r\n      </animated.div>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default TokenBarTokenGroup;\r\n","function SelectMapIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4 11h-3v3c0 .55-.45 1-1 1s-1-.45-1-1v-3H8c-.55 0-1-.45-1-1s.45-1 1-1h3V8c0-.55.45-1 1-1s1 .45 1 1v3h3c.55 0 1 .45 1 1s-.45 1-1 1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SelectMapIcon;\r\n","import { Flex, Box, Input, Label } from \"theme-ui\";\r\n\r\nimport { isEmpty } from \"../../helpers/shared\";\r\n\r\nimport Select from \"../Select\";\r\n\r\nimport { Token, TokenCategory } from \"../../types/Token\";\r\nimport { TokenSettingsChangeEventHandler } from \"../../types/Events\";\r\n\r\ntype CategorySetting = { value: TokenCategory; label: string };\r\nconst categorySettings: CategorySetting[] = [\r\n  { value: \"character\", label: \"Character\" },\r\n  { value: \"prop\", label: \"Prop\" },\r\n  { value: \"vehicle\", label: \"Mount\" },\r\n  { value: \"attachment\", label: \"Attachment\" },\r\n];\r\n\r\ntype TokenSettingsProps = {\r\n  token: Token;\r\n  onSettingsChange: TokenSettingsChangeEventHandler;\r\n};\r\n\r\nfunction TokenSettings({ token, onSettingsChange }: TokenSettingsProps) {\r\n  const tokenEmpty = !token || isEmpty(token);\r\n  return (\r\n    <Flex sx={{ flexDirection: \"column\" }}>\r\n      <Box mt={2} sx={{ flexGrow: 1 }}>\r\n        <Label htmlFor=\"name\">Name</Label>\r\n        <Input\r\n          name=\"name\"\r\n          value={(token && token.name) || \"\"}\r\n          onChange={(e) => onSettingsChange({ name: e.target.value })}\r\n          disabled={tokenEmpty}\r\n          my={1}\r\n        />\r\n      </Box>\r\n      <Box mt={2}>\r\n        <Label>Default Category</Label>\r\n        <Select\r\n          options={categorySettings}\r\n          value={\r\n            tokenEmpty\r\n              ? undefined\r\n              : categorySettings.find((s) => s.value === token.defaultCategory)\r\n          }\r\n          isDisabled={tokenEmpty}\r\n          onChange={\r\n            ((option: CategorySetting) =>\r\n              onSettingsChange({ defaultCategory: option.value })) as any\r\n          }\r\n          isSearchable={false}\r\n        />\r\n      </Box>\r\n      <Box mt={2} sx={{ flexGrow: 1 }}>\r\n        <Label htmlFor=\"tokenSize\">Default Size</Label>\r\n        <Input\r\n          type=\"number\"\r\n          name=\"tokenSize\"\r\n          value={`${(token && token.defaultSize) || 0}`}\r\n          onChange={(e) =>\r\n            onSettingsChange({ defaultSize: parseFloat(e.target.value) })\r\n          }\r\n          disabled={tokenEmpty}\r\n          min={1}\r\n          my={1}\r\n        />\r\n      </Box>\r\n      <Box my={2} mb={3} sx={{ flexGrow: 1 }}>\r\n        <Label htmlFor=\"label\">Default Label</Label>\r\n        <Input\r\n          name=\"label\"\r\n          value={(token && token.defaultLabel) || \"\"}\r\n          onChange={(e) => onSettingsChange({ defaultLabel: e.target.value })}\r\n          disabled={tokenEmpty}\r\n          my={1}\r\n        />\r\n      </Box>\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default TokenSettings;\r\n","import { useState, useRef } from \"react\";\r\nimport { Box, IconButton } from \"theme-ui\";\r\nimport { Stage, Layer, Image, Rect, Group } from \"react-konva\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\nimport useImage from \"use-image\";\r\nimport Konva from \"konva\";\r\n\r\nimport usePreventOverscroll from \"../../hooks/usePreventOverscroll\";\r\nimport useStageInteraction from \"../../hooks/useStageInteraction\";\r\nimport useImageCenter from \"../../hooks/useImageCenter\";\r\nimport useResponsiveLayout from \"../../hooks/useResponsiveLayout\";\r\n\r\nimport { GridProvider } from \"../../contexts/GridContext\";\r\nimport { useDataURL } from \"../../contexts/AssetsContext\";\r\n\r\nimport GridOnIcon from \"../../icons/GridOnIcon\";\r\nimport GridOffIcon from \"../../icons/GridOffIcon\";\r\n\r\nimport { tokenSources } from \"../../tokens\";\r\n\r\nimport Grid from \"../konva/Grid\";\r\nimport { Token } from \"../../types/Token\";\r\nimport SettingsContext, { useSettings } from \"../../contexts/SettingsContext\";\r\n\r\ntype TokenPreviewProps = {\r\n  token: Token;\r\n};\r\n\r\nfunction TokenPreview({ token }: TokenPreviewProps) {\r\n  const settings = useSettings();\r\n\r\n  const tokenURL = useDataURL(token, tokenSources);\r\n  const [tokenSourceImage] = useImage(tokenURL || \"\");\r\n\r\n  const [stageWidth, setStageWidth] = useState(1);\r\n  const [stageHeight, setStageHeight] = useState(1);\r\n  const [stageScale, setStageScale] = useState(1);\r\n\r\n  const stageTranslateRef = useRef({ x: 0, y: 0 });\r\n  const tokenStageRef = useRef<Konva.Stage>(null);\r\n  const tokenLayerRef = useRef<Konva.Layer>(null);\r\n\r\n  function handleResize(width?: number, height?: number) {\r\n    if (width && height) {\r\n      setStageWidth(width);\r\n      setStageHeight(height);\r\n    }\r\n  }\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  usePreventOverscroll(containerRef);\r\n\r\n  const [tokenWidth, tokenHeight] = useImageCenter(\r\n    token,\r\n    tokenStageRef,\r\n    stageWidth,\r\n    stageHeight,\r\n    stageTranslateRef,\r\n    setStageScale,\r\n    tokenLayerRef,\r\n    containerRef,\r\n    true\r\n  );\r\n\r\n  useStageInteraction(\r\n    tokenStageRef,\r\n    stageScale,\r\n    setStageScale,\r\n    stageTranslateRef,\r\n    tokenLayerRef\r\n  );\r\n\r\n  const [showGridPreview, setShowGridPreview] = useState(true);\r\n  const gridWidth = tokenWidth;\r\n  const gridX = token.defaultSize;\r\n  const gridSize = gridWidth / gridX;\r\n  const gridY = Math.round(tokenHeight / gridSize);\r\n  const gridHeight = gridY > 0 ? gridY * gridSize : tokenHeight;\r\n  const borderWidth = Math.max(\r\n    (Math.min(tokenWidth, gridHeight) / 200) * Math.max(1 / stageScale, 1),\r\n    1\r\n  );\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: \"100%\",\r\n        height: layout.screenSize === \"large\" ? \"500px\" : \"300px\",\r\n        cursor: \"move\",\r\n        touchAction: \"none\",\r\n        outline: \"none\",\r\n        position: \"relative\",\r\n      }}\r\n      bg=\"muted\"\r\n      ref={containerRef}\r\n    >\r\n      <ReactResizeDetector\r\n        handleWidth\r\n        handleHeight\r\n        onResize={handleResize}\r\n        targetRef={containerRef}\r\n      >\r\n        <Stage\r\n          width={stageWidth}\r\n          height={stageHeight}\r\n          scale={{ x: stageScale, y: stageScale }}\r\n          ref={tokenStageRef}\r\n        >\r\n          <SettingsContext.Provider value={settings}>\r\n            <Layer ref={tokenLayerRef}>\r\n              <Image\r\n                image={tokenSourceImage}\r\n                width={tokenWidth}\r\n                height={tokenHeight}\r\n              />\r\n              {showGridPreview && (\r\n                <Group offsetY={gridHeight - tokenHeight}>\r\n                  <GridProvider\r\n                    grid={{\r\n                      size: { x: gridX, y: gridY },\r\n                      inset: {\r\n                        topLeft: { x: 0, y: 0 },\r\n                        bottomRight: { x: 1, y: 1 },\r\n                      },\r\n                      type: \"square\",\r\n                      measurement: { type: \"chebyshev\", scale: \"5ft\" },\r\n                    }}\r\n                    width={gridWidth}\r\n                    height={gridHeight}\r\n                  >\r\n                    <Grid />\r\n                  </GridProvider>\r\n                  <Rect\r\n                    width={gridWidth}\r\n                    height={gridHeight}\r\n                    fill=\"transparent\"\r\n                    stroke=\"rgba(255, 255, 255, 0.75)\"\r\n                    strokeWidth={borderWidth}\r\n                  />\r\n                </Group>\r\n              )}\r\n            </Layer>\r\n          </SettingsContext.Provider>\r\n        </Stage>\r\n      </ReactResizeDetector>\r\n      <IconButton\r\n        title={showGridPreview ? \"Hide Grid Preview\" : \"Show Grid Preview\"}\r\n        aria-label={showGridPreview ? \"Hide Grid Preview\" : \"Show Grid Preview\"}\r\n        onClick={() => setShowGridPreview(!showGridPreview)}\r\n        bg=\"overlay\"\r\n        sx={{\r\n          borderRadius: \"50%\",\r\n          position: \"absolute\",\r\n          bottom: 0,\r\n          right: 0,\r\n        }}\r\n        m={2}\r\n        p=\"6px\"\r\n      >\r\n        {showGridPreview ? <GridOnIcon /> : <GridOffIcon />}\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default TokenPreview;\r\n","import { useState } from \"react\";\r\nimport { Button, Flex, Label, useThemeUI } from \"theme-ui\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport TokenSettings from \"../components/token/TokenSettings\";\r\nimport TokenPreview from \"../components/token/TokenPreview\";\r\n\r\nimport { isEmpty } from \"../helpers/shared\";\r\n\r\nimport useResponsiveLayout from \"../hooks/useResponsiveLayout\";\r\n\r\nimport { Token } from \"../types/Token\";\r\n\r\nimport { UpdateTokenEventHandler } from \"../contexts/TokenDataContext\";\r\n\r\ntype EditModalProps = {\r\n  isOpen: boolean;\r\n  onDone: () => void;\r\n  token: Token;\r\n  onUpdateToken: UpdateTokenEventHandler;\r\n};\r\n\r\nfunction EditTokenModal({\r\n  isOpen,\r\n  onDone,\r\n  token,\r\n  onUpdateToken,\r\n}: EditModalProps) {\r\n  const { theme } = useThemeUI();\r\n\r\n  function handleClose() {\r\n    setTokenSettingChanges({});\r\n    onDone();\r\n  }\r\n\r\n  async function handleSave() {\r\n    await applyTokenChanges();\r\n    onDone();\r\n  }\r\n\r\n  const [tokenSettingChanges, setTokenSettingChanges] = useState<\r\n    Partial<Token>\r\n  >({});\r\n\r\n  // TODO: CHANGE MAP BACK? OR CHANGE THIS TO PARTIAL\r\n  function handleTokenSettingsChange(change: Partial<Token>) {\r\n    setTokenSettingChanges((prevChanges) => ({\r\n      ...prevChanges,\r\n      ...change,\r\n    }));\r\n  }\r\n\r\n  async function applyTokenChanges() {\r\n    if (token && !isEmpty(tokenSettingChanges)) {\r\n      // Ensure size value is positive\r\n      let verifiedChanges = { ...tokenSettingChanges };\r\n      if (\"defaultSize\" in verifiedChanges) {\r\n        verifiedChanges.defaultSize = verifiedChanges.defaultSize || 1;\r\n      }\r\n\r\n      await onUpdateToken(token.id, verifiedChanges);\r\n      setTokenSettingChanges({});\r\n    }\r\n  }\r\n\r\n  const selectedTokenWithChanges = {\r\n    ...token,\r\n    ...tokenSettingChanges,\r\n  } as Token;\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  if (!token) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={handleClose}\r\n      style={{\r\n        content: {\r\n          maxWidth: layout.modalSize,\r\n          width: \"calc(100% - 16px)\",\r\n          padding: 0,\r\n          display: \"flex\",\r\n          overflow: \"hidden\",\r\n        },\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          width: \"100%\",\r\n        }}\r\n      >\r\n        <Label pt={2} pb={1} px={3}>\r\n          Edit token\r\n        </Label>\r\n        <SimpleBar\r\n          style={{\r\n            minHeight: 0,\r\n            padding: \"16px\",\r\n            backgroundColor: theme.colors?.muted as string,\r\n            margin: \"0 8px\",\r\n            height: \"100%\",\r\n          }}\r\n        >\r\n          <TokenPreview token={selectedTokenWithChanges} />\r\n          <TokenSettings\r\n            token={selectedTokenWithChanges}\r\n            onSettingsChange={handleTokenSettingsChange}\r\n          />\r\n        </SimpleBar>\r\n        <Button m={3} onClick={handleSave}>\r\n          Save\r\n        </Button>\r\n      </Flex>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default EditTokenModal;\r\n","import React from \"react\";\r\nimport { Token } from \"../../types/Token\";\r\n\r\nimport Tile from \"../tile/Tile\";\r\nimport TokenImage from \"./TokenImage\";\r\n\r\ntype TokenTileProps = {\r\n  token: Token;\r\n  isSelected: boolean;\r\n  onSelect: (tokenId: string) => void;\r\n  onTokenEdit: (tokenId: string) => void;\r\n  canEdit: boolean;\r\n  badges: React.ReactChild[];\r\n};\r\n\r\nfunction TokenTile({\r\n  token,\r\n  isSelected,\r\n  onSelect,\r\n  onTokenEdit,\r\n  canEdit,\r\n  badges,\r\n}: TokenTileProps) {\r\n  return (\r\n    <Tile\r\n      title={token.name}\r\n      isSelected={isSelected}\r\n      onSelect={() => onSelect(token.id)}\r\n      onEdit={() => onTokenEdit(token.id)}\r\n      canEdit={canEdit}\r\n      badges={badges}\r\n      editTitle=\"Edit Token\"\r\n    >\r\n      <TokenImage token={token} />\r\n    </Tile>\r\n  );\r\n}\r\n\r\nexport default TokenTile;\r\n","import { Grid } from \"theme-ui\";\r\n\r\nimport Tile from \"../tile/Tile\";\r\nimport TokenImage from \"./TokenImage\";\r\n\r\nimport useResponsiveLayout from \"../../hooks/useResponsiveLayout\";\r\nimport { GroupContainer } from \"../../types/Group\";\r\nimport { Token } from \"../../types/Token\";\r\n\r\ntype TokenTileProps = {\r\n  group: GroupContainer;\r\n  tokens: Token[];\r\n  isSelected: boolean;\r\n  onSelect: (tokenId: string) => void;\r\n  onDoubleClick: () => void;\r\n};\r\n\r\nfunction TokenTileGroup({\r\n  group,\r\n  tokens,\r\n  isSelected,\r\n  onSelect,\r\n  onDoubleClick,\r\n}: TokenTileProps) {\r\n  const layout = useResponsiveLayout();\r\n\r\n  return (\r\n    <Tile\r\n      title={group.name}\r\n      isSelected={isSelected}\r\n      onSelect={() => onSelect(group.id)}\r\n      onDoubleClick={onDoubleClick}\r\n    >\r\n      <Grid\r\n        columns={`repeat(${layout.groupGridColumns}, 1fr)`}\r\n        p={2}\r\n        gap={2}\r\n        sx={{\r\n          height: \"100%\",\r\n          gridTemplateRows: `repeat(${layout.groupGridColumns}, 1fr)`,\r\n        }}\r\n      >\r\n        {tokens\r\n          .slice(0, layout.groupGridColumns * layout.groupGridColumns)\r\n          .map((token) => (\r\n            <TokenImage\r\n              sx={{ borderRadius: \"8px\" }}\r\n              token={token}\r\n              key={`${token.id}-group-tile`}\r\n            />\r\n          ))}\r\n      </Grid>\r\n    </Tile>\r\n  );\r\n}\r\n\r\nexport default TokenTileGroup;\r\n","import { Flex } from \"theme-ui\";\r\n\r\nimport TokenShowIcon from \"../../icons/TokenShowIcon\";\r\nimport TokenHideIcon from \"../../icons/TokenHideIcon\";\r\n\r\ntype TokenHiddenBadgeProps = {\r\n  hidden: boolean;\r\n};\r\n\r\nfunction TokenHiddenBadge({ hidden }: TokenHiddenBadgeProps) {\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        height: \"15px\",\r\n        width: \"15px\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      {hidden ? <TokenHideIcon /> : <TokenShowIcon />}\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default TokenHiddenBadge;\r\n","import TokenTile from \"./TokenTile\";\r\nimport TokenTileGroup from \"./TokenTileGroup\";\r\nimport TokenHiddenBadge from \"./TokenHiddenBadge\";\r\n\r\nimport SortableTiles from \"../tile/SortableTiles\";\r\nimport SortableTilesDragOverlay from \"../tile/SortableTilesDragOverlay\";\r\n\r\nimport { getGroupItems } from \"../../helpers/group\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { Token } from \"../../types/Token\";\r\nimport { Group } from \"../../types/Group\";\r\n\r\ntype TokenTilesProps = {\r\n  tokensById: Record<string, Token>;\r\n  onTokenEdit: (tokenId: string) => void;\r\n  subgroup: boolean;\r\n};\r\n\r\nfunction TokenTiles({ tokensById, onTokenEdit, subgroup }: TokenTilesProps) {\r\n  const { selectedGroupIds, selectMode, onGroupOpen, onGroupSelect } =\r\n    useGroup();\r\n\r\n  function renderTile(group: Group) {\r\n    if (group.type === \"item\") {\r\n      const token = tokensById[group.id];\r\n      if (token) {\r\n        const isSelected = selectedGroupIds.includes(group.id);\r\n        const canEdit =\r\n          isSelected &&\r\n          selectMode === \"single\" &&\r\n          selectedGroupIds.length === 1;\r\n\r\n        return (\r\n          <TokenTile\r\n            key={token.id}\r\n            token={token}\r\n            isSelected={isSelected}\r\n            onSelect={onGroupSelect}\r\n            onTokenEdit={onTokenEdit}\r\n            canEdit={canEdit}\r\n            badges={[\r\n              `${token.defaultSize}x`,\r\n              <TokenHiddenBadge hidden={token.hideInSidebar} />,\r\n            ]}\r\n          />\r\n        );\r\n      }\r\n    } else {\r\n      const isSelected = selectedGroupIds.includes(group.id);\r\n      const items = getGroupItems(group);\r\n      const canOpen =\r\n        isSelected && selectMode === \"single\" && selectedGroupIds.length === 1;\r\n      return (\r\n        <TokenTileGroup\r\n          key={group.id}\r\n          group={group}\r\n          tokens={items.map((item) => tokensById[item.id])}\r\n          isSelected={isSelected}\r\n          onSelect={onGroupSelect}\r\n          onDoubleClick={() => canOpen && onGroupOpen(group.id)}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SortableTiles renderTile={renderTile} subgroup={subgroup} />\r\n      <SortableTilesDragOverlay renderTile={renderTile} subgroup={subgroup} />\r\n    </>\r\n  );\r\n}\r\n\r\nTokenTiles.defaultProps = {\r\n  subgroup: false,\r\n};\r\n\r\nexport default TokenTiles;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Flex, Close, IconButton } from \"theme-ui\";\r\n\r\nimport { groupsFromIds, itemsFromGroups } from \"../../helpers/group\";\r\n\r\nimport ConfirmModal from \"../../modals/ConfirmModal\";\r\n\r\nimport TokenShowIcon from \"../../icons/TokenShowIcon\";\r\nimport TokenHideIcon from \"../../icons/TokenHideIcon\";\r\nimport RemoveTokenIcon from \"../../icons/RemoveTokenIcon\";\r\n\r\nimport { useGroup } from \"../../contexts/GroupContext\";\r\nimport { useTokenData } from \"../../contexts/TokenDataContext\";\r\nimport { useKeyboard } from \"../../contexts/KeyboardContext\";\r\n\r\nimport shortcuts from \"../../shortcuts\";\r\n\r\ntype TokenEditBarProps = {\r\n  disabled: boolean;\r\n  onLoad: (load: boolean) => void;\r\n};\r\n\r\nfunction TokenEditBar({ disabled, onLoad }: TokenEditBarProps) {\r\n  const { tokens, removeTokens, updateTokensHidden } = useTokenData();\r\n\r\n  const { activeGroups, selectedGroupIds, onClearSelection } = useGroup();\r\n\r\n  const [allTokensVisible, setAllTokensVisisble] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const selectedGroups = groupsFromIds(selectedGroupIds, activeGroups);\r\n    const selectedTokens = itemsFromGroups(selectedGroups, tokens);\r\n\r\n    setAllTokensVisisble(selectedTokens.every((token) => !token.hideInSidebar));\r\n  }, [selectedGroupIds, tokens, activeGroups]);\r\n\r\n  function getSelectedTokens() {\r\n    const selectedGroups = groupsFromIds(selectedGroupIds, activeGroups);\r\n    return itemsFromGroups(selectedGroups, tokens);\r\n  }\r\n\r\n  const [isTokensRemoveModalOpen, setIsTokensRemoveModalOpen] = useState(false);\r\n  async function handleTokensRemove() {\r\n    onLoad(true);\r\n    setIsTokensRemoveModalOpen(false);\r\n    const selectedTokens = getSelectedTokens();\r\n    const selectedTokenIds = selectedTokens.map((token) => token.id);\r\n    onClearSelection();\r\n    await removeTokens(selectedTokenIds);\r\n    onLoad(false);\r\n  }\r\n\r\n  async function handleTokensHide(hideInSidebar: boolean) {\r\n    const selectedTokens = getSelectedTokens();\r\n    const selectedTokenIds = selectedTokens.map((token) => token.id);\r\n    // Show loading indicator if hiding more than 10 tokens\r\n    if (selectedTokenIds.length > 10) {\r\n      onLoad(true);\r\n      await updateTokensHidden(selectedTokenIds, hideInSidebar);\r\n      onLoad(false);\r\n    } else {\r\n      updateTokensHidden(selectedTokenIds, hideInSidebar);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shortcuts\r\n   */\r\n  function handleKeyDown(event: KeyboardEvent) {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    if (shortcuts.delete(event)) {\r\n      const selectedTokens = getSelectedTokens();\r\n      if (selectedTokens.length > 0) {\r\n        // Ensure all other modals are closed\r\n        setIsTokensRemoveModalOpen(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  useKeyboard(handleKeyDown);\r\n\r\n  if (selectedGroupIds.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  let hideTitle = \"\";\r\n  if (allTokensVisible) {\r\n    hideTitle = \"Hide Selected Token(s) in Sidebar\";\r\n  } else {\r\n    hideTitle = \"Show Selected Token(s) in Sidebar\";\r\n  }\r\n\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        justifyContent: \"space-between\",\r\n      }}\r\n      bg=\"overlay\"\r\n    >\r\n      <Close\r\n        title=\"Clear Selection\"\r\n        aria-label=\"Clear Selection\"\r\n        onClick={() => onClearSelection()}\r\n      />\r\n      <Flex>\r\n        <IconButton\r\n          aria-label={hideTitle}\r\n          title={hideTitle}\r\n          onClick={() => handleTokensHide(allTokensVisible)}\r\n        >\r\n          {allTokensVisible ? <TokenShowIcon /> : <TokenHideIcon />}\r\n        </IconButton>\r\n        <IconButton\r\n          aria-label=\"Remove Selected Token(s)\"\r\n          title=\"Remove Selected Token(s)\"\r\n          onClick={() => setIsTokensRemoveModalOpen(true)}\r\n        >\r\n          <RemoveTokenIcon />\r\n        </IconButton>\r\n      </Flex>\r\n      <ConfirmModal\r\n        isOpen={isTokensRemoveModalOpen}\r\n        onRequestClose={() => setIsTokensRemoveModalOpen(false)}\r\n        onConfirm={handleTokensRemove}\r\n        confirmText=\"Remove\"\r\n        label=\"Remove Selected Token(s)\"\r\n        description=\"This operation cannot be undone.\"\r\n      />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default TokenEditBar;\r\n","import { useRef, useState, useEffect } from \"react\";\r\nimport { Flex, Label, Button, Box } from \"theme-ui\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\nimport ReactResizeDetector from \"react-resize-detector\";\r\n\r\nimport EditTokenModal from \"./EditTokenModal\";\r\nimport ConfirmModal from \"./ConfirmModal\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\nimport DatabaseDisabledMessage from \"../components/DatabaseDisabledMessage\";\r\n\r\nimport ImageDrop from \"../components/image/ImageDrop\";\r\n\r\nimport TokenTiles from \"../components/token/TokenTiles\";\r\nimport TokenEditBar from \"../components/token/TokenEditBar\";\r\n\r\nimport TilesOverlay from \"../components/tile/TilesOverlay\";\r\nimport TilesContainer from \"../components/tile/TilesContainer\";\r\nimport TileActionBar from \"../components/tile/TileActionBar\";\r\n\r\nimport { getGroupItems, getItemNames } from \"../helpers/group\";\r\nimport {\r\n  createTokenFromFile,\r\n  createTokenState,\r\n  clientPositionToMapPosition,\r\n} from \"../helpers/token\";\r\nimport Vector2 from \"../helpers/Vector2\";\r\n\r\nimport useResponsiveLayout from \"../hooks/useResponsiveLayout\";\r\n\r\nimport { useTokenData } from \"../contexts/TokenDataContext\";\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport { useAssets } from \"../contexts/AssetsContext\";\r\nimport { GroupProvider } from \"../contexts/GroupContext\";\r\nimport { TileDragProvider } from \"../contexts/TileDragContext\";\r\nimport { useMapStage } from \"../contexts/MapStageContext\";\r\nimport { useDatabase } from \"../contexts/DatabaseContext\";\r\n\r\nimport { TokenState } from \"../types/TokenState\";\r\nimport {\r\n  TokensStateCreateHandler,\r\n  RequestCloseEventHandler,\r\n} from \"../types/Events\";\r\n\r\ntype SelectTokensModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  onMapTokensStateCreate: TokensStateCreateHandler;\r\n};\r\n\r\nfunction SelectTokensModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  onMapTokensStateCreate,\r\n}: SelectTokensModalProps) {\r\n  const { addToast } = useToasts();\r\n\r\n  const { databaseStatus } = useDatabase();\r\n\r\n  const userId = useUserId();\r\n  const {\r\n    tokens,\r\n    addToken,\r\n    tokensLoading,\r\n    tokenGroups,\r\n    updateTokenGroups,\r\n    updateToken,\r\n    tokensById,\r\n  } = useTokenData();\r\n  const { addAssets } = useAssets();\r\n\r\n  // Get token names for group filtering\r\n  const [tokenNames, setTokenNames] = useState(getItemNames(tokens));\r\n  useEffect(() => {\r\n    setTokenNames(getItemNames(tokens));\r\n  }, [tokens]);\r\n\r\n  /**\r\n   * Image Upload\r\n   */\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [isLargeImageWarningModalOpen, setShowLargeImageWarning] =\r\n    useState(false);\r\n  const largeImageWarningFiles = useRef<File[]>();\r\n\r\n  async function handleImagesUpload(files: File[]) {\r\n    if (navigator.storage) {\r\n      // Attempt to enable persistant storage\r\n      await navigator.storage.persist();\r\n    }\r\n\r\n    let tokenFiles = [];\r\n    for (let file of files) {\r\n      if (file.size > 5e7) {\r\n        addToast(`Unable to import token ${file.name} as it is over 50MB`);\r\n      } else {\r\n        tokenFiles.push(file);\r\n      }\r\n    }\r\n\r\n    // Any file greater than 20MB\r\n    if (tokenFiles.some((file) => file.size > 2e7)) {\r\n      largeImageWarningFiles.current = tokenFiles;\r\n      setShowLargeImageWarning(true);\r\n      return;\r\n    }\r\n\r\n    for (let file of tokenFiles) {\r\n      await handleImageUpload(file);\r\n    }\r\n\r\n    clearFileInput();\r\n  }\r\n\r\n  function clearFileInput() {\r\n    // Set file input to null to allow adding the same image 2 times in a row\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n  }\r\n\r\n  function openImageDialog() {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  }\r\n\r\n  function handleLargeImageWarningCancel() {\r\n    largeImageWarningFiles.current = undefined;\r\n    setShowLargeImageWarning(false);\r\n    clearFileInput();\r\n  }\r\n\r\n  async function handleLargeImageWarningConfirm() {\r\n    setShowLargeImageWarning(false);\r\n    const files = largeImageWarningFiles.current;\r\n    if (!files) {\r\n      return;\r\n    }\r\n    for (let file of files) {\r\n      await handleImageUpload(file);\r\n    }\r\n    largeImageWarningFiles.current = undefined;\r\n    clearFileInput();\r\n  }\r\n\r\n  async function handleImageUpload(file: File) {\r\n    if (!userId) {\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    const { token, assets } = await createTokenFromFile(file, userId);\r\n    await addToken(token);\r\n    await addAssets(assets);\r\n    setIsLoading(false);\r\n  }\r\n\r\n  /**\r\n   * Token controls\r\n   */\r\n  const [editingTokenId, setEditingTokenId] = useState<string>();\r\n\r\n  const [isDraggingToken, setIsDraggingToken] = useState(false);\r\n\r\n  const mapStageRef = useMapStage();\r\n  function handleTokensAddToMap(groupIds: string[], rect: DOMRect) {\r\n    let clientPosition = new Vector2(\r\n      rect.width / 2 + rect.left,\r\n      rect.height / 2 + rect.top\r\n    );\r\n    const mapStage = mapStageRef.current;\r\n    if (!mapStage) {\r\n      return;\r\n    }\r\n\r\n    let position = clientPositionToMapPosition(mapStage, clientPosition, false);\r\n    if (!position || !userId) {\r\n      return;\r\n    }\r\n\r\n    let newTokenStates: TokenState[] = [];\r\n\r\n    for (let id of groupIds) {\r\n      if (id in tokensById) {\r\n        newTokenStates.push(createTokenState(tokensById[id], position, userId));\r\n        position = Vector2.add(position, 0.01);\r\n      } else {\r\n        // Check if a group is selected\r\n        const group = tokenGroups.find(\r\n          (group) => group.id === id && group.type === \"group\"\r\n        );\r\n        if (group) {\r\n          // Add all tokens of group\r\n          const items = getGroupItems(group);\r\n          for (let item of items) {\r\n            if (item.id in tokensById) {\r\n              newTokenStates.push(\r\n                createTokenState(tokensById[item.id], position, userId)\r\n              );\r\n              position = Vector2.add(position, 0.01);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (newTokenStates.length > 0) {\r\n      onMapTokensStateCreate(newTokenStates);\r\n    }\r\n  }\r\n\r\n  const layout = useResponsiveLayout();\r\n\r\n  const [modalSize, setModalSize] = useState({ width: 0, height: 0 });\r\n  function handleModalResize(width?: number, height?: number) {\r\n    if (width && height) {\r\n      setModalSize({ width, height });\r\n    }\r\n  }\r\n\r\n  const editingToken =\r\n    editingTokenId && tokens.find((token) => token.id === editingTokenId);\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{\r\n        content: { maxWidth: layout.modalSize, width: \"calc(100% - 16px)\" },\r\n      }}\r\n      shouldCloseOnEsc={!isDraggingToken}\r\n    >\r\n      <ImageDrop\r\n        onDrop={({ files }) => handleImagesUpload(files)}\r\n        dropText=\"Drop token to import\"\r\n      >\r\n        <input\r\n          onChange={(event) =>\r\n            event.target.files &&\r\n            handleImagesUpload(Array.from(event.target.files))\r\n          }\r\n          type=\"file\"\r\n          accept=\"image/jpeg, image/gif, image/png, image/webp\"\r\n          style={{ display: \"none\" }}\r\n          ref={fileInputRef}\r\n          multiple\r\n        />\r\n        <ReactResizeDetector\r\n          handleWidth\r\n          handleHeight\r\n          onResize={handleModalResize}\r\n          refreshMode=\"debounce\"\r\n        >\r\n          <GroupProvider\r\n            groups={tokenGroups}\r\n            itemNames={tokenNames}\r\n            onGroupsChange={updateTokenGroups}\r\n            disabled={!isOpen}\r\n          >\r\n            <Flex\r\n              sx={{\r\n                flexDirection: \"column\",\r\n              }}\r\n            >\r\n              <Label pt={2} pb={1}>\r\n                Edit or import a token\r\n              </Label>\r\n              <TileActionBar\r\n                onAdd={openImageDialog}\r\n                addTitle=\"Import Token(s)\"\r\n              />\r\n              <Box sx={{ position: \"relative\" }}>\r\n                <TileDragProvider\r\n                  onDragAdd={handleTokensAddToMap}\r\n                  onDragStart={() => setIsDraggingToken(true)}\r\n                  onDragEnd={() => setIsDraggingToken(false)}\r\n                  onDragCancel={() => setIsDraggingToken(false)}\r\n                >\r\n                  <TilesContainer>\r\n                    {databaseStatus === \"disabled\" && (\r\n                      <DatabaseDisabledMessage type=\"Token\" />\r\n                    )}\r\n                    <TokenTiles\r\n                      tokensById={tokensById}\r\n                      onTokenEdit={setEditingTokenId}\r\n                    />\r\n                  </TilesContainer>\r\n                </TileDragProvider>\r\n                <TileDragProvider\r\n                  onDragAdd={handleTokensAddToMap}\r\n                  onDragStart={() => setIsDraggingToken(true)}\r\n                  onDragEnd={() => setIsDraggingToken(false)}\r\n                  onDragCancel={() => setIsDraggingToken(false)}\r\n                >\r\n                  <TilesOverlay modalSize={modalSize}>\r\n                    <TokenTiles\r\n                      tokensById={tokensById}\r\n                      onTokenEdit={setEditingTokenId}\r\n                      subgroup\r\n                    />\r\n                  </TilesOverlay>\r\n                </TileDragProvider>\r\n                <TokenEditBar\r\n                  onLoad={setIsLoading}\r\n                  disabled={isLoading || !isOpen}\r\n                />\r\n              </Box>\r\n              <Button\r\n                variant=\"primary\"\r\n                disabled={isLoading}\r\n                onClick={onRequestClose}\r\n                mt={2}\r\n              >\r\n                Done\r\n              </Button>\r\n            </Flex>\r\n          </GroupProvider>\r\n        </ReactResizeDetector>\r\n      </ImageDrop>\r\n      <>{(isLoading || tokensLoading) && <LoadingOverlay bg=\"overlay\" />}</>\r\n      <>\r\n        {editingToken && (\r\n          <EditTokenModal\r\n            isOpen={!!editingTokenId}\r\n            onDone={() => setEditingTokenId(undefined)}\r\n            token={editingToken}\r\n            onUpdateToken={updateToken}\r\n          />\r\n        )}\r\n      </>\r\n      <ConfirmModal\r\n        isOpen={isLargeImageWarningModalOpen}\r\n        onRequestClose={handleLargeImageWarningCancel}\r\n        onConfirm={handleLargeImageWarningConfirm}\r\n        confirmText=\"Continue\"\r\n        label=\"Warning\"\r\n        description=\"An imported image is larger than 20MB, this may cause slowness. Continue?\"\r\n      />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default SelectTokensModal;\r\n","import { useState } from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport SelectTokensIcon from \"../../icons/SelectTokensIcon\";\r\n\r\nimport SelectTokensModal from \"../../modals/SelectTokensModal\";\r\nimport { TokensStateCreateHandler } from \"../../types/Events\";\r\n\r\ntype SelectTokensButtonProps = {\r\n  onMapTokensStateCreate: TokensStateCreateHandler;\r\n};\r\n\r\nfunction SelectTokensButton({\r\n  onMapTokensStateCreate,\r\n}: SelectTokensButtonProps) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  function openModal() {\r\n    setIsModalOpen(true);\r\n  }\r\n  function closeModal() {\r\n    setIsModalOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        aria-label=\"Edit Tokens\"\r\n        title=\"Edit Tokens\"\r\n        onClick={openModal}\r\n      >\r\n        <SelectTokensIcon />\r\n      </IconButton>\r\n      <SelectTokensModal\r\n        isOpen={isModalOpen}\r\n        onRequestClose={closeModal}\r\n        onMapTokensStateCreate={onMapTokensStateCreate}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectTokensButton;\r\n","import { useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { Box, Flex, Grid } from \"theme-ui\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport {\r\n  DragOverlay,\r\n  MouseSensor,\r\n  TouchSensor,\r\n  KeyboardSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragStartEvent,\r\n} from \"@dnd-kit/core\";\r\n\r\nimport TokenBarToken from \"./TokenBarToken\";\r\nimport TokenBarTokenGroup from \"./TokenBarTokenGroup\";\r\nimport SelectTokensButton from \"./SelectTokensButton\";\r\n\r\nimport Draggable from \"../drag/Draggable\";\r\n\r\nimport useSetting from \"../../hooks/useSetting\";\r\nimport usePreventSelect from \"../../hooks/usePreventSelect\";\r\n\r\nimport { useTokenData } from \"../../contexts/TokenDataContext\";\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\nimport DragContext, { CustomDragEndEvent } from \"../../contexts/DragContext\";\r\n\r\nimport {\r\n  createTokenState,\r\n  clientPositionToMapPosition,\r\n} from \"../../helpers/token\";\r\nimport { findGroup } from \"../../helpers/group\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\nimport { TokensStateCreateHandler } from \"../../types/Events\";\r\nimport { Group } from \"../../types/Group\";\r\n\r\ntype TokenBarProps = {\r\n  onMapTokensStateCreate: TokensStateCreateHandler;\r\n};\r\n\r\nfunction TokenBar({ onMapTokensStateCreate }: TokenBarProps) {\r\n  const userId = useUserId();\r\n  const { tokensById, tokenGroups } = useTokenData();\r\n  const [fullScreen] = useSetting<boolean>(\"map.fullScreen\");\r\n\r\n  const [dragId, setDragId] = useState<string | null>(null);\r\n\r\n  const mapStageRef = useMapStage();\r\n\r\n  const mouseSensor = useSensor(MouseSensor, {\r\n    activationConstraint: { distance: 5 },\r\n  });\r\n  const touchSensor = useSensor(TouchSensor, {\r\n    activationConstraint: { distance: 5 },\r\n  });\r\n  const keyboardSensor = useSensor(KeyboardSensor);\r\n  const sensors = useSensors(mouseSensor, touchSensor, keyboardSensor);\r\n\r\n  const [preventSelect, resumeSelect] = usePreventSelect();\r\n\r\n  function handleDragStart({ active }: DragStartEvent) {\r\n    setDragId(active.id);\r\n    preventSelect();\r\n  }\r\n\r\n  function handleDragEnd({\r\n    active,\r\n    overlayNodeClientRect,\r\n  }: CustomDragEndEvent) {\r\n    setDragId(null);\r\n    resumeSelect();\r\n    if (!userId) {\r\n      return;\r\n    }\r\n    const mapStage = mapStageRef.current;\r\n    if (mapStage && overlayNodeClientRect) {\r\n      const dragRect = overlayNodeClientRect;\r\n      const dragPosition = {\r\n        x: dragRect.left + dragRect.width / 2,\r\n        y: dragRect.top + dragRect.height / 2,\r\n      };\r\n      const mapPosition = clientPositionToMapPosition(mapStage, dragPosition);\r\n      const group = findGroup(tokenGroups, active.id);\r\n      if (group && mapPosition) {\r\n        if (group.type === \"item\") {\r\n          const token = tokensById[group.id];\r\n          const tokenState = createTokenState(token, mapPosition, userId);\r\n          onMapTokensStateCreate([tokenState]);\r\n        } else {\r\n          let tokenStates = [];\r\n          let offset = new Vector2(0, 0);\r\n          for (let item of group.items) {\r\n            const token = tokensById[item.id];\r\n            if (token && !token.hideInSidebar) {\r\n              tokenStates.push(\r\n                createTokenState(\r\n                  token,\r\n                  Vector2.add(mapPosition, offset),\r\n                  userId\r\n                )\r\n              );\r\n              offset = Vector2.add(offset, 0.01);\r\n            }\r\n          }\r\n          if (tokenStates.length > 0) {\r\n            onMapTokensStateCreate(tokenStates);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleDragCancel() {\r\n    setDragId(null);\r\n    resumeSelect();\r\n  }\r\n\r\n  function renderToken(group: Group, draggable = true) {\r\n    if (group.type === \"item\") {\r\n      const token = tokensById[group.id];\r\n      if (token && !token.hideInSidebar) {\r\n        if (draggable) {\r\n          return (\r\n            <Draggable id={token.id} key={token.id}>\r\n              <TokenBarToken token={token} />\r\n            </Draggable>\r\n          );\r\n        } else {\r\n          return <TokenBarToken token={token} key={token.id} />;\r\n        }\r\n      }\r\n    } else {\r\n      const groupTokens = [];\r\n      for (let item of group.items) {\r\n        const token = tokensById[item.id];\r\n        if (token && !token.hideInSidebar) {\r\n          groupTokens.push(token);\r\n        }\r\n      }\r\n      if (groupTokens.length > 0) {\r\n        return (\r\n          <TokenBarTokenGroup\r\n            group={group}\r\n            tokens={groupTokens}\r\n            key={group.id}\r\n            draggable={draggable}\r\n          />\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  const dragGroup = dragId && findGroup(tokenGroups, dragId);\r\n\r\n  return (\r\n    <DragContext\r\n      onDragStart={handleDragStart}\r\n      onDragEnd={handleDragEnd}\r\n      onDragCancel={handleDragCancel}\r\n      autoScroll={false}\r\n      sensors={sensors}\r\n    >\r\n      <Box\r\n        sx={{\r\n          height: \"100%\",\r\n          width: \"80px\",\r\n          minWidth: \"80px\",\r\n          overflowY: \"hidden\",\r\n          overflowX: \"hidden\",\r\n          display: fullScreen ? \"none\" : \"block\",\r\n        }}\r\n      >\r\n        <SimpleBar\r\n          style={{\r\n            height: \"calc(100% - 48px)\",\r\n            overflowX: \"hidden\",\r\n            padding: \"0 16px\",\r\n          }}\r\n        >\r\n          <Grid\r\n            columns=\"1fr\"\r\n            gap={2}\r\n            py={2}\r\n            // Prevent selection on 3D touch for iOS\r\n            onTouchStart={preventSelect}\r\n            onTouchEnd={resumeSelect}\r\n          >\r\n            {tokenGroups.map((group) => renderToken(group))}\r\n          </Grid>\r\n        </SimpleBar>\r\n        <Flex\r\n          bg=\"muted\"\r\n          sx={{\r\n            justifyContent: \"center\",\r\n            height: \"48px\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <SelectTokensButton onMapTokensStateCreate={onMapTokensStateCreate} />\r\n        </Flex>\r\n        {createPortal(\r\n          <DragOverlay dropAnimation={null}>\r\n            {dragGroup && renderToken(dragGroup, false)}\r\n          </DragOverlay>,\r\n          document.body\r\n        )}\r\n      </Box>\r\n    </DragContext>\r\n  );\r\n}\r\n\r\nexport default TokenBar;\r\n","import React, { useState, useRef } from \"react\";\r\nimport { Box, Flex, Text } from \"theme-ui\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport LoadingOverlay from \"../LoadingOverlay\";\r\n\r\nimport ConfirmModal from \"../../modals/ConfirmModal\";\r\n\r\nimport { createMapFromFile } from \"../../helpers/map\";\r\nimport { createTokenFromFile } from \"../../helpers/token\";\r\nimport {\r\n  createTokenState,\r\n  clientPositionToMapPosition,\r\n} from \"../../helpers/token\";\r\nimport Vector2 from \"../../helpers/Vector2\";\r\n\r\nimport { useUserId } from \"../../contexts/UserIdContext\";\r\nimport { useMapData } from \"../../contexts/MapDataContext\";\r\nimport { useTokenData } from \"../../contexts/TokenDataContext\";\r\nimport { useAssets } from \"../../contexts/AssetsContext\";\r\nimport { useMapStage } from \"../../contexts/MapStageContext\";\r\n\r\nimport useImageDrop, { ImageDropEvent } from \"../../hooks/useImageDrop\";\r\n\r\nimport { Map } from \"../../types/Map\";\r\nimport { MapState } from \"../../types/MapState\";\r\nimport { TokenState } from \"../../types/TokenState\";\r\n\r\ntype GlobalImageDropProps = {\r\n  children?: React.ReactNode;\r\n  onMapChange: (map: Map, mapState: MapState) => void;\r\n  onMapTokensStateCreate: (states: TokenState[]) => void;\r\n};\r\n\r\nfunction GlobalImageDrop({\r\n  children,\r\n  onMapChange,\r\n  onMapTokensStateCreate,\r\n}: GlobalImageDropProps) {\r\n  const { addToast } = useToasts();\r\n\r\n  const userId = useUserId();\r\n  const { addMap, getMapState } = useMapData();\r\n  const { addToken } = useTokenData();\r\n  const { addAssets } = useAssets();\r\n\r\n  const mapStageRef = useMapStage();\r\n\r\n  const [isLargeImageWarningModalOpen, setShowLargeImageWarning] =\r\n    useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const droppedImagesRef = useRef<File[]>();\r\n  const dropPositionRef = useRef<Vector2>();\r\n  const [droppingType, setDroppingType] = useState<\"maps\" | \"tokens\">(\"maps\");\r\n\r\n  async function handleDrop({ files, dropPosition }: ImageDropEvent) {\r\n    if (navigator.storage) {\r\n      // Attempt to enable persistant storage\r\n      await navigator.storage.persist();\r\n    }\r\n\r\n    dropPositionRef.current = dropPosition;\r\n\r\n    droppedImagesRef.current = [];\r\n    for (let file of files) {\r\n      if (file.size > 5e7) {\r\n        addToast(`Unable to import image ${file.name} as it is over 50MB`);\r\n      } else {\r\n        droppedImagesRef.current.push(file);\r\n      }\r\n    }\r\n\r\n    // Any file greater than 20MB\r\n    if (droppedImagesRef.current.some((file) => file.size > 2e7)) {\r\n      setShowLargeImageWarning(true);\r\n      return;\r\n    }\r\n\r\n    if (droppingType === \"maps\") {\r\n      await handleMaps();\r\n    } else {\r\n      await handleTokens();\r\n    }\r\n  }\r\n\r\n  function handleLargeImageWarningCancel() {\r\n    droppedImagesRef.current = undefined;\r\n    setShowLargeImageWarning(false);\r\n  }\r\n\r\n  async function handleLargeImageWarningConfirm() {\r\n    setShowLargeImageWarning(false);\r\n    if (droppingType === \"maps\") {\r\n      await handleMaps();\r\n    } else {\r\n      await handleTokens();\r\n    }\r\n  }\r\n\r\n  async function handleMaps() {\r\n    if (droppedImagesRef.current && userId) {\r\n      setIsLoading(true);\r\n      let maps = [];\r\n      for (let file of droppedImagesRef.current) {\r\n        const { map, assets } = await createMapFromFile(file, userId);\r\n        await addMap(map);\r\n        await addAssets(assets);\r\n        maps.push(map);\r\n      }\r\n\r\n      // Change map if only 1 dropped\r\n      if (maps.length === 1) {\r\n        const mapState = await getMapState(maps[0].id);\r\n        if (mapState) {\r\n          onMapChange(maps[0], mapState);\r\n        }\r\n      }\r\n\r\n      setIsLoading(false);\r\n      droppedImagesRef.current = undefined;\r\n    }\r\n  }\r\n\r\n  async function handleTokens() {\r\n    if (droppedImagesRef.current && userId) {\r\n      setIsLoading(true);\r\n      // Keep track of tokens so we can add them to the map\r\n      let tokens = [];\r\n      for (let file of droppedImagesRef.current) {\r\n        const { token, assets } = await createTokenFromFile(file, userId);\r\n        await addToken(token);\r\n        await addAssets(assets);\r\n        tokens.push(token);\r\n      }\r\n      setIsLoading(false);\r\n      droppedImagesRef.current = undefined;\r\n\r\n      const dropPosition = dropPositionRef.current;\r\n      const mapStage = mapStageRef.current;\r\n      if (mapStage && dropPosition) {\r\n        const mapPosition = clientPositionToMapPosition(mapStage, dropPosition);\r\n        if (mapPosition) {\r\n          let tokenStates = [];\r\n          let offset = new Vector2(0, 0);\r\n          for (let token of tokens) {\r\n            if (token) {\r\n              tokenStates.push(\r\n                createTokenState(\r\n                  token,\r\n                  Vector2.add(mapPosition, offset),\r\n                  userId\r\n                )\r\n              );\r\n              offset = Vector2.add(offset, 0.01);\r\n            }\r\n          }\r\n          if (tokenStates.length > 0) {\r\n            onMapTokensStateCreate(tokenStates);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleMapsOver() {\r\n    setDroppingType(\"maps\");\r\n  }\r\n\r\n  function handleTokensOver() {\r\n    setDroppingType(\"tokens\");\r\n  }\r\n\r\n  const { dragging, containerListeners, overlayListeners } =\r\n    useImageDrop(handleDrop);\r\n\r\n  return (\r\n    <Flex sx={{ height: \"100%\", flexGrow: 1 }} {...containerListeners}>\r\n      {children}\r\n      {dragging && (\r\n        <Flex\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            right: 0,\r\n            left: 0,\r\n            bottom: 0,\r\n            cursor: \"copy\",\r\n            flexDirection: \"column\",\r\n            zIndex: 100,\r\n          }}\r\n          {...overlayListeners}\r\n        >\r\n          <Flex\r\n            sx={{\r\n              height: \"10%\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              color: droppingType === \"maps\" ? \"primary\" : \"text\",\r\n              opacity: droppingType === \"maps\" ? 1 : 0.8,\r\n              width: \"100%\",\r\n              position: \"relative\",\r\n            }}\r\n            onDragEnter={handleMapsOver}\r\n          >\r\n            <Box\r\n              bg=\"overlay\"\r\n              sx={{\r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                margin: \"4px 16px\",\r\n                border: \"1px dashed\",\r\n                borderRadius: \"12px\",\r\n                pointerEvents: \"none\",\r\n              }}\r\n            />\r\n            <Text sx={{ pointerEvents: \"none\", userSelect: \"none\" }}>\r\n              Drop as map\r\n            </Text>\r\n          </Flex>\r\n          <Flex\r\n            sx={{\r\n              flexGrow: 1,\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              color: droppingType === \"tokens\" ? \"primary\" : \"text\",\r\n              opacity: droppingType === \"tokens\" ? 1 : 0.8,\r\n              width: \"100%\",\r\n              position: \"relative\",\r\n            }}\r\n            onDragEnter={handleTokensOver}\r\n          >\r\n            <Box\r\n              bg=\"overlay\"\r\n              sx={{\r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                margin: \"4px 16px\",\r\n                border: \"1px dashed\",\r\n                borderRadius: \"12px\",\r\n                pointerEvents: \"none\",\r\n              }}\r\n            />\r\n            <Text sx={{ pointerEvents: \"none\", userSelect: \"none\" }}>\r\n              Drop as token\r\n            </Text>\r\n          </Flex>\r\n        </Flex>\r\n      )}\r\n      <ConfirmModal\r\n        isOpen={isLargeImageWarningModalOpen}\r\n        onRequestClose={handleLargeImageWarningCancel}\r\n        onConfirm={handleLargeImageWarningConfirm}\r\n        confirmText=\"Continue\"\r\n        label=\"Warning\"\r\n        description=\"An imported image is larger than 20MB, this may cause slowness. Continue?\"\r\n      />\r\n      {isLoading && <LoadingOverlay bg=\"overlay\" />}\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default GlobalImageDrop;\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport { useMapData } from \"../contexts/MapDataContext\";\r\nimport { useMapLoading } from \"../contexts/MapLoadingContext\";\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport { useDatabase } from \"../contexts/DatabaseContext\";\r\nimport { useParty } from \"../contexts/PartyContext\";\r\nimport { useAssets } from \"../contexts/AssetsContext\";\r\n\r\nimport useDebounce from \"../hooks/useDebounce\";\r\nimport useNetworkedState from \"../hooks/useNetworkedState\";\r\nimport useMapActions from \"../hooks/useMapActions\";\r\n\r\nimport Session, { PeerDataEvent, PeerDataProgressEvent } from \"./Session\";\r\n\r\nimport Action from \"../actions/Action\";\r\n\r\nimport Map from \"../components/map/Map\";\r\nimport TokenBar from \"../components/token/TokenBar\";\r\n\r\nimport GlobalImageDrop from \"../components/image/GlobalImageDrop\";\r\n\r\nimport { Map as MapType } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport {\r\n  AssetManifest,\r\n  AssetManifestAsset,\r\n  AssetManifestAssets,\r\n} from \"../types/Asset\";\r\nimport { TokenState } from \"../types/TokenState\";\r\nimport { DrawingState } from \"../types/Drawing\";\r\nimport { FogState } from \"../types/Fog\";\r\nimport { Note } from \"../types/Note\";\r\nimport {\r\n  AddStatesAction,\r\n  EditStatesAction,\r\n  RemoveStatesAction,\r\n} from \"../actions\";\r\n\r\n/**\r\n * @typedef {object} NetworkedMapProps\r\n * @property {Session} session\r\n */\r\n\r\n/**\r\n * @param {NetworkedMapProps} props\r\n */\r\nfunction NetworkedMapAndTokens({ session }: { session: Session }) {\r\n  const { addToast } = useToasts();\r\n  const userId = useUserId();\r\n  const partyState = useParty();\r\n  const { assetLoadStart, assetProgressUpdate, isLoading } = useMapLoading();\r\n\r\n  const { updateMapState } = useMapData();\r\n  const { getAsset, putAsset } = useAssets();\r\n\r\n  const [currentMap, setCurrentMap] = useState<MapType | null>(null);\r\n  const [currentMapState, setCurrentMapState] =\r\n    useNetworkedState<MapState | null>(\r\n      null,\r\n      session,\r\n      \"map_state\",\r\n      500,\r\n      true,\r\n      \"mapId\"\r\n    );\r\n  const [assetManifest, setAssetManifest] =\r\n    useNetworkedState<AssetManifest | null>(\r\n      null,\r\n      session,\r\n      \"manifest\",\r\n      500,\r\n      true,\r\n      \"mapId\"\r\n    );\r\n\r\n  async function loadAssetManifestFromMap(map: MapType, mapState: MapState) {\r\n    const assets: AssetManifestAssets = {};\r\n    const { owner } = map;\r\n    let processedTokens = new Set();\r\n    for (let tokenState of Object.values(mapState.tokens)) {\r\n      if (tokenState.type === \"file\" && !processedTokens.has(tokenState.file)) {\r\n        processedTokens.add(tokenState.file);\r\n        assets[tokenState.file] = {\r\n          id: tokenState.file,\r\n          owner: tokenState.owner,\r\n        };\r\n      }\r\n    }\r\n    if (map.type === \"file\") {\r\n      assets[map.thumbnail] = { id: map.thumbnail, owner };\r\n      if (map.quality !== \"original\") {\r\n        const qualityId = map.resolutions[map.quality];\r\n        if (qualityId) {\r\n          assets[qualityId] = { id: qualityId, owner };\r\n        }\r\n      } else {\r\n        assets[map.file] = { id: map.file, owner };\r\n      }\r\n    }\r\n    setAssetManifest({ mapId: map.id, assets }, true, true);\r\n  }\r\n\r\n  function addAssetsIfNeeded(assets: AssetManifestAsset[]) {\r\n    setAssetManifest((prevManifest) => {\r\n      if (prevManifest?.assets) {\r\n        let newAssets = { ...prevManifest.assets };\r\n        for (let asset of assets) {\r\n          const id = asset.id;\r\n          const exists = id in newAssets;\r\n          if (!exists) {\r\n            newAssets[id] = asset;\r\n          }\r\n        }\r\n        return { ...prevManifest, assets: newAssets };\r\n      }\r\n      return prevManifest;\r\n    });\r\n  }\r\n\r\n  // Keep track of assets we are already requesting to prevent from loading them multiple times\r\n  const requestingAssetsRef = useRef(new Set());\r\n\r\n  useEffect(() => {\r\n    if (!assetManifest || !userId) {\r\n      return;\r\n    }\r\n\r\n    async function requestAssetsIfNeeded() {\r\n      if (!assetManifest) {\r\n        return;\r\n      }\r\n      for (let asset of Object.values(assetManifest.assets)) {\r\n        if (\r\n          asset.owner === userId ||\r\n          requestingAssetsRef.current.has(asset.id)\r\n        ) {\r\n          continue;\r\n        }\r\n\r\n        const owner = Object.values(partyState).find(\r\n          (player) => player.userId === asset.owner\r\n        );\r\n\r\n        // Ensure requests are added before any async operation to prevent them from sending twice\r\n        requestingAssetsRef.current.add(asset.id);\r\n\r\n        const cachedAsset = await getAsset(asset.id);\r\n        if (!owner) {\r\n          // Add no owner toast if we don't have asset in out cache\r\n          if (!cachedAsset) {\r\n            // TODO: Stop toast from appearing multiple times\r\n            addToast(\"Unable to find owner for asset\");\r\n          }\r\n          requestingAssetsRef.current.delete(asset.id);\r\n          continue;\r\n        }\r\n\r\n        if (cachedAsset) {\r\n          requestingAssetsRef.current.delete(asset.id);\r\n        } else if (owner.sessionId) {\r\n          assetLoadStart(asset.id);\r\n          session.sendTo(owner.sessionId, \"assetRequest\", asset);\r\n        }\r\n      }\r\n    }\r\n\r\n    requestAssetsIfNeeded();\r\n  }, [\r\n    assetManifest,\r\n    partyState,\r\n    session,\r\n    userId,\r\n    addToast,\r\n    getAsset,\r\n    assetLoadStart,\r\n  ]);\r\n\r\n  /**\r\n   * Map state\r\n   */\r\n\r\n  const { database } = useDatabase();\r\n  // Sync the map state to the database after 500ms of inactivity\r\n  const debouncedMapState = useDebounce(currentMapState, 500);\r\n  useEffect(() => {\r\n    if (\r\n      debouncedMapState &&\r\n      debouncedMapState.mapId &&\r\n      currentMap &&\r\n      currentMap?.owner === userId &&\r\n      database\r\n    ) {\r\n      updateMapState(debouncedMapState.mapId, debouncedMapState);\r\n    }\r\n  }, [currentMap, debouncedMapState, userId, database, updateMapState]);\r\n\r\n  async function handleMapChange(\r\n    newMap: MapType | null,\r\n    newMapState: MapState | null\r\n  ) {\r\n    // Clear map before sending new one\r\n    setCurrentMap(null);\r\n    session.socket?.emit(\"map\", null);\r\n\r\n    setCurrentMapState(newMapState, true, true);\r\n    setCurrentMap(newMap);\r\n\r\n    session.socket?.emit(\"map\", newMap);\r\n\r\n    if (!newMap || !newMapState) {\r\n      setAssetManifest(null, true, true);\r\n      return;\r\n    }\r\n\r\n    await loadAssetManifestFromMap(newMap, newMapState);\r\n  }\r\n\r\n  const [mapActions, addActions, updateActionIndex, resetActions] =\r\n    useMapActions(setCurrentMapState);\r\n\r\n  function handleMapReset(newMapState: MapState) {\r\n    setCurrentMapState(newMapState, true, true);\r\n    resetActions();\r\n  }\r\n\r\n  function handleMapDraw(action: Action<DrawingState>) {\r\n    addActions([{ type: \"drawings\", action }]);\r\n  }\r\n\r\n  function handleFogDraw(action: Action<FogState>) {\r\n    addActions([{ type: \"fogs\", action }]);\r\n  }\r\n\r\n  function handleUndo() {\r\n    updateActionIndex(-1);\r\n  }\r\n\r\n  function handleRedo() {\r\n    updateActionIndex(1);\r\n  }\r\n\r\n  // If map changes clear map actions\r\n  const previousMapIdRef = useRef<string>();\r\n  useEffect(() => {\r\n    if (currentMap && currentMap?.id !== previousMapIdRef.current) {\r\n      resetActions();\r\n      previousMapIdRef.current = currentMap?.id;\r\n    }\r\n  }, [currentMap, resetActions]);\r\n\r\n  function handleNoteCreate(notes: Note[]) {\r\n    const action = new AddStatesAction(notes);\r\n    addActions([{ type: \"notes\", action }]);\r\n  }\r\n\r\n  function handleNoteChange(changes: Record<string, Partial<Note>>) {\r\n    let edits: Partial<Note>[] = [];\r\n    for (let id in changes) {\r\n      edits.push({ ...changes[id], id });\r\n    }\r\n    const action = new EditStatesAction(edits);\r\n    addActions([{ type: \"notes\", action }]);\r\n  }\r\n\r\n  function handleNoteRemove(noteIds: string[]) {\r\n    const action = new RemoveStatesAction<Note>(noteIds);\r\n    addActions([{ type: \"notes\", action }]);\r\n  }\r\n\r\n  /**\r\n   * Token state\r\n   */\r\n\r\n  async function handleMapTokensStateCreate(tokenStates: TokenState[]) {\r\n    if (!currentMap || !currentMapState) {\r\n      return;\r\n    }\r\n\r\n    let assets: AssetManifestAsset[] = [];\r\n    for (let tokenState of tokenStates) {\r\n      if (tokenState.type === \"file\") {\r\n        assets.push({ id: tokenState.file, owner: tokenState.owner });\r\n      }\r\n    }\r\n    if (assets.length > 0) {\r\n      addAssetsIfNeeded(assets);\r\n    }\r\n\r\n    const action = new AddStatesAction(tokenStates);\r\n    addActions([{ type: \"tokens\", action }]);\r\n  }\r\n\r\n  function handleMapTokenStateChange(\r\n    changes: Record<string, Partial<TokenState>>\r\n  ) {\r\n    let edits: Partial<TokenState>[] = [];\r\n    for (let id in changes) {\r\n      edits.push({ ...changes[id], id });\r\n    }\r\n    const action = new EditStatesAction(edits);\r\n    addActions([{ type: \"tokens\", action }]);\r\n  }\r\n\r\n  function handleMapTokenStateRemove(tokenStateIds: string[]) {\r\n    const action = new RemoveStatesAction<TokenState>(tokenStateIds);\r\n    addActions([{ type: \"tokens\", action }]);\r\n  }\r\n\r\n  function handleSelectionItemsChange(\r\n    tokenChanges: Record<string, Partial<TokenState>>,\r\n    noteChanges: Record<string, Partial<Note>>\r\n  ) {\r\n    let tokenEdits: Partial<TokenState>[] = [];\r\n    for (let id in tokenChanges) {\r\n      tokenEdits.push({ ...tokenChanges[id], id });\r\n    }\r\n    const tokenAction = new EditStatesAction(tokenEdits);\r\n\r\n    let noteEdits: Partial<Note>[] = [];\r\n    for (let id in noteChanges) {\r\n      noteEdits.push({ ...noteChanges[id], id });\r\n    }\r\n    const noteAction = new EditStatesAction(noteEdits);\r\n\r\n    addActions([\r\n      { type: \"tokens\", action: tokenAction },\r\n      { type: \"notes\", action: noteAction },\r\n    ]);\r\n  }\r\n\r\n  function handleSelectionItemsRemove(\r\n    tokenStateIds: string[],\r\n    noteIds: string[]\r\n  ) {\r\n    const tokenAction = new RemoveStatesAction<TokenState>(tokenStateIds);\r\n    const noteAction = new RemoveStatesAction<Note>(noteIds);\r\n    addActions([\r\n      { type: \"tokens\", action: tokenAction },\r\n      { type: \"notes\", action: noteAction },\r\n    ]);\r\n  }\r\n\r\n  function handleSelectionItemsCreate(\r\n    tokenStates: TokenState[],\r\n    notes: Note[]\r\n  ) {\r\n    const tokenAction = new AddStatesAction(tokenStates);\r\n    const noteAction = new AddStatesAction(notes);\r\n    addActions([\r\n      { type: \"tokens\", action: tokenAction },\r\n      { type: \"notes\", action: noteAction },\r\n    ]);\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function handlePeerData({ id, data, reply }: PeerDataEvent) {\r\n      if (id === \"assetRequest\") {\r\n        const asset = await getAsset(data.id);\r\n        if (asset) {\r\n          reply(\"assetResponseSuccess\", asset, data.id);\r\n        } else {\r\n          reply(\"assetResponseFail\", data.id, data.id);\r\n        }\r\n      }\r\n\r\n      if (id === \"assetResponseSuccess\") {\r\n        const asset = data;\r\n        await putAsset(asset);\r\n        requestingAssetsRef.current.delete(asset.id);\r\n      }\r\n\r\n      if (id === \"assetResponseFail\") {\r\n        const assetId = data;\r\n        requestingAssetsRef.current.delete(assetId);\r\n      }\r\n    }\r\n\r\n    function handlePeerDataProgress({\r\n      id,\r\n      total,\r\n      count,\r\n    }: PeerDataProgressEvent) {\r\n      assetProgressUpdate({ id, total, count });\r\n    }\r\n\r\n    async function handleSocketMap(map?: MapType) {\r\n      if (map) {\r\n        setCurrentMap(map);\r\n      } else {\r\n        setCurrentMap(null);\r\n      }\r\n    }\r\n\r\n    session.on(\"peerData\", handlePeerData);\r\n    session.on(\"peerDataProgress\", handlePeerDataProgress);\r\n    session.socket?.on(\"map\", handleSocketMap);\r\n\r\n    return () => {\r\n      session.off(\"peerData\", handlePeerData);\r\n      session.off(\"peerDataProgress\", handlePeerDataProgress);\r\n      session.socket?.off(\"map\", handleSocketMap);\r\n    };\r\n  });\r\n\r\n  const canChangeMap = !isLoading;\r\n\r\n  return (\r\n    <GlobalImageDrop\r\n      onMapChange={handleMapChange}\r\n      onMapTokensStateCreate={handleMapTokensStateCreate}\r\n    >\r\n      <Map\r\n        map={currentMap}\r\n        mapState={currentMapState}\r\n        mapActions={mapActions}\r\n        onMapTokenStateChange={handleMapTokenStateChange}\r\n        onMapTokenStateRemove={handleMapTokenStateRemove}\r\n        onMapTokensStateCreate={handleMapTokensStateCreate}\r\n        onSelectionItemsChange={handleSelectionItemsChange}\r\n        onSelectionItemsRemove={handleSelectionItemsRemove}\r\n        onSelectionItemsCreate={handleSelectionItemsCreate}\r\n        onMapChange={handleMapChange}\r\n        onMapReset={handleMapReset}\r\n        onMapDraw={handleMapDraw}\r\n        onFogDraw={handleFogDraw}\r\n        onMapNoteCreate={handleNoteCreate}\r\n        onMapNoteChange={handleNoteChange}\r\n        onMapNoteRemove={handleNoteRemove}\r\n        allowMapChange={canChangeMap}\r\n        session={session}\r\n        onUndo={handleUndo}\r\n        onRedo={handleRedo}\r\n      />\r\n      <TokenBar onMapTokensStateCreate={handleMapTokensStateCreate} />\r\n    </GlobalImageDrop>\r\n  );\r\n}\r\n\r\nexport default NetworkedMapAndTokens;\r\n","import { Box, Label, Text } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype AddPartyMemberModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  gameId: string;\r\n};\r\n\r\nfunction AddPartyMemberModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  gameId,\r\n}: AddPartyMemberModalProps) {\r\n  return (\r\n    <Modal isOpen={isOpen} onRequestClose={onRequestClose}>\r\n      <Box>\r\n        <Label pt={2} pb={1}>\r\n          Invite players\r\n        </Label>\r\n        <Text as=\"p\" mb={2} variant=\"caption\">\r\n          Other people can join using the game ID\r\n        </Text>\r\n        <Box p={2} bg=\"hsla(230, 20%, 0%, 20%)\">\r\n          <Text>{gameId}</Text>\r\n        </Box>\r\n        <Text as=\"p\" my={2} variant=\"caption\">\r\n          Or by using this link\r\n        </Text>\r\n        <Box p={2} bg=\"hsla(230, 20%, 0%, 20%)\">\r\n          <Text>{window.location.href}</Text>\r\n        </Box>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default AddPartyMemberModal;\r\n","function AddPartyMemberIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1H6zm9 4c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default AddPartyMemberIcon;\r\n","import { useState } from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport AddPartyMemberModal from \"../../modals/AddPartyMemberModal\";\r\nimport AddPartyMemberIcon from \"../../icons/AddPartyMemberIcon\";\r\n\r\nfunction AddPartyMemberButton({ gameId }: { gameId: string }) {\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  function openModal() {\r\n    setIsAddModalOpen(true);\r\n  }\r\n  function closeModal() {\r\n    setIsAddModalOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        m={1}\r\n        aria-label=\"Add Party Member\"\r\n        title=\"Add Party Member\"\r\n        onClick={openModal}\r\n      >\r\n        <AddPartyMemberIcon />\r\n      </IconButton>\r\n      <AddPartyMemberModal\r\n        isOpen={isAddModalOpen}\r\n        onRequestClose={closeModal}\r\n        gameId={gameId}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddPartyMemberButton;\r\n","function StreamMuteIcon({ muted }: { muted: boolean }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      {muted ? (\r\n        <path d=\"M3.63 3.63c-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z\" />\r\n      ) : (\r\n        <path d=\"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z\" />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default StreamMuteIcon;\r\n","import { useState } from \"react\";\r\nimport { Box, Slider as ThemeSlider, SliderProps } from \"theme-ui\";\r\n\r\ntype SliderModalProps = SliderProps & {\r\n  min: number;\r\n  max: number;\r\n  value: number;\r\n  labelFunc: (value: number) => string;\r\n};\r\n\r\nfunction Slider({\r\n  min,\r\n  max,\r\n  value,\r\n  ml,\r\n  mr,\r\n  labelFunc,\r\n  ...rest\r\n}: SliderModalProps) {\r\n  const percentValue = ((value - min) * 100) / (max - min);\r\n\r\n  const [labelVisible, setLabelVisible] = useState<boolean>(false);\r\n\r\n  return (\r\n    <Box sx={{ position: \"relative\" }} ml={ml} mr={mr}>\r\n      {labelVisible && (\r\n        <Box\r\n          sx={{\r\n            position: \"absolute\",\r\n            top: \"-42px\",\r\n          }}\r\n          style={{\r\n            left: `calc(${percentValue}% + ${-8 - percentValue * 0.15}px)`,\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              width: \"32px\",\r\n              height: \"32px\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              borderRadius: \"50% 50% 50% 0%\",\r\n              transform: \"rotate(-45deg)\",\r\n            }}\r\n            bg=\"primary\"\r\n          >\r\n            <Box\r\n              sx={{\r\n                fontFamily: \"body2\",\r\n                fontWeight: \"caption\",\r\n                fontSize: 0,\r\n                transform: \"rotate(45deg)\",\r\n              }}\r\n            >\r\n              {labelFunc(value)}\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      )}\r\n      <ThemeSlider\r\n        min={min}\r\n        max={max}\r\n        value={value}\r\n        onMouseDown={() => setLabelVisible(true)}\r\n        onMouseUp={() => setLabelVisible(false)}\r\n        onTouchStart={() => setLabelVisible(true)}\r\n        onTouchEnd={() => setLabelVisible(false)}\r\n        {...rest}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nSlider.defaultProps = {\r\n  min: 0,\r\n  max: 1,\r\n  value: 0,\r\n  ml: 0,\r\n  mr: 0,\r\n  labelFunc: (value: number) => value,\r\n};\r\n\r\nexport default Slider;\r\n","import { useState, useRef, useEffect, ChangeEvent } from \"react\";\r\nimport { Text, IconButton, Box, Flex } from \"theme-ui\";\r\n\r\nimport StreamMuteIcon from \"../../icons/StreamMuteIcon\";\r\n\r\nimport Banner from \"../banner/Banner\";\r\nimport Slider from \"../Slider\";\r\n\r\ntype StreamProps = {\r\n  stream: MediaStream;\r\n  nickname: string;\r\n};\r\n\r\nfunction Stream({ stream, nickname }: StreamProps) {\r\n  const [streamVolume, setStreamVolume] = useState(1);\r\n  const [showStreamInteractBanner, setShowStreamInteractBanner] =\r\n    useState(false);\r\n  const [streamMuted, setStreamMuted] = useState(false);\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.srcObject = stream;\r\n      // Try and auto play the audio\r\n      audioRef.current\r\n        .play()\r\n        .then(() => {\r\n          // Played fine\r\n        })\r\n        .catch(() => {\r\n          // Unable to autoplay\r\n          setStreamMuted(true);\r\n          setShowStreamInteractBanner(true);\r\n        });\r\n    }\r\n  }, [stream]);\r\n\r\n  function toggleMute() {\r\n    if (audioRef.current) {\r\n      if (streamMuted) {\r\n        audioRef.current.play().then(() => {\r\n          setStreamMuted(false);\r\n          setShowStreamInteractBanner(false);\r\n        });\r\n      } else {\r\n        setStreamMuted(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleVolumeChange(event: ChangeEvent<HTMLInputElement>) {\r\n    const volume = parseFloat(event.target?.value);\r\n    setStreamVolume(volume);\r\n  }\r\n\r\n  // Platforms like iOS don't allow you to control audio volume\r\n  // Detect this by trying to change the audio volume\r\n  const [isVolumeControlAvailable, setIsVolumeControlAvailable] =\r\n    useState(true);\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if (!audio) {\r\n      return;\r\n    }\r\n    const checkVolumeControlAvailable = () => {\r\n      const prevVolume = audio.volume;\r\n      // Set volume to 0.5, then check if the value actually stuck 100ms later\r\n      audio.volume = 0.5;\r\n      setTimeout(() => {\r\n        if (audio) {\r\n          setIsVolumeControlAvailable(audio.volume === 0.5);\r\n          audio.volume = prevVolume;\r\n        }\r\n      }, 100);\r\n    };\r\n\r\n    audio.addEventListener(\"playing\", checkVolumeControlAvailable);\r\n\r\n    return () => {\r\n      audio.removeEventListener(\"playing\", checkVolumeControlAvailable);\r\n    };\r\n  }, []);\r\n\r\n  // Use an audio context gain node to control volume to go past 100%\r\n  const audioGainRef = useRef<GainNode>();\r\n  useEffect(() => {\r\n    let audioContext: AudioContext;\r\n    if (stream && !streamMuted && isVolumeControlAvailable && audioGainRef) {\r\n      audioContext = new AudioContext();\r\n      let source = audioContext.createMediaStreamSource(stream);\r\n      let gainNode = audioContext.createGain();\r\n      gainNode.gain.value = 0;\r\n      source.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n      audioGainRef.current = gainNode;\r\n    }\r\n\r\n    return () => {\r\n      audioContext && audioContext.close();\r\n    };\r\n  }, [stream, streamMuted, isVolumeControlAvailable]);\r\n\r\n  useEffect(() => {\r\n    if (audioGainRef.current && audioRef.current) {\r\n      if (streamVolume <= 1) {\r\n        audioGainRef.current.gain.value = 0;\r\n        audioRef.current.volume = streamVolume;\r\n      } else {\r\n        audioRef.current.volume = 1;\r\n        audioGainRef.current.gain.value = (streamVolume - 1) * 2;\r\n      }\r\n    }\r\n  }, [streamVolume]);\r\n\r\n  return (\r\n    <>\r\n      <Flex sx={{ alignItems: \"center\", height: \"24px\" }}>\r\n        <IconButton\r\n          aria-label={streamMuted ? \"Unmute Player\" : \"Mute Player\"}\r\n          title={streamMuted ? \"Unmute Player\" : \"Mute Player\"}\r\n          onClick={() => {\r\n            if (stream) {\r\n              toggleMute();\r\n            }\r\n          }}\r\n        >\r\n          <StreamMuteIcon muted={streamMuted} />\r\n        </IconButton>\r\n        <Slider\r\n          value={streamMuted ? 0 : streamVolume}\r\n          min={0}\r\n          max={2}\r\n          step={0.1}\r\n          onChange={handleVolumeChange}\r\n          disabled={!isVolumeControlAvailable || streamMuted}\r\n        />\r\n        {stream && <audio ref={audioRef} playsInline muted={streamMuted} />}\r\n      </Flex>\r\n      <Banner\r\n        isOpen={showStreamInteractBanner}\r\n        onRequestClose={() => setShowStreamInteractBanner(false)}\r\n      >\r\n        <Box p={1}>\r\n          <Text as=\"p\" variant=\"body2\">\r\n            {nickname} has started streaming. Click\r\n            {\r\n              <IconButton\r\n                sx={{\r\n                  width: \"14px\",\r\n                  height: \"14px\",\r\n                  padding: 0,\r\n                  margin: \"0 4px\",\r\n                  verticalAlign: \"bottom\",\r\n                }}\r\n                aria-label={\"Unmute Player\"}\r\n                title={\"Unmute Player\"}\r\n                onClick={toggleMute}\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  height=\"14\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  width=\"14\"\r\n                  fill=\"currentcolor\"\r\n                >\r\n                  <path d=\"M3.63 3.63c-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z\" />\r\n                </svg>\r\n              </IconButton>\r\n            }\r\n            to listen.\r\n          </Text>\r\n        </Box>\r\n      </Banner>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Stream;\r\n","function DiceRollsIcon() {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18zm0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default DiceRollsIcon;\r\n","import { Flex, Box, Text } from \"theme-ui\";\r\nimport { DiceRoll as DiceRollType, DiceType } from \"../../types/Dice\";\r\n\r\ntype DiceRollProps = {\r\n  rolls: DiceRollType[];\r\n  type: DiceType;\r\n  children: React.ReactNode;\r\n};\r\n\r\nfunction DiceRoll({ rolls, type, children }: DiceRollProps) {\r\n  return (\r\n    <Flex sx={{ flexWrap: \"wrap\" }}>\r\n      <Box sx={{ transform: \"scale(0.8)\" }}>{children}</Box>\r\n      {rolls\r\n        .filter((d) => d.type === type && d.roll !== \"unknown\")\r\n        .map((dice, index: string | number) => (\r\n          <Text as=\"p\" my={1} variant=\"caption\" mx={1} key={index}>\r\n            {dice.roll}\r\n          </Text>\r\n        ))}\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default DiceRoll;\r\n","import { useState } from \"react\";\r\nimport { Flex, Text, IconButton } from \"theme-ui\";\r\n\r\nimport DiceRollsIcon from \"../../icons/DiceRollsIcon\";\r\nimport D20Icon from \"../../icons/D20Icon\";\r\nimport D12Icon from \"../../icons/D12Icon\";\r\nimport D10Icon from \"../../icons/D10Icon\";\r\nimport D8Icon from \"../../icons/D8Icon\";\r\nimport D6Icon from \"../../icons/D6Icon\";\r\nimport D4Icon from \"../../icons/D4Icon\";\r\nimport D100Icon from \"../../icons/D100Icon\";\r\n\r\nimport DiceRoll from \"./DiceRoll\";\r\n\r\nimport { getDiceRollTotal } from \"../../helpers/dice\";\r\nimport { DiceRoll as DiceRollType, DiceType } from \"../../types/Dice\";\r\n\r\nconst diceIcons: { type: DiceType; Icon: React.ElementType }[] = [\r\n  { type: \"d20\", Icon: D20Icon },\r\n  { type: \"d12\", Icon: D12Icon },\r\n  { type: \"d10\", Icon: D10Icon },\r\n  { type: \"d8\", Icon: D8Icon },\r\n  { type: \"d6\", Icon: D6Icon },\r\n  { type: \"d4\", Icon: D4Icon },\r\n  { type: \"d100\", Icon: D100Icon },\r\n];\r\n\r\ntype DiceRollsProps = {\r\n  rolls: DiceRollType[];\r\n};\r\n\r\nfunction DiceRolls({ rolls }: DiceRollsProps) {\r\n  const total = getDiceRollTotal(rolls);\r\n\r\n  const [expanded, setExpanded] = useState<boolean>(false);\r\n\r\n  let expandedRolls = [];\r\n  for (let icon of diceIcons) {\r\n    if (rolls.some((roll) => roll.type === icon.type)) {\r\n      expandedRolls.push(\r\n        <DiceRoll rolls={rolls} type={icon.type} key={icon.type}>\r\n          <icon.Icon />\r\n        </DiceRoll>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (total <= 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Flex sx={{ flexDirection: \"column\" }}>\r\n      <Flex sx={{ alignItems: \"center\" }}>\r\n        <IconButton\r\n          title={expanded ? \"Hide Rolls\" : \"Show Rolls\"}\r\n          aria-label={expanded ? \"Hide Rolls\" : \"Show Rolls\"}\r\n          onClick={() => setExpanded(!expanded)}\r\n        >\r\n          <DiceRollsIcon />\r\n        </IconButton>\r\n        <Text px={1} as=\"p\" my={1} variant=\"body2\" sx={{ width: \"100%\" }}>\r\n          {total}\r\n        </Text>\r\n      </Flex>\r\n      {expanded && (\r\n        <Flex\r\n          sx={{\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          {expandedRolls}\r\n        </Flex>\r\n      )}\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default DiceRolls;\r\n","import { Text, Flex } from \"theme-ui\";\r\n\r\nimport Stream from \"./Stream\";\r\nimport DiceRolls from \"./DiceRolls\";\r\nimport { DiceRoll } from \"../../types/Dice\";\r\n\r\ntype NicknameProps = {\r\n  nickname: string;\r\n  stream?: MediaStream;\r\n  diceRolls?: DiceRoll[];\r\n};\r\n\r\nfunction Nickname({ nickname, stream, diceRolls }: NicknameProps) {\r\n  return (\r\n    <Flex sx={{ flexDirection: \"column\" }}>\r\n      <Text\r\n        as=\"p\"\r\n        my={1}\r\n        variant=\"body2\"\r\n        sx={{\r\n          position: \"relative\",\r\n        }}\r\n      >\r\n        {nickname}\r\n      </Text>\r\n      {stream && <Stream stream={stream} nickname={nickname} />}\r\n      {diceRolls && <DiceRolls rolls={diceRolls} />}\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default Nickname;","import { useRef } from \"react\";\r\nimport { Box, Input, Button, Label, Flex } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype ChangeNicknameModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  onChangeSubmit: React.FormEventHandler<HTMLDivElement>;\r\n  nickname: string;\r\n  onChange: React.ChangeEventHandler<HTMLInputElement>;\r\n};\r\n\r\nfunction ChangeNicknameModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  onChangeSubmit,\r\n  nickname,\r\n  onChange,\r\n}: ChangeNicknameModalProps) {\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  function focusInput() {\r\n    inputRef.current?.focus();\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      onAfterOpen={focusInput}\r\n    >\r\n      <Box as=\"form\" onSubmit={onChangeSubmit}>\r\n        <Label py={2} htmlFor=\"nicknameChange\">\r\n          Change your nickname\r\n        </Label>\r\n        <Input\r\n          id=\"nicknameChange\"\r\n          value={nickname}\r\n          onChange={onChange}\r\n          ref={inputRef}\r\n        />\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }} disabled={!nickname}>\r\n            Change\r\n          </Button>\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ChangeNicknameModal;\r\n","import { useState, useEffect, ChangeEvent, FormEvent } from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport ChangeNicknameModal from \"../../modals/ChangeNicknameModal\";\r\nimport ChangeNicknameIcon from \"../../icons/ChangeNicknameIcon\";\r\n\r\ntype ChangeNicknameButtonProps = {\r\n  nickname: string;\r\n  onChange: (nickname: string) => void;\r\n};\r\n\r\nfunction ChangeNicknameButton({\r\n  nickname,\r\n  onChange,\r\n}: ChangeNicknameButtonProps) {\r\n  const [isChangeModalOpen, setIsChangeModalOpen] = useState(false);\r\n  function openModal() {\r\n    setIsChangeModalOpen(true);\r\n  }\r\n  function closeModal() {\r\n    setIsChangeModalOpen(false);\r\n  }\r\n\r\n  const [changedNickname, setChangedNickname] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setChangedNickname(nickname);\r\n  }, [nickname]);\r\n\r\n  function handleChangeSubmit(event: FormEvent) {\r\n    event.preventDefault();\r\n    onChange(changedNickname);\r\n    closeModal();\r\n  }\r\n\r\n  function handleChange(event: ChangeEvent<HTMLInputElement>) {\r\n    setChangedNickname(event.target?.value);\r\n  }\r\n  return (\r\n    <>\r\n      <IconButton\r\n        m={1}\r\n        aria-label=\"Change Nickname\"\r\n        title=\"Change Nickname\"\r\n        onClick={openModal}\r\n      >\r\n        <ChangeNicknameIcon />\r\n      </IconButton>\r\n      <ChangeNicknameModal\r\n        isOpen={isChangeModalOpen}\r\n        onRequestClose={closeModal}\r\n        onChangeSubmit={handleChangeSubmit}\r\n        onChange={handleChange}\r\n        nickname={changedNickname}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChangeNicknameButton;\r\n","import { Box, Text, Button, Label, Flex } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport {\r\n  RequestCloseEventHandler,\r\n  StreamEndEventHandler,\r\n} from \"../types/Events\";\r\n\r\nexport type StreamOpenAndStartEventHandler = () => void;\r\n\r\ntype StartStreamProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  isSupported: boolean;\r\n  unavailableMessage: JSX.Element;\r\n  stream: MediaStream | null;\r\n  noAudioTrack: boolean;\r\n  noAudioMessage: JSX.Element;\r\n  onStreamStart: StreamOpenAndStartEventHandler;\r\n  onStreamEnd: StreamEndEventHandler;\r\n};\r\n\r\nfunction StartStreamModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  isSupported,\r\n  unavailableMessage,\r\n  stream,\r\n  noAudioTrack,\r\n  noAudioMessage,\r\n  onStreamStart,\r\n  onStreamEnd,\r\n}: StartStreamProps) {\r\n  return (\r\n    <Modal isOpen={isOpen} onRequestClose={onRequestClose}>\r\n      <Box>\r\n        <Label pt={2} pb={1}>\r\n          Audio Sharing (experimental)\r\n        </Label>\r\n        <Text as=\"p\" mb={2} variant=\"caption\">\r\n          Share your computers audio with the party\r\n        </Text>\r\n        {!isSupported && unavailableMessage}\r\n        {isSupported && !stream && noAudioTrack && noAudioMessage}\r\n        <Flex py={2}>\r\n          {isSupported && !stream && (\r\n            <Button sx={{ flexGrow: 1 }} onClick={onStreamStart}>\r\n              Start Sharing\r\n            </Button>\r\n          )}\r\n          {isSupported && stream && (\r\n            <Button sx={{ flexGrow: 1 }} onClick={() => onStreamEnd(stream)}>\r\n              Stop Sharing\r\n            </Button>\r\n          )}\r\n        </Flex>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default StartStreamModal;\r\n","import { useState } from \"react\";\r\nimport { IconButton, Box, Text } from \"theme-ui\";\r\nimport adapter from \"webrtc-adapter\";\r\n\r\nimport Link from \"../Link\";\r\n\r\nimport StartStreamModal from \"../../modals/StartStreamModal\";\r\nimport {\r\n  StreamEndEventHandler,\r\n  StreamStartEventHandler,\r\n} from \"../../types/Events\";\r\n\r\ntype StartStreamProps = {\r\n  onStreamStart: StreamStartEventHandler;\r\n  onStreamEnd: StreamEndEventHandler;\r\n  stream: MediaStream | null;\r\n};\r\n\r\nfunction StartStreamButton({\r\n  onStreamStart,\r\n  onStreamEnd,\r\n  stream,\r\n}: StartStreamProps) {\r\n  const [isStreamModalOpoen, setIsStreamModalOpen] = useState(false);\r\n  function openModal() {\r\n    setIsStreamModalOpen(true);\r\n  }\r\n  function closeModal() {\r\n    setIsStreamModalOpen(false);\r\n    setNoAudioTrack(false);\r\n  }\r\n\r\n  const unavailableMessage = (\r\n    <Box p={2} bg=\"hsla(230, 20%, 0%, 20%)\">\r\n      <Text as=\"p\" variant=\"body2\">\r\n        Browser not supported for audio sharing.\r\n        <br />\r\n        <br />\r\n        See <Link to=\"/how-to#sharingAudio\">How To</Link> for more information.\r\n      </Text>\r\n    </Box>\r\n  );\r\n\r\n  const noAudioMessage = (\r\n    <Box p={2} bg=\"hsla(230, 20%, 0%, 20%)\">\r\n      <Text as=\"p\" variant=\"body2\">\r\n        No audio found in screen share.\r\n        <br />\r\n        Ensure \"Share audio\" is selected when sharing.\r\n        <br />\r\n        <br />\r\n        See <Link to=\"/how-to#sharingAudio\">How To</Link> for more information.\r\n      </Text>\r\n    </Box>\r\n  );\r\n\r\n  const isSupported = adapter.browserDetails.browser === \"chrome\";\r\n  const [noAudioTrack, setNoAudioTrack] = useState(false);\r\n\r\n  function handleStreamStart() {\r\n    // Must be defined this way in typescript due to open issue - https://github.com/microsoft/TypeScript/issues/33232\r\n    const mediaDevices: any = navigator.mediaDevices;\r\n    mediaDevices\r\n      .getDisplayMedia({\r\n        video: true,\r\n        audio: {\r\n          noiseSuppression: false,\r\n          autoGainControl: false,\r\n          echoCancellation: false,\r\n        },\r\n      })\r\n      .then((localStream: MediaStream) => {\r\n        const tracks = localStream.getTracks();\r\n\r\n        const hasAudio = tracks.some(\r\n          (track: { kind: string }) => track.kind === \"audio\"\r\n        );\r\n        setNoAudioTrack(!hasAudio);\r\n\r\n        // Ensure an audio track is present\r\n        if (hasAudio) {\r\n          onStreamStart && onStreamStart(localStream);\r\n          closeModal();\r\n        } else {\r\n          // Stop the stream\r\n          for (let track of tracks) {\r\n            track.stop();\r\n          }\r\n        }\r\n      })\r\n      .catch(() => {});\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        m={1}\r\n        aria-label=\"Share Audio\"\r\n        title=\"Share Audio\"\r\n        onClick={openModal}\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n          width=\"24\"\r\n          fill=\"currentcolor\"\r\n        >\r\n          <path d=\"M3.24 6.15C2.51 6.43 2 7.17 2 8v12c0 1.1.9 2 2 2h16c1.11 0 2-.9 2-2V8c0-1.1-.9-2-2-2H8.3l7.43-3c.46-.19.68-.71.49-1.17-.19-.46-.71-.68-1.17-.49L3.24 6.15zM7 20c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm13-8h-2v-1c0-.55-.45-1-1-1s-1 .45-1 1v1H4V9c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v3z\" />\r\n        </svg>\r\n      </IconButton>\r\n      <StartStreamModal\r\n        isOpen={isStreamModalOpoen}\r\n        onRequestClose={closeModal}\r\n        isSupported={isSupported}\r\n        unavailableMessage={unavailableMessage}\r\n        stream={stream}\r\n        noAudioTrack={noAudioTrack}\r\n        noAudioMessage={noAudioMessage}\r\n        onStreamStart={handleStreamStart}\r\n        onStreamEnd={onStreamEnd}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StartStreamButton;\r\n","function SettingsIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\r\n      <path d=\"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default SettingsIcon;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Box, Label, Flex, Button, Text, Checkbox } from \"theme-ui\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\nimport Divider from \"../components/Divider\";\r\n\r\nimport { getDatabase } from \"../database\";\r\n\r\nimport { Map } from \"../types/Map\";\r\nimport { Group, GroupContainer } from \"../types/Group\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport { Token } from \"../types/Token\";\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\nexport type SelectData = {\r\n  name: string;\r\n  id: string;\r\n  type: \"default\" | \"file\";\r\n  checked: boolean;\r\n};\r\n\r\nexport type ConfirmDataEventHandler = (\r\n  checkedMaps: SelectData[],\r\n  checkedTokens: SelectData[],\r\n  checkedMapGroups: Group[],\r\n  checkedTokenGroups: Group[]\r\n) => void;\r\n\r\ntype SelectDataProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  onConfirm: ConfirmDataEventHandler;\r\n  confirmText: string;\r\n  label: string;\r\n  databaseName: string;\r\n  filter: (table: string, data: Map | MapState | Token, id: string) => boolean;\r\n};\r\n\r\ntype DataRecord = Record<string, SelectData>;\r\n\r\nfunction SelectDataModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  onConfirm,\r\n  confirmText,\r\n  label,\r\n  databaseName,\r\n  filter,\r\n}: SelectDataProps) {\r\n  const [maps, setMaps] = useState<DataRecord>({});\r\n  const [mapGroups, setMapGroups] = useState<Group[]>([]);\r\n  const [tokensByMap, setTokensByMap] = useState<Record<string, Set<string>>>(\r\n    {}\r\n  );\r\n  const [tokens, setTokens] = useState<DataRecord>({});\r\n  const [tokenGroups, setTokenGroups] = useState<Group[]>([]);\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const hasMaps = Object.values(maps).length > 0;\r\n  const hasTokens = Object.values(tokens).length > 0;\r\n\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      if (isOpen && databaseName) {\r\n        setIsLoading(true);\r\n        const db = getDatabase({ addons: [] }, databaseName);\r\n        let loadedMaps: DataRecord = {};\r\n        let loadedTokensByMap: Record<string, Set<string>> = {};\r\n        let loadedTokens: DataRecord = {};\r\n        await db\r\n          .table(\"maps\")\r\n          .filter((map: Map) => filter(\"maps\", map, map.id))\r\n          .each((map: Map) => {\r\n            loadedMaps[map.id] = {\r\n              name: map.name,\r\n              id: map.id,\r\n              type: map.type,\r\n              checked: true,\r\n            };\r\n          });\r\n        await db\r\n          .table(\"states\")\r\n          .filter((state: MapState) => filter(\"states\", state, state.mapId))\r\n          .each((state: MapState) => {\r\n            loadedTokensByMap[state.mapId] = new Set(\r\n              Object.values(state.tokens).map(\r\n                (tokenState) => tokenState.tokenId\r\n              )\r\n            );\r\n          });\r\n\r\n        await db\r\n          .table(\"tokens\")\r\n          .filter((token: Token) => filter(\"tokens\", token, token.id))\r\n          .each((token: Token) => {\r\n            loadedTokens[token.id] = {\r\n              name: token.name,\r\n              id: token.id,\r\n              type: token.type,\r\n              checked: true,\r\n            };\r\n          });\r\n\r\n        const mapGroup = await db.table(\"groups\").get(\"maps\");\r\n        const tokenGroup = await db.table(\"groups\").get(\"tokens\");\r\n\r\n        db.close();\r\n        setMaps(loadedMaps);\r\n        setMapGroups(mapGroup.items);\r\n        setTokensByMap(loadedTokensByMap);\r\n        setTokenGroups(tokenGroup.items);\r\n        setTokens(loadedTokens);\r\n        setIsLoading(false);\r\n      } else {\r\n        setMaps({});\r\n        setTokens({});\r\n        setTokenGroups([]);\r\n        setMapGroups([]);\r\n        setTokensByMap({});\r\n      }\r\n    }\r\n    loadData();\r\n  }, [isOpen, databaseName, filter]);\r\n\r\n  // An object mapping a tokenId to how many checked maps it is currently used in\r\n  const [tokenUsedCount, setTokenUsedCount] = useState<Record<string, number>>(\r\n    {}\r\n  );\r\n  useEffect(() => {\r\n    let tokensUsed: Record<string, number> = {};\r\n    for (let mapId in maps) {\r\n      if (maps[mapId].checked && mapId in tokensByMap) {\r\n        for (let tokenId of tokensByMap[mapId]) {\r\n          if (tokenId in tokensUsed) {\r\n            tokensUsed[tokenId] += 1;\r\n          } else {\r\n            tokensUsed[tokenId] = 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    setTokenUsedCount(tokensUsed);\r\n    // Update tokens to ensure used tokens are checked\r\n    setTokens((prevTokens) => {\r\n      let newTokens = { ...prevTokens };\r\n      for (let id in newTokens) {\r\n        if (id in tokensUsed && newTokens[id].type !== \"default\") {\r\n          newTokens[id].checked = true;\r\n        }\r\n      }\r\n      return newTokens;\r\n    });\r\n  }, [maps, tokensByMap]);\r\n\r\n  function getCheckedGroups(groups: Group[], data: DataRecord) {\r\n    let checkedGroups = [];\r\n    for (let group of groups) {\r\n      if (group.type === \"item\") {\r\n        if (data[group.id] && data[group.id].checked) {\r\n          checkedGroups.push(group);\r\n        }\r\n      } else {\r\n        let items = [];\r\n        for (let item of group.items) {\r\n          if (data[item.id] && data[item.id].checked) {\r\n            items.push(item);\r\n          }\r\n        }\r\n        if (items.length > 0) {\r\n          checkedGroups.push({ ...group, items });\r\n        }\r\n      }\r\n    }\r\n    return checkedGroups;\r\n  }\r\n\r\n  function handleConfirm() {\r\n    let checkedMaps = Object.values(maps).filter((map) => map.checked);\r\n    let checkedTokens = Object.values(tokens).filter((token) => token.checked);\r\n    let checkedMapGroups = getCheckedGroups(mapGroups, maps);\r\n    let checkedTokenGroups = getCheckedGroups(tokenGroups, tokens);\r\n\r\n    onConfirm(checkedMaps, checkedTokens, checkedMapGroups, checkedTokenGroups);\r\n  }\r\n\r\n  function handleMapsChanged(\r\n    event: React.ChangeEvent<HTMLInputElement>,\r\n    maps: SelectData[]\r\n  ) {\r\n    setMaps((prevMaps) => {\r\n      let newMaps = { ...prevMaps };\r\n      for (let map of maps) {\r\n        newMaps[map.id].checked = event.target.checked;\r\n      }\r\n      return newMaps;\r\n    });\r\n    // If all token select is unchecked then ensure all tokens are unchecked\r\n    if (!event.target.checked && !tokensSelectChecked) {\r\n      setTokens((prevTokens) => {\r\n        let newTokens = { ...prevTokens };\r\n        let tempUsedCount = { ...tokenUsedCount };\r\n        for (let id in newTokens) {\r\n          for (let map of maps) {\r\n            if (tokensByMap[map.id].has(id)) {\r\n              if (tempUsedCount[id] > 1) {\r\n                tempUsedCount[id] -= 1;\r\n              } else if (tempUsedCount[id] === 1) {\r\n                tempUsedCount[id] = 0;\r\n                newTokens[id].checked = false;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return newTokens;\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleTokensChanged(\r\n    event: React.ChangeEvent<HTMLInputElement>,\r\n    tokens: SelectData[]\r\n  ) {\r\n    setTokens((prevTokens) => {\r\n      let newTokens = { ...prevTokens };\r\n      for (let token of tokens) {\r\n        if (!(token.id in tokenUsedCount) || token.type === \"default\") {\r\n          newTokens[token.id].checked = event.target.checked;\r\n        }\r\n      }\r\n      return newTokens;\r\n    });\r\n  }\r\n\r\n  // Some tokens are checked not by maps or all tokens are checked by maps\r\n  const tokensSelectChecked =\r\n    Object.values(tokens).some(\r\n      (token) => !(token.id in tokenUsedCount) && token.checked\r\n    ) || Object.values(tokens).every((token) => token.id in tokenUsedCount);\r\n\r\n  function renderGroupContainer(\r\n    group: GroupContainer,\r\n    checked: boolean,\r\n    renderItem: (group: Group) => React.ReactNode,\r\n    onGroupChange: (\r\n      event: React.ChangeEvent<HTMLInputElement>,\r\n      group: GroupContainer\r\n    ) => void\r\n  ) {\r\n    return (\r\n      <Flex\r\n        ml={4}\r\n        sx={{\r\n          flexWrap: \"wrap\",\r\n          borderRadius: \"4px\",\r\n          flexDirection: \"column\",\r\n          position: \"relative\",\r\n        }}\r\n        key={group.id}\r\n      >\r\n        <Label my={1} sx={{ fontFamily: \"body2\" }}>\r\n          <Checkbox\r\n            checked={checked}\r\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n              onGroupChange(e, group)\r\n            }\r\n          />\r\n          {group.name}\r\n        </Label>\r\n        <Flex\r\n          sx={{\r\n            flexWrap: \"wrap\",\r\n            flexDirection: \"column\",\r\n            position: \"relative\",\r\n          }}\r\n        >\r\n          {group.items.map(renderItem)}\r\n          <Box\r\n            sx={{ position: \"absolute\", left: \"2px\", top: 0, height: \"100%\" }}\r\n          >\r\n            <Divider vertical fill />\r\n          </Box>\r\n        </Flex>\r\n      </Flex>\r\n    );\r\n  }\r\n\r\n  function renderMapGroup(group: Group) {\r\n    if (group.type === \"item\") {\r\n      const map = maps[group.id];\r\n      if (map) {\r\n        return (\r\n          <Label key={map.id} my={1} pl={4} sx={{ fontFamily: \"body2\" }}>\r\n            <Checkbox\r\n              checked={map.checked}\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                handleMapsChanged(e, [map])\r\n              }\r\n            />\r\n            {map.name}\r\n          </Label>\r\n        );\r\n      }\r\n    } else {\r\n      if (group.items.some((item) => item.id in maps)) {\r\n        return renderGroupContainer(\r\n          group,\r\n          group.items.some((item) => maps[item.id]?.checked),\r\n          renderMapGroup,\r\n          (e, group) =>\r\n            handleMapsChanged(\r\n              e,\r\n              group.items\r\n                .filter((group) => group.id in maps)\r\n                .map((group) => maps[group.id])\r\n            )\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  function renderTokenGroup(group: Group) {\r\n    if (group.type === \"item\") {\r\n      const token = tokens[group.id];\r\n      if (token) {\r\n        return (\r\n          <Box pl={4} my={1} key={token.id}>\r\n            <Label sx={{ fontFamily: \"body2\" }}>\r\n              <Checkbox\r\n                checked={token.checked}\r\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                  handleTokensChanged(e, [token])\r\n                }\r\n                disabled={\r\n                  token.type !== \"default\" && token.id in tokenUsedCount\r\n                }\r\n              />\r\n              {token.name}\r\n            </Label>\r\n            {token.id in tokenUsedCount && token.type !== \"default\" && (\r\n              <Text as=\"p\" variant=\"caption\" ml={4}>\r\n                Token used in {tokenUsedCount[token.id]} selected map\r\n                {tokenUsedCount[token.id] > 1 && \"s\"}\r\n              </Text>\r\n            )}\r\n          </Box>\r\n        );\r\n      }\r\n    } else {\r\n      if (group.items.some((item) => item.id in tokens)) {\r\n        const checked =\r\n          group.items.some(\r\n            (item) => !(item.id in tokenUsedCount) && tokens[item.id]?.checked\r\n          ) || group.items.every((item) => item.id in tokenUsedCount);\r\n        return renderGroupContainer(\r\n          group,\r\n          checked,\r\n          renderTokenGroup,\r\n          (e, group) =>\r\n            handleTokensChanged(\r\n              e,\r\n              group.items\r\n                .filter((group) => group.id in tokens)\r\n                .map((group) => tokens[group.id])\r\n            )\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{ content: { maxWidth: \"450px\", width: \"100%\" } }}\r\n    >\r\n      <Box\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          width: \"100%\",\r\n          flexGrow: 1,\r\n        }}\r\n      >\r\n        <Label py={2}>{label}</Label>\r\n        {!hasMaps && !hasTokens && (\r\n          <Text as=\"p\" mb={2} variant=\"caption\">\r\n            No custom maps or tokens found.\r\n          </Text>\r\n        )}\r\n        <SimpleBar style={{ maxHeight: \"300px\" }}>\r\n          <Flex\r\n            p={2}\r\n            bg=\"muted\"\r\n            sx={{\r\n              flexWrap: \"wrap\",\r\n              borderRadius: \"4px\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            {hasMaps && (\r\n              <>\r\n                <Flex>\r\n                  <Label>\r\n                    <Checkbox\r\n                      checked={Object.values(maps).some((map) => map.checked)}\r\n                      onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                        handleMapsChanged(e, Object.values(maps))\r\n                      }\r\n                    />\r\n                    Maps\r\n                  </Label>\r\n                </Flex>\r\n                {mapGroups.map(renderMapGroup)}\r\n              </>\r\n            )}\r\n            {hasMaps && hasTokens && <Divider fill />}\r\n            {hasTokens && (\r\n              <>\r\n                <Label>\r\n                  <Checkbox\r\n                    checked={tokensSelectChecked}\r\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                      handleTokensChanged(e, Object.values(tokens))\r\n                    }\r\n                  />\r\n                  Tokens\r\n                </Label>\r\n                {tokenGroups.map(renderTokenGroup)}\r\n              </>\r\n            )}\r\n          </Flex>\r\n        </SimpleBar>\r\n        <Flex py={2}>\r\n          <Button sx={{ flexGrow: 1 }} m={1} ml={0} onClick={onRequestClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            disabled={\r\n              !Object.values(maps).some((map) => map.checked) &&\r\n              !Object.values(tokens).some((token) => token.checked)\r\n            }\r\n            sx={{ flexGrow: 1 }}\r\n            m={1}\r\n            mr={0}\r\n            onClick={handleConfirm}\r\n          >\r\n            {confirmText}\r\n          </Button>\r\n        </Flex>\r\n        {isLoading && <LoadingOverlay bg=\"overlay\" />}\r\n      </Box>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nSelectDataModal.defaultProps = {\r\n  label: \"Select data\",\r\n  confirmText: \"Yes\",\r\n  filter: () => true,\r\n  databaseName: \"OwlbearRodeoDB\",\r\n};\r\n\r\nexport default SelectDataModal;\r\n","import { useRef, useState, useEffect } from \"react\";\r\nimport { Box, Label, Text, Button, Flex } from \"theme-ui\";\r\nimport { saveAs } from \"file-saver\";\r\nimport * as Comlink from \"comlink\";\r\nimport shortid from \"shortid\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\nimport LoadingBar from \"../components/LoadingBar\";\r\nimport ErrorBanner from \"../components/banner/ErrorBanner\";\r\n\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport { useDatabase } from \"../contexts/DatabaseContext\";\r\n\r\nimport SelectDataModal, { SelectData } from \"./SelectDataModal\";\r\n\r\nimport { getDatabase } from \"../database\";\r\nimport { Map } from \"../types/Map\";\r\nimport { MapState } from \"../types/MapState\";\r\nimport { Token } from \"../types/Token\";\r\nimport { Group } from \"../types/Group\";\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\nimport { Asset } from \"../types/Asset\";\r\n\r\nconst importDBName = \"OwlbearRodeoImportDB\";\r\n\r\nclass MissingAssetError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = \"MissingAssetError\";\r\n  }\r\n}\r\n\r\nfunction ImportExportModal({\r\n  isOpen,\r\n  onRequestClose,\r\n}: {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n}) {\r\n  const { worker } = useDatabase();\r\n  const userId = useUserId();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<Error>();\r\n\r\n  const backgroundTaskRunningRef = useRef(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const [showImportSelector, setShowImportSelector] = useState(false);\r\n  const [showExportSelector, setShowExportSelector] = useState(false);\r\n\r\n  const { addToast } = useToasts();\r\n  function addSuccessToast(\r\n    message: string,\r\n    maps: number,\r\n    tokens: number\r\n  ) {\r\n    const mapText = `${maps} map${maps > 1 ? \"s\" : \"\"}`;\r\n    const tokenText = `${tokens} token${tokens > 1 ? \"s\" : \"\"}`;\r\n    if (maps > 0 && tokens > 0) {\r\n      addToast(`${message} ${mapText} and ${tokenText}`);\r\n    } else if (maps > 0) {\r\n      addToast(`${message} ${mapText}`);\r\n    } else if (tokens > 0) {\r\n      addToast(`${message} ${tokenText}`);\r\n    }\r\n  }\r\n\r\n  function addWarningToast(\r\n    message: string,\r\n    items: string[],\r\n  ) {\r\n    let text = \"\";\r\n\r\n    if (items.length > 0) {\r\n      if (items.length === 1) {\r\n        text += `${items[0]}`\r\n      } else {\r\n        for (let item in items) {\r\n          text += `${items[item]}, `\r\n        }\r\n        text = text.replace(/,\\s*$/, \"\");\r\n      }\r\n    }\r\n    const toastMessage = <span>{message} <b>{text}</b></span>\r\n    addToast(toastMessage, { appearance: \"warning\", autoDismiss: true });\r\n  }\r\n\r\n  function openFileDialog() {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  }\r\n\r\n  const loadingProgressRef = useRef(0);\r\n\r\n  function handleDBProgress({\r\n    completedRows,\r\n    totalRows,\r\n  }: {\r\n    completedRows: number;\r\n    totalRows: number;\r\n  }) {\r\n    loadingProgressRef.current = completedRows / totalRows;\r\n  }\r\n\r\n  async function handleImportDatabase(file: File) {\r\n    setIsLoading(true);\r\n    backgroundTaskRunningRef.current = true;\r\n    try {\r\n      await worker.importData(\r\n        file,\r\n        importDBName,\r\n        Comlink.proxy(handleDBProgress) as any\r\n      );\r\n\r\n      setIsLoading(false);\r\n      setShowImportSelector(true);\r\n      backgroundTaskRunningRef.current = false;\r\n    } catch (e) {\r\n      setIsLoading(false);\r\n      backgroundTaskRunningRef.current = false;\r\n      if (e instanceof (Error)) {\r\n        if (e.message.startsWith(\"Max buffer length exceeded\")) {\r\n          setError(\r\n            new Error(\r\n              \"Max image size exceeded ensure your database doesn't have an image over 100MB\"\r\n            )\r\n          );\r\n        } else {\r\n          console.error(e);\r\n          setError(e);\r\n        }\r\n      }\r\n    }\r\n    // Set file input to null to allow adding the same data 2 times in a row\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n  }\r\n\r\n  function handleExportDatabase() {\r\n    setShowExportSelector(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    function handleBeforeUnload(event: BeforeUnloadEvent) {\r\n      if (backgroundTaskRunningRef.current) {\r\n        event.returnValue =\r\n          \"Database is still processing, are you sure you want to leave?\";\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\r\n    return () => {\r\n      window.removeEventListener(\"beforeunload\", handleBeforeUnload);\r\n    };\r\n  }, []);\r\n\r\n  function handleClose() {\r\n    if (isLoading) {\r\n      return;\r\n    }\r\n    onRequestClose();\r\n  }\r\n\r\n  async function handleImportSelectorClose() {\r\n    const importDB = getDatabase({ addons: [] }, importDBName);\r\n    await importDB.delete();\r\n    importDB.close();\r\n    setShowImportSelector(false);\r\n  }\r\n\r\n  async function handleImportSelectorConfirm(\r\n    checkedMaps: SelectData[],\r\n    checkedTokens: SelectData[],\r\n    checkedMapGroups: Group[],\r\n    checkedTokenGroups: Group[]\r\n  ) {\r\n    setIsLoading(true);\r\n    backgroundTaskRunningRef.current = true;\r\n    setShowImportSelector(false);\r\n    loadingProgressRef.current = 0;\r\n\r\n    const importDB = getDatabase({ addons: [] }, importDBName);\r\n    const db = getDatabase({});\r\n    try {\r\n      // Keep track of a mapping of old token ids to new ones to apply them to the map states\r\n      let newTokenIds: Record<string, string> = {};\r\n      // Mapping of old asset ids to new asset ids\r\n      let newAssetIds: Record<string, string> = {};\r\n      // Mapping of old asset ids to old maps\r\n      let oldAssetIds: Record<string, { itemName: string, itemId: string, item: \"map\" | \"token\", assetType: \"file\" | \"thumbnail\" | \"resolution\", newId: string }> = {};\r\n\r\n      // Mapping of old maps ids to new map ids\r\n      let newMapIds: Record<string, string> = {};\r\n\r\n      let newTokens: Token[] = [];\r\n      if (checkedTokens.length > 0) {\r\n        const tokenIds = checkedTokens.map((token) => token.id);\r\n        const tokensToAdd: Token[] | undefined = await importDB.table(\"tokens\").bulkGet(tokenIds);\r\n\r\n        if (tokensToAdd) {\r\n          for (let token of tokensToAdd) {\r\n            if (token) {\r\n              // Generate new ids\r\n              const newId = uuid();\r\n              newTokenIds[token.id] = newId;\r\n\r\n              if (token.type === \"default\") {\r\n                if (userId) {\r\n                  newTokens.push({ ...token, id: newId, owner: userId });\r\n                }\r\n              } else {\r\n                const newFileId = uuid();\r\n                const newThumbnailId = uuid();\r\n                newAssetIds[token.file] = newFileId;\r\n                newAssetIds[token.thumbnail] = newThumbnailId;\r\n\r\n                oldAssetIds[token.file] = { itemName: token.name, itemId: token.id, item: \"token\", assetType: \"file\", newId: newId };\r\n                oldAssetIds[token.thumbnail] = { itemName: token.name, itemId: token.id, item: \"token\", assetType: \"thumbnail\", newId: newId };\r\n\r\n                // Change ids and owner\r\n                if (userId) {\r\n                  newTokens.push({\r\n                    ...token,\r\n                    id: newId,\r\n                    owner: userId,\r\n                    file: newFileId,\r\n                    thumbnail: newThumbnailId,\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      let newMaps: Map[] = [];\r\n      let newStates: MapState[] = [];\r\n      if (checkedMaps.length > 0) {\r\n        const mapIds = checkedMaps.map((map) => map.id);\r\n        const mapsToAdd = await importDB.table(\"maps\").bulkGet(mapIds);\r\n        if (mapsToAdd) {\r\n\r\n          for (let map of mapsToAdd) {\r\n            if (map) {\r\n              let state: MapState = await importDB.table(\"states\").get(map.id);\r\n              // Apply new token ids to imported state\r\n              for (let tokenState of Object.values(state.tokens)) {\r\n                if (tokenState.tokenId in newTokenIds) {\r\n                  tokenState.tokenId = newTokenIds[tokenState.tokenId];\r\n                }\r\n                // Change token state file asset id\r\n                if (tokenState.type === \"file\" && tokenState.file in newAssetIds) {\r\n                  tokenState.file = newAssetIds[tokenState.file];\r\n                }\r\n                // Change token state owner if owned by the user of the map\r\n                if (tokenState.owner === map.owner && userId) {\r\n                  tokenState.owner = userId;\r\n                }\r\n              }\r\n              // Generate new ids\r\n              const newId = uuid();\r\n              newMapIds[map.id] = newId;\r\n\r\n              if (map.type === \"default\") {\r\n                if (userId) {\r\n                  newMaps.push({ ...map, id: newId, owner: userId });\r\n                }\r\n              } else {\r\n                const newFileId = uuid();\r\n                const newThumbnailId = uuid();\r\n                newAssetIds[map.file] = newFileId;\r\n                newAssetIds[map.thumbnail] = newThumbnailId;\r\n\r\n                oldAssetIds[map.file] = { itemName: map.name, itemId: map.id, item: \"map\", assetType: \"file\", newId: newId };\r\n                oldAssetIds[map.thumbnail] = { itemName: map.name, itemId: map.id, item: \"map\", assetType: \"thumbnail\", newId: newId };\r\n\r\n                const newResolutionIds: Record<string, string> = {};\r\n                for (let res of Object.keys(map.resolutions)) {\r\n                  newResolutionIds[res] = uuid();\r\n                  newAssetIds[map.resolutions[res]] = newResolutionIds[res];\r\n                  oldAssetIds[map.resolutions[res]] = { itemName: map.name, itemId: map.id, item: \"map\", assetType: \"resolution\", newId: newId };\r\n                }\r\n\r\n                if (userId) {\r\n                  // Change ids and owner\r\n                  newMaps.push({\r\n                    ...map,\r\n                    id: newId,\r\n                    owner: userId,\r\n                    file: newFileId,\r\n                    thumbnail: newThumbnailId,\r\n                    resolutions: newResolutionIds,\r\n                  });\r\n                }\r\n              }\r\n\r\n              newStates.push({ ...state, mapId: newId });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add assets with new ids\r\n      const assetsToAdd: Asset[] | undefined = await importDB\r\n        .table(\"assets\")\r\n        .bulkGet(Object.keys(newAssetIds));\r\n      let newAssets: Asset[] = [];\r\n      const processedAssetIds: string[] = []\r\n      if (assetsToAdd) {\r\n        for (let asset of assetsToAdd) {\r\n          if (asset && userId) {\r\n            newAssets.push({\r\n              ...asset,\r\n              id: newAssetIds[asset.id],\r\n              owner: userId,\r\n            });\r\n            processedAssetIds.push(asset.id)\r\n          }\r\n        }\r\n      }\r\n\r\n      // compare items added to newAssetIds against those that were processed\r\n      const unprocessedAssets = Object.keys(newAssetIds).filter(item => processedAssetIds.indexOf(item) < 0);\r\n      let unprocessedMaps = 0\r\n      let unprocessedTokens = 0\r\n      // check if there are any items that have been unprocessed\r\n      if (unprocessedAssets.length > 0) {\r\n        const unprocessedItems: { id: string, name: string }[] = []\r\n        for (let item of unprocessedAssets) {\r\n          // get information of unprocessed item from oldAssetIds list\r\n          let unprocessedItem = oldAssetIds[item]\r\n\r\n          // should only remove corrupted asset once (one map can have multiple unprocessed assets)\r\n          if (!!!(unprocessedItems.some(value => value.id === unprocessedItem.itemId))) {\r\n            unprocessedItems.push({ id: unprocessedItem.itemId, name: unprocessedItem.itemName })\r\n            if (unprocessedItem.item === \"map\") {\r\n              unprocessedMaps += 1\r\n\r\n              // remove corrupt map from newMaps list -> otherwise corrupt data will be imported\r\n              const index = newMaps.findIndex(map => map.id === unprocessedItem.newId)\r\n              if (index !== -1) {\r\n                newMaps.splice(index, 1)\r\n              }\r\n\r\n              const stateIndex = newStates.findIndex(state => state.mapId === unprocessedItem.newId)\r\n              if (stateIndex !== -1) {\r\n                newStates.splice(stateIndex, 1)\r\n              }\r\n            } else if (unprocessedItem.item === \"token\") {\r\n              unprocessedTokens += 1\r\n              const index = newTokens.findIndex(token => token.id === unprocessedItem.newId)\r\n              if (index !== -1) {\r\n                newTokens.splice(index, 1)\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        const unprocessedItemNames = unprocessedItems.map(item => item.name)\r\n        addWarningToast(\"Could not import item(s)\", unprocessedItemNames)\r\n      }\r\n\r\n      // Add map groups with new ids\r\n      let newMapGroups: Group[] = [];\r\n      if (checkedMapGroups.length > 0) {\r\n        for (let group of checkedMapGroups) {\r\n          if (group.type === \"item\") {\r\n            newMapGroups.push({ ...group, id: newMapIds[group.id] });\r\n          } else {\r\n            newMapGroups.push({\r\n              ...group,\r\n              id: uuid(),\r\n              items: group.items.map((item) => ({\r\n                ...item,\r\n                id: newMapIds[item.id],\r\n              })),\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add token groups with new ids\r\n      let newTokenGroups: Group[] = [];\r\n      if (checkedTokenGroups.length > 0) {\r\n        for (let group of checkedTokenGroups) {\r\n          if (group.type === \"item\") {\r\n            newTokenGroups.push({ ...group, id: newTokenIds[group.id] });\r\n          } else {\r\n            newTokenGroups.push({\r\n              ...group,\r\n              id: uuid(),\r\n              items: group.items.map((item) => ({\r\n                ...item,\r\n                id: newTokenIds[item.id],\r\n              })),\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      db.transaction(\r\n        \"rw\",\r\n        [\r\n          db.table(\"tokens\"),\r\n          db.table(\"maps\"),\r\n          db.table(\"states\"),\r\n          db.table(\"assets\"),\r\n          db.table(\"groups\"),\r\n        ],\r\n        async () => {\r\n          if (newTokens.length > 0) {\r\n            await db.table<Token>(\"tokens\").bulkAdd(newTokens);\r\n          }\r\n          if (newMaps.length > 0) {\r\n            await db.table<Map>(\"maps\").bulkAdd(newMaps);\r\n          }\r\n          if (newStates.length > 0) {\r\n            await db.table(\"states\").bulkAdd(newStates);\r\n          }\r\n          if (newAssets.length > 0) {\r\n            await db.table<Asset>(\"assets\").bulkAdd(newAssets);\r\n          }\r\n          if (newMapGroups.length > 0) {\r\n            const mapGroup = await db.table(\"groups\").get(\"maps\");\r\n            await db\r\n              .table<Group>(\"groups\")\r\n              .update(\"maps\", { items: [...newMapGroups, ...mapGroup.items] });\r\n          }\r\n          if (newTokenGroups.length > 0) {\r\n            const tokenGroup = await db.table(\"groups\").get(\"tokens\");\r\n            await db.table<Group>(\"groups\").update(\"tokens\", {\r\n              items: [...newTokenGroups, ...tokenGroup.items],\r\n            });\r\n          }\r\n        }\r\n      );\r\n      const totalImportedMaps = checkedMaps.length - unprocessedMaps\r\n      const totalImportedTokens = checkedTokens.length - unprocessedTokens\r\n      addSuccessToast(\"Imported\", totalImportedMaps, totalImportedTokens);\r\n    } catch (e) {\r\n      console.error(e);\r\n      if (e instanceof MissingAssetError) {\r\n        setError(e);\r\n      } else {\r\n        setError(new Error(\"Unable to import data\"));\r\n      }\r\n    }\r\n    await importDB.delete();\r\n    importDB.close();\r\n    setIsLoading(false);\r\n    backgroundTaskRunningRef.current = false;\r\n  }\r\n\r\n  function exportSelectorFilter(table: string) {\r\n    return (\r\n      table === \"maps\" ||\r\n      table === \"tokens\" ||\r\n      table === \"states\" ||\r\n      table === \"groups\"\r\n    );\r\n  }\r\n\r\n  async function handleExportSelectorClose() {\r\n    setShowExportSelector(false);\r\n  }\r\n\r\n  async function handleExportSelectorConfirm(\r\n    checkedMaps: SelectData[],\r\n    checkedTokens: SelectData[]\r\n  ) {\r\n    setShowExportSelector(false);\r\n    setIsLoading(true);\r\n    backgroundTaskRunningRef.current = true;\r\n\r\n    const mapIds = checkedMaps.map((map) => map.id);\r\n    const tokenIds = checkedTokens.map((token) => token.id);\r\n\r\n    try {\r\n      const buffer = await worker.exportData(\r\n        Comlink.proxy(handleDBProgress) as any,\r\n        mapIds,\r\n        tokenIds\r\n      );\r\n      const blob = new Blob([buffer]);\r\n      saveAs(blob, `${shortid.generate()}.owlbear`);\r\n      addSuccessToast(\"Exported\", checkedMaps.length, checkedTokens.length);\r\n    } catch (e: unknown) {\r\n      if (e instanceof (Error)) {\r\n        console.error(e);\r\n        setError(e);\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n    backgroundTaskRunningRef.current = false;\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onRequestClose={handleClose} allowClose={!isLoading}>\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          maxWidth: \"300px\",\r\n          flexGrow: 1,\r\n        }}\r\n        m={2}\r\n      >\r\n        <Box>\r\n          <Label>Import / Export</Label>\r\n          <Text as=\"p\" mb={2} variant=\"caption\">\r\n            Select import or export then select the data you wish to use\r\n          </Text>\r\n          <input\r\n            onChange={(event) =>\r\n              event.target.files && handleImportDatabase(event.target.files[0])\r\n            }\r\n            type=\"file\"\r\n            accept=\".owlbear\"\r\n            style={{ display: \"none\" }}\r\n            ref={fileInputRef}\r\n          />\r\n          <Flex>\r\n            <Button mr={1} sx={{ flexGrow: 1 }} onClick={openFileDialog}>\r\n              Import\r\n            </Button>\r\n            <Button ml={1} sx={{ flexGrow: 1 }} onClick={handleExportDatabase}>\r\n              Export\r\n            </Button>\r\n          </Flex>\r\n        </Box>\r\n        {isLoading && (\r\n          <Box\r\n            sx={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              position: \"absolute\",\r\n              top: 0,\r\n              left: 0,\r\n            }}\r\n          >\r\n            <LoadingOverlay bg=\"overlay\" />\r\n            <Box sx={{ zIndex: 3, position: \"absolute\", width: \"100%\" }}>\r\n              <LoadingBar\r\n                isLoading={isLoading}\r\n                loadingProgressRef={loadingProgressRef}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        )}\r\n        <ErrorBanner error={error} onRequestClose={() => setError(undefined)} />\r\n        <SelectDataModal\r\n          isOpen={showImportSelector}\r\n          onRequestClose={handleImportSelectorClose}\r\n          onConfirm={handleImportSelectorConfirm}\r\n          databaseName={importDBName}\r\n          confirmText=\"Import\"\r\n          label=\"Select data to import\"\r\n        />\r\n        <SelectDataModal\r\n          isOpen={showExportSelector}\r\n          onRequestClose={handleExportSelectorClose}\r\n          onConfirm={handleExportSelectorConfirm}\r\n          confirmText=\"Export\"\r\n          label=\"Select data to export\"\r\n          filter={exportSelectorFilter}\r\n        />\r\n      </Flex>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ImportExportModal;\r\n","import { useState, useEffect } from \"react\";\r\nimport {\r\n  Label,\r\n  Flex,\r\n  Button,\r\n  useColorMode,\r\n  Checkbox,\r\n  Divider,\r\n  Text,\r\n} from \"theme-ui\";\r\nimport prettyBytes from \"pretty-bytes\";\r\n\r\nimport Modal from \"../components/Modal\";\r\nimport Slider from \"../components/Slider\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\n\r\nimport { useUserId } from \"../contexts/UserIdContext\";\r\nimport { useDatabase } from \"../contexts/DatabaseContext\";\r\n\r\nimport useSetting from \"../hooks/useSetting\";\r\n\r\nimport ConfirmModal from \"./ConfirmModal\";\r\nimport ImportExportModal from \"./ImportExportModal\";\r\n\r\nimport { MapState } from \"../types/MapState\";\r\nimport { RequestCloseEventHandler } from \"../types/Events\";\r\n\r\ntype SettingsModalProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n};\r\n\r\nfunction SettingsModal({ isOpen, onRequestClose }: SettingsModalProps) {\r\n  const { database, databaseStatus } = useDatabase();\r\n  const userId = useUserId();\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [labelSize, setLabelSize] = useSetting<number>(\"map.labelSize\");\r\n  const [gridSnappingSensitivity, setGridSnappingSensitivity] =\r\n    useSetting<number>(\"map.gridSnappingSensitivity\");\r\n  const [showFogGuides, setShowFogGuides] =\r\n    useSetting<boolean>(\"fog.showGuides\");\r\n  const [fogEditOpacity, setFogEditOpacity] =\r\n    useSetting<number>(\"fog.editOpacity\");\r\n  const [storageEstimate, setStorageEstimate] = useState<StorageEstimate>();\r\n  const [isImportExportModalOpen, setIsImportExportModalOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function estimateStorage() {\r\n      // Persisted data on firefox doesn't count towards the usage quota so ignore it\r\n      const persisted = await navigator.storage.persisted();\r\n      const isFirefox =\r\n        navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\r\n      if (persisted && isFirefox) {\r\n        return;\r\n      }\r\n\r\n      const estimate = await navigator.storage.estimate();\r\n      setStorageEstimate(estimate);\r\n    }\r\n\r\n    if (isOpen && navigator.storage) {\r\n      estimateStorage();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  async function handleEraseAllData() {\r\n    setIsLoading(true);\r\n    try {\r\n      localStorage.clear();\r\n      database?.close();\r\n      await database?.delete();\r\n    } catch {\r\n    } finally {\r\n      window.location.reload();\r\n    }\r\n  }\r\n\r\n  async function handleClearCache() {\r\n    setIsLoading(true);\r\n    // Clear saved settings\r\n    localStorage.clear();\r\n\r\n    if (database && userId) {\r\n      const assets = await database\r\n        .table(\"assets\")\r\n        .where(\"owner\")\r\n        .notEqual(userId)\r\n        .toArray();\r\n      const states: MapState[] = await database.table(\"states\").toArray();\r\n      for (let asset of assets) {\r\n        let inUse = false;\r\n        for (let state of states) {\r\n          for (let tokenState of Object.values(state.tokens)) {\r\n            if (tokenState.type === \"file\" && asset.id === tokenState.file) {\r\n              inUse = true;\r\n            }\r\n          }\r\n        }\r\n        if (!inUse) {\r\n          await database.table(\"assets\").delete(asset.id);\r\n        }\r\n      }\r\n\r\n      // TODO: Remove this when 1.11 comes out\r\n      // Hack to fix broken database upgrade\r\n      for (let state of states) {\r\n        if ((state as any).drawShapes) {\r\n          await database.table(\"states\").update(state.mapId, {\r\n            drawShapes: undefined,\r\n            drawings: (state as any).drawShapes,\r\n          });\r\n        }\r\n\r\n        if ((state as any).fogShapes) {\r\n          await database.table(\"states\").update(state.mapId, {\r\n            fogShapes: undefined,\r\n            fogs: (state as any).fogShapes,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    window.location.reload();\r\n  }\r\n\r\n  const [colorMode, setColorMode] = useColorMode();\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={isOpen} onRequestClose={onRequestClose}>\r\n        <Flex sx={{ flexDirection: \"column\" }}>\r\n          <Label py={2}>Settings</Label>\r\n          <Divider bg=\"text\" />\r\n          <Label py={2}>Accessibility:</Label>\r\n          <Label py={2}>\r\n            <span style={{ marginRight: \"4px\" }}>Light Theme</span>\r\n            <Checkbox\r\n              checked={colorMode === \"light\"}\r\n              onChange={(e) =>\r\n                setColorMode(e.target.checked ? \"light\" : \"default\")\r\n              }\r\n            />\r\n          </Label>\r\n          <Label py={2}>\r\n            <span style={{ marginRight: \"4px\" }}>Show Fog Guides</span>\r\n            <Checkbox\r\n              checked={showFogGuides}\r\n              onChange={(e) => setShowFogGuides(e.target.checked)}\r\n            />\r\n          </Label>\r\n          <Label py={2}>\r\n            Fog Edit Opacity\r\n            <Slider\r\n              step={0.05}\r\n              min={0}\r\n              max={1}\r\n              ml={1}\r\n              sx={{ width: \"initial\" }}\r\n              value={fogEditOpacity}\r\n              onChange={(e) => setFogEditOpacity(parseFloat(e.target.value))}\r\n              labelFunc={(value: number) => `${Math.round(value * 100)}%`}\r\n            />\r\n          </Label>\r\n          <Label py={2}>\r\n            Token Label Size\r\n            <Slider\r\n              step={0.5}\r\n              min={1}\r\n              max={3}\r\n              ml={1}\r\n              sx={{ width: \"initial\" }}\r\n              value={labelSize}\r\n              onChange={(e) => setLabelSize(parseFloat(e.target.value))}\r\n              labelFunc={(value: number) => `${value}x`}\r\n            />\r\n          </Label>\r\n          <Label py={2}>\r\n            Grid Snapping Sensitivity\r\n            <Slider\r\n              step={0.05}\r\n              min={0}\r\n              max={0.5}\r\n              ml={1}\r\n              sx={{ width: \"initial\" }}\r\n              value={gridSnappingSensitivity}\r\n              onChange={(e) =>\r\n                setGridSnappingSensitivity(parseFloat(e.target.value))\r\n              }\r\n              labelFunc={(value: number) => `${value * 2}`}\r\n            />\r\n          </Label>\r\n          <Divider bg=\"text\" />\r\n          <Flex py={2}>\r\n            <Button\r\n              sx={{ flexGrow: 1 }}\r\n              onClick={handleClearCache}\r\n              disabled={!database}\r\n            >\r\n              Clear Cache\r\n            </Button>\r\n          </Flex>\r\n          <Flex py={2}>\r\n            <Button\r\n              sx={{ flexGrow: 1 }}\r\n              onClick={() => setIsDeleteModalOpen(true)}\r\n              disabled={!database}\r\n            >\r\n              Erase All Content and Reset\r\n            </Button>\r\n          </Flex>\r\n          <Flex py={2}>\r\n            <Button\r\n              sx={{ flexGrow: 1 }}\r\n              onClick={() => setIsImportExportModalOpen(true)}\r\n              disabled={databaseStatus !== \"loaded\"}\r\n            >\r\n              Import / Export Data\r\n            </Button>\r\n          </Flex>\r\n          {storageEstimate! && (\r\n            <Flex sx={{ justifyContent: \"center\" }}>\r\n              <Text variant=\"caption\">\r\n                Storage Used: {prettyBytes(storageEstimate.usage as number)} of{\" \"}\r\n                {prettyBytes(storageEstimate.quota as number)} (\r\n                {Math.round(\r\n                  ((storageEstimate.usage as number) /\r\n                    Math.max(storageEstimate.quota as number, 1)) *\r\n                    100\r\n                )}\r\n                %)\r\n              </Text>\r\n            </Flex>\r\n          )}\r\n          {isLoading && <LoadingOverlay bg=\"overlay\" />}\r\n        </Flex>\r\n      </Modal>\r\n      <ConfirmModal\r\n        isOpen={isDeleteModalOpen}\r\n        onRequestClose={() => setIsDeleteModalOpen(false)}\r\n        onConfirm={handleEraseAllData}\r\n        label=\"Erase All Content?\"\r\n        description=\"This will remove all data including saved maps and tokens.\"\r\n        confirmText=\"Erase\"\r\n      />\r\n      <ImportExportModal\r\n        isOpen={isImportExportModalOpen}\r\n        onRequestClose={() => setIsImportExportModalOpen(false)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SettingsModal;\r\n","import { useState } from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport SettingsIcon from \"../icons/SettingsIcon\";\r\nimport SettingsModal from \"../modals/SettingsModal\";\r\n\r\nfunction SettingsButton() {\r\n  const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\r\n  function openModal() {\r\n    setIsSettingsModalOpen(true);\r\n  }\r\n  function closeModal() {\r\n    setIsSettingsModalOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        m={1}\r\n        aria-label=\"Settings\"\r\n        title=\"Settings\"\r\n        onClick={openModal}\r\n      >\r\n        <SettingsIcon />\r\n      </IconButton>\r\n      <SettingsModal isOpen={isSettingsModalOpen} onRequestClose={closeModal} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SettingsButton;\r\n","import { Duration } from \"../types/Timer\";\r\n\r\nconst MILLISECONDS_IN_HOUR = 3600000;\r\nconst MILLISECONDS_IN_MINUTE = 60000;\r\nconst MILLISECONDS_IN_SECOND = 1000;\r\n\r\n/**\r\n * Returns a timers duration in milliseconds\r\n * @param {Time} t The object with an hour, minute and second property\r\n */\r\nexport function getHMSDuration(t: Duration): number {\r\n  if (!t) {\r\n    return 0;\r\n  }\r\n  return (\r\n    t.hour * MILLISECONDS_IN_HOUR +\r\n    t.minute * MILLISECONDS_IN_MINUTE +\r\n    t.second * MILLISECONDS_IN_SECOND\r\n  );\r\n}\r\n\r\n/**\r\n * Returns an object with an hour, minute and second property\r\n * @param {number} duration The duration in milliseconds\r\n */\r\nexport function getDurationHMS(duration: number): Duration {\r\n  let workingDuration = duration;\r\n  const hour = Math.floor(workingDuration / MILLISECONDS_IN_HOUR);\r\n  workingDuration -= hour * MILLISECONDS_IN_HOUR;\r\n  const minute = Math.floor(workingDuration / MILLISECONDS_IN_MINUTE);\r\n  workingDuration -= minute * MILLISECONDS_IN_MINUTE;\r\n  const second = Math.floor(workingDuration / MILLISECONDS_IN_SECOND);\r\n\r\n  return { hour, minute, second };\r\n}\r\n","import { ChangeEvent, useRef } from \"react\";\r\nimport { Box, Label, Input, Button, Flex, Text } from \"theme-ui\";\r\n\r\nimport Modal from \"../components/Modal\";\r\n\r\nimport { getHMSDuration, getDurationHMS } from \"../helpers/timer\";\r\n\r\nimport useSetting from \"../hooks/useSetting\";\r\n\r\nimport {\r\n  RequestCloseEventHandler,\r\n  TimerStartEventHandler,\r\n  TimerStopEventHandler,\r\n} from \"../types/Events\";\r\nimport { Timer } from \"../types/Timer\";\r\n\r\ntype StartTimerProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  onTimerStart: TimerStartEventHandler;\r\n  onTimerStop: TimerStopEventHandler;\r\n  timer?: Timer;\r\n};\r\n\r\nfunction StartTimerModal({\r\n  isOpen,\r\n  onRequestClose,\r\n  onTimerStart,\r\n  onTimerStop,\r\n  timer,\r\n}: StartTimerProps) {\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  function focusInput() {\r\n    inputRef.current && inputRef.current.focus();\r\n  }\r\n\r\n  const [hour, setHour] = useSetting<number>(\"timer.hour\");\r\n  const [minute, setMinute] = useSetting<number>(\"timer.minute\");\r\n  const [second, setSecond] = useSetting<number>(\"timer.second\");\r\n\r\n  function handleSubmit(event: ChangeEvent<HTMLInputElement>) {\r\n    event.preventDefault();\r\n    if (timer) {\r\n      onTimerStop();\r\n    } else {\r\n      const duration = getHMSDuration({ hour, minute, second });\r\n      onTimerStart({ current: duration, max: duration });\r\n    }\r\n  }\r\n\r\n  const inputStyle = {\r\n    width: \"70px\",\r\n    border: \"none\",\r\n    \":focus\": {\r\n      outline: \"none\",\r\n    },\r\n    fontSize: \"32px\",\r\n    padding: 2,\r\n    paddingLeft: 0,\r\n  };\r\n\r\n  function parseValue(value: string, max: number) {\r\n    const num = parseInt(value);\r\n    if (isNaN(num)) {\r\n      return 0;\r\n    }\r\n    return Math.min(num, max);\r\n  }\r\n\r\n  const timerHMS = timer && getDurationHMS(timer.current);\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      onAfterOpen={focusInput}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          maxWidth: \"300px\",\r\n          flexGrow: 1,\r\n        }}\r\n        m={2}\r\n      >\r\n        <Box as=\"form\" onSubmit={handleSubmit}>\r\n          <Label py={2}>Start a countdown timer</Label>\r\n          <Flex mb={2} sx={{ flexGrow: 1, alignItems: \"baseline\" }}>\r\n            <Text as=\"label\" variant=\"body2\" sx={{ fontSize: \"16px\" }} p={1}>\r\n              H:\r\n            </Text>\r\n            <Input\r\n              sx={inputStyle}\r\n              value={`${timerHMS ? timerHMS.hour : hour}`}\r\n              onChange={(e) => setHour(parseValue(e.target.value, 24))}\r\n              type=\"number\"\r\n              disabled={!!timer}\r\n              min={0}\r\n              max={24}\r\n            />\r\n            <Text as=\"label\" variant=\"body2\" sx={{ fontSize: \"16px\" }} p={1}>\r\n              M:\r\n            </Text>\r\n            <Input\r\n              sx={inputStyle}\r\n              value={`${timerHMS ? timerHMS.minute : minute}`}\r\n              onChange={(e) => setMinute(parseValue(e.target.value, 59))}\r\n              type=\"number\"\r\n              ref={inputRef}\r\n              disabled={!!timer}\r\n              min={0}\r\n              max={59}\r\n            />\r\n            <Text as=\"label\" variant=\"body2\" sx={{ fontSize: \"16px\" }} p={1}>\r\n              S:\r\n            </Text>\r\n            <Input\r\n              sx={inputStyle}\r\n              value={`${timerHMS ? timerHMS.second : second}`}\r\n              onChange={(e) => setSecond(parseValue(e.target.value, 59))}\r\n              type=\"number\"\r\n              disabled={!!timer}\r\n              min={0}\r\n              max={59}\r\n            />\r\n          </Flex>\r\n          <Flex>\r\n            <Button\r\n              sx={{ flexGrow: 1 }}\r\n              disabled={hour === 0 && minute === 0 && second === 0}\r\n            >\r\n              {timer ? \"Stop Timer\" : \"Start Timer\"}\r\n            </Button>\r\n          </Flex>\r\n        </Box>\r\n      </Flex>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default StartTimerModal;\r\n","function StartTimerIcon() {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      width=\"24\"\r\n      fill=\"currentcolor\"\r\n      transform=\"scale(-1 1)\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      <path d=\"M16,22c1.1,0,2-0.9,2-2l-0.01-3.18c0-0.53-0.21-1.03-0.58-1.41L14,12l3.41-3.43c0.37-0.37,0.58-0.88,0.58-1.41L18,4 c0-1.1-0.9-2-2-2H8C6.9,2,6,2.9,6,4v3.16C6,7.69,6.21,8.2,6.58,8.58L10,12l-3.41,3.4C6.21,15.78,6,16.29,6,16.82V20 c0,1.1,0.9,2,2,2H16z M8,7.09V5c0-0.55,0.45-1,1-1h6c0.55,0,1,0.45,1,1v2.09c0,0.27-0.11,0.52-0.29,0.71L12,11.5L8.29,7.79 C8.11,7.61,8,7.35,8,7.09z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default StartTimerIcon;\r\n","import { useState } from \"react\";\r\nimport { IconButton } from \"theme-ui\";\r\n\r\nimport StartTimerModal from \"../../modals/StartTimerModal\";\r\nimport StartTimerIcon from \"../../icons/StartTimerIcon\";\r\nimport {\r\n  TimerStartEventHandler,\r\n  TimerStopEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Timer } from \"../../types/Timer\";\r\n\r\ntype StartTimerButtonProps = {\r\n  onTimerStart: TimerStartEventHandler;\r\n  onTimerStop: TimerStopEventHandler;\r\n  timer?: Timer;\r\n};\r\n\r\nfunction StartTimerButton({\r\n  onTimerStart,\r\n  onTimerStop,\r\n  timer,\r\n}: StartTimerButtonProps) {\r\n  const [isTimerModalOpen, setIsTimerModalOpen] = useState(false);\r\n\r\n  function openModal() {\r\n    setIsTimerModalOpen(true);\r\n  }\r\n  function closeModal() {\r\n    setIsTimerModalOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <IconButton\r\n        m={1}\r\n        aria-label=\"Start Timer\"\r\n        title=\"Start Timer\"\r\n        onClick={openModal}\r\n      >\r\n        <StartTimerIcon />\r\n      </IconButton>\r\n      <StartTimerModal\r\n        isOpen={isTimerModalOpen}\r\n        onRequestClose={closeModal}\r\n        onTimerStart={onTimerStart}\r\n        onTimerStop={onTimerStop}\r\n        timer={timer}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StartTimerButton;\r\n","import { useRef, useEffect } from \"react\";\r\n\r\n// Based on https://www.jayfreestone.com/writing/react-portals-with-hooks/\r\n\r\n/**\r\n * Creates DOM element to be used as React root.\r\n * @returns {HTMLElement}\r\n */\r\nfunction createRootElement(id: string) {\r\n  const rootContainer = document.createElement(\"div\");\r\n  rootContainer.setAttribute(\"id\", id);\r\n  return rootContainer;\r\n}\r\n\r\n/**\r\n * Appends element as last child of body.\r\n * @param {HTMLElement} rootElem\r\n */\r\nfunction addRootElement(rootElem: HTMLElement) {\r\n  if (document.body.lastElementChild) {\r\n    document.body.insertBefore(\r\n      rootElem,\r\n      document.body.lastElementChild?.nextElementSibling\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Hook to create a React Portal.\r\n * Automatically handles creating and tearing-down the root elements (no SRR\r\n * makes this trivial), so there is no need to ensure the parent target already\r\n * exists.\r\n * @example\r\n * const target = usePortal(id, [id]);\r\n * return createPortal(children, target);\r\n * @param {String} id The id of the target container, e.g 'modal' or 'spotlight'\r\n * @returns {HTMLElement} The DOM node to use as the Portal target.\r\n */\r\nfunction usePortal(id: string): HTMLElement {\r\n  const rootElemRef = useRef<HTMLElement | null>(null);\r\n\r\n  useEffect(\r\n    function setupElement() {\r\n      // Look for existing target dom element to append to\r\n      const existingParent: HTMLElement | null = document.querySelector(\r\n        `#${id}`\r\n      );\r\n      // Parent is either a new root or the existing dom element\r\n      const parentElem = existingParent || createRootElement(id);\r\n\r\n      // If there is no existing DOM element, add a new one.\r\n      if (!existingParent) {\r\n        addRootElement(parentElem);\r\n      }\r\n\r\n      // Add the detached element to the parent\r\n      rootElemRef.current && parentElem.appendChild(rootElemRef.current);\r\n\r\n      return function removeElement() {\r\n        rootElemRef.current && rootElemRef.current.remove();\r\n        if (parentElem.childNodes.length === -1) {\r\n          parentElem.remove();\r\n        }\r\n      };\r\n    },\r\n    [id]\r\n  );\r\n\r\n  /**\r\n   * It's important we evaluate this lazily:\r\n   * - We need first render to contain the DOM element, so it shouldn't happen\r\n   *   in useEffect. We would normally put this in the constructor().\r\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\r\n   *   since this will run every single render (that's a lot).\r\n   * - We want the ref to consistently point to the same DOM element and only\r\n   *   ever run once.\r\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\r\n   */\r\n  function getRootElem() {\r\n    if (!rootElemRef.current) {\r\n      rootElemRef.current = document.createElement(\"div\");\r\n    }\r\n    return rootElemRef.current;\r\n  }\r\n\r\n  return getRootElem();\r\n}\r\n\r\nexport default usePortal;\r\n","import { useEffect, useRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Box, Progress } from \"theme-ui\";\r\n\r\nimport usePortal from \"../../hooks/usePortal\";\r\nimport { Timer as TimerType } from \"../../types/Timer\";\r\n\r\ntype TimerProps = {\r\n  timer?: TimerType;\r\n  index: number;\r\n};\r\n\r\nfunction Timer({ timer, index }: TimerProps) {\r\n  const progressBarRef = useRef<HTMLProgressElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (progressBarRef.current && timer) {\r\n      progressBarRef.current.value = timer.current;\r\n    }\r\n  }, [timer]);\r\n\r\n  useEffect(() => {\r\n    let request = requestAnimationFrame(animate);\r\n    let previousTime = performance.now();\r\n    function animate(time: number) {\r\n      request = requestAnimationFrame(animate);\r\n      const deltaTime = time - previousTime;\r\n      previousTime = time;\r\n\r\n      if (progressBarRef.current && progressBarRef.current.value > 0) {\r\n        progressBarRef.current.value -= deltaTime;\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      cancelAnimationFrame(request);\r\n    };\r\n  }, []);\r\n\r\n  const timerContainer = usePortal(\"root\");\r\n\r\n  return ReactDOM.createPortal(\r\n    <Box\r\n      sx={{\r\n        position: \"absolute\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        // Offset for iOS safe zone\r\n        bottom: \"env(safe-area-inset-bottom)\",\r\n        flexDirection: \"column\",\r\n        borderRadius: \"28px\",\r\n        left: \"50%\",\r\n        maxWidth: \"500px\",\r\n        width: \"40%\",\r\n        transform: `translate(-50%, -${index * 36}px)`,\r\n        padding: \"0 8px\",\r\n        margin: \"8px\",\r\n      }}\r\n      bg=\"overlay\"\r\n    >\r\n      <Progress\r\n        max={timer && timer.max}\r\n        m={2}\r\n        sx={{ width: \"100%\" }}\r\n        ref={progressBarRef}\r\n      />\r\n    </Box>,\r\n    timerContainer\r\n  );\r\n}\r\n\r\nexport default Timer;\r\n","function ExpandMoreDiceIcon({ isExpanded }: { isExpanded: boolean }) {\r\n  return (\r\n    <svg\r\n      width=\"24\"\r\n      height=\"24\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"currentcolor\"\r\n    >\r\n      <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n      {isExpanded ? (\r\n        <path d=\"M17.727 6c.7 0 1.273.6 1.273 1.333v9.334C19 17.4 18.427 18 17.727 18H6.273C5.573 18 5 17.4 5 16.667V7.333C5 6.6 5.573 6 6.273 6zM17 8H7v8h10V8zm-5.444 1c.244 0 .444.193.444.429v5.182c0 .236-.2.429-.444.429H8.444A.438.438 0 018 14.611V9.43C8 9.193 8.2 9 8.444 9h3.112z\" />\r\n      ) : (\r\n        <path d=\"M17.727 6c.7 0 1.273.6 1.273 1.333v9.334C19 17.4 18.427 18 17.727 18H6.273C5.573 18 5 17.4 5 16.667V7.333C5 6.6 5.573 6 6.273 6zM17 8H7v8h10V8zm-5.444 1c.244 0 .444.193.444.429v2.142c0 .236-.2.429-.444.429H8.444A.438.438 0 018 11.571V9.43C8 9.193 8.2 9 8.444 9h3.112z\" />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default ExpandMoreDiceIcon;\r\n","import React, { useState } from \"react\";\r\nimport { Flex, IconButton, Box } from \"theme-ui\";\r\n\r\nimport ExpandMoreDiceIcon from \"../../icons/ExpandMoreDiceIcon\";\r\n\r\nimport { DiceLoadingProvider } from \"../../contexts/DiceLoadingContext\";\r\n\r\nimport useSetting from \"../../hooks/useSetting\";\r\n\r\nimport LoadingOverlay from \"../LoadingOverlay\";\r\n\r\nimport {\r\n  DiceShareChangeEventHandler,\r\n  DiceRollsChangeEventHandler,\r\n} from \"../../types/Events\";\r\nimport { DiceRoll } from \"../../types/Dice\";\r\n\r\nconst DiceTrayOverlay = React.lazy(() => import(\"../dice/DiceTrayOverlay\"));\r\n\r\ntype DiceTrayButtonProps = {\r\n  shareDice: boolean;\r\n  onShareDiceChange: DiceShareChangeEventHandler;\r\n  diceRolls: DiceRoll[];\r\n  onDiceRollsChange: DiceRollsChangeEventHandler;\r\n};\r\n\r\nfunction DiceTrayButton({\r\n  shareDice,\r\n  onShareDiceChange,\r\n  diceRolls,\r\n  onDiceRollsChange,\r\n}: DiceTrayButtonProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [fullScreen] = useSetting(\"map.fullScreen\");\r\n\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: fullScreen ? \"0\" : \"100%\",\r\n        bottom: 0,\r\n        flexDirection: \"column\",\r\n        alignItems: \"flex-start\",\r\n        pointerEvents: \"none\",\r\n        zIndex: 1,\r\n      }}\r\n      ml={1}\r\n    >\r\n      <IconButton\r\n        aria-label={isExpanded ? \"Hide Dice Tray\" : \"Show Dice Tray\"}\r\n        title={isExpanded ? \"Hide Dice Tray\" : \"Show Dice Tray\"}\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        sx={{\r\n          display: \"block\",\r\n          backgroundColor: \"overlay\",\r\n          borderRadius: \"50%\",\r\n          pointerEvents: \"all\",\r\n        }}\r\n        m={2}\r\n      >\r\n        <ExpandMoreDiceIcon isExpanded={isExpanded} />\r\n      </IconButton>\r\n      <DiceLoadingProvider>\r\n        <React.Suspense\r\n          fallback={\r\n            isExpanded && (\r\n              <Box\r\n                sx={{\r\n                  width: \"32px\",\r\n                  height: \"32px\",\r\n                  position: \"absolute\",\r\n                  top: \"40px\",\r\n                  left: \"8px\",\r\n                }}\r\n              >\r\n                <LoadingOverlay />\r\n              </Box>\r\n            )\r\n          }\r\n        >\r\n          <DiceTrayOverlay\r\n            isOpen={isExpanded}\r\n            shareDice={shareDice}\r\n            onShareDiceChange={onShareDiceChange}\r\n            diceRolls={diceRolls}\r\n            onDiceRollsChange={onDiceRollsChange}\r\n          />\r\n        </React.Suspense>\r\n      </DiceLoadingProvider>\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default DiceTrayButton;\r\n","import { useEffect } from \"react\";\r\nimport { Flex, Box, Text } from \"theme-ui\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nimport AddPartyMemberButton from \"./AddPartyMemberButton\";\r\nimport Nickname from \"./Nickname\";\r\nimport ChangeNicknameButton from \"./ChangeNicknameButton\";\r\nimport StartStreamButton from \"./StartStreamButton\";\r\nimport SettingsButton from \"../SettingsButton\";\r\nimport StartTimerButton from \"./StartTimerButton\";\r\nimport Timer from \"./Timer\";\r\nimport DiceTrayButton from \"./DiceTrayButton\";\r\n\r\nimport useSetting from \"../../hooks/useSetting\";\r\n\r\nimport { useParty } from \"../../contexts/PartyContext\";\r\nimport { usePlayerState, usePlayerUpdater } from \"../../contexts/PlayerContext\";\r\nimport { DiceRoll } from \"../../types/Dice\";\r\nimport {\r\n  StreamEndEventHandler,\r\n  StreamStartEventHandler,\r\n} from \"../../types/Events\";\r\nimport { Timer as TimerType } from \"../../types/Timer\";\r\n\r\ntype PartyProps = {\r\n  gameId: string;\r\n  stream: MediaStream | null;\r\n  partyStreams: Record<string, MediaStream>;\r\n  onStreamStart: StreamStartEventHandler;\r\n  onStreamEnd: StreamEndEventHandler;\r\n};\r\n\r\nfunction Party({\r\n  gameId,\r\n  stream,\r\n  partyStreams,\r\n  onStreamStart,\r\n  onStreamEnd,\r\n}: PartyProps) {\r\n  const setPlayerState = usePlayerUpdater();\r\n  const playerState = usePlayerState();\r\n  const partyState = useParty();\r\n\r\n  const [fullScreen] = useSetting<boolean>(\"map.fullScreen\");\r\n  const [shareDice, setShareDice] = useSetting<boolean>(\"dice.shareDice\");\r\n\r\n  function handleTimerStart(newTimer: TimerType) {\r\n    setPlayerState((prevState) => ({ ...prevState, timer: newTimer }));\r\n  }\r\n\r\n  function handleTimerStop() {\r\n    setPlayerState((prevState) => ({ ...prevState, timer: undefined }));\r\n  }\r\n\r\n  useEffect(() => {\r\n    let prevTime = performance.now();\r\n    let request = requestAnimationFrame(update);\r\n    let counter = 0;\r\n    function update(time: number) {\r\n      request = requestAnimationFrame(update);\r\n      const deltaTime = time - prevTime;\r\n      prevTime = time;\r\n\r\n      if (playerState.timer) {\r\n        counter += deltaTime;\r\n        // Update timer every second\r\n        if (counter > 1000) {\r\n          const newTimer: TimerType = {\r\n            ...playerState.timer,\r\n            current: playerState.timer.current - counter,\r\n          };\r\n          if (newTimer.current < 0) {\r\n            setPlayerState((prevState) => ({ ...prevState, timer: undefined }));\r\n          } else {\r\n            setPlayerState((prevState) => ({ ...prevState, timer: newTimer }));\r\n          }\r\n          counter = 0;\r\n        }\r\n      }\r\n    }\r\n    return () => {\r\n      cancelAnimationFrame(request);\r\n    };\r\n  }, [playerState.timer, setPlayerState]);\r\n\r\n  function handleNicknameChange(newNickname: string) {\r\n    setPlayerState((prevState) => ({ ...prevState, nickname: newNickname }));\r\n  }\r\n\r\n  function handleDiceRollsChange(newDiceRolls: DiceRoll[]) {\r\n    setPlayerState(\r\n      (prevState) => ({\r\n        ...prevState,\r\n        dice: { share: shareDice, rolls: newDiceRolls },\r\n      }),\r\n      shareDice\r\n    );\r\n  }\r\n\r\n  function handleShareDiceChange(newShareDice: boolean) {\r\n    setShareDice(newShareDice);\r\n    setPlayerState((prevState) => ({\r\n      ...prevState,\r\n      dice: { ...prevState.dice, share: newShareDice },\r\n    }));\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      bg=\"background\"\r\n      sx={{\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <Box\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          overflow: \"visible\",\r\n          alignItems: \"center\",\r\n          height: \"100%\",\r\n          display: fullScreen ? \"none\" : \"flex\",\r\n          width: \"112px\",\r\n          minWidth: \"112px\",\r\n        }}\r\n        p={3}\r\n      >\r\n        <Box\r\n          sx={{\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <Text mb={1} variant=\"heading\" as=\"h1\">\r\n            Party\r\n          </Text>\r\n        </Box>\r\n        <SimpleBar\r\n          style={{\r\n            flexGrow: 1,\r\n            width: \"100%\",\r\n            minWidth: \"112px\",\r\n            padding: \"0 16px\",\r\n            height: \"calc(100% - 232px)\",\r\n          }}\r\n        >\r\n          <Nickname\r\n            nickname={`${playerState.nickname} (you)`}\r\n            diceRolls={shareDice ? playerState.dice.rolls : undefined}\r\n          />\r\n          {Object.entries(partyState).map(([id, { nickname, dice }]) => (\r\n            <Nickname\r\n              nickname={nickname}\r\n              key={id}\r\n              stream={partyStreams[id]}\r\n              diceRolls={dice.share ? dice.rolls : undefined}\r\n            />\r\n          ))}\r\n          {playerState.timer && <Timer timer={playerState.timer} index={0} />}\r\n          {Object.entries(partyState)\r\n            .filter(([_, { timer }]) => timer)\r\n            .map(([id, { timer }], index) => (\r\n              <Timer\r\n                timer={timer}\r\n                key={id}\r\n                // Put party timers above your timer if there is one\r\n                index={playerState.timer ? index + 1 : index}\r\n              />\r\n            ))}\r\n        </SimpleBar>\r\n        <Flex sx={{ flexDirection: \"column\" }}>\r\n          <ChangeNicknameButton\r\n            nickname={playerState.nickname}\r\n            onChange={handleNicknameChange}\r\n          />\r\n          <AddPartyMemberButton gameId={gameId} />\r\n          <StartStreamButton\r\n            onStreamStart={onStreamStart}\r\n            onStreamEnd={onStreamEnd}\r\n            stream={stream}\r\n          />\r\n          <StartTimerButton\r\n            onTimerStart={handleTimerStart}\r\n            onTimerStop={handleTimerStop}\r\n            timer={playerState.timer}\r\n          />\r\n          <SettingsButton />\r\n        </Flex>\r\n      </Box>\r\n      <DiceTrayButton\r\n        shareDice={shareDice}\r\n        onShareDiceChange={handleShareDiceChange}\r\n        diceRolls={(playerState.dice && playerState.dice.rolls) || []}\r\n        onDiceRollsChange={handleDiceRollsChange}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Party;","import { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport Session, { PeerTrackAddedEvent, PeerTrackRemovedEvent } from \"./Session\";\r\nimport { isStreamStopped, omit } from \"../helpers/shared\";\r\n\r\nimport { useParty } from \"../contexts/PartyContext\";\r\n\r\nimport Party from \"../components/party/Party\";\r\n\r\n/**\r\n * @typedef {object} NetworkedPartyProps\r\n * @property {string} gameId\r\n * @property {Session} session\r\n */\r\n\r\ntype NetworkedPartyProps = { gameId: string; session: Session };\r\n\r\n/**\r\n * @param {NetworkedPartyProps} props\r\n */\r\nfunction NetworkedParty({ gameId, session }: NetworkedPartyProps) {\r\n  const partyState = useParty();\r\n  const [stream, setStream] = useState<MediaStream | null>(null);\r\n  const [partyStreams, setPartyStreams] = useState<Record<string, MediaStream>>(\r\n    {}\r\n  );\r\n\r\n  const { addToast } = useToasts();\r\n\r\n  function handleStreamStart(localStream: MediaStream) {\r\n    setStream(localStream);\r\n    const tracks = localStream.getTracks();\r\n    for (let track of tracks) {\r\n      // Only add the audio track of the stream to the remote peer\r\n      if (track.kind === \"audio\") {\r\n        for (let player of Object.values(partyState)) {\r\n          if (player.sessionId) {\r\n            session.startStreamTo(player.sessionId, track, localStream);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleStreamEnd = useCallback(\r\n    (localStream) => {\r\n      setStream(null);\r\n      const tracks = localStream.getTracks();\r\n      for (let track of tracks) {\r\n        track.stop();\r\n        // Only sending audio so only remove the audio track\r\n        if (track.kind === \"audio\") {\r\n          for (let player of Object.values(partyState)) {\r\n            if (player.sessionId) {\r\n              session.endStreamTo(player.sessionId, track, localStream);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [session, partyState]\r\n  );\r\n\r\n  // Keep a reference to players who have just joined to show the joined notification\r\n  const joinedPlayersRef = useRef<string[]>([]);\r\n  useEffect(() => {\r\n    if (joinedPlayersRef.current.length > 0) {\r\n      for (let id of joinedPlayersRef.current) {\r\n        if (partyState[id]) {\r\n          addToast(`${partyState[id].nickname} joined the party`);\r\n        }\r\n      }\r\n      joinedPlayersRef.current = [];\r\n    }\r\n  }, [partyState, addToast]);\r\n\r\n  useEffect(() => {\r\n    function handlePlayerJoined(sessionId: string) {\r\n      if (stream) {\r\n        const tracks = stream.getTracks();\r\n        for (let track of tracks) {\r\n          if (track.kind === \"audio\") {\r\n            session.startStreamTo(sessionId, track, stream);\r\n          }\r\n        }\r\n      }\r\n      // Add player to join notification list\r\n      // Can't just show the notification here as the partyState data isn't populated at this point\r\n      joinedPlayersRef.current.push(sessionId);\r\n    }\r\n\r\n    function handlePlayerLeft(sessionId: string) {\r\n      if (partyState[sessionId]) {\r\n        addToast(`${partyState[sessionId].nickname} left the party`);\r\n      }\r\n    }\r\n\r\n    function handlePeerTrackAdded({\r\n      peer,\r\n      stream: remoteStream,\r\n    }: PeerTrackAddedEvent) {\r\n      setPartyStreams((prevStreams) => ({\r\n        ...prevStreams,\r\n        [peer.id]: remoteStream,\r\n      }));\r\n    }\r\n\r\n    function handlePeerTrackRemoved({\r\n      peer,\r\n      stream: remoteStream,\r\n    }: PeerTrackRemovedEvent) {\r\n      if (isStreamStopped(remoteStream)) {\r\n        setPartyStreams((prevStreams) => omit(prevStreams, [peer.id]));\r\n      } else {\r\n        setPartyStreams((prevStreams) => ({\r\n          ...prevStreams,\r\n          [peer.id]: remoteStream,\r\n        }));\r\n      }\r\n    }\r\n\r\n    session.on(\"playerJoined\", handlePlayerJoined);\r\n    session.on(\"playerLeft\", handlePlayerLeft);\r\n    session.on(\"peerTrackAdded\", handlePeerTrackAdded);\r\n    session.on(\"peerTrackRemoved\", handlePeerTrackRemoved);\r\n\r\n    return () => {\r\n      session.off(\"playerJoined\", handlePlayerJoined);\r\n      session.off(\"playerLeft\", handlePlayerLeft);\r\n      session.off(\"peerTrackAdded\", handlePeerTrackAdded);\r\n      session.off(\"peerTrackRemoved\", handlePeerTrackRemoved);\r\n    };\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (stream) {\r\n      const tracks = stream.getTracks();\r\n      // Detect when someone has ended the screen sharing\r\n      // by looking at the streams video track onended\r\n      // the audio track doesn't seem to trigger this event\r\n      for (let track of tracks) {\r\n        if (track.kind === \"video\") {\r\n          track.onended = function () {\r\n            handleStreamEnd(stream);\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }, [stream, handleStreamEnd]);\r\n\r\n  return (\r\n    <>\r\n      <Party\r\n        gameId={gameId}\r\n        onStreamStart={handleStreamStart}\r\n        onStreamEnd={handleStreamEnd}\r\n        stream={stream}\r\n        partyStreams={partyStreams}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NetworkedParty;","import SimplePeer from \"simple-peer\";\r\nimport { encode, decode } from \"@msgpack/msgpack\";\r\nimport shortid from \"shortid\";\r\n\r\nimport blobToBuffer from \"../helpers/blobToBuffer\";\r\n\r\n// Limit buffer size to 16kb to avoid issues with chrome packet size\r\n// http://viblast.com/blog/2015/2/5/webrtc-data-channel-message-size/\r\nconst MAX_BUFFER_SIZE = 16000;\r\n\r\ntype NetworkChunk = {\r\n  __chunked: boolean;\r\n  data: Uint8Array;\r\n  id: string;\r\n  index: number;\r\n  total: number;\r\n};\r\n\r\ntype LocalChunk = {\r\n  data: Uint8Array[];\r\n  count: number;\r\n  total: number;\r\n};\r\n\r\nexport type DataProgressEvent = {\r\n  id: string;\r\n  count: number;\r\n  total: number;\r\n};\r\n\r\nclass Connection extends SimplePeer {\r\n  currentChunks: Record<string, LocalChunk>;\r\n  constructor(props: SimplePeer.Options) {\r\n    super(props);\r\n    this.currentChunks = {};\r\n    this.on(\"data\", this.handleData);\r\n  }\r\n\r\n  // Intercept the data event with decoding and chunking support\r\n  handleData(packed: Uint8Array) {\r\n    const unpacked = decode(packed) as NetworkChunk;\r\n    // If the special property __chunked is set and true\r\n    // The data is a partial chunk of the a larger file\r\n    // So wait until all chunks are collected and assembled\r\n    // before emitting the dataComplete event\r\n    if (unpacked.__chunked) {\r\n      let chunk = this.currentChunks[unpacked.id] || {\r\n        data: [],\r\n        count: 0,\r\n        total: unpacked.total,\r\n      };\r\n      chunk.data[unpacked.index] = unpacked.data;\r\n      chunk.count++;\r\n      this.currentChunks[unpacked.id] = chunk;\r\n\r\n      this.emit(\"dataProgress\", {\r\n        id: unpacked.id,\r\n        count: chunk.count,\r\n        total: chunk.total,\r\n      });\r\n\r\n      // All chunks have been loaded\r\n      if (chunk.count === chunk.total) {\r\n        // Merge chunks with a blob\r\n        const merged = new Blob(chunk.data);\r\n        blobToBuffer(merged).then((buffer) => {\r\n          this.emit(\"dataComplete\", decode(buffer));\r\n          delete this.currentChunks[unpacked.id];\r\n        });\r\n      }\r\n    } else {\r\n      this.emit(\"dataComplete\", unpacked);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Custom send function with encoding, chunking and data channel support\r\n   * Uses `write` to send the data to allow for buffer / backpressure handling\r\n   * @param {any} object\r\n   * @param {string=} chunkId Optional ID to use for chunking\r\n   */\r\n  sendObject(object: any, chunkId?: string) {\r\n    try {\r\n      const packedData = encode(object);\r\n      const chunks = this.chunk(packedData, chunkId);\r\n      for (let chunk of chunks) {\r\n        this.write(encode(chunk));\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  // Converted from https://github.com/peers/peerjs/\r\n  /** Chunk byte array */\r\n  chunk(data: Uint8Array, chunkId?: string): NetworkChunk[] {\r\n    const chunks = [];\r\n    const size = data.byteLength;\r\n    const total = Math.ceil(size / MAX_BUFFER_SIZE);\r\n    const id = chunkId || shortid.generate();\r\n\r\n    let index = 0;\r\n    let start = 0;\r\n\r\n    while (start < size) {\r\n      const end = Math.min(size, start + MAX_BUFFER_SIZE);\r\n      const slice = data.slice(start, end);\r\n\r\n      const chunk = {\r\n        __chunked: true,\r\n        data: slice,\r\n        id,\r\n        index,\r\n        total,\r\n      };\r\n\r\n      chunks.push(chunk);\r\n      start = end;\r\n      index++;\r\n    }\r\n\r\n    return chunks;\r\n  }\r\n}\r\n\r\nexport default Connection;\r\n","import io, { Socket } from \"socket.io-client\";\r\nimport msgParser from \"socket.io-msgpack-parser\";\r\nimport { EventEmitter } from \"events\";\r\n\r\nimport Connection, { DataProgressEvent } from \"./Connection\";\r\n\r\nimport { omit } from \"../helpers/shared\";\r\nimport { SignalData } from \"simple-peer\";\r\n\r\n/**\r\n * @property {string} id - The socket id of the peer\r\n * @property {Connection} connection - The actual peer connection\r\n * @property {boolean} initiator - Is this peer the initiator of the connection\r\n * @property {boolean} ready - Ready for data to be sent\r\n */\r\nexport type SessionPeer = {\r\n  id: string;\r\n  connection: Connection;\r\n  initiator: boolean;\r\n  ready: boolean;\r\n};\r\n\r\nexport type PeerData = any;\r\n\r\nexport type PeerReply = (id: string, data: PeerData, chunkId?: string) => void;\r\n\r\n/**\r\n *\r\n * Handles connections to multiple peers\r\n */\r\nclass Session extends EventEmitter {\r\n  /**\r\n   * The socket io connection\r\n   */\r\n  socket?: Socket;\r\n\r\n  /**\r\n   * A mapping of socket ids to session peers\r\n   *\r\n   * @type {Object.<string, SessionPeer>}\r\n   */\r\n  peers: Record<string, SessionPeer>;\r\n\r\n  get id() {\r\n    return this.socket?.id;\r\n  }\r\n\r\n  _iceServers: RTCIceServer[] = [];\r\n\r\n  // Store party id and password for reconnect\r\n  _gameId: string = \"\";\r\n  _password: string = \"\";\r\n\r\n  constructor() {\r\n    super();\r\n    this.peers = {};\r\n    // Signal connected peers of a closure on refresh\r\n    window.addEventListener(\"beforeunload\", this._handleUnload.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Connect to the websocket\r\n   */\r\n  async connect() {\r\n    try {\r\n      if (\r\n        !process.env.REACT_APP_BROKER_URL ||\r\n        process.env.REACT_APP_MAINTENANCE === \"true\"\r\n      ) {\r\n        this.emit(\"status\", \"offline\");\r\n        return;\r\n      }\r\n      this.socket = io(process.env.REACT_APP_BROKER_URL!, {\r\n        withCredentials: true,\r\n        parser: msgParser,\r\n        transports: [\"websocket\"],\r\n      });\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_BROKER_URL}/iceservers`\r\n      );\r\n      if (!response.ok) {\r\n        throw Error(\"Unable to fetch ICE servers\");\r\n      }\r\n      const data = await response.json();\r\n      this._iceServers = data.iceServers;\r\n\r\n      this.socket.on(\"player_joined\", this._handlePlayerJoined.bind(this));\r\n      this.socket.on(\"player_left\", this._handlePlayerLeft.bind(this));\r\n      this.socket.on(\"joined_game\", this._handleJoinedGame.bind(this));\r\n      this.socket.on(\"signal\", this._handleSignal.bind(this));\r\n      this.socket.on(\"auth_error\", this._handleAuthError.bind(this));\r\n      this.socket.on(\"game_expired\", this._handleGameExpired.bind(this));\r\n      this.socket.on(\"disconnect\", this._handleSocketDisconnect.bind(this));\r\n      this.socket.io.on(\"reconnect\", this._handleSocketReconnect.bind(this));\r\n      this.socket.on(\"force_update\", this._handleForceUpdate.bind(this));\r\n\r\n      this.emit(\"status\", \"ready\");\r\n    } catch (error: any) {\r\n      this.emit(\"status\", \"offline\");\r\n    }\r\n  }\r\n\r\n  disconnect() {\r\n    this.socket?.disconnect();\r\n  }\r\n\r\n  /**\r\n   * Send data to a single peer\r\n   *\r\n   * @param sessionId - The socket id of the player to send to\r\n   * @param eventId - The id of the event to send\r\n   */\r\n  sendTo(sessionId: string, eventId: string, data: PeerData, chunkId?: string) {\r\n    if (!(sessionId in this.peers)) {\r\n      if (!this._addPeer(sessionId, true)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (!this.peers[sessionId].ready) {\r\n      this.peers[sessionId].connection.once(\"connect\", () => {\r\n        this.peers[sessionId].connection.sendObject(\r\n          { id: eventId, data },\r\n          chunkId\r\n        );\r\n      });\r\n    } else {\r\n      this.peers[sessionId].connection.sendObject(\r\n        { id: eventId, data },\r\n        chunkId\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start streaming to a peer\r\n   *\r\n   * @param {string} sessionId - The socket id of the player to stream to\r\n   * @param {MediaStreamTrack} track\r\n   * @param {MediaStream} stream\r\n   */\r\n  startStreamTo(\r\n    sessionId: string,\r\n    track: MediaStreamTrack,\r\n    stream: MediaStream\r\n  ) {\r\n    if (!(sessionId in this.peers)) {\r\n      if (!this._addPeer(sessionId, true)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (!this.peers[sessionId].ready) {\r\n      this.peers[sessionId].connection.once(\"connect\", () => {\r\n        this.peers[sessionId].connection.addTrack(track, stream);\r\n      });\r\n    } else {\r\n      this.peers[sessionId].connection.addTrack(track, stream);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * End streaming to a peer\r\n   *\r\n   * @param {string} sessionId - The socket id of the player to stream to\r\n   * @param {MediaStreamTrack} track\r\n   * @param {MediaStream} stream\r\n   */\r\n  endStreamTo(sessionId: string, track: MediaStreamTrack, stream: MediaStream) {\r\n    if (sessionId in this.peers) {\r\n      this.peers[sessionId].connection.removeTrack(track, stream);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Join a party\r\n   *\r\n   * @param {string} gameId - the id of the party to join\r\n   * @param {string} password - the password of the party\r\n   */\r\n  async joinGame(gameId: string, password: string) {\r\n    if (typeof gameId !== \"string\" || typeof password !== \"string\") {\r\n      console.error(\r\n        \"Unable to join game: invalid game ID or password\",\r\n        gameId,\r\n        password\r\n      );\r\n      return;\r\n    }\r\n\r\n    this._gameId = gameId;\r\n    this._password = password;\r\n    this.socket?.emit(\r\n      \"join_game\",\r\n      gameId,\r\n      password,\r\n      process.env.REACT_APP_VERSION\r\n    );\r\n    this.emit(\"status\", \"joining\");\r\n  }\r\n\r\n  /**\r\n   * Add a new peer connection\r\n   * @param {string} id\r\n   * @param {boolean} initiator\r\n   * @returns {boolean} True if peer was added successfully\r\n   */\r\n  _addPeer(id: string, initiator: boolean): boolean {\r\n    try {\r\n      const connection = new Connection({\r\n        initiator,\r\n        trickle: true,\r\n        config: { iceServers: this._iceServers },\r\n      });\r\n\r\n      // Up max listeners to 100 to account for up to 100 tokens on load\r\n      connection.setMaxListeners && connection.setMaxListeners(100);\r\n\r\n      const peer = { id, connection, initiator, ready: false };\r\n\r\n      const reply: PeerReply = (id, data, chunkId) => {\r\n        peer.connection.sendObject({ id, data }, chunkId);\r\n      };\r\n\r\n      const handleSignal = (signal: SignalData) => {\r\n        this.socket?.emit(\"signal\", JSON.stringify({ to: peer.id, signal }));\r\n      };\r\n\r\n      const handleConnect = () => {\r\n        if (peer.id in this.peers) {\r\n          this.peers[peer.id].ready = true;\r\n        }\r\n        const peerConnectEvent: PeerConnectEvent = {\r\n          peer,\r\n          reply,\r\n        };\r\n        this.emit(\"peerConnect\", peerConnectEvent);\r\n      };\r\n\r\n      const handleDataComplete = (data: any) => {\r\n        const peerDataEvent: PeerDataEvent = {\r\n          peer,\r\n          id: data.id,\r\n          data: data.data,\r\n          reply: reply,\r\n        };\r\n        this.emit(\"peerData\", peerDataEvent);\r\n      };\r\n\r\n      const handleDataProgress = ({ id, count, total }: DataProgressEvent) => {\r\n        const peerDataProgressEvent: PeerDataProgressEvent = {\r\n          peer,\r\n          id,\r\n          count,\r\n          total,\r\n          reply,\r\n        };\r\n\r\n        this.emit(\"peerDataProgress\", peerDataProgressEvent);\r\n      };\r\n\r\n      const handleTrack = (track: MediaStreamTrack, stream: MediaStream) => {\r\n        const peerTrackAddedEvent: PeerTrackAddedEvent = {\r\n          peer,\r\n          track,\r\n          stream,\r\n        };\r\n        this.emit(\"peerTrackAdded\", peerTrackAddedEvent);\r\n        track.addEventListener(\"mute\", () => {\r\n          const peerTrackRemovedEvent: PeerTrackRemovedEvent = {\r\n            peer,\r\n            track,\r\n            stream,\r\n          };\r\n          this.emit(\"peerTrackRemoved\", peerTrackRemovedEvent);\r\n        });\r\n      };\r\n\r\n      const handleClose = () => {\r\n        const peerDisconnectEvent: PeerDisconnectEvent = { peer };\r\n        this.emit(\"peerDisconnect\", peerDisconnectEvent);\r\n        if (peer.id in this.peers) {\r\n          peer.connection.destroy();\r\n          this.peers = omit(this.peers, [peer.id]);\r\n        }\r\n      };\r\n\r\n      const handleError = (error: PeerError) => {\r\n        const peerErrorEvent: PeerErrorEvent = {\r\n          peer,\r\n          error,\r\n        };\r\n        this.emit(\"peerError\", peerErrorEvent);\r\n        if (peer.id in this.peers) {\r\n          peer.connection.destroy();\r\n          this.peers = omit(this.peers, [peer.id]);\r\n        }\r\n      };\r\n\r\n      peer.connection.on(\"signal\", handleSignal.bind(this));\r\n      peer.connection.on(\"connect\", handleConnect.bind(this));\r\n      peer.connection.on(\"dataComplete\", handleDataComplete.bind(this));\r\n      peer.connection.on(\"dataProgress\", handleDataProgress.bind(this));\r\n      peer.connection.on(\"track\", handleTrack.bind(this));\r\n      peer.connection.on(\"close\", handleClose.bind(this));\r\n      peer.connection.on(\"error\", handleError.bind(this));\r\n\r\n      this.peers[id] = peer;\r\n\r\n      return true;\r\n    } catch (error: any) {\r\n      this.emit(\"peerError\", { error });\r\n      for (let peer of Object.values(this.peers)) {\r\n        peer.connection && peer.connection.destroy();\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  _handleJoinedGame() {\r\n    this.emit(\"status\", \"joined\");\r\n  }\r\n\r\n  _handleGameExpired() {\r\n    this.emit(\"gameExpired\");\r\n  }\r\n\r\n  _handlePlayerJoined(id: string) {\r\n    this.emit(\"playerJoined\", id);\r\n  }\r\n\r\n  _handlePlayerLeft(id: string) {\r\n    this.emit(\"playerLeft\", id);\r\n    if (id in this.peers) {\r\n      this.peers[id].connection.destroy();\r\n      delete this.peers[id];\r\n    }\r\n  }\r\n\r\n  _handleSignal(data: { from: string; signal: SignalData }) {\r\n    const { from, signal } = data;\r\n    if (!(from in this.peers)) {\r\n      if (!this._addPeer(from, false)) {\r\n        return;\r\n      }\r\n    }\r\n    this.peers[from].connection.signal(signal);\r\n  }\r\n\r\n  _handleAuthError() {\r\n    this.emit(\"status\", \"auth\");\r\n  }\r\n\r\n  _handleUnload() {\r\n    for (let peer of Object.values(this.peers)) {\r\n      peer.connection && peer.connection.destroy();\r\n    }\r\n  }\r\n\r\n  _handleSocketDisconnect() {\r\n    this.emit(\"status\", \"reconnecting\");\r\n    for (let peer of Object.values(this.peers)) {\r\n      peer.connection && peer.connection.destroy();\r\n    }\r\n  }\r\n\r\n  _handleSocketReconnect() {\r\n    if (this.socket) this.socket.sendBuffer = [];\r\n    if (this._gameId) {\r\n      this.joinGame(this._gameId, this._password);\r\n    }\r\n  }\r\n\r\n  _handleForceUpdate() {\r\n    this.socket?.disconnect();\r\n    this.emit(\"status\", \"needs_update\");\r\n  }\r\n}\r\n\r\nexport type PeerConnectEvent = {\r\n  peer: SessionPeer;\r\n  reply: PeerReply;\r\n};\r\nexport type PeerConnectEventHandler = (event: PeerConnectEvent) => void;\r\n\r\nexport type PeerDataEvent = {\r\n  peer: SessionPeer;\r\n  id: string;\r\n  data: PeerData;\r\n  reply: PeerReply;\r\n};\r\nexport type PeerDataEventHandler = (event: PeerDataEvent) => void;\r\n\r\nexport type PeerDataProgressEvent = {\r\n  peer: SessionPeer;\r\n  id: string;\r\n  count: number;\r\n  total: number;\r\n  reply: PeerReply;\r\n};\r\nexport type PeerDataProgressEventHandler = (\r\n  event: PeerDataProgressEvent\r\n) => void;\r\n\r\nexport type PeerTrackAddedEvent = {\r\n  peer: SessionPeer;\r\n  track: MediaStreamTrack;\r\n  stream: MediaStream;\r\n};\r\nexport type PeerTrackAddedEventHandler = (event: PeerTrackAddedEvent) => void;\r\n\r\nexport type PeerTrackRemovedEvent = {\r\n  peer: SessionPeer;\r\n  track: MediaStreamTrack;\r\n  stream: MediaStream;\r\n};\r\nexport type PeerTrackRemovedEventHandler = (\r\n  event: PeerTrackRemovedEvent\r\n) => void;\r\n\r\nexport type PeerDisconnectEvent = { peer: SessionPeer };\r\nexport type PeerDisconnectEventHandler = (event: PeerDisconnectEvent) => void;\r\n\r\nexport type PeerError = Error & { code: string };\r\nexport type PeerErrorEvent = { peer: SessionPeer; error: PeerError };\r\nexport type PeerErrorEventHandler = (event: PeerErrorEvent) => void;\r\n\r\nexport type SessionStatus =\r\n  | \"ready\"\r\n  | \"joining\"\r\n  | \"joined\"\r\n  | \"offline\"\r\n  | \"reconnecting\"\r\n  | \"auth\"\r\n  | \"needs_update\";\r\nexport type SessionStatusHandler = (status: SessionStatus) => void;\r\n\r\nexport type PlayerJoinedHandler = (id: string) => void;\r\nexport type PlayerLeftHandler = (id: string) => void;\r\nexport type GameExpiredHandler = () => void;\r\n\r\ndeclare interface Session {\r\n  /** Peer Connect Event - A peer has connected */\r\n  on(event: \"peerConnect\", listener: PeerConnectEventHandler): this;\r\n  /** Peer Data Event - Data received by a peer */\r\n  on(event: \"peerData\", listener: PeerDataEventHandler): this;\r\n  /** Peer Data Progress Event - Part of some data received by a peer */\r\n  on(event: \"peerDataProgress\", listener: PeerDataProgressEventHandler): this;\r\n  /** Peer Track Added Event - A `MediaStreamTrack` was added by a peer */\r\n  on(event: \"peerTrackAdded\", listener: PeerTrackAddedEventHandler): this;\r\n  /** Peer Track Removed Event - A `MediaStreamTrack` was removed by a peer */\r\n  on(event: \"peerTrackRemoved\", listener: PeerTrackRemovedEventHandler): this;\r\n  /** Peer Disconnect Event - A peer has disconnected */\r\n  on(event: \"peerDisconnect\", listener: PeerDisconnectEventHandler): this;\r\n  /** Peer Error Event - An error occured with a peer connection */\r\n  on(event: \"peerError\", listener: PeerErrorEventHandler): this;\r\n  /** Session Status Event - Status of the session has changed */\r\n  on(event: \"status\", listener: SessionStatusHandler): this;\r\n  /** Player Joined Event - A player has joined the game */\r\n  on(event: \"playerJoined\", listener: PlayerJoinedHandler): this;\r\n  /** Player Left Event - A player has left the game */\r\n  on(event: \"playerLeft\", listener: PlayerLeftHandler): this;\r\n  /** Game Expired Event - A joining game has expired */\r\n  on(event: \"gameExpired\", listener: GameExpiredHandler): this;\r\n}\r\n\r\nexport default Session;\r\n","// Arquivo: owlbear-rodeo-legacy/src/routes/Game.tsx\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Flex, Box, Text } from \"theme-ui\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Konva from \"konva\";\r\n\r\nimport Banner from \"../components/banner/Banner\";\r\nimport ReconnectBanner from \"../components/banner/ReconnectBanner\";\r\nimport OfflineBanner from \"../components/banner/OfflineBanner\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\nimport Link from \"../components/Link\";\r\nimport MapLoadingOverlay from \"../components/map/MapLoadingOverlay\";\r\nimport UpgradingLoadingOverlay from \"../components/UpgradingLoadingOverlay\";\r\n\r\nimport AuthModal from \"../modals/AuthModal\";\r\nimport GameExpiredModal from \"../modals/GameExpiredModal\";\r\nimport ForceUpdateModal from \"../modals/ForceUpdateModal\";\r\nimport MaintenanceModal from \"../modals/MaintenanceModal\";\r\n\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { MapStageProvider } from \"../contexts/MapStageContext\";\r\nimport { useDatabase } from \"../contexts/DatabaseContext\";\r\nimport { PlayerProvider } from \"../contexts/PlayerContext\";\r\nimport { PartyProvider } from \"../contexts/PartyContext\";\r\nimport { AssetsProvider, AssetURLsProvider } from \"../contexts/AssetsContext\";\r\nimport { MapDataProvider } from \"../contexts/MapDataContext\";\r\nimport { TokenDataProvider } from \"../contexts/TokenDataContext\";\r\nimport { MapLoadingProvider } from \"../contexts/MapLoadingContext\";\r\n\r\nimport NetworkedMapAndTokens from \"../network/NetworkedMapAndTokens\";\r\nimport NetworkedParty from \"../network/NetworkedParty\";\r\n\r\nimport Session, { PeerErrorEvent, SessionStatus } from \"../network/Session\";\r\n\r\nfunction Game() {\r\n  const { id: gameId }: { id: string } = useParams();\r\n  const { password } = useAuth();\r\n  const { databaseStatus, database } = useDatabase();\r\n\r\n  const [session] = useState(new Session());\r\n  const [sessionStatus, setSessionStatus] = useState<SessionStatus>();\r\n\r\n  const [maintenance, setMaintenance] = useState(\r\n    process.env.REACT_APP_MAINTENANCE === \"true\"\r\n  );\r\n\r\n  // ========== SOBRESCREVER NICKNAME DO LARAVEL ==========\r\n  useEffect(() => {\r\n    async function overrideNickname() {\r\n      if (database && databaseStatus === \"loaded\") {\r\n        try {\r\n          const laravelName = localStorage.getItem('owlbear_user_name');\r\n          \r\n          if (laravelName) {\r\n            console.log(\" Sobrescrevendo nickname no IndexedDB:\", laravelName);\r\n            \r\n            await database.table(\"user\").put({\r\n              key: \"nickname\",\r\n              value: laravelName\r\n            });\r\n            \r\n            console.log(\" Nickname sobrescrito com sucesso!\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\" Erro ao sobrescrever nickname:\", error);\r\n        }\r\n      }\r\n    }\r\n\r\n    overrideNickname();\r\n  }, [database, databaseStatus]);\r\n  // ====================================================\r\n\r\n  // Handle session errors\r\n  const [peerError, setPeerError] = useState<string | null>(null);\r\n  useEffect(() => {\r\n    function handlePeerError({ error }: PeerErrorEvent) {\r\n      if (error.code === \"ERR_WEBRTC_SUPPORT\") {\r\n        setPeerError(\"WebRTC not supported.\");\r\n      } else if (error.code === \"ERR_CREATE_OFFER\") {\r\n        setPeerError(\"Unable to connect to party.\");\r\n      }\r\n    }\r\n    session.on(\"peerError\", handlePeerError);\r\n    return () => {\r\n      session.off(\"peerError\", handlePeerError);\r\n    };\r\n  }, [session]);\r\n\r\n  useEffect(() => {\r\n    function handleStatus(status: SessionStatus) {\r\n      setSessionStatus(status);\r\n    }\r\n\r\n    session.on(\"status\", handleStatus);\r\n\r\n    return () => {\r\n      session.off(\"status\", handleStatus);\r\n    };\r\n  }, [session]);\r\n\r\n  const [gameExpired, setGameExpired] = useState(false);\r\n  useEffect(() => {\r\n    function handleGameExpired() {\r\n      setGameExpired(true);\r\n    }\r\n\r\n    session.on(\"gameExpired\", handleGameExpired);\r\n\r\n    return () => {\r\n      session.off(\"gameExpired\", handleGameExpired);\r\n    };\r\n  }, [session]);\r\n\r\n  // Join game\r\n  useEffect(() => {\r\n    if (\r\n      sessionStatus === \"ready\" &&\r\n      (databaseStatus === \"loaded\" || databaseStatus === \"disabled\")\r\n    ) {\r\n      session.joinGame(gameId, password);\r\n    }\r\n  }, [gameId, password, databaseStatus, session, sessionStatus]);\r\n\r\n  function handleAuthSubmit(newPassword: string) {\r\n    if (databaseStatus === \"loaded\" || databaseStatus === \"disabled\") {\r\n      session.joinGame(gameId, newPassword);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function connect() {\r\n      await session.connect();\r\n    }\r\n    connect();\r\n\r\n    return () => {\r\n      session.disconnect();\r\n    };\r\n  }, [session]);\r\n\r\n  // A ref to the Konva stage\r\n  // the ref will be assigned in the MapInteraction component\r\n  const mapStageRef = useRef<Konva.Stage | null>(null);\r\n\r\n  return (\r\n    <AssetsProvider>\r\n      <AssetURLsProvider>\r\n        <MapLoadingProvider>\r\n          <MapDataProvider>\r\n            <TokenDataProvider>\r\n              <PlayerProvider session={session}>\r\n                <PartyProvider session={session}>\r\n                  <MapStageProvider value={mapStageRef}>\r\n                    <Flex\r\n                      sx={{\r\n                        justifyContent: \"space-between\",\r\n                        flexGrow: 1,\r\n                        height: \"100%\",\r\n                      }}\r\n                    >\r\n                      <NetworkedParty session={session} gameId={gameId} />\r\n                      <NetworkedMapAndTokens session={session} />\r\n                    </Flex>\r\n                    <Banner\r\n                      isOpen={!!peerError}\r\n                      onRequestClose={() => setPeerError(null)}\r\n                    >\r\n                      <Box p={1}>\r\n                        <Text as=\"p\" variant=\"body2\">\r\n                          {peerError} See <Link to=\"/faq#connection\">FAQ</Link>{\" \"}\r\n                          for more information.\r\n                        </Text>\r\n                      </Box>\r\n                    </Banner>\r\n                    <OfflineBanner isOpen={sessionStatus === \"offline\"} />\r\n                    <ReconnectBanner\r\n                      isOpen={sessionStatus === \"reconnecting\"}\r\n                    />\r\n                    <AuthModal\r\n                      isOpen={sessionStatus === \"auth\"}\r\n                      onSubmit={handleAuthSubmit}\r\n                    />\r\n                    <GameExpiredModal\r\n                      isOpen={gameExpired}\r\n                      onRequestClose={() => setGameExpired(false)}\r\n                    />\r\n                    <ForceUpdateModal\r\n                      isOpen={sessionStatus === \"needs_update\"}\r\n                    />\r\n                    {!sessionStatus && <LoadingOverlay />}\r\n                    {sessionStatus && databaseStatus === \"upgrading\" && (\r\n                      <UpgradingLoadingOverlay />\r\n                    )}\r\n                    <MaintenanceModal\r\n                      isOpen={maintenance}\r\n                      onRequestClose={() => setMaintenance(false)}\r\n                    />\r\n                    <MapLoadingOverlay />\r\n                  </MapStageProvider>\r\n                </PartyProvider>\r\n              </PlayerProvider>\r\n            </TokenDataProvider>\r\n          </MapDataProvider>\r\n        </MapLoadingProvider>\r\n      </AssetURLsProvider>\r\n    </AssetsProvider>\r\n  );\r\n}\r\n\r\nexport default Game;","// Arquivo: owlbear-rodeo-legacy/src/routes/LaravelGame.tsx\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport LoadingOverlay from \"../components/LoadingOverlay\";\r\nimport { api } from \"../api/client\";\r\n\r\n/**\r\n * Componente que automaticamente inicializa o jogo\r\n * quando carregado via Laravel\r\n */\r\nfunction LaravelGame() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    async function autoStart() {\r\n      try {\r\n        // Tenta ler da query string primeiro\r\n        const params = new URLSearchParams(location.search);\r\n        let sessionId = params.get('sessionId');\r\n        let userId = params.get('userId');\r\n        let role = params.get('role');\r\n\r\n        // Fallback para window.OWLBEAR_CONFIG\r\n        if (!sessionId) {\r\n          const config = (window as any).OWLBEAR_CONFIG;\r\n          if (config) {\r\n            sessionId = config.sessionId;\r\n            userId = config.userId;\r\n            role = config.role;\r\n          }\r\n        }\r\n        \r\n        if (!sessionId) {\r\n          console.error(\"sessionId no encontrado, redirecionando para home\");\r\n          history.push(\"/\");\r\n          return;\r\n        }\r\n\r\n        console.log(\"Iniciando sesso automtica:\", { sessionId, userId, role });\r\n\r\n        // Busca ou cria o game no Laravel\r\n        const session = await api.getSession(sessionId);\r\n        \r\n        console.log(\"Sesso criada/encontrada:\", session);\r\n\r\n        // Salva os dados no localStorage para uso posterior\r\n        if (userId) {\r\n          localStorage.setItem('owlbear_user_id', userId);\r\n        }\r\n        if (role) {\r\n          localStorage.setItem('owlbear_role', role);\r\n        }\r\n\r\n        // Redireciona para a rota do jogo com o UUID real\r\n        history.push(`/game/${session.id}`);\r\n        \r\n      } catch (error) {\r\n        console.error(\"Erro ao iniciar sesso:\", error);\r\n        // Em caso de erro, mostra na tela por 3 segundos antes de voltar\r\n        alert(`Erro ao conectar: ${error}`);\r\n        setTimeout(() => {\r\n          history.push(\"/\");\r\n        }, 3000);\r\n      }\r\n    }\r\n\r\n    autoStart();\r\n  }, [history, location]);\r\n\r\n  return <LoadingOverlay />;\r\n}\r\n\r\nexport default LaravelGame;","import { Flex, Text, Link as ExternalLink } from \"theme-ui\";\r\n\r\nimport Footer from \"../components/Footer\";\r\n\r\nfunction About() {\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        minHeight: \"100%\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          maxWidth: \"350px\",\r\n          flexGrow: 1,\r\n        }}\r\n        m={4}\r\n      >\r\n        <Text my={2} variant=\"heading\" as=\"h1\" sx={{ fontSize: 5 }}>\r\n          About <span aria-hidden=\"true\"></span>\r\n        </Text>\r\n        <Text my={1} mt={2} variant=\"heading\" as=\"h3\" sx={{ fontSize: 3 }}>\r\n          The Goal\r\n        </Text>\r\n        <Text variant=\"body2\" as=\"p\">\r\n          Owlbear Rodeo is an attempt to make a web app to run tabletop\r\n          encounters without the complicated setup process needed for other\r\n          VTTs.\r\n        </Text>\r\n        <Text my={1} mt={2} variant=\"heading\" as=\"h3\" sx={{ fontSize: 3 }}>\r\n          The People\r\n        </Text>\r\n        <Text variant=\"body2\" as=\"p\">\r\n          Made by two people in Melbourne, Australia.{\" \"}\r\n          <ExternalLink href=\"https://mitchmccaffrey.com/\">Mitch</ExternalLink>{\" \"}\r\n          and{\" \"}\r\n          <ExternalLink href=\"https://twitter.com/nthouliss\">\r\n            Nicola\r\n          </ExternalLink>{\" \"}\r\n          were looking for an easy way to continue their d{\"&\"}d campaign as\r\n          in-person interaction becomes harder during the COVID-19 crisis.\r\n        </Text>\r\n        <Text my={1} mt={2} variant=\"heading\" as=\"h3\" sx={{ fontSize: 3 }}>\r\n          Contact\r\n        </Text>\r\n        <Text variant=\"body2\" as=\"p\">\r\n          For questions or feedback email{\" \"}\r\n          <ExternalLink href=\"mailto:support@owlbear.rodeo\">\r\n            support@owlbear.rodeo\r\n          </ExternalLink>\r\n        </Text>\r\n      </Flex>\r\n      <Footer />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default About;\r\n","import defaultMaps from \"./DefaultMaps.mp4\";\r\nimport customMaps from \"./CustomMaps.mp4\";\r\nimport editingMapsAdvanced from \"./EditingMapsAdvanced.jpg\";\r\nimport resetAndRemovingMaps from \"./ResetAndRemovingMaps.mp4\";\r\nimport usingDrawing from \"./UsingDrawing.mp4\";\r\nimport openDiceTray from \"./OpenDiceTray.mp4\";\r\nimport diceRolling from \"./DiceRolling.mp4\";\r\nimport diceStyles from \"./DiceStyles.mp4\";\r\nimport diceTraySize from \"./DiceTraySize.mp4\";\r\nimport usingFog from \"./UsingFog.mp4\";\r\nimport usingMeasure from \"./UsingMeasure.mp4\";\r\nimport defaultTokens from \"./DefaultTokens.mp4\";\r\nimport workingWithTokens from \"./WorkingWithTokens.mp4\";\r\nimport deletingTokens from \"./DeletingTokens.mp4\";\r\nimport customTokens from \"./CustomTokens.mp4\";\r\nimport tokenEditor from \"./TokenEditor.mp4\";\r\nimport addPartyMember from \"./AddPartyMember.mp4\";\r\nimport changeNickname from \"./ChangeNickname.mp4\";\r\nimport sharingAudio from \"./SharingAudio.mp4\";\r\nimport startGame from \"./StartGame.mp4\";\r\nimport diceSharing from \"./DiceSharing.mp4\";\r\nimport usingTimer from \"./UsingTimer.mp4\";\r\nimport usingPointer from \"./UsingPointer.mp4\";\r\nimport mapEditor from \"./MapEditor.mp4\";\r\nimport filteringMaps from \"./FilteringMaps.mp4\";\r\nimport groupAndRemovingTokens from \"./GroupAndRemovingTokens.mp4\";\r\nimport filteringTokens from \"./FilteringTokens.mp4\";\r\nimport usingNotes from \"./UsingNotes.mp4\";\r\nimport settings from \"./Settings.jpg\";\r\n\r\nconst assets = {\r\n  defaultMaps,\r\n  customMaps,\r\n  editingMapsAdvanced,\r\n  resetAndRemovingMaps,\r\n  usingDrawing,\r\n  openDiceTray,\r\n  diceRolling,\r\n  diceStyles,\r\n  diceTraySize,\r\n  usingFog,\r\n  usingMeasure,\r\n  defaultTokens,\r\n  workingWithTokens,\r\n  deletingTokens,\r\n  customTokens,\r\n  tokenEditor,\r\n  addPartyMember,\r\n  changeNickname,\r\n  sharingAudio,\r\n  startGame,\r\n  diceSharing,\r\n  usingTimer,\r\n  usingPointer,\r\n  mapEditor,\r\n  filteringMaps,\r\n  groupAndRemovingTokens,\r\n  filteringTokens,\r\n  usingNotes,\r\n  settings,\r\n};\r\n\r\nexport default assets;\r\n","export default __webpack_public_path__ + \"static/media/DefaultMaps.4c4ef41e.mp4\";","export default __webpack_public_path__ + \"static/media/CustomMaps.44db03b2.mp4\";","export default __webpack_public_path__ + \"static/media/EditingMapsAdvanced.3593f8ba.jpg\";","export default __webpack_public_path__ + \"static/media/ResetAndRemovingMaps.23d7cccd.mp4\";","export default __webpack_public_path__ + \"static/media/UsingDrawing.f91521d3.mp4\";","export default __webpack_public_path__ + \"static/media/OpenDiceTray.c2970165.mp4\";","export default __webpack_public_path__ + \"static/media/DiceRolling.509696e0.mp4\";","export default __webpack_public_path__ + \"static/media/DiceStyles.db684041.mp4\";","export default __webpack_public_path__ + \"static/media/DiceTraySize.1aabefbc.mp4\";","export default __webpack_public_path__ + \"static/media/UsingFog.50a52450.mp4\";","export default __webpack_public_path__ + \"static/media/UsingMeasure.348878de.mp4\";","export default __webpack_public_path__ + \"static/media/DefaultTokens.3ce0f414.mp4\";","export default __webpack_public_path__ + \"static/media/WorkingWithTokens.2e35df9d.mp4\";","export default __webpack_public_path__ + \"static/media/DeletingTokens.994008cb.mp4\";","export default __webpack_public_path__ + \"static/media/CustomTokens.d5ec3482.mp4\";","export default __webpack_public_path__ + \"static/media/TokenEditor.068ab35d.mp4\";","export default __webpack_public_path__ + \"static/media/AddPartyMember.2b8d6b49.mp4\";","export default __webpack_public_path__ + \"static/media/ChangeNickname.b4d5d37e.mp4\";","export default __webpack_public_path__ + \"static/media/SharingAudio.70b067dc.mp4\";","export default __webpack_public_path__ + \"static/media/StartGame.47d4335e.mp4\";","export default __webpack_public_path__ + \"static/media/DiceSharing.c64f4786.mp4\";","export default __webpack_public_path__ + \"static/media/UsingTimer.31f46398.mp4\";","export default __webpack_public_path__ + \"static/media/UsingPointer.fd040959.mp4\";","export default __webpack_public_path__ + \"static/media/MapEditor.6f401478.mp4\";","export default __webpack_public_path__ + \"static/media/FilteringMaps.52240774.mp4\";","export default __webpack_public_path__ + \"static/media/GroupAndRemovingTokens.df37439d.mp4\";","export default __webpack_public_path__ + \"static/media/FilteringTokens.ef3c2a7f.mp4\";","export default __webpack_public_path__ + \"static/media/UsingNotes.bd7e047f.mp4\";","export default __webpack_public_path__ + \"static/media/Settings.64c09861.jpg\";","import { Flex, Text, Box } from \"theme-ui\";\r\nimport raw from \"raw.macro\";\r\n\r\nimport Footer from \"../components/Footer\";\r\nimport Markdown from \"../components/Markdown\";\r\n\r\nimport assets from \"../docs/assets\";\r\n\r\nconst database = raw(\"../docs/faq/database.md\");\r\nconst maps = raw(\"../docs/faq/maps.md\");\r\nconst audioSharing = raw(\"../docs/faq/audio-sharing.md\");\r\nconst general = raw(\"../docs/faq/general.md\");\r\nconst connection = raw(\"../docs/faq/connection.md\");\r\n\r\nfunction FAQ() {\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        minHeight: \"100%\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          maxWidth: \"500px\",\r\n          flexGrow: 1,\r\n        }}\r\n        m={4}\r\n      >\r\n        <Text mb={2} variant=\"heading\" as=\"h1\" sx={{ fontSize: 5 }}>\r\n          Frequently Asked Questions\r\n        </Text>\r\n        <Box my={1} id=\"general\">\r\n          <Markdown source={general} assets={assets} />\r\n        </Box>\r\n        <Box my={1} id=\"maps\">\r\n          <Markdown source={maps} assets={assets} />\r\n        </Box>\r\n        <Box my={1} id=\"audio-sharing\">\r\n          <Markdown source={audioSharing} assets={assets} />\r\n        </Box>\r\n        <Box my={1} id=\"database\">\r\n          <Markdown source={database} assets={assets} />\r\n        </Box>\r\n        <Box my={1} id=\"connection\">\r\n          <Markdown source={connection} assets={assets} />\r\n        </Box>\r\n      </Flex>\r\n      <Footer />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default FAQ;\r\n","import React, { useState } from \"react\";\r\nimport { Box, Flex, Text, IconButton, Divider } from \"theme-ui\";\r\n\r\nimport ExpandMoreIcon from \"../icons/ExpandMoreIcon\";\r\n\r\ntype AccordianProps = {\r\n  heading: string;\r\n  children: React.ReactNode;\r\n  defaultOpen: boolean;\r\n};\r\n\r\nfunction Accordion({ heading, children, defaultOpen }: AccordianProps) {\r\n  const [open, setOpen] = useState(defaultOpen);\r\n\r\n  return (\r\n    <Box sx={{ width: \"100%\" }}>\r\n      <Flex\r\n        sx={{ justifyContent: \"space-between\" }}\r\n        onClick={() => setOpen(!open)}\r\n        my={1}\r\n      >\r\n        <Text as=\"h1\" variant=\"heading\" sx={{ fontSize: 5 }}>\r\n          {heading}\r\n        </Text>\r\n        <IconButton\r\n          title={open ? \"Show Less\" : \"Show More\"}\r\n          aria-label={open ? \"Show Less\" : \"Show More\"}\r\n          sx={{ transform: open ? \"rotate(0deg)\" : \"rotate(180deg)\" }}\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n      </Flex>\r\n      {open && children}\r\n      <Divider bg=\"text\" sx={{ opacity: 0.25 }} />\r\n    </Box>\r\n  );\r\n}\r\n\r\nAccordion.defaultProps = {\r\n  defaultOpen: false,\r\n};\r\n\r\nexport default Accordion;\r\n","import { Flex, Text } from \"theme-ui\";\r\nimport raw from \"raw.macro\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport Footer from \"../components/Footer\";\r\nimport Markdown from \"../components/Markdown\";\r\nimport Accordion from \"../components/Accordion\";\r\n\r\nconst v110 = raw(\"../docs/releaseNotes/v1.1.0.md\");\r\nconst v120 = raw(\"../docs/releaseNotes/v1.2.0.md\");\r\nconst v121 = raw(\"../docs/releaseNotes/v1.2.1.md\");\r\nconst v130 = raw(\"../docs/releaseNotes/v1.3.0.md\");\r\nconst v131 = raw(\"../docs/releaseNotes/v1.3.1.md\");\r\nconst v132 = raw(\"../docs/releaseNotes/v1.3.2.md\");\r\nconst v133 = raw(\"../docs/releaseNotes/v1.3.3.md\");\r\nconst v140 = raw(\"../docs/releaseNotes/v1.4.0.md\");\r\nconst v141 = raw(\"../docs/releaseNotes/v1.4.1.md\");\r\nconst v142 = raw(\"../docs/releaseNotes/v1.4.2.md\");\r\nconst v150 = raw(\"../docs/releaseNotes/v1.5.0.md\");\r\nconst v151 = raw(\"../docs/releaseNotes/v1.5.1.md\");\r\nconst v152 = raw(\"../docs/releaseNotes/v1.5.2.md\");\r\nconst v160 = raw(\"../docs/releaseNotes/v1.6.0.md\");\r\nconst v161 = raw(\"../docs/releaseNotes/v1.6.1.md\");\r\nconst v162 = raw(\"../docs/releaseNotes/v1.6.2.md\");\r\nconst v170 = raw(\"../docs/releaseNotes/v1.7.0.md\");\r\nconst v180 = raw(\"../docs/releaseNotes/v1.8.0.md\");\r\nconst v181 = raw(\"../docs/releaseNotes/v1.8.1.md\");\r\nconst v190 = raw(\"../docs/releaseNotes/v1.9.0.md\");\r\nconst v1100 = raw(\"../docs/releaseNotes/v1.10.0.md\");\r\nconst v1101 = raw(\"../docs/releaseNotes/v1.10.1.md\");\r\nconst v1102 = raw(\"../docs/releaseNotes/v1.10.2.md\");\r\n\r\nfunction ReleaseNotes() {\r\n  const location = useLocation();\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        minHeight: \"100%\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          maxWidth: \"564px\",\r\n          flexGrow: 1,\r\n          width: \"100%\",\r\n        }}\r\n        p={4}\r\n      >\r\n        <Text mb={2} variant=\"heading\" as=\"h1\" sx={{ fontSize: 5 }}>\r\n          Release Notes\r\n        </Text>\r\n        <div id=\"v1102\">\r\n          <Accordion heading=\"v1.10.2\" defaultOpen>\r\n            <Markdown source={v1102} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v1101\">\r\n          <Accordion heading=\"v1.10.1\" defaultOpen={location.hash === \"#v1101\"}>\r\n            <Markdown source={v1101} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v1100\">\r\n          <Accordion heading=\"v1.10.0\" defaultOpen={location.hash === \"#v1100\"}>\r\n            <Markdown source={v1100} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v190\">\r\n          <Accordion heading=\"v1.9.0\" defaultOpen={location.hash === \"#v190\"}>\r\n            <Markdown source={v190} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v181\">\r\n          <Accordion heading=\"v1.8.1\" defaultOpen={location.hash === \"#v181\"}>\r\n            <Markdown source={v181} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v180\">\r\n          <Accordion heading=\"v1.8.0\" defaultOpen={location.hash === \"#v180\"}>\r\n            <Markdown source={v180} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v170\">\r\n          <Accordion heading=\"v1.7.0\" defaultOpen={location.hash === \"#v170\"}>\r\n            <Markdown source={v170} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v162\">\r\n          <Accordion heading=\"v1.6.2\" defaultOpen={location.hash === \"#v162\"}>\r\n            <Markdown source={v162} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v161\">\r\n          <Accordion heading=\"v1.6.1\" defaultOpen={location.hash === \"#v161\"}>\r\n            <Markdown source={v161} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v160\">\r\n          <Accordion heading=\"v1.6.0\" defaultOpen={location.hash === \"#v160\"}>\r\n            <Markdown source={v160} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v152\">\r\n          <Accordion heading=\"v1.5.2\" defaultOpen={location.hash === \"#v152\"}>\r\n            <Markdown source={v152} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v151\">\r\n          <Accordion heading=\"v1.5.1\" defaultOpen={location.hash === \"#v151\"}>\r\n            <Markdown source={v151} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v150\">\r\n          <Accordion heading=\"v1.5.0\" defaultOpen={location.hash === \"#v150\"}>\r\n            <Markdown source={v150} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v142\">\r\n          <Accordion heading=\"v1.4.2\" defaultOpen={location.hash === \"#v142\"}>\r\n            <Markdown source={v142} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v141\">\r\n          <Accordion heading=\"v1.4.1\" defaultOpen={location.hash === \"#v141\"}>\r\n            <Markdown source={v141} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v140\">\r\n          <Accordion heading=\"v1.4.0\" defaultOpen={location.hash === \"#v140\"}>\r\n            <Markdown source={v140} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v133\">\r\n          <Accordion heading=\"v1.3.3\" defaultOpen={location.hash === \"#v133\"}>\r\n            <Markdown source={v133} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v132\">\r\n          <Accordion heading=\"v1.3.2\" defaultOpen={location.hash === \"#v132\"}>\r\n            <Markdown source={v132} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v131\">\r\n          <Accordion heading=\"v1.3.1\" defaultOpen={location.hash === \"#v131\"}>\r\n            <Markdown source={v131} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v130\">\r\n          <Accordion heading=\"v1.3.0\" defaultOpen={location.hash === \"#v130\"}>\r\n            <Markdown source={v130} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v121\">\r\n          <Accordion heading=\"v1.2.1\" defaultOpen={location.hash === \"#v121\"}>\r\n            <Markdown source={v121} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v120\">\r\n          <Accordion heading=\"v1.2.0\" defaultOpen={location.hash === \"#v120\"}>\r\n            <Markdown source={v120} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"v110\">\r\n          <Accordion heading=\"v1.1.0\" defaultOpen={location.hash === \"#v110\"}>\r\n            <Markdown source={v110} />\r\n          </Accordion>\r\n        </div>\r\n      </Flex>\r\n      <Footer />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default ReleaseNotes;\r\n","import { Flex, Text } from \"theme-ui\";\r\nimport raw from \"raw.macro\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport Footer from \"../components/Footer\";\r\nimport Markdown from \"../components/Markdown\";\r\nimport Accordion from \"../components/Accordion\";\r\n\r\nimport assets from \"../docs/assets\";\r\n\r\nconst overview = raw(\"../docs/howTo/overview.md\");\r\nconst startingAndJoining = raw(\"../docs/howTo/startingAndJoining.md\");\r\nconst sharingMaps = raw(\"../docs/howTo/sharingMaps.md\");\r\nconst usingTokens = raw(\"../docs/howTo/usingTokens.md\");\r\nconst usingDrawing = raw(\"../docs/howTo/usingDrawing.md\");\r\nconst usingDice = raw(\"../docs/howTo/usingDice.md\");\r\nconst usingFog = raw(\"../docs/howTo/usingFog.md\");\r\nconst usingMeasure = raw(\"../docs/howTo/usingMeasure.md\");\r\nconst sharingAudio = raw(\"../docs/howTo/sharingAudio.md\");\r\nconst usingPointer = raw(\"../docs/howTo/usingPointer.md\");\r\nconst usingTimer = raw(\"../docs/howTo/usingTimer.md\");\r\nconst usingNotes = raw(\"../docs/howTo/usingNotes.md\");\r\nconst shortcuts = raw(\"../docs/howTo/shortcuts.md\");\r\nconst settings = raw(\"../docs/howTo/settings.md\");\r\n\r\nfunction HowTo() {\r\n  const location = useLocation();\r\n  return (\r\n    <Flex\r\n      sx={{\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        minHeight: \"100%\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Flex\r\n        sx={{\r\n          flexDirection: \"column\",\r\n          maxWidth: \"564px\",\r\n          flexGrow: 1,\r\n          width: \"100%\",\r\n        }}\r\n        p={4}\r\n      >\r\n        <Text mb={2} variant=\"heading\" as=\"h1\" sx={{ fontSize: 5 }}>\r\n          How To\r\n        </Text>\r\n        <div id=\"overview\">\r\n          <Markdown source={overview} assets={assets} />\r\n        </div>\r\n        <div id=\"startingAndJoining\">\r\n          <Accordion\r\n            heading=\"Starting and Joining a Game\"\r\n            defaultOpen={location.hash === \"#startingAndJoining\"}\r\n          >\r\n            <Markdown source={startingAndJoining} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"sharingMaps\">\r\n          <Accordion\r\n            heading=\"Sharing a Map\"\r\n            defaultOpen={location.hash === \"#sharingMaps\"}\r\n          >\r\n            <Markdown source={sharingMaps} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingTokens\">\r\n          <Accordion\r\n            heading=\"Using Tokens\"\r\n            defaultOpen={location.hash === \"#usingTokens\"}\r\n          >\r\n            <Markdown source={usingTokens} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingDrawing\">\r\n          <Accordion\r\n            heading=\"Using the Drawing Tool\"\r\n            defaultOpen={location.hash === \"#usingDrawing\"}\r\n          >\r\n            <Markdown source={usingDrawing} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingDice\">\r\n          <Accordion\r\n            heading=\"Using Dice\"\r\n            defaultOpen={location.hash === \"#usingDice\"}\r\n          >\r\n            <Markdown source={usingDice} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingFog\">\r\n          <Accordion\r\n            heading=\"Using the Fog Tool\"\r\n            defaultOpen={location.hash === \"#usingFog\"}\r\n          >\r\n            <Markdown source={usingFog} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingMeasure\">\r\n          <Accordion\r\n            heading=\"Using the Measure Tool\"\r\n            defaultOpen={location.hash === \"#usingMeasure\"}\r\n          >\r\n            <Markdown source={usingMeasure} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingPointer\">\r\n          <Accordion\r\n            heading=\"Using the Pointer Tool\"\r\n            defaultOpen={location.hash === \"#usingPointer\"}\r\n          >\r\n            <Markdown source={usingPointer} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingNotes\">\r\n          <Accordion\r\n            heading=\"Using the Notes Tool\"\r\n            defaultOpen={location.hash === \"#usingNotes\"}\r\n          >\r\n            <Markdown source={usingNotes} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"usingTimer\">\r\n          <Accordion\r\n            heading=\"Using the Countdown Timer\"\r\n            defaultOpen={location.hash === \"#usingTimer\"}\r\n          >\r\n            <Markdown source={usingTimer} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"settings\">\r\n          <Accordion\r\n            heading=\"Settings\"\r\n            defaultOpen={location.hash === \"#settings\"}\r\n          >\r\n            <Markdown source={settings} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"sharingAudio\">\r\n          <Accordion\r\n            heading=\"Sharing Audio (Experimental)\"\r\n            defaultOpen={location.hash === \"#sharingAudio\"}\r\n          >\r\n            <Markdown source={sharingAudio} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n        <div id=\"shortcuts\">\r\n          <Accordion\r\n            heading=\"Shortcuts\"\r\n            defaultOpen={location.hash === \"#shortcuts\"}\r\n          >\r\n            <Markdown source={shortcuts} assets={assets} />\r\n          </Accordion>\r\n        </div>\r\n      </Flex>\r\n      <Footer />\r\n    </Flex>\r\n  );\r\n}\r\n\r\nexport default HowTo;\r\n","import React from \"react\";\r\nimport { Box, Text } from \"theme-ui\";\r\nimport { AppearanceTypes, ToastProvider as DefaultToastProvider } from \"react-toast-notifications\";\r\n\r\nfunction getToastAppearance(appearance: AppearanceTypes) {\r\n  let colour = \"overlay\"\r\n  if (appearance === \"error\") {\r\n    colour = \"highlight\"\r\n  } else if (appearance === \"info\") {\r\n    colour = \"overlay\"\r\n  } else if (appearance === \"warning\") {\r\n    colour = \"secondary\"\r\n  } else if (appearance === \"success\") {\r\n    colour = \"primary\"\r\n  }\r\n  return colour;\r\n}\r\n\r\nfunction CustomToast({ appearance, children }: { appearance: AppearanceTypes, children: React.ReactNode }) {\r\n  return (\r\n    <Box\r\n      m={2}\r\n      mb={0}\r\n      bg={appearance ? getToastAppearance(appearance) : \"overlay\"}\r\n      sx={{ borderRadius: \"4px\", padding: \"12px 16px\" }}\r\n    >\r\n      <Text as=\"p\" variant=\"body2\">\r\n        {children}\r\n      </Text>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport function ToastProvider({ children }: { children?: React.ReactNode }) {\r\n  return (\r\n    <DefaultToastProvider\r\n      components={{ Toast: CustomToast }}\r\n      autoDismiss={true}\r\n      autoDismissTimeout={2000}\r\n      placement=\"bottom-center\"\r\n    >\r\n      {children}\r\n    </DefaultToastProvider>\r\n  );\r\n}\r\n","// Arquivo: owlbear-rodeo-legacy/src/App.tsx\r\n\r\nimport { ThemeProvider } from \"theme-ui\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nimport theme from \"./theme\";\r\nimport Home from \"./routes/Home\";\r\nimport Game from \"./routes/Game\";\r\nimport LaravelGame from \"./routes/LaravelGame\"; // NOVO\r\nimport About from \"./routes/About\";\r\nimport FAQ from \"./routes/FAQ\";\r\nimport ReleaseNotes from \"./routes/ReleaseNotes\";\r\nimport HowTo from \"./routes/HowTo\";\r\n\r\nimport { AuthProvider } from \"./contexts/AuthContext\";\r\nimport { SettingsProvider } from \"./contexts/SettingsContext\";\r\nimport { KeyboardProvider } from \"./contexts/KeyboardContext\";\r\nimport { DatabaseProvider } from \"./contexts/DatabaseContext\";\r\nimport { UserIdProvider } from \"./contexts/UserIdContext\";\r\n\r\nimport { ToastProvider } from \"./components/Toast\";\r\n\r\nfunction App() {\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <SettingsProvider>\r\n        <AuthProvider>\r\n          <KeyboardProvider>\r\n            <ToastProvider>\r\n              <Router>\r\n                <Switch>\r\n                  <Route path=\"/how-to\">\r\n                    <HowTo />\r\n                  </Route>\r\n                  <Route path=\"/release-notes\">\r\n                    <ReleaseNotes />\r\n                  </Route>\r\n                  <Route path=\"/about\">\r\n                    <About />\r\n                  </Route>\r\n                  <Route path=\"/faq\">\r\n                    <FAQ />\r\n                  </Route>\r\n                  {/* NOVA ROTA: Auto-start via Laravel */}\r\n                  <Route path=\"/laravel/:sessaoId\">\r\n                    <DatabaseProvider>\r\n                      <UserIdProvider>\r\n                        <LaravelGame />\r\n                      </UserIdProvider>\r\n                    </DatabaseProvider>\r\n                  </Route>\r\n                  {/* Rota normal do jogo */}\r\n                  <Route path=\"/game/:id\">\r\n                    <DatabaseProvider>\r\n                      <UserIdProvider>\r\n                        <Game />\r\n                      </UserIdProvider>\r\n                    </DatabaseProvider>\r\n                  </Route>\r\n                  <Route path=\"/\">\r\n                    <Home />\r\n                  </Route>\r\n                </Switch>\r\n              </Router>\r\n            </ToastProvider>\r\n          </KeyboardProvider>\r\n        </AuthProvider>\r\n      </SettingsProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    if (!process.env.PUBLIC_URL) {\r\n      // TODO: handle is PUBLIC_URL has not been set\r\n      return; \r\n    }\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string | URL, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl as string)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\n// TODO: handle swUrl -> type has to be handled as RequestInfo OR string | URL\r\nfunction checkValidServiceWorker(swUrl: any, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport Modal from \"react-modal\";\r\n\r\n// Add css for simplebar\r\nimport \"simplebar/dist/simplebar.min.css\";\r\n\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport \"./index.css\";\r\n\r\n// Pointer events shim\r\nif (!(\"PointerEvent\" in window)) {\r\n  import(\"pepjs\");\r\n}\r\n\r\n// Intersection observer polyfill\r\nif (!(\"IntersectionObserver\" in window)) {\r\n  import(\"intersection-observer\");\r\n}\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { Divider, DividerProps } from \"theme-ui\";\r\n\r\ntype StyledDividerProps = {\r\n  vertical: boolean;\r\n  fill: boolean;\r\n} & DividerProps;\r\n\r\nfunction StyledDivider({\r\n  vertical,\r\n  color,\r\n  fill,\r\n  ...props\r\n}: StyledDividerProps) {\r\n  return (\r\n    <Divider\r\n      my={vertical ? 0 : 2}\r\n      mx={vertical ? 2 : 0}\r\n      bg={color}\r\n      sx={{\r\n        height: vertical ? (fill ? \"100%\" : \"24px\") : \"2px\",\r\n        width: vertical ? \"2px\" : fill ? \"100%\" : \"24px\",\r\n        borderRadius: \"2px\",\r\n        opacity: 0.5,\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nStyledDivider.defaultProps = {\r\n  vertical: false,\r\n  color: \"text\",\r\n  fill: false,\r\n};\r\n\r\nexport default StyledDivider;\r\n","/**\r\n * @param {Blob} blob\r\n * @returns {Promise<Uint8Array>}\r\n */\r\nasync function blobToBuffer(blob: Blob): Promise<Uint8Array> {\r\n  if (blob.arrayBuffer) {\r\n    const arrayBuffer = await blob.arrayBuffer();\r\n    return new Uint8Array(arrayBuffer);\r\n  } else {\r\n    return new Promise((resolve) => {\r\n      const reader = new FileReader();\r\n\r\n      function onLoadEnd() {\r\n        reader.removeEventListener(\"loadend\", onLoadEnd, false);\r\n        resolve(Buffer.from(reader.result as ArrayBuffer));\r\n      }\r\n\r\n      reader.addEventListener(\"loadend\", onLoadEnd, false);\r\n      reader.readAsArrayBuffer(blob);\r\n    });\r\n  }\r\n}\r\n\r\nexport default blobToBuffer;\r\n","import FakeStorage from \"./FakeStorage\";\r\n\r\n/**\r\n * An interface to a local storage backed settings store with a versioning mechanism\r\n */\r\nclass Settings {\r\n  name;\r\n  currentVersion;\r\n  storage;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n    // Try and use local storage if it is available, if not mock it with an in memory storage\r\n    try {\r\n      localStorage.setItem(\"__test\", \"__test\");\r\n      localStorage.removeItem(\"__test\");\r\n      this.storage = localStorage;\r\n    } catch (e) {\r\n      console.warn(\"Local storage is disabled, no settings will be saved\");\r\n      this.storage = new FakeStorage();\r\n    }\r\n    this.currentVersion = this.get(\"__version\");\r\n  }\r\n\r\n  version(versionNumber: number, upgradeFunction: Function) {\r\n    if (versionNumber > this.currentVersion) {\r\n      this.currentVersion = versionNumber;\r\n      this.setAll(upgradeFunction(this.getAll()));\r\n    }\r\n  }\r\n\r\n  getAll(): any {\r\n    return JSON.parse(this.storage.getItem(this.name));\r\n  }\r\n\r\n  get(key: string) {\r\n    const settings = this.getAll();\r\n    return settings && settings[key];\r\n  }\r\n\r\n  setAll(newSettings: any) {\r\n    this.storage.setItem(\r\n      this.name,\r\n      JSON.stringify({ ...newSettings, __version: this.currentVersion })\r\n    );\r\n  }\r\n\r\n  set(key: string, value: string) {\r\n    let settings = this.getAll();\r\n    settings[key] = value;\r\n    this.setAll(settings);\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { getSettings } from \"../settings\";\r\n\r\nimport { Settings } from \"../types/Settings\";\r\n\r\ntype SettingsContextValue = {\r\n  settings: Settings;\r\n  setSettings: React.Dispatch<React.SetStateAction<Settings>>;\r\n};\r\n\r\nconst SettingsContext =\r\n  React.createContext<SettingsContextValue | undefined>(undefined);\r\n\r\nconst settingsProvider = getSettings();\r\n\r\nexport function SettingsProvider({ children }: { children: React.ReactNode }) {\r\n  const [settings, setSettings] = useState<Settings>(settingsProvider.getAll());\r\n\r\n  useEffect(() => {\r\n    settingsProvider.setAll(settings);\r\n  }, [settings]);\r\n\r\n  const value = {\r\n    settings,\r\n    setSettings,\r\n  };\r\n\r\n  return (\r\n    <SettingsContext.Provider value={value}>\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useSettings() {\r\n  const context = useContext(SettingsContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useSettings must be used within a SettingsProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport default SettingsContext;\r\n","import Settings from \"./helpers/Settings\";\r\n\r\nfunction loadVersions(settings: Settings) {\r\n  settings.version(1, () => ({\r\n    fog: {\r\n      type: \"polygon\",\r\n      useEdgeSnapping: false,\r\n      useFogCut: false,\r\n      preview: false,\r\n    },\r\n    drawing: {\r\n      color: \"red\",\r\n      type: \"brush\",\r\n      useBlending: true,\r\n    },\r\n    measure: {\r\n      type: \"chebyshev\",\r\n      scale: \"5ft\",\r\n    },\r\n    timer: {\r\n      hour: 0,\r\n      minute: 0,\r\n      second: 0,\r\n    },\r\n    dice: {\r\n      shareDice: false,\r\n      style: \"galaxy\",\r\n    },\r\n  }));\r\n  // v1.5.2 - Added full screen support for map and label size\r\n  settings.version(2, (prev: any) => ({\r\n    ...prev,\r\n    map: { fullScreen: false, labelSize: 1 },\r\n  }));\r\n  // v1.7.0 - Added game password\r\n  settings.version(3, (prev: any) => ({\r\n    ...prev,\r\n    game: { usePassword: true },\r\n  }));\r\n  // v1.8.0 - Added pointer color, grid snapping sensitivity and remove measure\r\n  settings.version(4, (prev: any) => {\r\n    let newSettings = {\r\n      ...prev,\r\n      pointer: { color: \"red\" },\r\n      map: { ...prev.map, gridSnappingSensitivity: 0.2 },\r\n    };\r\n    delete newSettings.measure;\r\n    return newSettings;\r\n  });\r\n  // v1.8.0 - Removed edge snapping for multilayer\r\n  settings.version(5, (prev: any) => {\r\n    let newSettings = { ...prev };\r\n    delete newSettings.fog.useEdgeSnapping;\r\n    newSettings.fog.multilayer = false;\r\n    return newSettings;\r\n  });\r\n  // v1.8.1 - Add show guides toggle\r\n  settings.version(6, (prev: any) => ({\r\n    ...prev,\r\n    fog: { ...prev.fog, showGuides: true },\r\n  }));\r\n  // v1.8.1 - Add fog edit opacity\r\n  settings.version(7, (prev: any) => ({\r\n    ...prev,\r\n    fog: { ...prev.fog, editOpacity: 0.5 },\r\n  }));\r\n  // v1.10.0 - Add select tool\r\n  settings.version(8, (prev: any) => ({\r\n    ...prev,\r\n    select: { type: \"rectangle\" },\r\n  }));\r\n  // v1.10.0 - Add use shape fill setting\r\n  settings.version(9, (prev: any) => ({\r\n    ...prev,\r\n    drawing: {\r\n      ...prev.drawing,\r\n      useShapeFill: true,\r\n    },\r\n  }));\r\n}\r\n\r\nexport function getSettings() {\r\n  let settings = new Settings(\"OwlbearRodeoSettings\");\r\n  loadVersions(settings);\r\n  return settings;\r\n}\r\n","import Modal from \"react-modal\";\r\nimport { useThemeUI, Close } from \"theme-ui\";\r\nimport { RequestCloseEventHandler } from \"../../types/Events\";\r\nimport CSS from \"csstype\";\r\n\r\ntype BannerProps = {\r\n  isOpen: boolean;\r\n  onRequestClose: RequestCloseEventHandler;\r\n  children: React.ReactNode;\r\n  allowClose: boolean;\r\n  backgroundColor?: CSS.Property.Color;\r\n};\r\n\r\nfunction Banner({\r\n  isOpen,\r\n  onRequestClose,\r\n  children,\r\n  allowClose,\r\n  backgroundColor,\r\n}: BannerProps) {\r\n  const { theme } = useThemeUI();\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onRequestClose={onRequestClose}\r\n      style={{\r\n        overlay: { bottom: \"0\", top: \"initial\", zIndex: 2000 },\r\n        content: {\r\n          backgroundColor:\r\n            backgroundColor || (theme.colors?.highlight as CSS.Property.Color),\r\n          color: \"hsl(210, 50%, 96%)\",\r\n          top: \"initial\",\r\n          left: \"50%\",\r\n          right: \"initial\",\r\n          // Offset for iOS safe zone\r\n          bottom: \"env(safe-area-inset-bottom)\",\r\n          border: \"none\",\r\n          padding: \"8px\",\r\n          margin: \"8px 0\",\r\n          paddingRight: allowClose ? \"24px\" : \"8px\",\r\n          maxWidth: \"500px\",\r\n          transform: \"translateX(-50%)\",\r\n        },\r\n      }}\r\n    >\r\n      {children}\r\n      {allowClose && (\r\n        <Close\r\n          m={0}\r\n          sx={{ position: \"absolute\", top: \"4px\", right: 0 }}\r\n          onClick={onRequestClose}\r\n        />\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n\r\nBanner.defaultProps = {\r\n  allowClose: true,\r\n};\r\n\r\nexport default Banner;\r\n"],"sourceRoot":""}